!function e(t,n,r){function i(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return i(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";var r={};r.encode=function(e){for(var t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?(t.push(192|r>>6),t.push(128|63&r)):r<65536?(t.push(224|r>>12),t.push(128|63&r>>6),t.push(128|63&r)):(t.push(240|r>>18),t.push(128|63&r>>12),t.push(128|63&r>>6),t.push(128|63&r))}return t},r.decode=function(e){for(var t=[],n=0;n<e.length;){var r=e[n++];r<128||(r<224?(r=(31&r)<<6,r|=63&e[n++]):r<240?(r=(15&r)<<12,r|=(63&e[n++])<<6,r|=63&e[n++]):(r=(7&r)<<18,r|=(63&e[n++])<<12,r|=(63&e[n++])<<6,r|=63&e[n++])),t.push(String.fromCharCode(r))}return t.join("")};var i={};!function(e){var t=function(t){for(var n=0,r=[],i=0|t.length/3;0<i--;){var s=(t[n]<<16)+(t[n+1]<<8)+t[n+2];n+=3,r.push(e.charAt(63&s>>18)),r.push(e.charAt(63&s>>12)),r.push(e.charAt(63&s>>6)),r.push(e.charAt(63&s))}if(2==t.length-n){var s=(t[n]<<16)+(t[n+1]<<8);r.push(e.charAt(63&s>>18)),r.push(e.charAt(63&s>>12)),r.push(e.charAt(63&s>>6)),r.push("=")}else if(1==t.length-n){var s=t[n]<<16;r.push(e.charAt(63&s>>18)),r.push(e.charAt(63&s>>12)),r.push("==")}return r.join("")},n=function(){for(var t=[],n=0;n<e.length;++n)t[e.charCodeAt(n)]=n;return t["=".charCodeAt(0)]=0,t}(),o=function(e){for(var t=0,r=[],i=0|e.length/4;0<i--;){var s=(n[e.charCodeAt(t)]<<18)+(n[e.charCodeAt(t+1)]<<12)+(n[e.charCodeAt(t+2)]<<6)+n[e.charCodeAt(t+3)];r.push(255&s>>16),r.push(255&s>>8),r.push(255&s),t+=4}return r&&("="==e.charAt(t-2)?(r.pop(),r.pop()):"="==e.charAt(t-1)&&r.pop()),r},u={};u.encode=function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},u.decode=function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")},i.decodeArray=function(e){var t=o(e);return new Uint8Array(t)},i.encodeASCII=function(e){var n=u.encode(e);return t(n)},i.decodeASCII=function(e){var t=o(e);return u.decode(t)},i.encode=function(e){var n=r.encode(e);return t(n)},i.decode=function(e){var t=o(e);return r.decode(t)}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),void 0!==n&&(n.decode=i.decode,n.decodeArray=i.decodeArray,n.encode=i.encode)},{}],2:[function(e,t,n){"use strict";!function(e){var t={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},n=function(e){var n=e;return t.hasOwnProperty(e)&&(n=t[e]),String.fromCharCode(n)},r=15,i=32,s={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},o={17:2,18:4,21:6,22:8,23:10,19:13,20:15},u={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},a={25:2,26:4,29:6,30:8,31:10,27:13,28:15},f=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],l={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},c=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},h=function(e,t,n,r,i){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1};h.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var p=function(e,t,n,r,i,s){this.uchar=e||" ",this.penState=new h(t,n,r,i,s)};p.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var d=function(){this.chars=[];for(var e=0;e<i;e++)this.chars.push(new p);this.pos=0,this.currPenState=new h};d.prototype={equals:function(e){for(var t=!0,n=0;n<i;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<i;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<i;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(l.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>i&&(l.log("ERROR","Too large cursor position "+this.pos),this.pos=i)},moveCursor:function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){e>=144&&this.backSpace();var t=n(e);if(this.pos>=i)return void l.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)},clearFromPos:function(e){var t;for(t=e;t<i;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,n=0;n<i;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}};var v=function(){this.rows=[];for(var e=0;e<r;e++)this.rows.push(new d);this.currRow=r-1,this.nrRollUpRows=null,this.reset()};v.prototype={reset:function(){for(var e=0;e<r;e++)this.rows[e].clear();this.currRow=r-1},equals:function(e){for(var t=!0,n=0;n<r;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<r;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<r;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(e){this.rows[this.currRow].insertChar(e)},setPen:function(e){this.rows[this.currRow].setPenStyles(e)},moveCursor:function(e){this.rows[this.currRow].moveCursor(e)},setCursor:function(e){l.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},setPAC:function(e){l.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var n=this.rows[this.currRow];if(null!==e.indent){var r=e.indent,i=Math.max(r-1,0);n.setCursor(e.indent),e.color=n.chars[i].penState.foreground}var s={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(s)},setBkgData:function(e){l.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){if(null===this.nrRollUpRows)return void l.log("DEBUG","roll_up but nrRollUpRows not set yet");l.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),l.log("INFO","Rolling up")},getDisplayText:function(e){e=e||!1;for(var t=[],n="",i=-1,s=0;s<r;s++){var o=this.rows[s].getTextString();o&&(i=s+1,e?t.push("Row "+i+': "'+o+'"'):t.push(o.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},getTextAndFormat:function(){return this.rows}};var m=function(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new v,this.nonDisplayedMemory=new v,this.lastOutputScreen=new v,this.currRollUpRow=this.displayedMemory.rows[r-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};m.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[r-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,l.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";l.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(l.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){l.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){l.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){l.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){l.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){l.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){l.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){l.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){l.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){l.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){l.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){l.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(l.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,l.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(e){l.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}l.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=l.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}};var g=function(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new m(1,t),new m(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,"char":0,cmd:0,other:0}};g.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var n,r,i,s=!1;this.lastTime=e,l.setTime(e);for(var o=0;o<t.length;o+=2)if(r=127&t[o],i=127&t[o+1],r>=16&&r<=31&&r===this.lastCmdA&&i===this.lastCmdB)this.lastCmdA=null,this.lastCmdB=null,l.log("DEBUG","Repeated command ("+c([r,i])+") is dropped");else if(0!==r||0!==i){if(l.log("DATA","["+c([t[o],t[o+1]])+"] -> ("+c([r,i])+")"),n=this.parseCmd(r,i),n||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),!n&&(s=this.parseChars(r,i)))if(this.currChNr&&this.currChNr>=0){var u=this.channels[this.currChNr-1];u.insertChars(s)}else l.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:s?this.dataCounters.char+=2:(this.dataCounters.other+=2,l.log("WARNING","Couldn't parse cleaned data "+c([r,i])+" orig: "+c([t[o],t[o+1]])))}else this.dataCounters.padding+=2},parseCmd:function(e,t){var n=null,r=(20===e||21===e||28===e||29===e)&&32<=t&&t<=47,i=(23===e||31===e)&&33<=t&&t<=35;if(!r&&!i)return!1;n=20===e||21===e||23===e?1:2;var s=this.channels[n-1];return 20===e||21===e||28===e||29===e?32===t?s.cc_RCL():33===t?s.cc_BS():34===t?s.cc_AOF():35===t?s.cc_AON():36===t?s.cc_DER():37===t?s.cc_RU(2):38===t?s.cc_RU(3):39===t?s.cc_RU(4):40===t?s.cc_FON():41===t?s.cc_RDC():42===t?s.cc_TR():43===t?s.cc_RTD():44===t?s.cc_EDM():45===t?s.cc_CR():46===t?s.cc_ENM():47===t&&s.cc_EOC():s.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},parseMidrow:function(e,t){var n=null;if((17===e||25===e)&&32<=t&&t<=47){if((n=17===e?1:2)!==this.currChNr)return l.log("ERROR","Mismatch channel in midrow parsing"),!1;var r=this.channels[n-1];return r.insertChars([32]),r.cc_MIDROW(t),l.log("DEBUG","MIDROW ("+c([e,t])+")"),this.lastCmdA=e,this.lastCmdB=t,!0}return!1},parsePAC:function(e,t){var n=null,r=null,i=(17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127,f=(16===e||24===e)&&64<=t&&t<=95;if(!i&&!f)return!1;n=e<=23?1:2,r=64<=t&&t<=95?1===n?s[e]:u[e]:1===n?o[e]:a[e];var l=this.interpretPAC(r,t);return this.channels[n-1].setPAC(l),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},interpretPAC:function(e,t){var n=t,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},parseChars:function(e,t){var r=null,i=null,s=null;if(e>=25?(r=2,s=e-8):(r=1,s=e),17<=s&&s<=19){var o=t;o=17===s?t+80:18===s?t+112:t+144,l.log("INFO","Special char '"+n(o)+"' in channel "+r),i=[o],this.lastCmdA=e,this.lastCmdB=t}else 32<=e&&e<=127&&(i=0===t?[e]:[e,t],this.lastCmdA=null,this.lastCmdB=null);if(i){var u=c(i);l.log("DEBUG","Char codes =  "+u.join(","))}return i},parseBackgroundAttributes:function(e,t){var n,r,i,s,o=(16===e||24===e)&&32<=t&&t<=47,u=(23===e||31===e)&&45<=t&&t<=47;return(!!o||!!u)&&(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=f[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=e<24?1:2,s=this.channels[i-1],s.setBkgData(n),this.lastCmdA=e,this.lastCmdB=t,!0)},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}};var y=function(e,t,n){for(var r=0,i=t,s=[],o=function(e,t,n,r){if(4!==e||t<8)return null;var i=n.getUint8(r),s=n.getUint16(r+1),o=n.getUint32(r+3),u=n.getUint8(r+7);return 181==i&&49==s&&1195456820==o&&3==u};i<t+n;){if(r=e.getUint32(i),6===(31&e.getUint8(i+4)))for(var u=i+5,a=-1;u<i+4+r-1;){a=0;for(var f=255;255===f;)f=e.getUint8(u),a+=f,u++;var l=0;for(f=255;255===f;)f=e.getUint8(u),l+=f,u++;o(a,l,e,u)&&s.push([u,l]),u+=l}i+=r+4}return s},b=function(e,t){var n=t[0],r=[[],[]];n+=8;var i=31&e.getUint8(n);n+=2;for(var s=0;s<i;s++){var o=e.getUint8(n),u=4&o,a=3&o;n++;var f=e.getUint8(n);n++;var l=e.getUint8(n);n++,u&&(127&f)+(127&l)!=0&&(0===a?(r[0].push(f),r[0].push(l)):1===a&&(r[1].push(f),r[1].push(l)))}return r};e.logger=l,e.PenState=h,e.CaptionScreen=v,e.Cea608Parser=g,e.findCea608Nalus=y,e.extractCea608DataFromRange=b}(void 0===n?(void 0).cea608parser={}:n)},{}],3:[function(e,t,n){"use strict";function r(e){var t,n,r;for(t=[],r=0,n=e.length;r<n;r+=1)e[r].isRoot?t.push("root"):t.push(e[r].name);var i=function(e,t){var n;if(null!==e&&null!==t)for(n in e)e.hasOwnProperty(n)&&(t.hasOwnProperty(n)||(t[n]=e[n]))},s=function(e,t,n){var r,s,o,u,a;if(null!==e&&0!==e.length)for(r=0,s=e.length;r<s;r+=1)o=e[r],t.hasOwnProperty(o.name)&&(n.hasOwnProperty(o.name)?o.merge&&(u=t[o.name],a=n[o.name],"object"==typeof u&&"object"==typeof a?i(u,a):null!=o.mergeFunction?n[o.name]=o.mergeFunction(u,a):n[o.name]=u+a):n[o.name]=t[o.name])},o=function u(e,t){var n,r,i,o,a,f,l,c=e;if(null!==c.children&&0!==c.children.length)for(n=0,r=c.children.length;n<r;n+=1)if(f=c.children[n],t.hasOwnProperty(f.name))if(f.isArray)for(a=t[f.name+"_asArray"],i=0,o=a.length;i<o;i+=1)l=a[i],s(c.properties,t,l),u(f,l);else l=t[f.name],s(c.properties,t,l),u(f,l)};return{run:function a(n){var r,i,s,u,f,l,c;if(null===n)return n;if("object"!=typeof n)return n;for(r=0,i=t.length;r<i;r+=1)"root"===t[r]&&(f=e[r],l=n,o(f,l));for(u in n)if(n.hasOwnProperty(u)&&"__children"!=u){if(-1!==(s=t.indexOf(u)))if(f=e[s],f.isArray)for(c=n[u+"_asArray"],r=0,i=c.length;r<i;r+=1)l=c[r],o(f,l);else l=n[u],o(f,l);a(n[u])}return n}}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,t.exports=n.default},{}],4:[function(e,t,n){"use strict";function r(e){function t(){void 0===e.escapeMode&&(e.escapeMode=!0),void 0===e.attributePrefix&&(e.attributePrefix="_"),e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1),void 0===e.ignoreRoot&&(e.ignoreRoot=!1)}function n(){}function r(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function i(e){return e.prefix}function s(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function o(e,t,n,r){for(var i=0;i<e.length;i++){var s=e[i];if("string"==typeof s){if(s==r)break}else if(s instanceof RegExp){if(s.test(r))break}else if("function"==typeof s&&s(t,n,r))break}return i!=e.length}function u(t,n,r){switch(e.arrayAccessForm){case"property":t[n]instanceof Array?t[n+"_asArray"]=t[n]:t[n+"_asArray"]=[t[n]]}!(t[n]instanceof Array)&&e.arrayAccessFormPaths.length>0&&o(e.arrayAccessFormPaths,t,n,r)&&(t[n]=[t[n]])}function a(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),r=t[5].split(".");if(n.setHours(t[3],t[4],r[0]),r.length>1&&n.setMilliseconds(r[1]),t[6]&&t[7]){var i=60*t[6]+Number(t[7]);i=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*i:i),n.setMinutes(n.getMinutes()-i-n.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function f(t,n,r){if(e.datetimeAccessFormPaths.length>0){var i=r.split(".#")[0];return o(e.datetimeAccessFormPaths,t,n,i)?a(t):t}return t}function l(t,n,r,i){return!(n==N.ELEMENT_NODE&&e.xmlElementsFilter.length>0)||o(e.xmlElementsFilter,t,r,i)}function c(t,n){if(t.nodeType==N.DOCUMENT_NODE){for(var s=new Object,o=t.childNodes,a=0;a<o.length;a++){var h=o[a];if(h.nodeType==N.ELEMENT_NODE)if(e.ignoreRoot)s=c(h);else{s={};var p=r(h);s[p]=c(h)}}return s}if(t.nodeType==N.ELEMENT_NODE){var s=new Object;s.__cnt=0;for(var d=[],o=t.childNodes,a=0;a<o.length;a++){var h=o[a],p=r(h);if(h.nodeType!=N.COMMENT_NODE){var v=n+"."+p;if(l(s,h.nodeType,p,v))if(s.__cnt++,null==s[p]){var m=c(h,v);if("#text"!=p||/[^\s]/.test(m)){var g={};g[p]=m,d.push(g)}s[p]=m,u(s,p,v)}else{null!=s[p]&&(s[p]instanceof Array||(s[p]=[s[p]],u(s,p,v)));var m=c(h,v);if("#text"!=p||/[^\s]/.test(m)){var g={};g[p]=m,d.push(g)}s[p][s[p].length]=m}}}s.__children=d;for(var y=r(t),b=0;b<t.attributes.length;b++){var w=t.attributes[b];s.__cnt++;for(var E=w.value,S=0,x=e.matchers.length;S<x;S++){var T=e.matchers[S];T.test(w,y)&&(E=T.converter(w.value))}s[e.attributePrefix+w.name]=E}var C=i(t);return null!=C&&""!=C&&(s.__cnt++,s.__prefix=C),null!=s["#text"]&&(s.__text=s["#text"],s.__text instanceof Array&&(s.__text=s.__text.join("\n")),e.stripWhitespaces&&(s.__text=s.__text.trim()),delete s["#text"],"property"==e.arrayAccessForm&&delete s["#text_asArray"],s.__text=f(s.__text,p,n+"."+p)),null!=s["#cdata-section"]&&(s.__cdata=s["#cdata-section"],delete s["#cdata-section"],"property"==e.arrayAccessForm&&delete s["#cdata-section_asArray"]),0==s.__cnt&&"text"==e.emptyNodeForm?s="":1==s.__cnt&&null!=s.__text?s=s.__text:1!=s.__cnt||null==s.__cdata||e.keepCData?s.__cnt>1&&null!=s.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==s.__text||""==s.__text.trim())&&delete s.__text:s=s.__cdata,delete s.__cnt,!e.enableToStringFunc||null==s.__text&&null==s.__cdata||(s.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),s}if(t.nodeType==N.TEXT_NODE||t.nodeType==N.CDATA_SECTION_NODE)return t.nodeValue}function h(t,n,r,i){var o="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+n;if(null!=r)for(var u=0;u<r.length;u++){var a=r[u],f=t[a];e.escapeMode&&(f=s(f)),o+=" "+a.substr(e.attributePrefix.length)+"=",e.useDoubleQuotes?o+='"'+f+'"':o+="'"+f+"'"}return o+=i?"/>":">"}function p(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function d(e,t){return-1!==e.indexOf(t,e.length-t.length)}function v(t,n){return!!("property"==e.arrayAccessForm&&d(n.toString(),"_asArray")||0==n.toString().indexOf(e.attributePrefix)||0==n.toString().indexOf("__")||t[n]instanceof Function)}function m(e){var t=0;if(e instanceof Object)for(var n in e)v(e,n)||t++;return t}function g(t,n,r){return 0==e.jsonPropertiesFilter.length||""==r||o(e.jsonPropertiesFilter,t,n,r)}function y(t){var n=[];if(t instanceof Object)for(var r in t)-1==r.toString().indexOf("__")&&0==r.toString().indexOf(e.attributePrefix)&&n.push(r);return n}function b(t){var n="";return null!=t.__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(e.escapeMode?n+=s(t.__text):n+=t.__text),n}function w(t){var n="";return t instanceof Object?n+=b(t):null!=t&&(e.escapeMode?n+=s(t):n+=t),n}function E(e,t){return""===e?t:e+"."+t}function S(e,t,n,r){var i="";if(0==e.length)i+=h(e,t,n,!0);else for(var s=0;s<e.length;s++)i+=h(e[s],t,y(e[s]),!1),i+=x(e[s],E(r,t)),i+=p(e[s],t);return i}function x(e,t){var n="";if(m(e)>0)for(var r in e)if(!v(e,r)&&(""==t||g(e,r,E(t,r)))){var i=e[r],s=y(i);if(null==i||void 0==i)n+=h(i,r,s,!0);else if(i instanceof Object)if(i instanceof Array)n+=S(i,r,s,t);else if(i instanceof Date)n+=h(i,r,s,!1),n+=i.toISOString(),n+=p(i,r);else{var o=m(i);o>0||null!=i.__text||null!=i.__cdata?(n+=h(i,r,s,!1),n+=x(i,E(t,r)),n+=p(i,r)):n+=h(i,r,s,!0)}else n+=h(i,r,s,!1),n+=w(i),n+=p(i,r)}return n+=w(e)}var T="1.2.0";e=e||{},t(),n();var N={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(e){window.ActiveXObject||window;if(void 0===e)return null;var t;if(window.DOMParser){var n=new window.DOMParser;try{t=n.parseFromString(e,"text/xml"),t.getElementsByTagNameNS("*","parseerror").length>0&&(t=null)}catch(r){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?(new Date(e)).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?a(e):e},this.xml2json=function(e){return c(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return x(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return T}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,t.exports=n.default},{}],5:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(6),s=e(117),o=r(s),u=e(148),a=r(u),f=e(95),l=r(f);dashjs.Protection=a.default,dashjs.MetricsReporting=o.default,dashjs.MediaPlayerFactory=l.default,n.default=dashjs,n.MediaPlayer=i.MediaPlayer,n.Protection=a.default,n.MetricsReporting=o.default,n.MediaPlayerFactory=l.default},{117:117,148:148,6:6,95:95}],6:[function(e,t,n){(function(t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(93),s=r(i),o=e(51),u=r(o),a=e(52),f="undefined"!=typeof window&&window||t,l=f.dashjs;l||(l=f.dashjs={}),l.MediaPlayer=s.default,l.FactoryMaker=u.default,l.Version=(0,a.getVersionString)(),n.default=l,n.MediaPlayer=s.default,n.FactoryMaker=u.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{51:51,52:52,93:93}],7:[function(e,t,n){!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===s||t===l?62:t===o||t===c?63:t<u?-1:t<u+10?t-u+26+26:t<f+26?t-f:t<a+26?t-a+26:void 0}function n(e){function n(e){f[c++]=e}var r,s,o,u,a,f;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=e.length;a="="===e.charAt(l-2)?2:"="===e.charAt(l-1)?1:0,f=new i(3*e.length/4-a),o=a>0?e.length-4:e.length;var c=0;for(r=0,s=0;r<o;r+=4,s+=3)u=t(e.charAt(r))<<18|t(e.charAt(r+1))<<12|t(e.charAt(r+2))<<6|t(e.charAt(r+3)),n((16711680&u)>>16),n((65280&u)>>8),n(255&u);return 2===a?(u=t(e.charAt(r))<<2|t(e.charAt(r+1))>>4,n(255&u)):1===a&&(u=t(e.charAt(r))<<10|t(e.charAt(r+1))<<4|t(e.charAt(r+2))>>2,n(u>>8&255),n(255&u)),f}function r(e){function t(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var r,i,s,o=e.length%3,u="";for(r=0,s=e.length-o;r<s;r+=3)i=(e[r]<<16)+(e[r+1]<<8)+e[r+2],u+=n(i);switch(o){case 1:i=e[e.length-1],u+=t(i>>2),u+=t(i<<4&63),u+="==";break;case 2:i=(e[e.length-2]<<8)+e[e.length-1],u+=t(i>>10),u+=t(i>>4&63),u+=t(i<<2&63),u+="="}return u}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),o="/".charCodeAt(0),u="0".charCodeAt(0),a="a".charCodeAt(0),f="A".charCodeAt(0),l="-".charCodeAt(0),c="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=r}(void 0===n?this.base64js={}:n)},{}],8:[function(e,t,n){},{}],9:[function(e,t,n){function r(e){if(e&&!a(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function s(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function o(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var u=e(10).Buffer,a=u.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},f=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),r(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=s;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=o;break;default:return void (this.write=i)}this.charBuffer=new u(6),this.charReceived=0,this.charLength=0};f.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=t.charCodeAt(t.length-1);if(!(r>=55296&&r<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,r=t.charCodeAt(i);if(r>=55296&&r<=56319){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),e.copy(this.charBuffer,0,0,s),t.substring(0,i)}return t},f.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},f.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t}},{10:10}],10:[function(e,t,n){(function(t){"use strict";function r(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(n){return!1}}function i(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e){return this instanceof s?(s.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof e?o(this,e):"string"==typeof e?u(this,e,arguments.length>1?arguments[1]:"utf8"):a(this,e)):arguments.length>1?new s(e,arguments[1]):new s(e)}function o(e,t){if(e=v(e,t<0?0:0|m(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;n++)e[n]=0;return e}function u(e,t,n){return"string"==typeof n&&""!==n||(n="utf8"),e=v(e,0|y(t,n)),e.write(t,n),e}function a(e,t){if(s.isBuffer(t))return f(e,t);if(Q(t))return l(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return c(e,t);if(t instanceof ArrayBuffer)return h(e,t)}return t.length?p(e,t):d(e,t)}function f(e,t){var n=0|m(t.length);return e=v(e,n),t.copy(e,0,0,n),e}function l(e,t){var n=0|m(t.length);e=v(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function c(e,t){var n=0|m(t.length);e=v(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e,t){return s.TYPED_ARRAY_SUPPORT?(t.byteLength,e=s._augment(new Uint8Array(t))):e=c(e,new Uint8Array(t)),e}function p(e,t){var n=0|m(t.length);e=v(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e,t){var n,r=0;"Buffer"===t.type&&Q(t.data)&&(n=t.data,r=0|m(n.length)),e=v(e,r);for(var i=0;i<r;i+=1)e[i]=255&n[i];return e}function v(e,t){return s.TYPED_ARRAY_SUPPORT?(e=s._augment(new Uint8Array(t)),e.__proto__=s.prototype):(e.length=t,e._isBuffer=!0),0!==t&&t<=s.poolSize>>>1&&(e.parent=G),e}
function m(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function g(e,t){if(this instanceof g){var n=new s(e,t);return delete n.parent,n}return new g(e,t)}function y(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(r)return z(e).length;t=(""+t).toLowerCase(),r=!0}}function b(e,t,n){var r=!1;if(t|=0,n=void 0===n||n===1/0?this.length:0|n,e||(e="utf8"),t<0&&(t=0),n>this.length&&(n=this.length),n<=t)return"";for(;;)switch(e){case"hex":return M(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return A(this,t,n);case"binary":return O(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function w(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var s=t.length;if(s%2!=0)throw new Error("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;o++){var u=parseInt(t.substr(2*o,2),16);if(isNaN(u))throw new Error("Invalid hex string");e[n+o]=u}return o}function E(e,t,n,r){return $(z(t,e.length-n),e,n,r)}function S(e,t,n,r){return $(W(t),e,n,r)}function x(e,t,n,r){return S(e,t,n,r)}function T(e,t,n,r){return $(V(t),e,n,r)}function N(e,t,n,r){return $(X(t,e.length-n),e,n,r)}function C(e,t,n){return 0===t&&n===e.length?J.fromByteArray(e):J.fromByteArray(e.slice(t,n))}function k(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var s=e[i],o=null,u=s>239?4:s>223?3:s>191?2:1;if(i+u<=n){var a,f,l,c;switch(u){case 1:s<128&&(o=s);break;case 2:a=e[i+1],128==(192&a)&&(c=(31&s)<<6|63&a)>127&&(o=c);break;case 3:a=e[i+1],f=e[i+2],128==(192&a)&&128==(192&f)&&(c=(15&s)<<12|(63&a)<<6|63&f)>2047&&(c<55296||c>57343)&&(o=c);break;case 4:a=e[i+1],f=e[i+2],l=e[i+3],128==(192&a)&&128==(192&f)&&128==(192&l)&&(c=(15&s)<<18|(63&a)<<12|(63&f)<<6|63&l)>65535&&c<1114112&&(o=c)}}null===o?(o=65533,u=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=u}return L(r)}function L(e){var t=e.length;if(t<=Y)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Y));return n}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;i++)r+=String.fromCharCode(127&e[i]);return r}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;i++)r+=String.fromCharCode(e[i]);return r}function M(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",s=t;s<n;s++)i+=U(e[s]);return i}function _(e,t,n){for(var r=e.slice(t,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function D(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,n,r,i,o){if(!s.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>i||t<o)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range")}function H(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,s=Math.min(e.length-n,2);i<s;i++)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function B(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,s=Math.min(e.length-n,4);i<s;i++)e[n+i]=t>>>8*(r?i:3-i)&255}function j(e,t,n,r,i,s){if(t>i||t<s)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range");if(n<0)throw new RangeError("index out of range")}function F(e,t,n,r,i){return i||j(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(e,t,n,r,23,4),n+4}function I(e,t,n,r,i){return i||j(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(e,t,n,r,52,8),n+8}function q(e){if(e=R(e).replace(et,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function R(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function U(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){t=t||1/0;for(var n,r=e.length,i=null,s=[],o=0;o<r;o++){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function W(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function X(e,t){for(var n,r,i,s=[],o=0;o<e.length&&!((t-=2)<0);o++)n=e.charCodeAt(o),r=n>>8,i=n%256,s.push(i),s.push(r);return s}function V(e){return J.toByteArray(q(e))}function $(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}var J=e(7),K=e(17),Q=e(27);n.Buffer=s,n.SlowBuffer=g,n.INSPECT_MAX_BYTES=50,s.poolSize=8192;var G={};s.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:r(),s.TYPED_ARRAY_SUPPORT?(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array):(s.prototype.length=void 0,s.prototype.parent=void 0),s.isBuffer=function(e){return null!=e&&!!e._isBuffer},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o&&e[i]===t[i];)++i;return i!==o&&(n=e[i],r=t[i]),n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Q(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new s(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var r=new s(t),i=0;for(n=0;n<e.length;n++){var o=e[n];o.copy(r,i),i+=o.length}return r},s.byteLength=y,s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?k(this,0,e):b.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:s.compare(this,e)},s.prototype.indexOf=function(e,t){function n(e,t,n){for(var r=-1,i=0;n+i<e.length;i++)if(e[n+i]===t[-1===r?0:i-r]){if(-1===r&&(r=i),i-r+1===t.length)return n+r}else r=-1;return-1}if(t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(t<0&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(s.isBuffer(e))return n(this,e,t);if("number"==typeof e)return s.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);throw new TypeError("val must be string, number or Buffer")},s.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},s.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var i=r;r=t,t=0|n,n=i}var s=this.length-t;if((void 0===n||n>s)&&(n=s),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return E(this,e,t,n);case"ascii":return S(this,e,t,n);case"binary":return x(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Y=4096;s.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(s.TYPED_ARRAY_SUPPORT)r=s._augment(this.subarray(e,t));else{var i=t-e;r=new s(i,void 0);for(var o=0;o<i;o++)r[o]=this[o+e]}return r.length&&(r.parent=this.parent||this),r},s.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return r},s.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e+ --t],i=1;t>0&&(i*=256);)r+=this[e+ --t]*i;return r},s.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=t,i=1,s=this[e+ --r];r>0&&(i*=256);)s+=this[e+ --r]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},s.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),K.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),K.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),K.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),K.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||P(this,e,t,n,Math.pow(2,8*n),0);var i=1,s=0;for(this[t]=255&e;++s<n&&(i*=256);)this[t+s]=e/i&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||P(this,e,t,n,Math.pow(2,8*n),0);var i=n-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):H(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):H(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):B(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var s=0,o=1,u=e<0?1:0;for(this[t]=255&e;++s<n&&(o*=256);)this[t+s]=(e/o>>0)-u&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var s=n-1,o=1,u=e<0?1:0;for(this[t+s]=255&e;--s>=0&&(o*=256);)this[t+s]=(e/o>>0)-u&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):H(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):H(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):B(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return I(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return I(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;i--)e[i+t]=this[i+n];else if(o<1e3||!s.TYPED_ARRAY_SUPPORT)for(i=0;i<o;i++)e[i+t]=this[i+n];else e._set(this.subarray(n,n+o),t);return o},s.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),n<t)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(t<0||t>=this.length)throw new RangeError("start out of bounds");if(n<0||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;r<n;r++)this[r]=e;else{var i=z(e.toString()),s=i.length;for(r=t;r<n;r++)this[r]=i[r%s]}return this}},s.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(s.TYPED_ARRAY_SUPPORT)return(new s(this)).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;t<n;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Z=s.prototype;s._augment=function(e){return e.constructor=s,e._isBuffer=!0,e._set=e.set,e.get=Z.get,e.set=Z.set,e.write=Z.write,e.toString=Z.toString,e.toLocaleString=Z.toString,e.toJSON=Z.toJSON,e.equals=Z.equals,e.compare=Z.compare,e.indexOf=Z.indexOf,e.copy=Z.copy,e.slice=Z.slice,e.readUIntLE=Z.readUIntLE,e.readUIntBE=Z.readUIntBE,e.readUInt8=Z.readUInt8,e.readUInt16LE=Z.readUInt16LE,e.readUInt16BE=Z.readUInt16BE,e.readUInt32LE=Z.readUInt32LE,e.readUInt32BE=Z.readUInt32BE,e.readIntLE=Z.readIntLE,e.readIntBE=Z.readIntBE,e.readInt8=Z.readInt8,e.readInt16LE=Z.readInt16LE,e.readInt16BE=Z.readInt16BE,e.readInt32LE=Z.readInt32LE,e.readInt32BE=Z.readInt32BE,e.readFloatLE=Z.readFloatLE,e.readFloatBE=Z.readFloatBE,e.readDoubleLE=Z.readDoubleLE,e.readDoubleBE=Z.readDoubleBE,e.writeUInt8=Z.writeUInt8,e.writeUIntLE=Z.writeUIntLE,e.writeUIntBE=Z.writeUIntBE,e.writeUInt16LE=Z.writeUInt16LE,e.writeUInt16BE=Z.writeUInt16BE,e.writeUInt32LE=Z.writeUInt32LE,e.writeUInt32BE=Z.writeUInt32BE,e.writeIntLE=Z.writeIntLE,e.writeIntBE=Z.writeIntBE,e.writeInt8=Z.writeInt8,e.writeInt16LE=Z.writeInt16LE,e.writeInt16BE=Z.writeInt16BE,e.writeInt32LE=Z.writeInt32LE,e.writeInt32BE=Z.writeInt32BE,e.writeFloatLE=Z.writeFloatLE,e.writeFloatBE=Z.writeFloatBE,e.writeDoubleLE=Z.writeDoubleLE,e.writeDoubleBE=Z.writeDoubleBE,e.fill=Z.fill,e.inspect=Z.inspect,e.toArrayBuffer=Z.toArrayBuffer,e};var et=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{17:17,27:27,7:7}],11:[function(e,t,n){var r={};r.parseBuffer=function(e){return(new i(e)).parse()},r.addBoxProcessor=function(e,t){"string"==typeof e&&"function"==typeof t&&(s.prototype._boxProcessors[e]=t)},r.createFile=function(){return new i},r.createBox=function(e,t,n){var r=s.create(e);return t&&t.append(r,n),r},r.createFullBox=function(e,t,n){var i=r.createBox(e,t,n);return i.version=0,i.flags=0,i},r.Utils={},r.Utils.dataViewToString=function(e,t){var n=t||"utf-8";if("undefined"!=typeof TextDecoder)return(new TextDecoder(n)).decode(e);var r=[],i=0;if("utf-8"===n)for(;i<e.byteLength;){var s=e.getUint8(i++);s<128||(s<224?(s=(31&s)<<6,s|=63&e.getUint8(i++)):s<240?(s=(15&s)<<12,s|=(63&e.getUint8(i++))<<6,s|=63&e.getUint8(i++)):(s=(7&s)<<18,s|=(63&e.getUint8(i++))<<12,s|=(63&e.getUint8(i++))<<6,s|=63&e.getUint8(i++))),r.push(String.fromCharCode(s))}else for(;i<e.byteLength;)r.push(String.fromCharCode(e.getUint8(i++)));return r.join("")},r.Utils.utf8ToByteArray=function(e){var t,n;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?(t.push(192|r>>6),t.push(128|63&r)):r<65536?(t.push(224|r>>12),t.push(128|63&r>>6),t.push(128|63&r)):(t.push(240|r>>18),t.push(128|63&r>>12),t.push(128|63&r>>6),t.push(128|63&r))}return t},r.Utils.appendBox=function(e,t,n){if(t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,-1!==n){if(void 0===n||null===n)return void e.boxes.push(t);var r,i=-1;if("number"==typeof n)i=n;else{if("string"==typeof n)r=n;else{if("object"!=typeof n||!n.type)return void e.boxes.push(t);r=n.type}for(var s=0;s<e.boxes.length;s++)if(r===e.boxes[s].type){i=s+1;break}}e.boxes.splice(i,0,t)}},void 0!==n&&(n.parseBuffer=r.parseBuffer,n.addBoxProcessor=r.addBoxProcessor,n.createFile=r.createFile,n.createBox=r.createBox,n.createFullBox=r.createFullBox,n.Utils=r.Utils),r.Cursor=function(e){this.offset=void 0===e?0:e};var i=function(e){this._cursor=new r.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))};i.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},i.prototype.fetchAll=function(e,t){var n=[];return i._sweep.call(this,e,n,t),n},i.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=s.parse(this);if(void 0===e.type)break;this.boxes.push(e)}return this},i._sweep=function(e,t,n){this.type&&this.type==e&&t.push(this);for(var r in this.boxes){if(t.length&&n)return;i._sweep.call(this.boxes[r],e,t,n)}},i.prototype.write=function(){var e,t=0;for(e=0;e<this.boxes.length;e++)t+=this.boxes[e].getLength(!1);var n=new Uint8Array(t);for(this._rawo=new DataView(n.buffer),this.bytes=n,this._cursor.offset=0,e=0;e<this.boxes.length;e++)this.boxes[e].write();return n.buffer},i.prototype.append=function(e,t){r.Utils.appendBox(this,e,t)};var s=function(){this._cursor=new r.Cursor};s.parse=function(e){var t=new s;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},s.create=function(e){var t=new s;return t.type=e,t.boxes=[],t},s.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],s.prototype._boxProcessors={},s.prototype._procField=function(e,t,n){this._parsing?this[e]=this._readField(t,n):this._writeField(t,n,this[e])},s.prototype._procFieldArray=function(e,t,n,r){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e][i]=this._readField(n,r);else for(i=0;i<this[e].length;i++)this._writeField(n,r,this[e][i])},s.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},s.prototype._procEntries=function(e,t,n){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e].push({}),n.call(this,this[e][r]);else for(r=0;r<t;r++)n.call(this,this[e][r])},s.prototype._procSubEntries=function(e,t,n,r){var i;if(this._parsing)for(e[t]=[],i=0;i<n;i++)e[t].push({}),r.call(this,e[t][i]);else for(i=0;i<n;i++)r.call(this,e[t][i])},s.prototype._procEntryField=function(e,t,n,r){this._parsing?e[t]=this._readField(n,r):this._writeField(n,r,e[t])},s.prototype._procSubBoxes=function(e,t){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push(s.parse(this));else for(n=0;n<t;n++)this._rawo?this[e][n].write():this.size+=this[e][n].getLength()},s.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return-1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return-1}},s.prototype._readInt=function(e){var t=null,n=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(n);break;case 16:t=this._raw.getInt16(n);break;case 32:t=this._raw.getInt32(n);break;case 64:var r=this._raw.getInt32(n),i=this._raw.getInt32(n+4);t=r*Math.pow(2,32)+i}return this._cursor.offset+=e>>3,t},s.prototype._readUint=function(e){var t,n,r=null,i=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:r=this._raw.getUint8(i);break;case 16:r=this._raw.getUint16(i);break;case 24:t=this._raw.getUint16(i),n=this._raw.getUint8(i+2),r=(t<<8)+n;break;case 32:r=this._raw.getUint32(i);break;case 64:t=this._raw.getUint32(i),n=this._raw.getUint32(i+4),r=t*Math.pow(2,32)+n}return this._cursor.offset+=e>>3,r},s.prototype._readString=function(e){for(var t="",n=0;n<e;n++){var r=this._readUint(8);t+=String.fromCharCode(r)}return t},s.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},s.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},s.prototype._readData=function(e){var t=e>0?e:this._raw.byteLength-(this._cursor.offset-this._offset);if(t>0){var n=new Uint8Array(this._raw.buffer,this._cursor.offset,t);return this._cursor.offset+=t,n}return null},s.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;return e>0&&(t=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),t?r.Utils.dataViewToString(t):t},s.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)return void (this._root._incomplete=!0);switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())},s.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},s.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(s.parse(this))},s.prototype.append=function(e,t){r.Utils.appendBox(this,e,t)},s.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},s.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},s.prototype._writeInt=function(e,t){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(n,t);break;case 16:this._rawo.setInt16(n,t);break;case 32:this._rawo.setInt32(n,t);break;case 64:var r=Math.floor(t/Math.pow(2,32)),i=t-r*Math.pow(2,32);this._rawo.setUint32(n,r),this._rawo.setUint32(n+4,i)}this._cursor.offset+=e>>3}else this.size+=e>>3},s.prototype._writeUint=function(e,t){if(this._rawo){var n,r,i=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(i,t);break;case 16:this._rawo.setUint16(i,t);break;case 24:n=(16776960&t)>>8,r=255&t,this._rawo.setUint16(i,n),this._rawo.setUint8(i+2,r);break;case 32:this._rawo.setUint32(i,t);break;case 64:n=Math.floor(t/Math.pow(2,32)),r=t-n*Math.pow(2,32),this._rawo.setUint32(i,n),this._rawo.setUint32(i+4,r)}this._cursor.offset+=e>>3}else this.size+=e>>3},s.prototype._writeString=function(e,t){for(var n=0;n<e;n++)this._writeUint(8,t.charCodeAt(n))},s.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},s.prototype._writeTemplate=function(e,t){var n=Math.floor(t),r=(t-n)*Math.pow(2,e/2);this._writeUint(e/2,n),this._writeUint(e/2,r)},s.prototype._writeData=function(e){var t;if(e)if(this._rawo){if(e instanceof Array){for(var n=this._cursor.offset-this._rawo.byteOffset,t=0;t<e.length;t++)this._rawo.setInt8(n+t,e[t]);this._cursor.offset+=e.length}e instanceof Uint8Array&&(this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length)}else this.size+=e.length},s.prototype._writeUTF8String=function(e){var t=r.Utils.utf8ToByteArray(e);if(this._rawo)for(var n=new DataView(this._rawo.buffer,this._cursor.offset,t.length),i=0;i<t.length;i++)n.setUint8(i,t[i]);else this.size+=t.length},s.prototype._writeField=function(e,t,n){switch(e){case"uint":this._writeUint(t,n);break;case"int":this._writeInt(t,n);break;case"template":this._writeTemplate(t,n);break;case"string":-1==t?this._writeTerminatedString(n):this._writeString(t,n);break;case"data":this._writeData(n);break;case"utf8":this._writeUTF8String(n)}},s.prototype._boxProcessors.avc1=s.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},s.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},s.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)})},s.prototype._boxProcessors.emsg=function(){this._procFullBox(),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("message_data","data",-1)},s.prototype._boxProcessors.free=s.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},s.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},s.prototype._boxProcessors.ftyp=s.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},s.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},s.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},s.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},s.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},s.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},s.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},s.prototype._boxProcessors.mp4a=s.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},s.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},s.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},s.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray
("Data",this.DataSize,"uint",8)},s.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},s.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},s.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)})},s.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},s.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)})})},s.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},s.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)})})},s.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},s.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},s.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},s.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},s.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},s.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},s.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},s.prototype._boxProcessors["url "]=s.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},s.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},s.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},s.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},s.prototype._boxProcessors.vtte=function(){}},{}],12:[function(e,t,n){(function(e){function t(e){return Array.isArray?Array.isArray(e):"[object Array]"===m(e)}function r(e){return"boolean"==typeof e}function i(e){return null===e}function s(e){return null==e}function o(e){return"number"==typeof e}function u(e){return"string"==typeof e}function a(e){return"symbol"==typeof e}function f(e){return void 0===e}function l(e){return"[object RegExp]"===m(e)}function c(e){return"object"==typeof e&&null!==e}function h(e){return"[object Date]"===m(e)}function p(e){return"[object Error]"===m(e)||e instanceof Error}function d(e){return"function"==typeof e}function v(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function m(e){return Object.prototype.toString.call(e)}n.isArray=t,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=s,n.isNumber=o,n.isString=u,n.isSymbol=a,n.isUndefined=f,n.isRegExp=l,n.isObject=c,n.isDate=h,n.isError=p,n.isFunction=d,n.isPrimitive=v,n.isBuffer=e.isBuffer}).call(this,{isBuffer:e(26)})},{26:26}],13:[function(e,t,n){function r(e){return null===e||void 0===e}function i(e){return!!e&&"object"==typeof e&&"number"==typeof e.length&&"function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0])}function s(e,t,n){var s,l;if(r(e)||r(t))return!1;if(e.prototype!==t.prototype)return!1;if(a(e))return!!a(t)&&(e=o.call(e),t=o.call(t),f(e,t,n));if(i(e)){if(!i(t))return!1;if(e.length!==t.length)return!1;for(s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}try{var c=u(e),h=u(t)}catch(p){return!1}if(c.length!=h.length)return!1;for(c.sort(),h.sort(),s=c.length-1;s>=0;s--)if(c[s]!=h[s])return!1;for(s=c.length-1;s>=0;s--)if(l=c[s],!f(e[l],t[l],n))return!1;return typeof e==typeof t}var o=Array.prototype.slice,u=e(15),a=e(14),f=t.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?e===t:e==t:s(e,t,n))}},{14:14,15:15}],14:[function(e,t,n){function r(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function i(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}var s="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();n=t.exports=s?r:i,n.supported=r,n.unsupported=i},{}],15:[function(e,t,n){function r(e){var t=[];for(var n in e)t.push(n);return t}n=t.exports="function"==typeof Object.keys?Object.keys:r,n.shim=r},{}],16:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function s(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function u(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!s(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,s,a,f;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length))throw(t=arguments[1])instanceof Error?t:TypeError('Uncaught, unspecified "error" event.');if(n=this._events[e],u(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,s=new Array(r-1),a=1;a<r;a++)s[a-1]=arguments[a];n.apply(this,s)}else if(o(n)){for(r=arguments.length,s=new Array(r-1),a=1;a<r;a++)s[a-1]=arguments[a];for(f=n.slice(),r=f.length,a=0;a<r;a++)f[a].apply(this,s)}return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var n;n=u(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,s,u;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(u=s;u-->0;)if(n[u]===t||n[u].listener&&n[u].listener===t){r=u;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){return e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],17:[function(e,t,n){n.read=function(e,t,n,r,i){var s,o,u=8*i-r-1,a=(1<<u)-1,f=a>>1,l=-7,c=n?i-1:0,h=n?-1:1,p=e[t+c];for(c+=h,s=p&(1<<-l)-1,p>>=-l,l+=u;l>0;s=256*s+e[t+c],c+=h,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=r;l>0;o=256*o+e[t+c],c+=h,l-=8);if(0===s)s=1-f;else{if(s===a)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),s-=f}return(p?-1:1)*o*Math.pow(2,s-r)},n.write=function(e,t,n,r,i,s){var o,u,a,f=8*s-i-1,l=(1<<f)-1,c=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:s-1,d=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(a=Math.pow(2,-o))<1&&(o--,a*=2),t+=o+c>=1?h/a:h*Math.pow(2,1-c),t*a>=2&&(o++,a/=2),o+c>=l?(u=0,o=l):o+c>=1?(u=(t*a-1)*Math.pow(2,i),o+=c):(u=t*Math.pow(2,c-1)*Math.pow(2,i),o=0));i>=8;e[n+p]=255&u,p+=d,u/=256,i-=8);for(o=o<<i|u,f+=i;f>0;e[n+p]=255&o,p+=d,o/=256,f-=8);e[n+p-d]|=128*v}},{}],18:[function(e,t,n){!function(e,t,n,r,i){function s(e){this.node=e}function o(){this.events=[],this.head=null,this.body=null}function u(){this.styling=null,this.layout=null}function a(){this.styles={}}function f(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function l(){this.regions={}}function c(e){this.kind=e,this.begin=null,this.end=null,this.styleAttrs=null,this.regionID=null,this.sets=null,this.timeContainer=null}function h(){c.call(this,"body")}function p(){c.call(this,"div")}function d(){c.call(this,"p")}function v(){c.call(this,"span"),this.space=null}function m(){c.call(this,"span"),this.space=null,this.text=null}function g(){c.call(this,"br")}function y(){this.id=null,this.begin=null,this.end=null,this.styleAttrs=null,this.sets=null}function b(){this.begin=null,this.end=null,this.qname=null,this.value=null}function w(e){return e&&"xml:id"in e.attributes?e.attributes["xml:id"].value||null:null}function E(e){return e&&"region"in e.attributes?e.attributes.region.value:""}function S(e,t){var n=e&&"timeContainer"in e.attributes?e.attributes.timeContainer.value:null;return n&&"par"!==n?"seq"===n?"seq":(B(t,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}function x(e){return e&&"style"in e.attributes?e.attributes.style.value.split(" "):[]}function T(e,t){var n={};if(null!==e)for(var i in e.attributes){var s=e.attributes[i].uri+" "+e.attributes[i].local,o=r.byQName[s];if(void 0!==o){var u=o.parse(e.attributes[i].value);null!==u?(n[s]=u,o===r.byName.zIndex&&H(t,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):B(t,"Cannot parse styling attribute "+s+" --> "+e.attributes[i].value)}}return n}function N(e,t,n){for(var r in e.attributes)if(e.attributes[r].uri===t&&e.attributes[r].local===n)return e.attributes[r].value;return null}function C(e,t){var r=N(e,n.ns_ittp,"aspectRatio"),i=null;if(null!==r){var s=/(\d+) (\d+)/,o=s.exec(r);if(null!==o){var u=parseInt(o[1]),a=parseInt(o[2]);0!==u&&0!==a?i=u/a:B(t,"Illegal aspectRatio values (ignoring)")}else B(t,"Malformed aspectRatio attribute (ignoring)")}return i}function k(e,t){var r=N(e,n.ns_ttp,"cellResolution"),i=15,s=32;if(null!==r){var o=/(\d+) (\d+)/,u=o.exec(r);null!==u?(s=parseInt(u[1]),i=parseInt(u[2])):H(t,"Malformed cellResolution value (using initial value instead)")}return{w:s,h:i}}function L(e,t){var r,i=N(e,n.ns_ttp,"frameRate"),s=30;null!==i&&(r=/(\d+)/.exec(i),null!==r?s=parseInt(r[1]):H(t,"Malformed frame rate attribute (using initial value instead)"));var o=N(e,n.ns_ttp,"frameRateMultiplier"),u=1;null!==o&&(r=/(\d+) (\d+)/.exec(o),null!==r?u=parseInt(r[1])/parseInt(r[2]):H(t,"Malformed frame rate multiplier attribute (using initial value instead)"));var a=u*s,f=1,l=N(e,n.ns_ttp,"tickRate");return null===l?null!==i&&(f=a):(r=/(\d+)/.exec(l),null!==r?f=parseInt(r[1]):H(t,"Malformed tick rate attribute (using initial value instead)")),{effectiveFrameRate:a,tickRate:f}}function A(e,t){var r=N(e,n.ns_tts,"extent");if(null===r)return null;var s=r.split(" ");if(2!==s.length)return H(t,"Malformed extent (ignoring)"),null;var o=i.parseLength(s[0]),u=i.parseLength(s[1]);return u&&o?{h:u,w:o}:(H(t,"Malformed extent values (ignoring)"),null)}function O(e,t,n){var r,i=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/,s=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/,o=/^(\d+(?:\.\d+)?)f$/,u=/^(\d+(?:\.\d+)?)t$/,a=/^(\d+(?:\.\d+)?)ms$/,f=/^(\d+(?:\.\d+)?)s$/,l=/^(\d+(?:\.\d+)?)h$/,c=/^(\d+(?:\.\d+)?)m$/,h=null;return null!==(r=o.exec(n))?null!==t&&(h=parseFloat(r[1])/t):null!==(r=u.exec(n))?null!==e&&(h=parseFloat(r[1])/e):null!==(r=a.exec(n))?h=parseFloat(r[1])/1e3:null!==(r=f.exec(n))?h=parseFloat(r[1]):null!==(r=l.exec(n))?h=3600*parseFloat(r[1]):null!==(r=c.exec(n))?h=60*parseFloat(r[1]):null!==(r=i.exec(n))?h=3600*parseInt(r[1])+60*parseInt(r[2])+parseFloat(r[3]):null!==(r=s.exec(n))&&null!==t&&(h=3600*parseInt(r[1])+60*parseInt(r[2])+parseInt(r[3])+(null===r[4]?0:parseInt(r[4])/t)),h}function M(e,t,n,r){var i=t&&"seq"===t.timeContainer,s=0;n&&"begin"in n.attributes&&null===(s=O(e.tickRate,e.effectiveFrameRate,n.attributes.begin.value))&&(H(r,"Malformed begin value "+n.attributes.begin.value+" (using 0)"),s=0);var o=i?0:null;n&&"dur"in n.attributes&&null===(o=O(e.tickRate,e.effectiveFrameRate,n.attributes.dur.value))&&H(r,"Malformed dur value "+n.attributes.dur.value+" (ignoring)");var u=null;n&&"end"in n.attributes&&null===(u=O(e.tickRate,e.effectiveFrameRate,n.attributes.end.value))&&H(r,"Malformed end value (ignoring)");var a=0;if(t&&(a=i&&"contents"in t&&t.contents.length>0?t.contents[t.contents.length-1].end:t.begin||0),s+=a,null!==o)u=s+o;else{var f=t&&"end"in t?t.end:Number.POSITIVE_INFINITY;u=null!==u?u+a:f}return{begin:s,end:u}}function _(e,t,n){for(;t.styleRefs.length>0;){var r=t.styleRefs.pop();r in e.styles?(_(e,e.styles[r],n),P(e.styles[r].styleAttrs,t.styleAttrs)):B(n,"Non-existant style id referenced")}}function D(e,t,n,r){for(var i=t.length-1;i>=0;i--){var s=t[i];s in e.styles?P(e.styles[s].styleAttrs,n):B(r,"Non-existant style id referenced")}}function P(e,t){for(var n in e)n in t||(t[n]=e[n])}function H(e,t){if(e&&e.warn&&e.warn(t))throw t}function B(e,t){if(e&&e.error&&e.error(t))throw t}function j(e,t){throw e&&e.fatal&&e.fatal(t),t}function F(e,t){for(var n,r=0,i=e.length-1;r<=i;){n=Math.floor((r+i)/2);var s=e[n];if(s<t)r=n+1;else{if(!(s>t))return{found:!0,index:n};i=n-1}}return{found:!1,index:r}}e.fromXML=function(e,r,i){var c=t.parser(!0,{xmlns:!0}),w=[],E=[],S=[],x=0,T=null;c.onclosetag=function(e){if(w[0]instanceof a)for(var t in w[0].styles)_(w[0],w[0].styles[t],r);else if(w[0]instanceof d||w[0]instanceof v){if(w[0].contents.length>1){var o,u=[w[0].contents[0]];for(o=1;o<w[0].contents.length;o++)w[0].contents[o]instanceof m&&u[u.length-1]instanceof m?u[u.length-1].text+=w[0].contents[o].text:u.push(w[0].contents[o]);w[0].contents=u}w[0]instanceof v&&1===w[0].contents.length&&w[0].contents[0]instanceof m&&null===w[0].text&&(w[0].text=w[0].contents[0].text,delete w[0].contents)}else w[0]instanceof s&&(w[0].node.uri===n.ns_tt&&"metadata"===w[0].node.local?x--:x>0&&i&&"onCloseTag"in i&&i.onCloseTag());S.shift(),E.shift(),w.shift()},c.ontext=function(e){if(void 0!==w[0])if(w[0]instanceof v||w[0]instanceof d){var t=new m;t.initFromText(T,w[0],e,S[0],r),w[0].contents.push(t)}else w[0]instanceof s&&x>0&&i&&"onText"in i&&i.onText(e)},c.onopentag=function(e){var t=e.attributes["xml:space"];t?S.unshift(t.value):0===S.length?S.unshift("default"):S.unshift(S[0]);var c=e.attributes["xml:lang"];if(c?E.unshift(c.value):0===E.length?E.unshift(""):E.unshift(E[0]),e.uri===n.ns_tt)if("tt"===e.local)null!==T&&j("Two <tt> elements at ("+this.line+","+this.column+")"),T=new o,T.initFromNode(e,r),w.unshift(T);else if("head"===e.local)w[0]instanceof o||j("Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),null!==T.head&&j("Second <head> element at ("+this.line+","+this.column+")"),T.head=new u,w.unshift(T.head);else if("styling"===e.local)w[0]instanceof u||j("Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),null!==T.head.styling&&j("Second <styling> element at ("+this.line+","+this.column+")"),T.head.styling=new a,w.unshift(T.head.styling);else if("style"===e.local){var m;w[0]instanceof a?(m=new f,m.initFromNode(e,r),m.id?T.head.styling.styles[m.id]=m:B("<style> element missing @id attribute"),w.unshift(m)):w[0]instanceof y?(m=new f,m.initFromNode(e,r),P(m.styleAttrs,w[0].styleAttrs),w.unshift(m)):j(r,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if("layout"===e.local)w[0]instanceof u||j(r,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),null!==T.head.layout&&j(r,"Second <layout> element at "+this.line+","+this.column+")"),T.head.layout=new l,w.unshift(T.head.layout);else if("region"===e.local){w[0]instanceof l||j(r,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var N=new y;N.initFromNode(T,e,r),!N.id||N.id in T.head.layout.regions?B(r,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):(T.head.layout.regions[N.id]=N,T._registerEvent(N)),w.unshift(N)}else if("body"===e.local){w[0]instanceof o||j(r,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==T.body&&j(r,"Second <body> element at "+this.line+","+this.column+")");var C=new h;C.initFromNode(T,e,r),T._registerEvent(C),T.body=C,w.unshift(C)}else if("div"===e.local){w[0]instanceof p||w[0]instanceof h||j(r,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var k=new p;k.initFromNode(T,w[0],e,r),T._registerEvent(k),w[0].contents.push(k),w.unshift(k)}else if("p"===e.local){w[0]instanceof p||j(r,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var L=new d;L.initFromNode(T,w[0],e,r),T._registerEvent(L),w[0].contents.push(L),w.unshift(L)}else if("span"===e.local){w[0]instanceof v||w[0]instanceof d||j(r,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var A=new v;A.initFromNode(T,w[0],e,S[0],r),T._registerEvent(A),w[0].contents.push(A),w.unshift(A)}else if("br"===e.local){w[0]instanceof v||w[0]instanceof d||j(r,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var O=new g;O.initFromNode(T,w[0],e,r),T._registerEvent(O),w[0].contents.push(O),w.unshift(O)}else if("set"===e.local){w[0]instanceof v||w[0]instanceof d||w[0]instanceof p||w[0]instanceof h||w[0]instanceof y||w[0]instanceof g||j(r,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var M=new b;M.initFromNode(T,w[0],e,r),T._registerEvent(M),w[0].sets.push(M),w.unshift(M)}else w.unshift(new s(e));else w.unshift(new s(e));if(w[0]instanceof s)if(e.uri===n.ns_tt&&"metadata"===e.local)x++;else if(x>0&&i&&"onOpenTag"in i){var _=[];for(var D in e.attributes)_[e.attributes[D].uri+" "+e.attributes[D].local]={uri:e.attributes[D].uri,local:e.attributes[D].local,value:e.attributes[D].value};i.onOpenTag(e.uri,e.local,_)}},c.write(e).close(),null!==T.head?delete T.head.styling:T.head=new u,null===T.head.layout&&(T.head.layout=new l);var N=!1;for(var C in T.head.layout.regions){N=!0;break}if(!N){var k=y.createDefaultRegion();T.head.layout.regions[k.id]=k}return T},o.prototype.initFromNode=function(e,t){this.cellResolution=k(e,t);var r=L(e,t);this.effectiveFrameRate=r.effectiveFrameRate,this.tickRate=r.tickRate,this.aspectRatio=C(e,t);var i=N(e,n.ns_ttp,"timeBase");null!==i&&"media"!==i&&j(t,"Unsupported time base");var s=A(e,t);null===s?this.pxDimensions={h:480,w:640}:("px"===s.h.unit&&"px"===s.w.unit||j(t,"Extent on TT must be in px or absent"),this.pxDimensions={h:s.h.value,w:s.w.value})},o.prototype._registerEvent=function(e){if(!(e.end<=e.begin)){var t=F(this.events,e.begin);if(t.found||this.events.splice(t.index,0,e.begin),e.end!==Number.POSITIVE_INFINITY){var n=F(this.events,e.end);n.found||this.events.splice(n.index,0,e.end)}}},o.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},o.prototype.getMediaTimeEvents=function(){return this.events},f.prototype.initFromNode=function(e,t){this.id=w(e),this.styleAttrs=T(e,t),this.styleRefs=x(e)},c.prototype.initFromNode=function(e,t,n,r){var i=M(e,t,n,r);this.begin=i.begin,this.end=i.end,this.styleAttrs=T(n,r),null!==e.head&&null!==e.head.styling&&D(e.head.styling,x(n),this.styleAttrs,r),this.regionID=E(n),this.sets=[],this.timeContainer=S(n,r)},h.prototype.initFromNode=function(e,t,n){c.prototype.initFromNode.call(this,e,null,t,n),this.contents=[]},p.prototype.initFromNode=function(e,t,n,r){c.prototype.initFromNode.call(this,e,t,n,r),this.contents=[]},d.prototype.initFromNode=function(e,t,n,r){c.prototype.initFromNode.call(this,e,t,n,r),this.contents=[]},v.prototype.initFromNode=function(e,t,n,r,i){c.prototype.initFromNode.call(this,e,t,n,i),this.space=r,this.contents=[]},m.prototype.initFromText=function(e,t,n,r,i){c.prototype.initFromNode.call(this,e,t,null,i),this.text=n,this.space=r},g.prototype.initFromNode=function(e,t,n,r){c.prototype.initFromNode.call(this,e,t,n,r)},y.createDefaultRegion=function(){var e=new y;return e.id="",e.begin=0,e.end=Number.POSITIVE_INFINITY,e.styleAttrs={},e.sets=[],e},y.prototype.initFromNode=function(e,t,n){this.id=w(t);var r=M(e,null,t,n);this.begin=r.begin,this.end=r.end,this.styleAttrs=T(t,n),this.sets=[],null!==e.head&&null!==e.head.styling&&D(e.head.styling,x(t),this.styleAttrs,n)},b.prototype.initFromNode=function(e,t,n,r){var i=M(e,t,n,r);this.begin=i.begin,this.end=i.end;var s=T(n,r);for(var o in s){if(this.qname){B(r,"More than one style specified on set");break}this.qname=o,this.value=s[o]}}}(void 0===n?this.imscDoc={}:n,"undefined"==typeof sax?e(45):sax,"undefined"==typeof imscNames?e(22):imscNames,"undefined"==typeof imscStyles?e(23):imscStyles,"undefined"==typeof imscUtils?e(24):imscUtils)},{22:22,23:23,24:24,45:45}],19:[function(e,t,n){!function(e,t,n){function r(e,t,o){var u;if("region"===o.kind?(u=document.createElement("div"),u.style.position="absolute"):"body"===o.kind?u=document.createElement("div"):"div"===o.kind?u=document.createElement("div"):"p"===o.kind?u=document.createElement("p"):"span"===o.kind?u=document.createElement("span"):"br"===o.kind&&(u=document.createElement("br")),!u)return void l(e.errorHandler,"Error processing ISD element kind: "+o.kind);u.style.margin="0";for(var a in c){var f=c[a],h=o.styleAttrs[f.qname];void 0!==h&&null!==f.map&&f.map(e,u,o,h)}var p=u,d=o.styleAttrs[n.byName.multiRowAlign.qname];if(d&&"auto"!==d){var v=document.createElement("span");v.style.display="inline-block",v.style.textAlign=d,u.appendChild(v),p=v,e.mra=d}var m=o.styleAttrs[n.byName.linePadding.qname];if(m&&m>0&&(e.lp=m),"span"===o.kind&&o.text)if(e.lp||e.mra)for(var g=0;g<o.text.length;g++){var y=document.createElement("span");y.textContent=o.text.charAt(g),u.appendChild(y)}else u.textContent=o.text;t.appendChild(u);for(var b in o.contents)r(e,p,o.contents[b]);if((e.lp||e.mra)&&"p"===o.kind){var w=[];i(p,w,"red"),s(w,e.lp*e.h),e.lp&&delete e.lp,e.mra&&delete e.mra}}function i(e,t,n){if(0===e.childElementCount)t.push({element:e,bgcolor:n});else for(var r=e.style.backgroundColor||n,s=e.firstChild;s;)s.nodeType===Node.ELEMENT_NODE&&i(s,t,r),s=s.nextSibling}function s(e,t){for(var n=null,r=!0,i=!1,s=0;s<=e.length;s++)if(s===e.length||"br"!==e[s].element.localName){if(null===n||s===e.length||e[s].element.getBoundingClientRect().top!==e[n].element.getBoundingClientRect().top){if(t&&!r){for(;--s>=0;)if(0!==e[s].element.getBoundingClientRect().width){if(u(e[s].element,e[s].color,t),0!==e[s].element.getBoundingClientRect().width&&e[s].element.getBoundingClientRect().top===e[n].element.getBoundingClientRect().top)break;a(e[s].element)}r=!0;continue}if(s!==e.length&&null!==n&&!i){var f=document.createElement("br");e[s].element.parentElement.insertBefore(f,e[s].element),e.splice(s,0,{element:f}),i=!0;continue}if(s!==e.length&&t)for(;s<e.length;s++)if(0!==e[s].element.getBoundingClientRect().width){o(e[s].element,e[s].color,t);break}r=!1,i=!1,n=s}}else i=!0}function o(e,t,n){e.style.paddingLeft=n+"px",e.style.backgroundColor=t}function u(e,t,n){e.style.paddingRight=n+"px",e.style.backgroundColor=t}function a(e){e.style.paddingRight=null}function f(e,t){this.qname=e,this.map=t}function l(e,t){if(e&&e.error&&e.error(t))throw t}e.render=function(e,t,n,i,s,o,u){var a=i||t.clientHeight,f=s||t.clientWidth;if(null!==e.aspectRatio){var l=a*e.aspectRatio;l>f?a=Math.round(f/e.aspectRatio):f=l}var c=document.createElement("div");c.style.position="relative",c.style.width=f+"px",c.style.height=a+"px",c.style.margin="auto",c.style.top=0,c.style.bottom=0,c.style.left=0,c.style.right=0,c.style.zIndex=0;var h={h:a,w:f,regionH:null,regionW:null,imgResolver:n,displayForcedOnlyMode:o||!1,isd:e,errorHandler:u};t.appendChild(c);for(var p in e.contents)r(h,c,e.contents[p])};var c=[new f("http://www.w3.org/ns/ttml#styling backgroundColor",function(e,t,n,r){t.style.backgroundColor="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")"}),new f("http://www.w3.org/ns/ttml#styling color",function(e,t,n,r){t.style.color="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")"}),new f("http://www.w3.org/ns/ttml#styling direction",function(e,t,n,r){t.style.direction=r}),new f("http://www.w3.org/ns/ttml#styling display",function(e,t,n,r){}),new f("http://www.w3.org/ns/ttml#styling displayAlign",function(e,t,n,r){t.style.display="flex",t.style.flexDirection="column","before"===r?t.style.justifyContent="flex-start":"center"===r?t.style.justifyContent="center":"after"===r&&(t.style.justifyContent="flex-end")}),new f("http://www.w3.org/ns/ttml#styling extent",function(e,t,n,r){e.regionH=r.h*e.h,e.regionW=r.w*e.w;var i=0,s=0,o=n.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];o&&(i=(o[0]+o[2])*e.h,s=(o[1]+o[3])*e.w),t.style.height=e.regionH-i+"px",t.style.width=e.regionW-s+"px"}),new f("http://www.w3.org/ns/ttml#styling fontFamily",function(e,t,n,r){var i=[];for(var s in r)"monospaceSerif"===r[s]?(i.push("Courier New"),i.push('"Liberation Mono"'),i.push("Courier"),i.push("monospace")):"proportionalSansSerif"===r[s]?(i.push("Arial"),i.push("Helvetica"),i.push('"Liberation Sans"'),i.push("sans-serif")):"monospace"===r[s]?i.push("monospace"):"sansSerif"===r[s]?i.push("sans-serif"):"serif"===r[s]?i.push("serif"):"monospaceSansSerif"===r[s]?(i.push("Consolas"),i.push("monospace")):"proportionalSerif"===r[s]?i.push("serif"):i.push(r[s]);t.style.fontFamily=i.join(",")}),new f("http://www.w3.org/ns/ttml#styling fontSize",function(e,t,n,r){t.style.fontSize=r*e.h+"px"}),new f("http://www.w3.org/ns/ttml#styling fontStyle",function(e,t,n,r){t.style.fontStyle=r}),new f("http://www.w3.org/ns/ttml#styling fontWeight",function(e,t,n,r){t.style.fontWeight=r}),new f("http://www.w3.org/ns/ttml#styling lineHeight",function(e,t,n,r){t.style.lineHeight="normal"===r?"normal":r*e.h+"px"}),new f("http://www.w3.org/ns/ttml#styling opacity",function(e,t,n,r){t.style.opacity=r}),new f("http://www.w3.org/ns/ttml#styling origin",function(e,t,n,r){t.style.top=r.h*e.h+"px",t.style.left=r.w*e.w+"px"}),new f("http://www.w3.org/ns/ttml#styling overflow",function(e,t,n,r){t.style.overflow=r}),new f("http://www.w3.org/ns/ttml#styling padding",function(e,t,n,r){var i=[];i[0]=r[0]*e.h+"px",i[1]=r[3]*e.w+"px",i[2]=r[2]*e.h+"px",i[3]=r[1]*e.w+"px",t.style.padding=i.join(" ")}),new f("http://www.w3.org/ns/ttml#styling showBackground",null),new f("http://www.w3.org/ns/ttml#styling textAlign",function(e,t,r,i){var s,o=r.styleAttrs[n.byName.direction.qname];s="start"===i?"rtl"===o?"right":"left":"end"===i?"rtl"===o?"left":"right":i,t.style.textAlign=s}),new f("http://www.w3.org/ns/ttml#styling textDecoration",function(e,t,n,r){t.style.textDecoration=r.join(" ").replace("lineThrough","line-through")}),new f("http://www.w3.org/ns/ttml#styling textOutline",function(e,t,n,r){t.style.textShadow="none"===r?"":"rgba("+r.color[0].toString()+","+r.color[1].toString()+","+r.color[2].toString()+","+(r.color[3]/255).toString()+") 0px 0px "+r.thickness*e.h+"px"}),new f("http://www.w3.org/ns/ttml#styling unicodeBidi",function(e,t,n,r){var i;i="bidiOverride"===r?"bidi-override"
:r,t.style.unicodeBidi=i}),new f("http://www.w3.org/ns/ttml#styling visibility",function(e,t,n,r){t.style.visibility=r}),new f("http://www.w3.org/ns/ttml#styling wrapOption",function(e,t,n,r){"wrap"===r?"preserve"===n.space?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="normal":"preserve"===n.space?t.style.whiteSpace="pre":t.style.whiteSpace="noWrap"}),new f("http://www.w3.org/ns/ttml#styling writingMode",function(e,t,n,r){"lrtb"===r||"lr"===r?t.style.writingMode="horizontal-tb":"rltb"===r||"rl"===r?t.style.writingMode="horizontal-tb":"tblr"===r?t.style.writingMode="vertical-lr":"tbrl"!==r&&"tb"!==r||(t.style.writingMode="vertical-rl")}),new f("http://www.w3.org/ns/ttml#styling zIndex",function(e,t,n,r){t.style.zIndex=r}),new f("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt backgroundImage",function(e,t,n,r){if(null!==e.imgResolver&&null!==r){var i=document.createElement("img"),s=e.imgResolver(r,i);s&&(i.src=s),i.height=e.regionH,i.width=e.regionW,t.appendChild(i)}}),new f("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(e,t,n,r){e.displayForcedOnlyMode&&!1===r&&(t.style.visibility="hidden")})],h={};for(var p in c)h[c[p].qname]=c[p]}(void 0===n?this.imscHTML={}:n,"undefined"==typeof imscNames?e(22):imscNames,"undefined"==typeof imscStyles?e(23):imscStyles)},{22:22,23:23}],20:[function(e,t,n){!function(e,t,n){function r(e,t,o,f,l,c,h,p){if(t<h.begin||t>=h.end)return null;var d="regionID"in h&&""!==h.regionID?h.regionID:c;if(null===l||d===o.id||"contents"in h&&!("contents"in h&&0===h.contents.length)&&""===d){var v=new u(h);for(var m in h.sets)t<h.sets[m].begin||t>=h.sets[m].end||(v.styleAttrs[h.sets[m].qname]=h.sets[m].value);var g={};for(var y in v.styleAttrs)if(g[y]=!0,y===n.byName.writingMode.qname&&!(n.byName.direction.qname in v.styleAttrs)){var b=v.styleAttrs[y];"lrtb"===b||"lr"===b?v.styleAttrs[n.byName.direction.qname]="ltr":"rltb"!==b&&"rl"!==b||(v.styleAttrs[n.byName.direction.qname]="rtl")}if(null!==l)for(var w in n.all){var E=n.all[w];if(E.qname===n.byName.textDecoration.qname){var S=l.styleAttrs[E.qname],x=v.styleAttrs[E.qname],T=[];void 0===x?T=S:-1===x.indexOf("none")?((-1===x.indexOf("noUnderline")&&-1!==S.indexOf("underline")||-1!==x.indexOf("underline"))&&T.push("underline"),(-1===x.indexOf("noLineThrough")&&-1!==S.indexOf("lineThrough")||-1!==x.indexOf("lineThrough"))&&T.push("lineThrough"),(-1===x.indexOf("noOverline")&&-1!==S.indexOf("overline")||-1!==x.indexOf("overline"))&&T.push("overline")):T.push("none"),v.styleAttrs[E.qname]=T}else E.inherit&&E.qname in l.styleAttrs&&!(E.qname in v.styleAttrs)&&(v.styleAttrs[E.qname]=l.styleAttrs[E.qname])}for(var N in n.all){var C=n.all[N];C.qname in v.styleAttrs||("region"===v.kind||!1===C.inherit&&null!==C.initial)&&(v.styleAttrs[C.qname]=C.parse(C.initial),g[C.qname]=!0)}for(var k in n.all){var L=n.all[k];if(L.qname in g&&null!==L.compute){var A=L.compute(e,l,v,v.styleAttrs[L.qname]);null!==A?v.styleAttrs[L.qname]=A:a(p,"Style '"+L.qname+"' on element '"+v.kind+"' cannot be computed")}}if("none"===v.styleAttrs[n.byName.display.qname])return null;var O;null===l?O=null===f?[]:[f]:"contents"in h&&(O=h.contents);for(var M in O){var _=r(e,t,o,f,v,d,O[M]);null!==_&&v.contents.push(_.element)}for(var D in v.styleAttrs)-1===n.byQName[D].applies.indexOf(v.kind)&&delete v.styleAttrs[D];if("span"===v.kind&&v.text&&"default"===v.space){var P=v.text.replace(/\s+/g," ");v.text=P}if("p"===v.kind){var H=[];i(v,H);for(var B=0,j="after_br",F=0;;)if("after_br"===j)B>=H.length||"br"===H[B].kind?(j="before_br",F=B,B--):("preserve"!==H[B].space&&(H[B].text=H[B].text.replace(/^\s+/g,"")),H[B].text.length>0?(j="looking_br",B++):H.splice(B,1));else if("before_br"===j)if(B<0||"br"===H[B].kind){if(j="after_br",(B=F+1)>=H.length)break}else if("preserve"!==H[B].space&&(H[B].text=H[B].text.replace(/\s+$/g,"")),H[B].text.length>0){if(j="after_br",(B=F+1)>=H.length)break}else H.splice(B,1),B--;else B>=H.length||"br"===H[B].kind?(j="before_br",F=B,B--):B++;s(v)}return"div"===v.kind&&n.byName.backgroundImage.qname in v.styleAttrs||"br"===v.kind||"contents"in v&&v.contents.length>0||"span"===v.kind&&null!==v.text||"region"===v.kind&&"always"===v.styleAttrs[n.byName.showBackground.qname]?{region_id:d,element:v}:null}return null}function i(e,t){if("contents"in e)for(var n in e.contents)i(e.contents[n],t);else t.push(e)}function s(e){if("br"===e.kind)return!1;if("text"in e)return 0===e.text.length;if("contents"in e){for(var t=e.contents.length;t--;)s(e.contents[t])&&e.contents.splice(t,1);return 0===e.contents.length}}function o(e){this.contents=[],this.aspectRatio=e.aspectRatio}function u(e){this.kind=e.kind||"region",this.styleAttrs={};for(var t in e.styleAttrs)this.styleAttrs[t]=e.styleAttrs[t];"text"in e?this.text=e.text:"br"!==e.kind&&(this.contents=[]),"space"in e&&(this.space=e.space)}function a(e,t){if(e&&e.error&&e.error(t))throw t}e.generateISD=function(e,t,n){var i=new o(e);for(var s in e.head.layout.regions){var u=r(e,t,e.head.layout.regions[s],e.body,null,"",e.head.layout.regions[s],n);null!==u&&i.contents.push(u.element)}return i}}(void 0===n?this.imscISD={}:n,"undefined"==typeof imscNames?e(22):imscNames,"undefined"==typeof imscStyles?e(23):imscStyles)},{22:22,23:23}],21:[function(e,t,n){n.generateISD=e(20).generateISD,n.fromXML=e(18).fromXML,n.renderHTML=e(19).render},{18:18,19:19,20:20}],22:[function(e,t,n){!function(e){e.ns_tt="http://www.w3.org/ns/ttml",e.ns_tts="http://www.w3.org/ns/ttml#styling",e.ns_ttp="http://www.w3.org/ns/ttml#parameter",e.ns_xml="http://www.w3.org/XML/1998/namespace",e.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",e.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",e.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",e.ns_ebutts="urn:ebu:tt:style"}(void 0===n?this.imscNames={}:n)},{}],23:[function(e,t,n){!function(e,t,n){function r(e,t,n,r,i,s,o,u){this.name=t,this.ns=e,this.qname=e+" "+t,this.inherit=i,this.animatable=s,this.initial=n,this.applies=r,this.parse=o,this.compute=u}e.all=[new r(t.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,n.parseColor,null),new r(t.ns_tts,"color","white",["span"],!0,!0,n.parseColor,null),new r(t.ns_tts,"direction","ltr",["p","span"],!0,!0,function(e){return e},null),new r(t.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(e){return e},null),new r(t.ns_tts,"displayAlign","before",["region"],!1,!0,function(e){return e},null),new r(t.ns_tts,"extent","auto",["tt","region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var r=n.parseLength(t[0]),i=n.parseLength(t[1]);return i&&r?{h:i,w:r}:null},function(e,t,n,r){var i,s;if("auto"===r)i=1;else if("%"===r.h.unit)i=r.h.value/100;else{if("px"!==r.h.unit)return null;i=r.h.value/e.pxDimensions.h}if("auto"===r)s=1;else if("%"===r.w.unit)s=r.w.value/100;else{if("px"!==r.w.unit)return null;s=r.w.value/e.pxDimensions.w}return{h:i,w:s}}),new r(t.ns_tts,"fontFamily","default",["span"],!0,!0,function(e){var t=e.split(","),n=[];for(var r in t)"'"!==t[r].charAt(0)&&'"'!==t[r].charAt(0)&&"default"===t[r]?n.push("monospaceSerif"):n.push(t[r]);return n},null),new r(t.ns_tts,"fontSize","1c",["span"],!0,!0,n.parseLength,function(t,n,r,i){var s;if("%"===i.unit)s=null!==n?n.styleAttrs[e.byName.fontSize.qname]*i.value/100:i.value/100/t.cellResolution.h;else if("em"===i.unit)s=null!==n?n.styleAttrs[e.byName.fontSize.qname]*i.value:i.value/t.cellResolution.h;else if("c"===i.unit)s=i.value/t.cellResolution.h;else{if("px"!==i.unit)return null;s=i.value/t.pxDimensions.h}return s}),new r(t.ns_tts,"fontStyle","normal",["span"],!0,!0,function(e){return e},null),new r(t.ns_tts,"fontWeight","normal",["span"],!0,!0,function(e){return e},null),new r(t.ns_tts,"lineHeight","normal",["p"],!0,!0,function(e){return"normal"===e?e:n.parseLength(e)},function(t,n,r,i){var s;if("normal"===i)s=i;else if("%"===i.unit)s=r.styleAttrs[e.byName.fontSize.qname]*i.value/100;else if("em"===i.unit)s=r.styleAttrs[e.byName.fontSize.qname]*i.value;else if("c"===i.unit)s=i.value/t.cellResolution.h;else{if("px"!==i.unit)return null;s=i.value/t.pxDimensions.h}return s}),new r(t.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new r(t.ns_tts,"origin","auto",["region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var r=n.parseLength(t[0]),i=n.parseLength(t[1]);return i&&r?{h:i,w:r}:null},function(e,t,n,r){var i,s;if("auto"===r)i=0;else if("%"===r.h.unit)i=r.h.value/100;else{if("px"!==r.h.unit)return null;i=r.h.value/e.pxDimensions.h}if("auto"===r)s=0;else if("%"===r.w.unit)s=r.w.value/100;else{if("px"!==r.w.unit)return null;s=r.w.value/e.pxDimensions.w}return{h:i,w:s}}),new r(t.ns_tts,"overflow","hidden",["region"],!1,!0,function(e){return e},null),new r(t.ns_tts,"padding","0px",["region"],!1,!0,function(e){var t=e.split(" ");if(t.length>4)return null;var r=[];for(var i in t){var s=n.parseLength(t[i]);if(!s)return null;r.push(s)}return r},function(t,n,r,i){var s;if(1===i.length)s=[i[0],i[0],i[0],i[0]];else if(2===i.length)s=[i[0],i[1],i[0],i[1]];else if(3===i.length)s=[i[0],i[1],i[2],i[1]];else{if(4!==i.length)return null;s=[i[0],i[1],i[2],i[3]]}var o=r.styleAttrs[e.byName.writingMode.qname];if("lrtb"===o||"lr"===o)s=[s[0],s[3],s[2],s[1]];else if("rltb"===o||"rl"===o)s=[s[0],s[1],s[2],s[3]];else if("tblr"===o)s=[s[3],s[0],s[1],s[2]];else{if("tbrl"!==o&&"tb"!==o)return null;s=[s[3],s[2],s[1],s[0]]}var u=[];for(var a in s)if(0===s[a].value)u[a]=0;else if("%"===s[a].unit)u[a]="0"===a||"2"===a?r.styleAttrs[e.byName.extent.qname].h*s[a].value/100:r.styleAttrs[e.byName.extent.qname].w*s[a].value/100;else if("em"===s[a].unit)u[a]=r.styleAttrs[e.byName.fontSize.qname]*s[a].value;else if("c"===s[a].unit)u[a]=s[a].value/t.cellResolution.h;else{if("px"!==s[a].unit)return null;u[a]=s[a].value/t.pxDimensions.h}return u}),new r(t.ns_tts,"showBackground","always",["region"],!1,!0,function(e){return e},null),new r(t.ns_tts,"textAlign","start",["p"],!0,!0,function(e){return e},function(e,t,n,r){return"left"===r?"start":"right"===r?"end":r}),new r(t.ns_tts,"textDecoration","none",["span"],!0,!0,function(e){return e.split(" ")},null),new r(t.ns_tts,"textOutline","none",["span"],!0,!0,function(e){if("none"===e)return e;var t={},r=e.split(" ");if(0===r.length||r.length>2)return null;var i=n.parseColor(r[0]);if(t.color=i,null!==i&&r.shift(),1!==r.length)return null;var s=n.parseLength(r[0]);return s?(t.thickness=s,t):null},function(t,n,r,i){if("none"===i)return i;var s={};if(null===i.color?s.color=r.styleAttrs[e.byName.color.qname]:s.color=i.color,"%"===i.thickness.unit)s.thickness=r.styleAttrs[e.byName.fontSize.qname]*i.thickness.value/100;else if("em"===i.thickness.unit)s.thickness=r.styleAttrs[e.byName.fontSize.qname]*i.thickness.value;else if("c"===i.thickness.unit)s.thickness=i.thickness.value/t.cellResolution.h;else{if("px"!==i.thickness.unit)return null;s.thickness=i.thickness.value/t.pxDimensions.h}return s}),new r(t.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(e){return e},null),new r(t.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(e){return e},null),new r(t.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(e){return e},null),new r(t.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(e){return e},null),new r(t.ns_tts,"zIndex","auto",["region"],!1,!0,function(e){var t;return"auto"===e?t=e:(t=parseInt(e),isNaN(t)&&(t=null)),t},null),new r(t.ns_ebutts,"linePadding","0c",["p"],!0,!1,n.parseLength,function(e,t,n,r){return"c"===r.unit?r.value/e.cellResolution.h:null}),new r(t.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(e){return e},null),new r(t.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(e){return e},null),new r(t.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(e){return"true"===e},null)],e.byQName={};for(var i in e.all)e.byQName[e.all[i].qname]=e.all[i];e.byName={};for(var s in e.all)e.byName[e.all[s].name]=e.all[s]}(void 0===n?this.imscStyles={}:n,"undefined"==typeof imscNames?e(22):imscNames,"undefined"==typeof imscUtils?e(24):imscUtils)},{22:22,24:24}],24:[function(e,t,n){!function(e){var t=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,n=/rgb\((\d+),(\d+),(\d+)\)/,r=/rgba\((\d+),(\d+),(\d+),(\d+)\)/,i={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};e.parseColor=function(e){var s,o=null;return e in i?o=i[e]:null!==(s=t.exec(e))?o=[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16),void 0!==s[4]?parseInt(s[4],16):255]:null!==(s=n.exec(e))?o=[parseInt(s[1]),parseInt(s[2]),parseInt(s[3]),255]:null!==(s=r.exec(e))&&(o=[parseInt(s[1]),parseInt(s[2]),parseInt(s[3]),parseInt(s[4])]),o};var s=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%)$/;e.parseLength=function(e){var t,n=null;return null!==(t=s.exec(e))&&(n={value:parseFloat(t[1]),unit:t[2]}),n}}(void 0===n?this.imscUtils={}:n)},{}],25:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],26:[function(e,t,n){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function i(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}t.exports=function(e){return null!=e&&(r(e)||i(e)||!!e._isBuffer)}},{}],27:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],28:[function(e,t,n){(function(e){"use strict";function n(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var s,o,u=arguments.length;switch(u){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,i)});default:for(s=new Array(u-1),o=0;o<s.length;)s[o++]=arguments[o];return e.nextTick(function(){t.apply(null,s)})}}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=n:t.exports=e.nextTick}).call(this,e(29))},{29:29}],29:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(c===setTimeout)return setTimeout(e,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(h===clearTimeout)return clearTimeout(e);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function u(){m&&d&&(m=!1,d.length?v=d.concat(v):g=-1,v.length&&a())}function a(){if(!m){var e=s(u);m=!0;for(var t=v.length;t;){for(d=v,v=[];++g<t;)d&&d[g].run();g=-1,t=v.length}d=null,m=!1,o(e)}}function f(e,t){this.fun=e,this.array=t}function l(){}var c,h,p=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(e){c=r}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(e){h=i}}();var d,v=[],m=!1,g=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];v.push(new f(e,t)),1!==v.length||m||s(a)},f.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],30:[function(e,t,n){t.exports=e(31)},{31:31}],31:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);f.call(this,e),l.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||o(s,this)}function s(e){e.end()}var o=e(28),u=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=r;var a=e(12);a.inherits=e(25);var f=e(33),l=e(35);a.inherits(r,f);for(var c=u(l.prototype),h=0;h<c.length;h++){var p=c[h];r.prototype[p]||(r.prototype[p]=l.prototype[p])}Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),o(t,e)}},{12:12,25:25,28:28,33:33,35:35}],32:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);i.call(this,e)}t.exports=r;var i=e(34),s=e(12);s.inherits=e(25),s.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},{12:12,25:25,34:34}],33:[function(e,t,n){(function(n,r){"use strict";function i(e){return j.from(e)}function s(e){return j.isBuffer(e)||e instanceof F}function o(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?P(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function u(t,n){D=D||e(31),t=t||{},this.objectMode=!!t.objectMode,n instanceof D&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new z,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(U||(U=e(47).StringDecoder),this.decoder=new U(t.encoding),this.encoding=t.encoding)}function a(t){if(D=D||e(31),!(this instanceof a))return new a(t);this._readableState=new u(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),B.call(this)}function f(e,t,n,r,s){var o=e._readableState;if(null===t)o.reading=!1,v(e,o);else{var u;s||(u=c(o,t)),u?e.emit("error",u):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===j.prototype||(t=i(t)),r?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):l(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?l(e,o,t,!1):y(e,o)):l(e,o,t,!1))):r||(o.reading=!1)}return h(o)}function l(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&m(e)),y(e,t)}function c(e,t){var n;return s(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function h(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function p(e){return e>=V?e=V:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function d(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=p(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function v(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,m(e)}}function m(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(R("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?_(g,e):g(e))}function g(e){R("emit readable"),e.emit("readable"),T(e)}function y(e,t){t.readingMore||(t.readingMore=!0,_(b,e,t))}function b(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(R("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function w(e){return function(){var t=e._readableState;R("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&H(e,"data")&&(t.flowing=!0,T(e))}}function E(e){R("readable nexttick read 0"),e.read(0)}function S(e,t){t.resumeScheduled||(t.resumeScheduled=!0,_(x,e,t))}function x(e,t){t.reading||(R("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),T(e),t.flowing&&!t.reading&&e.read(0)}function T(e){var t=e._readableState;for(R("flow",t.flowing);t.flowing&&null!==e.read(););}function N(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=C(e,t.buffer,t.decoder),n}function C(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?k(e,t):L(e,t),r}function k(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var s=n.data,o=e>s.length?s.length:e;if(o===s.length?i+=s:i+=s.slice(0,e),0===(e-=o)){o===s.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=s.slice(o));break}++r}return t.length-=r,i}function L(e,t){var n=j.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var s=r.data,o=e>s.length?s.length:e;if(s.copy(n,n.length-e,0,o),0===(e-=o)){o===s.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=s.slice(o));break}++i}return t.length-=i,n}function A(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,_(O,t,e))}function O(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function M(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var _=e(28);t.exports=a;var D,P=e(27);a.ReadableState=u;var H=(e(16).EventEmitter,function(e,t){return e.listeners(t).length}),B=e(38),j=e(44).Buffer,F=r.Uint8Array||function(){},I=e(12);I.inherits=e(25);var q=e(8),R=void 0;R=q&&q.debuglog?q.debuglog("stream"):function(){};var U,z=e(36),W=e(37);I.inherits(a,B);var X=["error","close","destroy","pause","resume"];Object.defineProperty(a.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),a.prototype.destroy=W.destroy,a.prototype._undestroy=W.undestroy,a.prototype._destroy=function(e,t){this.push(null),t(e)},a.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=j.from(e,t),t=""),n=!0),f(this,e,t,!1,n)},a.prototype.unshift=function(e){return f(this,e,null,!0,!1)},a.prototype.isPaused=function(){return!1===this._readableState.flowing},a.prototype.setEncoding=function(t){return U||(U=e(47).StringDecoder),this._readableState.decoder=new U(t),this._readableState.encoding=t,this};var V=8388608;a.prototype.read=function(e){R("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return R("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?A(this):m(this),null;if(0===(e=d(e,t))&&t.ended)return 0===t.length&&A(this),null;var r=t.needReadable;R("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,R("length less than watermark",r)),t.ended||t.reading?(r=!1,R("reading or ended",r)):r&&(R("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=d(n,t)));var i;return i=e>0?N(e,t):null,null===i?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&A(this)),null!==i&&this.emit("data",i),i},a.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},a.prototype.pipe=function(e,t){function r(e,t){R("onunpipe"),e===h&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,s())}function i(){R("onend"),e.end()}function s(){R("cleanup"),e.removeListener("close",f),e.removeListener("finish",l),e.removeListener("drain",m),e.removeListener("error",a),e.removeListener("unpipe",r),h.removeListener("end",i),h.removeListener("end",c),h.removeListener("data",u),g=!0,!p.awaitDrain||e._writableState&&!e._writableState.needDrain||m()}function u(t){R("ondata"),y=!1,!1!==e.write(t)||y||((1===p.pipesCount&&p.pipes===e||p.pipesCount>1&&-1!==M(p.pipes,e))&&!g&&(R("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,y=!0),h.pause())}function a(t){R("onerror",t),c(),e.removeListener("error",a),0===H(e,"error")&&e.emit("error",t)}function f(){e.removeListener("finish",l),c()}function l(){R("onfinish"),e.removeListener("close",f),c()}function c(){R("unpipe"),h.unpipe(e)}var h=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=e;break;case 1:p.pipes=[p.pipes,e];break;default:p.pipes.push(e)}p.pipesCount+=1,R("pipe count=%d opts=%j",p.pipesCount,t);var d=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr,v=d?i:c;p.endEmitted?_(v):h.once("end",v),e.on("unpipe",r);var m=w(h);e.on("drain",m);var g=!1,y=!1;return h.on("data",u),o(e,"error",a),e.once("close",f),e.once("finish",l),e.emit("pipe",h),p.flowing||(R("pipe resume"),h.resume()),e},a.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)r[s].emit("unpipe",this,n);return this}var o=M(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},a.prototype.on=function(e,t){var n=B.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&m(this):_(E,this))}return n},a.prototype.addListener=a.prototype.on,a.prototype.resume=function(){var e=this._readableState;return e.flowing||(R("resume"),e.flowing=!0,S(this,e)),this},a.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this},a.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(R("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(R("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length))r.push(i)||(n=!0,e.pause())});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<X.length;s++)e.on(X[s],r.emit.bind(r,X[s]));return r._read=function(t){R("wrapped _read",t),n&&(n=!1,e.resume())},r},a._fromList=N}).call(this,e(29),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{12:12,16:16,25:25,27:27,28:28,29:29,31:31,36:36,37:37,38:38,44:44,47:47,8:8}],34:[function(e,t,n){"use strict";function r(e){this.afterTransform=function(t,n){return i(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n),i(t);var s=e._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&e._read(s.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);u.call(this,e),this._transformState=new r(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,n){o(t,e,n)}):o(t)})}function o(e,t,n){if(t)return e.emit("error",t);null!==n&&void 0!==n&&e.push(n);var r=e._writableState,i=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=s;var u=e(31),a=e(12);a.inherits=e(25),a.inherits(s,u),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},s.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},s.prototype._destroy=function(e,t){var n=this;u.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},{12:12,25:25,31:31}],35:[function(e,t,n){(function(n,r){"use strict";function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){C(t,e)}}function s(e){return D.from(e)}function o(e){return D.isBuffer(e)||e instanceof P}function u(){}function a(t,n){L=L||e(31),t=t||{},this.objectMode=!!t.objectMode,n instanceof L&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,s=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){g(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function f(t){if(L=L||e(31),!(B.call(f,this)||this instanceof L))return new f(t);this._writableState=new a(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),_.call(this)}function l(e,t){var n=new Error("write after end");e.emit("error",n),k(t,n)}function c(e,t,n,r){var i=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),k(r,s),i=!1),i}function h(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=D.from(t,n)),t}function p(e,t,n,r,i,s){if(!n){var o=h(t,r,i);r!==o&&(n=!0,i="buffer",r=o)}var u=t.objectMode?1:r.length;t.length+=u;var a=t.length<t.highWaterMark;if(a||(t.needDrain=!0),t.writing||t.corked){var f=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:s,next:null},f?f.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else d(e,t,!1,u,r,i,s);return a}function d(e,t,n,r,i,s,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function v(e,t,n,r,i){--t.pendingcb,n?(k(i,r),k(T,e,t),e._writableState.errorEmitted=!0
,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),T(e,t))}function m(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function g(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(m(n),t)v(e,n,r,t,i);else{var s=E(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||w(e,n),r?A(y,e,n,s,i):y(e,n,s,i)}}function y(e,t,n,r){n||b(e,t),t.pendingcb--,r(),T(e,t)}function b(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function w(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,s=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var u=0,a=!0;n;)s[u]=n,n.isBuf||(a=!1),n=n.next,u+=1;s.allBuffers=a,d(e,t,!0,t.length,s,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new i(t)}else{for(;n;){var f=n.chunk,l=n.encoding,c=n.callback;if(d(e,t,!1,t.objectMode?1:f.length,f,l,c),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function E(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function S(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),T(e,t)})}function x(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,k(S,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function T(e,t){var n=E(t);return n&&(x(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function N(e,t,n){t.ending=!0,T(e,t),n&&(t.finished?k(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function C(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var k=e(28);t.exports=f;var L,A=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?setImmediate:k;f.WritableState=a;var O=e(12);O.inherits=e(25);var M={deprecate:e(48)},_=e(38),D=e(44).Buffer,P=r.Uint8Array||function(){},H=e(37);O.inherits(f,_),a.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(a.prototype,"buffer",{get:M.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var B;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(B=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,Symbol.hasInstance,{value:function(e){return!!B.call(this,e)||e&&e._writableState instanceof a}})):B=function(e){return e instanceof this},f.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},f.prototype.write=function(e,t,n){var r=this._writableState,i=!1,a=o(e)&&!r.objectMode;return a&&!D.isBuffer(e)&&(e=s(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=u),r.ended?l(this,n):(a||c(this,r,e,n))&&(r.pendingcb++,i=p(this,r,a,e,t,n)),i},f.prototype.cork=function(){this._writableState.corked++},f.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},f.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1)return this._writableState.defaultEncoding=e,this;throw new TypeError("Unknown encoding: "+e)},f.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},f.prototype._writev=null,f.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||N(this,r,n)},Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),f.prototype.destroy=H.destroy,f.prototype._undestroy=H.undestroy,f.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e(29),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{12:12,25:25,28:28,29:29,31:31,37:37,38:38,44:44,48:48}],36:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){e.copy(t,n)}var s=e(44).Buffer;t.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return s.alloc(0);if(1===this.length)return this.head.data;for(var t=s.allocUnsafe(e>>>0),n=this.head,r=0;n;)i(n.data,t,r),r+=n.data.length,n=n.next;return t},e}()},{44:44}],37:[function(e,t,n){"use strict";function r(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;if(r||i)return void (t?t(e):!e||this._writableState&&this._writableState.errorEmitted||o(s,this,e));this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(o(s,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function s(e,t){e.emit("error",t)}var o=e(28);t.exports={destroy:r,undestroy:i}},{28:28}],38:[function(e,t,n){t.exports=e(16).EventEmitter},{16:16}],39:[function(e,t,n){t.exports=e(40).PassThrough},{40:40}],40:[function(e,t,n){n=t.exports=e(33),n.Stream=n,n.Readable=n,n.Writable=e(35),n.Duplex=e(31),n.Transform=e(34),n.PassThrough=e(32)},{31:31,32:32,33:33,34:34,35:35}],41:[function(e,t,n){t.exports=e(40).Transform},{40:40}],42:[function(e,t,n){t.exports=e(35)},{35:35}],43:[function(e,t,n){var r=n.decimalAdjust=function(e,t,n){return void 0===n||0==+n?Math[e](t):(t=+t,n=+n,isNaN(t)||"number"!=typeof n||n%1!=0?NaN:(t=t.toString().split("e"),t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-n:-n))),t=t.toString().split("e"),+(t[0]+"e"+(t[1]?+t[1]+n:n))))};t.exports={round10:function(e,t){return r("round",e,t)},floor10:function(e,t){return r("floor",e,t)},ceil10:function(e,t){return r("ceil",e,t)}},t.exports.polyfill=function(){Math.round10||(Math.round10=t.exports.round10),Math.floor10||(Math.floor10=t.exports.floor10),Math.ceil10||(Math.ceil10=t.exports.ceil10)}},{}],44:[function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return o(e,t,n)}var s=e(10),o=s.Buffer;o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=s:(r(s,n),n.Buffer=i),r(o,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=o(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s.SlowBuffer(e)}},{10:10}],45:[function(e,t,n){(function(t){!function(n){function r(e,t){if(!(this instanceof r))return new r(e,t);var i=this;s(i),i.q=i.c="",i.bufferCheckPosition=n.MAX_BUFFER_LENGTH,i.opt=t||{},i.opt.lowercase=i.opt.lowercase||i.opt.lowercasetags,i.looseCase=i.opt.lowercase?"toLowerCase":"toUpperCase",i.tags=[],i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.strict=!!e,i.noscript=!!e||!!i.opt.noscript,i.state=$.BEGIN,i.strictEntities=i.opt.strictEntities,i.ENTITIES=i.strictEntities?Object.create(n.XML_ENTITIES):Object.create(n.ENTITIES),i.attribList=[],i.opt.xmlns&&(i.ns=Object.create(U)),i.trackPosition=!1!==i.opt.position,i.trackPosition&&(i.position=i.line=i.column=0),p(i,"onready")}function i(e){for(var t=Math.max(n.MAX_BUFFER_LENGTH,10),r=0,i=0,s=A.length;i<s;i++){var o=e[A[i]].length;if(o>t)switch(A[i]){case"textNode":v(e);break;case"cdata":d(e,"oncdata",e.cdata),e.cdata="";break;case"script":d(e,"onscript",e.script),e.script="";break;default:g(e,"Max buffer length exceeded: "+A[i])}r=Math.max(r,o)}var u=n.MAX_BUFFER_LENGTH-r;e.bufferCheckPosition=u+e.position}function s(e){for(var t=0,n=A.length;t<n;t++)e[A[t]]=""}function o(e){v(e),""!==e.cdata&&(d(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(d(e,"onscript",e.script),e.script="")}function u(e,t){return new a(e,t)}function a(e,t){if(!(this instanceof a))return new a(e,t);O.apply(this),this._parser=new r(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,_.forEach(function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t,t;n.on(e,t)},enumerable:!0,configurable:!1})})}function f(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}function l(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function c(e,t){return l(e)?!!t.match(e):e[t]}function h(e,t){return!c(e,t)}function p(e,t,n){e[t]&&e[t](n)}function d(e,t,n){e.textNode&&v(e),p(e,t,n)}function v(e){e.textNode=m(e.opt,e.textNode),e.textNode&&p(e,"ontext",e.textNode),e.textNode=""}function m(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function g(e,t){return v(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,p(e,"onerror",t),e}function y(e){return e.sawRoot&&!e.closedRoot&&b(e,"Unclosed root tag"),e.state!==$.BEGIN&&e.state!==$.BEGIN_WHITESPACE&&e.state!==$.TEXT&&g(e,"Unexpected end"),v(e),e.c="",e.closed=!0,p(e,"onend"),r.call(e,e.strict,e.opt),e}function b(e,t){if(!("object"==typeof e&&e instanceof r))throw new Error("bad call to strictFail");e.strict&&g(e,t)}function w(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,d(e,"onopentagstart",n)}function E(e,t){var n=e.indexOf(":"),r=n<0?["",e]:e.split(":"),i=r[0],s=r[1];return t&&"xmlns"===e&&(i="xmlns",s=""),{prefix:i,local:s}}function S(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))return void (e.attribName=e.attribValue="");if(e.opt.xmlns){var t=E(e.attribName,!0),n=t.prefix,r=t.local;if("xmlns"===n)if("xml"===r&&e.attribValue!==q)b(e,"xml: prefix must be bound to "+q+"\nActual: "+e.attribValue);else if("xmlns"===r&&e.attribValue!==R)b(e,"xmlns: prefix must be bound to "+R+"\nActual: "+e.attribValue);else{var i=e.tag,s=e.tags[e.tags.length-1]||e;i.ns===s.ns&&(i.ns=Object.create(s.ns)),i.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,d(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}function x(e,t){if(e.opt.xmlns){var n=e.tag,r=E(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(b(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach(function(t){d(e,"onopennamespace",{prefix:t,uri:n.ns[t]})});for(var s=0,o=e.attribList.length;s<o;s++){var u=e.attribList[s],a=u[0],f=u[1],l=E(a,!0),c=l.prefix,h=l.local,p=""===c?"":n.ns[c]||"",v={name:a,value:f,prefix:c,local:h,uri:p};c&&"xmlns"!==c&&!p&&(b(e,"Unbound namespace prefix: "+JSON.stringify(c)),v.uri=c),e.tag.attributes[a]=v,d(e,"onattribute",v)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),d(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=$.TEXT:e.state=$.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function T(e){if(!e.tagName)return b(e,"Weird empty close tag."),e.textNode+="</>",void (e.state=$.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void (e.state=$.SCRIPT);d(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var r=n;t--;){if(e.tags[t].name===r)break;b(e,"Unexpected close tag")}if(t<0)return b(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void (e.state=$.TEXT);e.tagName=n;for(var i=e.tags.length;i-->t;){var s=e.tag=e.tags.pop();e.tagName=e.tag.name,d(e,"onclosetag",e.tagName);var o={};for(var u in s.ns)o[u]=s.ns[u];var a=e.tags[e.tags.length-1]||e;e.opt.xmlns&&s.ns!==a.ns&&Object.keys(s.ns).forEach(function(t){var n=s.ns[t];d(e,"onclosenamespace",{prefix:t,uri:n})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=$.TEXT}function N(e){var t,n=e.entity,r=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[r]?e.ENTITIES[r]:(n=r,"#"===n.charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),t=parseInt(n,16),i=t.toString(16)):(n=n.slice(1),t=parseInt(n,10),i=t.toString(10))),n=n.replace(/^0+/,""),i.toLowerCase()!==n?(b(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function C(e,t){"<"===t?(e.state=$.OPEN_WAKA,e.startTagPosition=e.position):h(D,t)&&(b(e,"Non-whitespace before first tag."),e.textNode=t,e.state=$.TEXT)}function k(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}function L(e){var t=this;if(this.error)throw this.error;if(t.closed)return g(t,"Cannot write after close. Assign an onready handler.");if(null===e)return y(t);"object"==typeof e&&(e=e.toString());for(var n=0,r="";;){if(r=k(e,n++),t.c=r,!r)break;switch(t.trackPosition&&(t.position++,"\n"===r?(t.line++,t.column=0):t.column++),t.state){case $.BEGIN:if(t.state=$.BEGIN_WHITESPACE,""===r)continue;C(t,r);continue;case $.BEGIN_WHITESPACE:C(t,r);continue;case $.TEXT:if(t.sawRoot&&!t.closedRoot){for(var s=n-1;r&&"<"!==r&&"&"!==r;)(r=k(e,n++))&&t.trackPosition&&(t.position++,"\n"===r?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(s,n-1)}"<"!==r||t.sawRoot&&t.closedRoot&&!t.strict?(!h(D,r)||t.sawRoot&&!t.closedRoot||b(t,"Text data outside of root node."),"&"===r?t.state=$.TEXT_ENTITY:t.textNode+=r):(t.state=$.OPEN_WAKA,t.startTagPosition=t.position);continue;case $.SCRIPT:"<"===r?t.state=$.SCRIPT_ENDING:t.script+=r;continue;case $.SCRIPT_ENDING:"/"===r?t.state=$.CLOSE_TAG:(t.script+="<"+r,t.state=$.SCRIPT);continue;case $.OPEN_WAKA:if("!"===r)t.state=$.SGML_DECL,t.sgmlDecl="";else if(!c(D,r))if(c(z,r))t.state=$.OPEN_TAG,t.tagName=r;else if("/"===r)t.state=$.CLOSE_TAG,t.tagName="";else if("?"===r)t.state=$.PROC_INST,t.procInstName=t.procInstBody="";else{if(b(t,"Unencoded <"),t.startTagPosition+1<t.position){var o=t.position-t.startTagPosition;r=(new Array(o)).join(" ")+r}t.textNode+="<"+r,t.state=$.TEXT}continue;case $.SGML_DECL:(t.sgmlDecl+r).toUpperCase()===F?(d(t,"onopencdata"),t.state=$.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+r==="--"?(t.state=$.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+r).toUpperCase()===I?(t.state=$.DOCTYPE,(t.doctype||t.sawRoot)&&b(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===r?(d(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=$.TEXT):c(B,r)?(t.state=$.SGML_DECL_QUOTED,t.sgmlDecl+=r):t.sgmlDecl+=r;continue;case $.SGML_DECL_QUOTED:r===t.q&&(t.state=$.SGML_DECL,t.q=""),t.sgmlDecl+=r;continue;case $.DOCTYPE:">"===r?(t.state=$.TEXT,d(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=r,"["===r?t.state=$.DOCTYPE_DTD:c(B,r)&&(t.state=$.DOCTYPE_QUOTED,t.q=r));continue;case $.DOCTYPE_QUOTED:t.doctype+=r,r===t.q&&(t.q="",t.state=$.DOCTYPE);continue;case $.DOCTYPE_DTD:t.doctype+=r,"]"===r?t.state=$.DOCTYPE:c(B,r)&&(t.state=$.DOCTYPE_DTD_QUOTED,t.q=r);continue;case $.DOCTYPE_DTD_QUOTED:t.doctype+=r,r===t.q&&(t.state=$.DOCTYPE_DTD,t.q="");continue;case $.COMMENT:"-"===r?t.state=$.COMMENT_ENDING:t.comment+=r;continue;case $.COMMENT_ENDING:"-"===r?(t.state=$.COMMENT_ENDED,t.comment=m(t.opt,t.comment),t.comment&&d(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+r,t.state=$.COMMENT);continue;case $.COMMENT_ENDED:">"!==r?(b(t,"Malformed comment"),t.comment+="--"+r,t.state=$.COMMENT):t.state=$.TEXT;continue;case $.CDATA:"]"===r?t.state=$.CDATA_ENDING:t.cdata+=r;continue;case $.CDATA_ENDING:"]"===r?t.state=$.CDATA_ENDING_2:(t.cdata+="]"+r,t.state=$.CDATA);continue;case $.CDATA_ENDING_2:">"===r?(t.cdata&&d(t,"oncdata",t.cdata),d(t,"onclosecdata"),t.cdata="",t.state=$.TEXT):"]"===r?t.cdata+="]":(t.cdata+="]]"+r,t.state=$.CDATA);continue;case $.PROC_INST:"?"===r?t.state=$.PROC_INST_ENDING:c(D,r)?t.state=$.PROC_INST_BODY:t.procInstName+=r;continue;case $.PROC_INST_BODY:if(!t.procInstBody&&c(D,r))continue;"?"===r?t.state=$.PROC_INST_ENDING:t.procInstBody+=r;continue;case $.PROC_INST_ENDING:">"===r?(d(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=$.TEXT):(t.procInstBody+="?"+r,t.state=$.PROC_INST_BODY);continue;case $.OPEN_TAG:c(W,r)?t.tagName+=r:(w(t),">"===r?x(t):"/"===r?t.state=$.OPEN_TAG_SLASH:(h(D,r)&&b(t,"Invalid character in tag name"),t.state=$.ATTRIB));continue;case $.OPEN_TAG_SLASH:">"===r?(x(t,!0),T(t)):(b(t,"Forward-slash in opening tag not followed by >"),t.state=$.ATTRIB);continue;case $.ATTRIB:if(c(D,r))continue;">"===r?x(t):"/"===r?t.state=$.OPEN_TAG_SLASH:c(z,r)?(t.attribName=r,t.attribValue="",t.state=$.ATTRIB_NAME):b(t,"Invalid attribute name");continue;case $.ATTRIB_NAME:"="===r?t.state=$.ATTRIB_VALUE:">"===r?(b(t,"Attribute without value"),t.attribValue=t.attribName,S(t),x(t)):c(D,r)?t.state=$.ATTRIB_NAME_SAW_WHITE:c(W,r)?t.attribName+=r:b(t,"Invalid attribute name");continue;case $.ATTRIB_NAME_SAW_WHITE:if("="===r)t.state=$.ATTRIB_VALUE;else{if(c(D,r))continue;b(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",d(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===r?x(t):c(z,r)?(t.attribName=r,t.state=$.ATTRIB_NAME):(b(t,"Invalid attribute name"),t.state=$.ATTRIB)}continue;case $.ATTRIB_VALUE:if(c(D,r))continue;c(B,r)?(t.q=r,t.state=$.ATTRIB_VALUE_QUOTED):(b(t,"Unquoted attribute value"),t.state=$.ATTRIB_VALUE_UNQUOTED,t.attribValue=r);continue;case $.ATTRIB_VALUE_QUOTED:if(r!==t.q){"&"===r?t.state=$.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=r;continue}S(t),t.q="",t.state=$.ATTRIB_VALUE_CLOSED;continue;case $.ATTRIB_VALUE_CLOSED:c(D,r)?t.state=$.ATTRIB:">"===r?x(t):"/"===r?t.state=$.OPEN_TAG_SLASH:c(z,r)?(b(t,"No whitespace between attributes"),t.attribName=r,t.attribValue="",t.state=$.ATTRIB_NAME):b(t,"Invalid attribute name");continue;case $.ATTRIB_VALUE_UNQUOTED:if(h(j,r)){"&"===r?t.state=$.ATTRIB_VALUE_ENTITY_U:t.attribValue+=r;continue}S(t),">"===r?x(t):t.state=$.ATTRIB;continue;case $.CLOSE_TAG:if(t.tagName)">"===r?T(t):c(W,r)?t.tagName+=r:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=$.SCRIPT):(h(D,r)&&b(t,"Invalid tagname in closing tag"),t.state=$.CLOSE_TAG_SAW_WHITE);else{if(c(D,r))continue;h(z,r)?t.script?(t.script+="</"+r,t.state=$.SCRIPT):b(t,"Invalid tagname in closing tag."):t.tagName=r}continue;case $.CLOSE_TAG_SAW_WHITE:if(c(D,r))continue;">"===r?T(t):b(t,"Invalid characters in closing tag");continue;case $.TEXT_ENTITY:case $.ATTRIB_VALUE_ENTITY_Q:case $.ATTRIB_VALUE_ENTITY_U:var u,a;switch(t.state){case $.TEXT_ENTITY:u=$.TEXT,a="textNode";break;case $.ATTRIB_VALUE_ENTITY_Q:u=$.ATTRIB_VALUE_QUOTED,a="attribValue";break;case $.ATTRIB_VALUE_ENTITY_U:u=$.ATTRIB_VALUE_UNQUOTED,a="attribValue"}";"===r?(t[a]+=N(t),t.entity="",t.state=u):c(t.entity.length?V:X,r)?t.entity+=r:(b(t,"Invalid character in entity name"),t[a]+="&"+t.entity+r,t.entity="",t.state=u);continue;default:throw new Error(t,"Unknown state: "+t.state)}}return t.position>=t.bufferCheckPosition&&i(t),t}n.parser=function(e,t){return new r(e,t)},n.SAXParser=r,n.SAXStream=a,n.createStream=u,n.MAX_BUFFER_LENGTH=65536;var A=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),r.prototype={end:function(){y(this)},write:L,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var O;try{O=e(46).Stream}catch(M){O=function(){}}var _=n.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});a.prototype=Object.create(O.prototype,{constructor:{value:a}}),a.prototype.write=function(n){if("function"==typeof t&&"function"==typeof t.isBuffer&&t.isBuffer(n)){if(!this._decoder){var r=e(9).StringDecoder;this._decoder=new r("utf8")}n=this._decoder.write(n)}return this._parser.write(n.toString()),this.emit("data",n),!0},a.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},a.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===_.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),O.prototype.on.call(n,e,t)};var D="\r\n   ",P="0124356789",H="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",B="'\"",j=D+">",F="[CDATA[",I="DOCTYPE",q="http://www.w3.org/XML/1998/namespace",R="http://www.w3.org/2000/xmlns/",U={xml:q,xmlns:R};D=f(D),P=f(P),H=f(H);var z=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,W=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,X=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,V=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;B=f(B),j=f(j);var $=0;n.STATE={BEGIN:$++,BEGIN_WHITESPACE:$++,TEXT:$++,TEXT_ENTITY:$++,OPEN_WAKA:$++,SGML_DECL:$++,SGML_DECL_QUOTED:$++,DOCTYPE:$++,DOCTYPE_QUOTED:$++,DOCTYPE_DTD:$++,DOCTYPE_DTD_QUOTED:$++,COMMENT_STARTING:$++,COMMENT:$++,COMMENT_ENDING:$++,COMMENT_ENDED:$++,CDATA:$++,CDATA_ENDING:$++,CDATA_ENDING_2:$++,PROC_INST:$++,PROC_INST_BODY:$++,PROC_INST_ENDING:$++,OPEN_TAG:$++,OPEN_TAG_SLASH:$++,ATTRIB:$++,ATTRIB_NAME:$++,ATTRIB_NAME_SAW_WHITE:$++,ATTRIB_VALUE:$++,ATTRIB_VALUE_QUOTED:$++,ATTRIB_VALUE_CLOSED:$++,ATTRIB_VALUE_UNQUOTED:$++,ATTRIB_VALUE_ENTITY_Q:$++,ATTRIB_VALUE_ENTITY_U:$++,CLOSE_TAG:$++,CLOSE_TAG_SAW_WHITE:$++,SCRIPT:$++,SCRIPT_ENDING:$++},n.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach(function(e){var t=n.ENTITIES[e],r="number"==typeof t?String.fromCharCode(t):t;n.ENTITIES[e]=r});for(var J in n.STATE)n.STATE[n.STATE[J]]=J;$=n.STATE,String.fromCodePoint||function(){var e=String.fromCharCode,t=Math.floor,n=function(){var n,r,i=16384,s=[],o=-1,u=arguments.length;if(!u)return"";for(var a="";++o<u;){var f=Number(arguments[o]);if(!isFinite(f)||f<0||f>1114111||t(f)!==f)throw RangeError("Invalid code point: "+f);f<=65535?s.push(f):(f-=65536,n=55296+(f>>10),r=f%1024+56320,s.push(n,r)),(o+1===u||s.length>i)&&(a+=e.apply(null,s),s.length=0)}return a};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:n,configurable:!0,writable:!0}):String.fromCodePoint=n}()}(void 0===n?this.sax={}:n)}).call(this,e(10).Buffer)},{10:10,46:46,9:9}],46:[function(e,t,n){function r(){i.call(this)}t.exports=r;var i=e(16).EventEmitter;e(25)(r,i),r.Readable=e(40),r.Writable=e(42),r.Duplex=e(30),r.Transform=e(41),r.PassThrough=e(39),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&f.pause&&f.pause()}function r(){f.readable&&f.resume&&f.resume()}function s(){l||(l=!0,e.end())}function o(){l||(l=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(a(),0===i.listenerCount(this,"error"))throw e}function a(){f.removeListener("data",n),e.removeListener("drain",r),f.removeListener("end",s),f.removeListener("close",o),f.removeListener("error",u),e.removeListener("error",u),f.removeListener("end",a),f.removeListener("close",a),e.removeListener("close",a)}var f=this;f.on("data",n),e.on("drain",r),e._isStdio||t&&!1===t.end||(f.on("end",s),f.on("close",o));var l=!1;return f.on("error",u),e.on("error",u),f.on("end",a),f.on("close",a),e.on("close",a),e.emit("pipe",f),e}},{16:16,25:25,30:30,39:39,40:40,41:41,42:42}],47:[function(e,t,n){"use strict";function r(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function i(e){var t=r(e);if("string"==typeof t||y.isEncoding!==b&&!!b(e))return t||e;throw new Error("Unknown encoding: "+e)}function s(e){this.encoding=i(e);var t;switch(this.encoding){case"utf16le":this.text=h,this.end=p,t=4;break;case"utf8":this.fillLast=f,t=4;break;case"base64":this.text=d,this.end=v,t=3;break;default:return this.write=m,void (this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=y.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}function u(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n?0:(i=o(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n?0:(i=o(t[r]),i>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0)}function a(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"".repeat(n);if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"".repeat(n+1);if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"".repeat(n+2)}}function f(e){var t=this.lastTotal-this.lastNeed,n=a(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void (this.lastNeed-=e.length))}function l(e,t){var n=u(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"".repeat(this.lastTotal-this.lastNeed):t}function h(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function p(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function d(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function v(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function m(e){return e.toString(this.encoding)}function g(e){return e&&e.length?this.write(e):""}var y=e(44).Buffer,b=y.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};n.StringDecoder=s,s.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},s.prototype.end=c,s.prototype.text=l,s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{44:44}],48:[function(e,t,n){(function(e){function n(e,t){function n(){if(!i){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(r("noDeprecation"))return e;var i=!1;return n}function r(t){try{if(!e.localStorage)return!1}catch(n){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],49:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?
e:{"default":e}}function i(){function e(){c=!0,h=!0,p=!1,d=(new Date).getTime()}function t(e){h=e}function n(e){p=e}function r(e){c=e}function i(){return c}function s(){var e="",t=null;h&&(t=(new Date).getTime(),e+="["+(t-d)+"]"),p&&this&&this.getClassName&&(e+="["+this.getClassName()+"]",this.getType&&(e+="["+this.getType()+"]")),e.length>0&&(e+=" "),Array.apply(null,arguments).forEach(function(t){e+=t+" "}),c&&console.log(e),f.trigger(a.default.LOG,{message:e})}var u=this.context,f=(0,o.default)(u).getInstance(),l=void 0,c=void 0,h=void 0,p=void 0,d=void 0;return l={log:s,setLogTimestampVisible:t,setCalleeNameVisible:n,setLogToBrowserConsole:r,getLogToBrowserConsole:i},e(),l}Object.defineProperty(n,"__esModule",{value:!0});var s=e(50),o=r(s),u=e(54),a=r(u),f=e(51),l=r(f);i.__dashjs_factory_name="Debug",n.default=l.default.getSingletonFactory(i),t.exports=n.default},{50:50,51:51,54:54}],50:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t,n){var i=arguments.length<=3||void 0===arguments[3]?u:arguments[3];if(!e)throw new Error("event type cannot be null or undefined");if(!t||"function"!=typeof t)throw new Error("listener must be a function: "+t);if(!(r(e,t,n)>=0)){s[e]=s[e]||[];var o={callback:t,scope:n,priority:i};s[e].some(function(t,n){if(t&&i>t.priority)return s[e].splice(n,0,o),!0})||s[e].push(o)}}function t(e,t,n){if(e&&t&&s[e]){var i=r(e,t,n);i<0||(s[e][i]=null)}}function n(e,t){if(e&&s[e]){if(t=t||{},t.hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");t.type=e,s[e]=s[e].filter(function(e){return e}),s[e].forEach(function(e){return e&&e.callback.call(e.scope,t)})}}function r(e,t,n){var r=-1;return s[e]?(s[e].some(function(e,i){if(e&&e.callback===t&&(!n||n===e.scope))return r=i,!0}),r):r}function i(){s={}}var s={};return{on:e,off:t,trigger:n,reset:i}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s),u=0,a=5e3;i.__dashjs_factory_name="EventBus";var f=o.default.getSingletonFactory(i);f.EVENT_PRIORITY_LOW=u,f.EVENT_PRIORITY_HIGH=a,o.default.updateSingletonFactory(i.__dashjs_factory_name,f),n.default=f,t.exports=n.default},{51:51}],51:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t,n,r){var i=p(r);!i[e]&&t&&(i[e]={instance:t,override:n})}function t(e,t){for(var n in m){var r=m[n];if(r.context===e&&r.name===t)return r.instance}return null}function n(e,t,n){for(var r in m){var i=m[r];if(i.context===e&&i.name===t)return void (m[r].instance=n)}m.push({name:t,context:e,instance:n})}function r(e,t,n){for(var r in n)if(n[r].name===e)return void (n[r].factory=t);n.push({name:e,factory:t})}function i(e,t){for(var n in t)if(t[n].name===e)return t[n].factory;return null}function s(e,t,n){for(var r in n)if(n[r].name===e)return void (n[r].factory=t)}function o(e,t){s(e,t,y)}function u(e){return i(e,y)}function a(e){var t=i(e.__dashjs_factory_name,y);return t||(t=function(t){return void 0===t&&(t={}),{create:function(){return h(e.__dashjs_factory_name,e.apply({context:t},arguments),t,arguments)}}},r(e.__dashjs_factory_name,t,y)),t}function f(e,t){s(e,t,g)}function l(e){return i(e,g)}function c(e){var n=i(e.__dashjs_factory_name,g);return n||(n=function(n){var r=void 0;return void 0===n&&(n={}),{getInstance:function(){return r||(r=t(n,e.__dashjs_factory_name)),r||(r=h(e.__dashjs_factory_name,e.apply({context:n},arguments),n,arguments),m.push({name:e.__dashjs_factory_name,context:n,instance:r})),r}}},r(e.__dashjs_factory_name,n,g)),n}function h(e,t,n,r){t.getClassName=function(){return e};var i=p(n),s=i[e];if(s){var o=s.instance;if(!s.override)return o.apply({context:n,factory:d},r);o=o.apply({context:n,factory:d,parent:t},r);for(var u in o)t.hasOwnProperty(u)&&(t[u]=o[u])}return t}function p(e){var t=void 0;return v.forEach(function(n){n===e&&(t=n)}),t||(v.push(e),t=e),t}var d=void 0,v=[],m=[],g=[],y=[];return d={extend:e,getSingletonInstance:t,setSingletonInstance:n,getSingletonFactory:c,getSingletonFactoryByName:l,updateSingletonFactory:f,getClassFactory:a,getClassFactoryByName:u,updateClassFactory:o}}();n.default=r,t.exports=n.default},{}],52:[function(e,t,n){"use strict";function r(){return i}Object.defineProperty(n,"__esModule",{value:!0}),n.getVersionString=r;var i="2.6.5"},{}],53:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(e,t,n){for(var r=!0;r;){var i=e,s=t,o=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,s);if(void 0!==u){if("value"in u)return u.value;var a=u.get;if(void 0===a)return;return a.call(o)}var f=Object.getPrototypeOf(i);if(null===f)return;e=f,t=s,n=o,r=!0,u=f=void 0}},u=e(55),a=r(u),f=function(e){function t(){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.BYTES_APPENDED="bytesAppended",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.DATA_UPDATE_STARTED="dataUpdateStarted",this.INITIALIZATION_LOADED="initializationLoaded",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_REQUESTED="initRequested",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.LOADING_ABANDONED="loadingAborted",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.QUOTA_EXCEEDED="quotaExceeded",this.REPRESENTATION_UPDATED="representationUpdated",this.SEGMENTS_LOADED="segmentsLoaded",this.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",this.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SOURCEBUFFER_APPEND_COMPLETED="sourceBufferAppendCompleted",this.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_COMPLETED="streamCompleted",this.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",this.TIMED_TEXT_REQUESTED="timedTextRequested",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady"}return s(t,e),t}(a.default);n.default=f,t.exports=n.default},{55:55}],54:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(e,t,n){for(var r=!0;r;){var i=e,s=t,o=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,s);if(void 0!==u){if("value"in u)return u.value;var a=u.get;if(void 0===a)return;return a.call(o)}var f=Object.getPrototypeOf(i);if(null===f)return;e=f,t=s,n=o,r=!0,u=f=void 0}},u=e(53),a=r(u),f=function(e){function t(){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return s(t,e),t}(a.default),l=new f;n.default=l,t.exports=n.default},{53:53}],55:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(){r(this,e)}return i(e,[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,r=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}]),e}();n.default=s,t.exports=n.default},{}],56:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){j()}function t(e){e&&e.dashManifestModel&&(I=e.dashManifestModel)}function n(e,t){return t&&e?t.getRepresentationForQuality(e.quality):null}function r(e){return e&&e.streamInfo&&void 0!==e.streamInfo.id&&R[e.streamInfo.id]?R[e.streamInfo.id][e.index]:null}function i(e,t){for(var n=t.length,r=0;r<n;r++){var i=t[r];if(e.id===i.id)return i}return null}function s(e){var t=new a.default,n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],r=I.getRepresentationFor(e.index,n);return t.id=e.id,t.quality=e.index,t.bandwidth=I.getBandwidth(r),t.DVRWindow=e.segmentAvailabilityRange,t.fragmentDuration=e.segmentDuration||(e.segments&&e.segments.length>0?e.segments[0].duration:NaN),t.MSETimeOffset=e.MSETimeOffset,t.useCalculatedLiveEdgeTime=e.useCalculatedLiveEdgeTime,t.mediaInfo=u(e.adaptation),t}function u(e){var t=new l.default,n=e.period.mpd.manifest.Period_asArray[e.period.index].AdaptationSet_asArray[e.index],r=void 0;return t.id=e.id,t.index=e.index,t.type=e.type,t.streamInfo=p(e.period),t.representationCount=I.getRepresentationCount(n),t.lang=I.getLanguageForAdaptation(n),r=I.getViewpointForAdaptation(n),t.viewpoint=r?r.value:void 0,t.accessibility=I.getAccessibilityForAdaptation(n).map(function(e){var n=e.value,r=n;return e.schemeIdUri&&e.schemeIdUri.search("cea-608")>=0&&void 0!==w.default&&(r=n?"cea-608:"+n:"cea-608",t.embeddedCaptions=!0),r}),t.audioChannelConfiguration=I.getAudioChannelConfigurationForAdaptation(n).map(function(e){return e.value}),t.roles=I.getRolesForAdaptation(n).map(function(e){return e.value}),t.codec=I.getCodec(n),t.mimeType=I.getMimeType(n),t.contentProtection=I.getContentProtectionData(n),t.bitrateList=I.getBitrateListForAdaptation(n),t.contentProtection&&t.contentProtection.forEach(function(e){e.KID=I.getKID(e)}),t.isText=I.getIsTextTrack(t.mimeType),t}function f(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=o.default.EMBEDDED_TEXT,e.codec="cea-608-in-SEI",e.isText=!0,e.isEmbedded=!0,e.lang=t+" "+n,e.roles=["caption"]}function c(e){e.type=o.default.IMAGE}function p(e){var t=new h.default;return t.id=e.id,t.index=e.index,t.start=e.start,t.duration=e.duration,t.manifestInfo=v(e.mpd),t.isLast=1===e.mpd.manifest.Period_asArray.length||Math.abs(t.start+t.duration-t.manifestInfo.duration)<1,t}function v(e){var t=new d.default;return t.DVRWindowSize=e.timeShiftBufferDepth,t.loadedTime=e.manifest.loadedTime,t.availableFrom=e.availabilityStartTime,t.minBufferTime=e.manifest.minBufferTime,t.maxFragmentDuration=e.maxSegmentDuration,t.duration=I.getDuration(e.manifest),t.isDynamic=I.getIsDynamic(e.manifest),t}function g(e,t){if(0===q.length)return null;var n=q[0].mpd.manifest,r=I.getAdaptationForType(n,e.index,t,e);if(!r)return null;var s=i(e,q),o=s.id,a=I.getIndexForAdaptation(r,n,e.index);return R[o]=R[o]||I.getAdaptationsForPeriod(s),u(R[o][a])}function y(e,t,n){var r=q,s=n,a=[],l=void 0,h=void 0,p=void 0,d=void 0,v=void 0,m=void 0;if(s){b();var g=I.getMpd(s);r=I.getRegularPeriods(g)}else{if(!(q.length>0))return a;s=q[0].mpd.manifest}var y=i(e,r),w=y.id,E=I.getAdaptationsForType(s,e.index,t!==o.default.EMBEDDED_TEXT?t:o.default.VIDEO);if(!E)return a;for(R[w]=R[w]||I.getAdaptationsForPeriod(y),d=0,m=E.length;d<m;d++)if(l=E[d],p=I.getIndexForAdaptation(l,s,e.index),h=u(R[w][p]),t===o.default.EMBEDDED_TEXT){var S=h.accessibility.length;for(v=0;v<S;v++)if(h){var x=h.accessibility[v];if(0===x.indexOf("cea-608:")){var T=x.substring(8),N=T.split(";");if("CC"===N[0].substring(0,2))for(v=0;v<N.length;v++)h||(h=u.call(this,R[w][p])),f(h,N[v].substring(0,3),N[v].substring(4)),a.push(h),h=null;else for(v=0;v<N.length;v++)h||(h=u.call(this,R[w][p])),f(h,"CC"+(v+1),N[v]),a.push(h),h=null}else 0===x.indexOf("cea-608")&&(f(h,o.default.CC1,"eng"),a.push(h),h=null)}}else t===o.default.IMAGE?(c(h),a.push(h),h=null):h&&a.push(h);return a}function b(){if(!I||!I.hasOwnProperty("getMpd")||!I.hasOwnProperty("getRegularPeriods"))throw new Error("setConfig function has to be called previously")}function E(e){if(!e)return null;b();var t=I.getMpd(e);q=I.getRegularPeriods(t),R={}}function S(e){var t=[],n=q;if(e){b();var r=I.getMpd(e);n=I.getRegularPeriods(r)}for(var i=0;i<n.length;i++)t.push(p(n[i]));return t}function x(e){if(!(e&&e.hasOwnProperty("getRepresentationController")&&e.hasOwnProperty("getIndexHandler")&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getType")&&e.hasOwnProperty("getStreamInfo")))throw new Error("streamProcessor parameter is missing or malformed!")}function T(e){if(!e||!e.hasOwnProperty("getRepresentationForQuality")||!e.hasOwnProperty("getCurrentRepresentation"))throw new Error("representationController parameter is missing or malformed!")}function N(e){if(null===e||isNaN(e)||e%1!=0)throw new Error("quality argument is not an integer")}function C(e,t){var n=void 0,r=void 0,i=void 0;return x(e),N(t),n=e.getRepresentationController(),i=e.getIndexHandler(),r=n?n.getRepresentationForQuality(t):null,i?i.getInitRequest(r):null}function k(e,t){var r=void 0,i=void 0,s=void 0;return x(e),r=e.getRepresentationController(),i=n(t,r),s=e.getIndexHandler(),s?s.getNextSegmentRequest(i):null}function L(e,t,r,i){var s=void 0,o=void 0,u=void 0;return x(e),s=e.getRepresentationController(),o=n(t,s),u=e.getIndexHandler(),u?u.getSegmentRequestForTime(o,r,i):null}function A(e,t,r){var i=void 0,s=void 0,o=void 0;return x(e),i=e.getRepresentationController(),s=n(t,i),o=e.getIndexHandler(),o?o.generateSegmentRequestForTime(s,r):null}function O(e){x(e);var t=e.getIndexHandler();return t?t.getCurrentTime():NaN}function M(e,t){x(e);var n=e.getIndexHandler();n&&n.setCurrentTime(t)}function _(e){x(e);var t=i(e.getStreamInfo(),q),n=e.getMediaInfo(),s=r(n),o=e.getType(),u=void 0,a=void 0;u=n?n.id:null,q.length>0&&(a=u?I.getAdaptationForId(u,q[0].mpd.manifest,t.index):I.getAdaptationForIndex(n.index,q[0].mpd.manifest,t.index),e.getRepresentationController().updateData(a,s,o))}function D(e,t){T(e),N(t);var n=e.getRepresentationForQuality(t);return n?s(n):null}function P(e){T(e);var t=e.getCurrentRepresentation();return t?s(t):null}function H(e,t,n){if(!e||!t)return null;var r=new m.default,i=e.scheme_id_uri,s=e.value,o=e.timescale,u=e.presentation_time_delta,a=e.event_duration,f=e.id,l=e.message_data,c=n*o+u;return t[i]?(r.eventStream=t[i],r.eventStream.value=s,r.eventStream.timescale=o,r.duration=a,r.id=f,r.presentationTime=c,r.messageData=l,r.presentationTimeDelta=u,r):null}function B(e,t){var s=[];if(0===q.length)return s;var o=q[0].mpd.manifest;return e instanceof h.default?s=I.getEventsForPeriod(i(e,q)):e instanceof l.default?s=I.getEventStreamForAdaptationSet(o,r(e)):e instanceof a.default&&(s=I.getEventStreamForRepresentation(o,n(e,t.getRepresentationController()))),s}function j(){q=[],R={}}var F=void 0,I=void 0,q=void 0,R=void 0;return F={convertDataToRepresentationInfo:s,getDataForMedia:r,getStreamsInfo:S,getMediaInfoForType:g,getAllMediaInfoForType:y,getCurrentRepresentationInfo:P,getRepresentationInfoForQuality:D,updateData:_,getInitRequest:C,getNextFragmentRequest:k,getFragmentRequestForTime:L,generateFragmentRequestForTime:A,getIndexHandlerTime:O,setIndexHandlerTime:M,getEventsFor:B,getEvent:H,setConfig:t,updatePeriods:E,reset:j},e(),F}Object.defineProperty(n,"__esModule",{value:!0});var s=e(100),o=r(s),u=e(219),a=r(u),f=e(217),l=r(f),c=e(220),h=r(c),p=e(216),d=r(p),v=e(83),m=r(v),g=e(51),y=r(g),b=e(2),w=r(b);i.__dashjs_factory_name="DashAdapter",n.default=y.default.getSingletonFactory(i),t.exports=n.default},{100:100,2:2,216:216,217:217,219:219,220:220,51:51,83:83}],57:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){G=(0,E.default)(q).getInstance().log.bind(Q),c(),z=n(e.mimeType)?(0,_.default)(q).getInstance():(0,O.default)(q).getInstance(),z.setConfig({baseURLController:K,metricsModel:V,mediaPlayerModel:$,errHandler:J}),R.on(v.default.INITIALIZATION_LOADED,F,Q),R.on(v.default.SEGMENTS_LOADED,I,Q)}function n(e){return"webm"===e.split("/")[1].toLowerCase()}function r(t){nt=t;var n=nt?nt.getStreamInfo().manifestInfo.isDynamic:null;z.initialize(),rt=(0,L.default)(q).create(e,n)}function i(){return nt}function s(e){et=e}function u(){return et}function f(){return tt}function c(){Y=-1,et=0,tt=NaN,Z=null,nt=null,rt=null}function d(){c(),R.off(v.default.INITIALIZATION_LOADED,F,Q),R.off(v.default.SEGMENTS_LOADED,I,Q)}function m(e,t,n){var r=K.resolve(n.path),i=void 0,s=void 0;return r&&t!==r.url&&U.isRelative(t)?(i=r.url,s=r.serviceLocation,t&&(i=U.resolve(t,i))):i=t,!U.isRelative(i)&&(e.url=i,e.serviceLocation=s,!0)}function y(e,t){var n=new l.default,r=e.adaptation.period,i=r.start,s=nt?nt.getStreamInfo().manifestInfo.isDynamic:null;if(n.mediaType=t,n.type=p.HTTPRequest.INIT_SEGMENT_TYPE,n.range=e.range,n.availabilityStartTime=W.calcAvailabilityStartTimeFromPresentationTime(i,r.mpd,s),n.availabilityEndTime=W.calcAvailabilityEndTimeFromPresentationTime(i+r.duration,r.mpd,s),n.quality=e.index,n.mediaInfo=nt?nt.getMediaInfo():null,n.representationId=e.id,m(n,e.initialization,e))return n}function b(e){var t=nt?nt.getType():null;return e?y(e,t):null}function w(e){var t=!1,n=nt?nt.getStreamInfo().manifestInfo.isDynamic:null;if(n||Y!==e.availableSegmentsNumber){var r=(0,C.getSegmentByIndex)(Y,e);if(r){var i=parseFloat((r.presentationStartTime-e.adaptation.period.start).toFixed(5)),s=e.adaptation.period.duration;G(e.segmentInfoType+": "+i+" / "+s),t=(e.segmentInfoType!==a.default.SEGMENT_TIMELINE||!n)&&i>=s}else G("isMediaFinished - no segment found")}else t=!0;return t}function S(e){rt.getSegments(e,Z,Y,T)}function T(e,t){var n=nt?nt.getStreamInfo().manifestInfo.isDynamic:null;if(e.segments=t,t&&t.length>0&&(tt=isNaN(tt)?t[0].presentationStartTime:Math.min(t[0].presentationStartTime,tt),n&&isNaN(W.getExpectedLiveEdge()))){var r=t[t.length-1],i=r.presentationStartTime,s=V.getMetricsFor(o.default.STREAM);W.setExpectedLiveEdge(i),V.updateManifestUpdateInfo(X.getCurrentManifestUpdate(s),{presentationStartTime:i})}}function k(e){if(!e)throw new Error("no representation");e.segments=null,S(e)}function A(e,t){var n=N.default.hasInitialization(e),r=N.default.hasSegments(e),i=nt?nt.getType():null,s=nt?nt.getStreamInfo().manifestInfo.isDynamic:null,o=void 0;if(e.segmentDuration||e.segments||k(e),e.segmentAvailabilityRange=null,e.segmentAvailabilityRange=W.calcSegmentAvailabilityRange(e,s),e.segmentAvailabilityRange.end<e.segmentAvailabilityRange.start&&!e.useCalculatedLiveEdgeTime)return o=new h.default(D,"no segments are available yet",{availabilityDelay:e.segmentAvailabilityRange.start-e.segmentAvailabilityRange.end}),void R.trigger(v.default.REPRESENTATION_UPDATED,{sender:this,representation:e,error:o});t||(Y=-1),e.segmentDuration&&k(e),n||z.loadInitialization(e),r||z.loadSegments(e,i,e.indexRange),n&&r&&R.trigger(v.default.REPRESENTATION_UPDATED,{sender:this,representation:e})}function M(e,t,n){var r=t.segments,i=r?r.length:null,s=-1,o=void 0,u=void 0,a=void 0,f=void 0,l=void 0;if(r&&i>0)for(l=0;l<i;l++)if(u=r[l],a=u.presentationStartTime,f=u.duration,o=void 0===n||null===n?f/2:n,e+o>=a&&e-o<a+f){s=u.availabilityIdx;break}return s}function P(e){if(null===e||void 0===e)return null;var t=new l.default,n=e.representation,r=n.adaptation.period.mpd.manifest.Period_asArray[n.adaptation.period.index].AdaptationSet_asArray[n.adaptation.index].Representation_asArray[n.index].bandwidth,i=e.media,s=nt?nt.getType():null;return i=(0,C.replaceTokenForTemplate)(i,"Number",e.replacementNumber),i=(0,C.replaceTokenForTemplate)(i,"Time",e.replacementTime),i=(0,C.replaceTokenForTemplate)(i,"Bandwidth",r),i=(0,C.replaceIDForTemplate)(i,n.id),i=(0,C.unescapeDollarsInTemplate)(i),t.mediaType=s,t.type=p.HTTPRequest.MEDIA_SEGMENT_TYPE,t.range=e.mediaRange,t.startTime=e.presentationStartTime,t.duration=e.duration,t.timescale=n.timescale,t.availabilityStartTime=e.availabilityStartTime,t.availabilityEndTime=e.availabilityEndTime,t.wallStartTime=e.wallStartTime,t.quality=n.index,t.index=e.availabilityIdx,t.mediaInfo=nt.getMediaInfo(),t.adaptationIndex=n.adaptation.index,m(t,i,n)?t:void 0}function H(e,t,n){var r=void 0,i=void 0,s=void 0,o=nt?nt.getType():null,u=nt?nt.getStreamInfo().manifestInfo.isDynamic:null,f=Y,c=!!n&&n.keepIdx,h=n?n.timeThreshold:null,p=!!n&&!!n.ignoreIsFinished;return e?(Z!==t&&(Z=t,G("Getting the request for "+o+" time : "+t)),S(e),Y=M(t,e,h),Y<0&&(S(e),Y=M(t,e,h)),Y>0&&G("Index for "+o+" time "+t+" is "+Y),s=!p&&w(e),s?(r=new l.default,r.action=l.default.ACTION_COMPLETE,r.index=Y,r.mediaType=o,r.mediaInfo=nt.getMediaInfo(),G("Signal complete.",r)):(i=(0,C.getSegmentByIndex)(Y,e),r=P(i)),c&&f>=0&&(Y=e.segmentInfoType===a.default.SEGMENT_TIMELINE&&u?Y:f),r):null}function B(e,t){var n=(e.segmentAvailabilityRange.end-e.segmentAvailabilityRange.start)/2;return e.segments=null,e.segmentAvailabilityRange={start:t-n,end:t+n},H(e,t,{keepIdx:!1,ignoreIsFinished:!0})}function j(e){var t=void 0,n=void 0,r=void 0,i=nt?nt.getType():null,s=nt?nt.getStreamInfo().manifestInfo.isDynamic:null;return e&&-1!==Y?(Z=null,Y++,G("Getting the next request at index: "+Y),!(0,C.getSegmentByIndex)(Y,e)&&s?(G("No segment found at index: "+Y+". Wait for next loop"),S(e),Y--,null):(r=w(e),r?(t=new l.default,t.action=l.default.ACTION_COMPLETE,t.index=Y,t.mediaType=i,t.mediaInfo=nt.getMediaInfo(),G("Signal complete.")):(S(e),n=(0,C.getSegmentByIndex)(Y,e),t=P(n),!n&&s&&Y--),t)):null}function F(e){var t=e.representation;t.segments&&R.trigger(v.default.REPRESENTATION_UPDATED,{sender:this,representation:t})}function I(e){var t=nt?nt.getType():null,n=nt?nt.getStreamInfo().manifestInfo.isDynamic:null;if(!e.error&&t===e.mediaType){var r=e.segments,i=e.representation,s=[],o=0,u=void 0,a=void 0,f=void 0,l=void 0;for(u=0,a=r.length;u<a;u++)f=r[u],l=(0,C.getTimeBasedSegment)(W,n,i,f.startTime,f.duration,f.timescale,f.media,f.mediaRange,o),s.push(l),l=null,o++;i.segmentAvailabilityRange={start:s[0].presentationStartTime,end:s[a-1].presentationStartTime},i.availableSegmentsNumber=a,T(i,s),N.default.hasInitialization(i)&&R.trigger(v.default.REPRESENTATION_UPDATED,{sender:this,representation:i})}}e=e||{};var q=this.context,R=(0,g.default)(q).getInstance(),U=(0,x.default)(q).getInstance(),z=void 0,W=e.timelineConverter,X=e.dashMetrics,V=e.metricsModel,$=e.mediaPlayerModel,J=e.errHandler,K=e.baseURLController,Q=void 0,G=void 0,Y=void 0,Z=void 0,et=void 0,tt=void 0,nt=void 0,rt=void 0;return Q={initialize:r,getStreamProcessor:i,getInitRequest:b,getSegmentRequestForTime:H,getNextSegmentRequest:j,generateSegmentRequestForTime:B,updateRepresentation:A,updateSegmentList:k,setCurrentTime:s,getCurrentTime:u,getEarliestTime:f,reset:d},t(),Q}Object.defineProperty(n,"__esModule",{value:!0});var s=e(100),o=r(s),u=e(61),a=r(u),f=e(213),l=r(f),c=e(211),h=r(c),p=e(230),d=e(54),v=r(d),m=e(50),g=r(m),y=e(51),b=r(y),w=e(49),E=r(w),S=e(206),x=r(S),T=e(87),N=r(T),C=e(77),k=e(76),L=r(k),A=e(59),O=r(A),M=e(60),_=r(M),D=1;i.__dashjs_factory_name="DashHandler";var P=b.default.getClassFactory(i);P.SEGMENTS_UNAVAILABLE_ERROR_CODE=D,b.default.updateClassFactory(i.__dashjs_factory_name,P),n.default=P,t.exports=n.default},{100:100,206:206,211:211,213:213,230:230,49:49,50:50,51:51,54:54,59:59,60:60,61:61,76:76,77:77,87:87}],58:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e,t){var n=void 0;return n=S(C.getValue().Period_asArray[t],e),null===n?null:n.bandwidth}function n(e,t){return E(C.getValue().Period_asArray[t],e)}function r(e,t){return T(C.getValue().Period_asArray[t],e)}function i(e){return p(e,f.default.TRACK_SWITCH)}function o(e){return p(e,f.default.BUFFER_LEVEL)}function u(e){var t=o(e);return t?(0,l.round10)(t.level/1e3,-3):0}function a(e){return e?e.RequestsQueue:null}function c(e){if(!e)return null;var t=e.HttpList,n=null,r=void 0,i=void 0;if(!t||t.length<=0)return null;for(r=t.length,i=r-1;i>=0;){if(t[i].responsecode){n=t[i];break}i--}return n}function h(e){return e&&e.HttpList?e.HttpList:[]}function p(e,t){if(!e)return null;var n=e[t];if(!n)return null;var r=n.length;return r<=0?null:n[r-1]}function d(e){return p(e,f.default.DROPPED_FRAMES)}function v(e){return p(e,f.default.SCHEDULING_INFO)}function m(e){return p(e,f.default.MANIFEST_UPDATE)}function g(e){return p(e,f.default.DVR_INFO)}function y(e,t){var n={},r=void 0,i=void 0,o=void 0;for(r=h(e),o=r.length-1;o>=0;o--)if(i=r[o],i.type===s.HTTPRequest.MPD_TYPE){n=w(i._responseHeaders);break}return void 0===n[t]?null:n[t]}function b(e,t){var n={},r=c(e);return r&&(n=w(r._responseHeaders)),void 0===n[t]?null:n[t]}function w(e){var t={};if(!e)return t;for(var n=e.trim().split("\r\n"),r=0,i=n.length;r<i;r++){var s=n[r],o=s.indexOf(": ");o>0&&(t[s.substring(0,o)]=s.substring(o+2))}return t}function E(e,t){var n=S(e,t,!0);return null!==n?n:-1}function S(e,t,n){var r=void 0,i=void 0,s=void 0,o=void 0,u=void 0,a=void 0;if(e)for(i=e.AdaptationSet_asArray,u=0;u<i.length;u+=1)for(r=i[u],o=r.Representation_asArray,a=0;a<o.length;a+=1)if(s=o[a],t===s.id)return n?a:s;return null}function x(e,t){return N.getIsTypeOf(e,t)}function T(e,t){var n=void 0,r=void 0,i=void 0,s=void 0;if(!e||!t)return-1;for(r=e.AdaptationSet_asArray,s=0;s<r.length;s+=1)if(n=r[s],i=n.Representation_asArray,x(n,t))return i.length;return-1}e=e||{};var N=e.dashManifestModel,C=e.manifestModel;return{getBandwidthForRepresentation:t,getIndexForRepresentation:n,getMaxIndexForBufferType:r,getCurrentRepresentationSwitch:i,getLatestBufferLevelVO:o,getCurrentBufferLevel:u,getCurrentHttpRequest:c,getHttpRequests:h,getCurrentDroppedFrames:d,getCurrentSchedulingInfo:v,getCurrentDVRInfo:g,getCurrentManifestUpdate:m,getLatestFragmentRequestHeaderValueByID:b,getLatestMPDRequestHeaderValueByID:y,getRequestsQueue:a}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(230),o=e(51),u=r(o),a=e(101),f=r(a),l=e(43);i.__dashjs_factory_name="DashMetrics",n.default=u.default.getSingletonFactory(i),t.exports=n.default},{101:101,230:230,43:43,51:51}],59:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){S=(0,m.default)(v).getInstance(),T=(0,o.default)(v).getInstance(),L=(0,N.default)(v).create({errHandler:b,metricsModel:C,mediaPlayerModel:k,requestModifier:T})}function t(e){e.baseURLController&&(A=e.baseURLController),e.metricsModel&&(C=e.metricsModel),e.mediaPlayerModel&&(k=e.mediaPlayerModel),e.errHandler&&(b=e.errHandler)}function n(){if(!A||!A.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function r(e,t){n();var i=null,s=null,o=A.resolve(e.path),u=t||{init:!0,url:o?o.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500};g("Start searching for initialization.");var a=c(u),l=function(t){u.bytesLoaded=u.range.end,s=S.parse(t),i=f(s),i?(e.range=i,y.trigger(h.default.INITIALIZATION_LOADED,{representation:e})):(u.range.end=u.bytesLoaded+u.bytesToLoad,r(e,u))},p=function(){y.trigger(h.default.INITIALIZATION_LOADED,{representation:e})};L.load({request:a,success:l,error:p}),g("Perform init search: "+u.url)}function i(e,t,r,s,o){if(n(),r&&(void 0===r.start||void 0===r.end)){var a=r?r.toString().split("-"):null;r=a?{start:parseFloat(a[0]),end:parseFloat(a[1])}:null}o=o||p;var f=null,l=null,h=!!r,d=A.resolve(e.path),v={init:!1,url:d?d.url:void 0,range:h?r:{start:0,end:1500},searching:!h,bytesLoaded:s?s.bytesLoaded:0,bytesToLoad:1500},m=c(v),y=function(n){var r=v.bytesToLoad,s=n.byteLength;if(v.bytesLoaded=v.range.end-v.range.start,f=S.parse(n),(l=f.getBox("sidx"))&&l.isComplete){var a=l.references,c=void 0,h=void 0;null!==a&&void 0!==a&&a.length>0&&(c=1===a[0].reference_type),c?function(){g("Initiate multiple SIDX load."),v.range.end=v.range.start+l.size;var n=void 0,r=void 0,s=void 0,u=void 0,f=void 0,c=[],h=0,p=(l.offset||v.range.start)+l.size,d=function(n){n?(c=c.concat(n),++h>=r&&o(c,e,t)):o(null,e,t)};for(n=0,r=a.length;n<r;n++)s=p,u=p+a[n].referenced_size-1,p+=a[n].referenced_size,f={start:s,end:u},i(e,null,f,v,d)}():(g("Parsing segments from SIDX."),h=u(l,v),o(h,e,t))}else{if(l)v.range.start=l.offset||v.range.start,v.range.end=v.range.start+(l.size||r);else{if(s<v.bytesLoaded)return void o(null,e,t);var p=f.getLastBox();p&&p.size?(v.range.start=p.offset+p.size,v.range.end=v.range.start+r):v.range.end+=r}i(e,t,v.range,v,o)}},b=function(){o(null,e,t)};L.load({request:m,success:y,error:b}),g("Perform SIDX load: "+v.url)}function s(){L.abort(),L=null,b=null,S=null,T=null}function u(e,t){for(var n=e.references,r=n.length,i=e.timescale,s=e.earliest_presentation_time,o=t.range.start+e.offset+e.first_offset+e.size,u=[],f=void 0,l=void 0,c=void 0,h=void 0,p=0;p<r;p++)c=n[p].subsegment_duration,h=n[p].referenced_size,f=new a.default,f.duration=c,f.startTime=s,f.timescale=i,l=o+h-1,f.mediaRange=o+"-"+l,u.push(f),s+=c,o+=h;return u}function f(e){var t=e.getBox("ftyp"),n=e.getBox("moov"),r=null,i=void 0,s=void 0;return g("Searching for initialization."),n&&n.isComplete&&(i=t?t.offset:n.offset,s=n.offset+n.size-1,r=i+"-"+s,g("Found the initialization.  Range: "+r)),r}function c(e){if(e.url){var t=new x.default;return t.type=e.init?E.HTTPRequest.INIT_SEGMENT_TYPE:E.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}}function p(e,t,n){e?y.trigger(h.default.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):y.trigger(h.default.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new l.default(null,"error loading segments",null)})}var v=this.context,g=(0,w.default)(v).getInstance().log,y=(0,d.default)(v).getInstance(),b=void 0,S=void 0,T=void 0,C=void 0,k=void 0,L=void 0,A=void 0;return{setConfig:t,initialize:e,loadInitialization:r,loadSegments:i,reset:s}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(204),o=r(s),u=e(88),a=r(u),f=e(211),l=r(f),c=e(54),h=r(c),p=e(50),d=r(p),v=e(194),m=r(v),g=e(51),y=r(g),b=e(49),w=r(b),E=e(230),S=e(213),x=r(S),T=e(98),N=r(T);i.__dashjs_factory_name="SegmentBaseLoader",n.default=y.default.getSingletonFactory(i),t.exports=n.default},{194:194,204:204,211:211,213:213,230:230,49:49,50:50,51:51,54:54,88:88,98:98}],60:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){N={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}}}function t(){k=(0,m.default)(g).getInstance(),O=(0,x.default)(g).create({errHandler:C,metricsModel:L,mediaPlayerModel:A,requestModifier:k})}function n(e){if(!(e.baseURLController&&e.metricsModel&&e.mediaPlayerModel&&e.errHandler))throw new Error("Missing config parameter(s)");M=e.baseURLController,L=e.metricsModel,A=e.mediaPlayerModel,C=e.errHandler}function r(e){var t=[],n=void 0,r=void 0,i=(0,l.default)(g).create({data:e});for(i.consumeTagAndSize(N.Segment.Cues);i.moreData()&&i.consumeTagAndSize(N.Segment.Cues.CuePoint,!0);){for(n={},n.CueTime=i.parseTag(N.Segment.Cues.CuePoint.CueTime),n.CueTracks=[];i.moreData()&&i.consumeTag(N.Segment.Cues.CuePoint.CueTrackPositions,!0);){var s=i.getMatroskaCodedNum(),o=i.getPos();if(r={},r.Track=i.parseTag(N.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===r.Track)throw new Error("Cue track cannot be 0");r.ClusterPosition=i.parseTag(N.Segment
.Cues.CuePoint.CueTrackPositions.CueClusterPosition),n.CueTracks.push(r),i.setPos(o+s)}if(0===n.CueTracks.length)throw new Error("Mandatory cuetrack not found");t.push(n)}if(0===t.length)throw new Error("mandatory cuepoint not found");return t}function i(e,t,n,i){var s=void 0,o=void 0,u=void 0,a=void 0,f=void 0,l=void 0,c=void 0,h=void 0;for(o=r(e),u=[],f=0,l=o.length;f<l;f+=1)a=new y.default,s=0,s=f<o.length-1?o[f+1].CueTime-o[f].CueTime:i-o[f].CueTime,a.duration=s,a.startTime=o[f].CueTime,a.timescale=1e3,c=o[f].CueTracks[0].ClusterPosition+t,h=f<o.length-1?o[f+1].CueTracks[0].ClusterPosition+t-1:n-1,a.mediaRange=c+"-"+h,u.push(a);return w("Parsed cues: "+u.length+" cues."),u}function s(e,t,n,r){var s=(0,l.default)(g).create({data:e}),o=void 0,u=void 0,a=n.split("-"),f=null,c={url:t,range:{start:parseFloat(a[0]),end:parseFloat(a[1])},request:f},h=void 0,d=void 0;for(w("Parse EBML header: "+c.url),s.skipOverElement(N.EBML),s.consumeTag(N.Segment),h=s.getMatroskaCodedNum(),h+=s.getPos(),d=s.getPos();s.moreData()&&!s.consumeTagAndSize(N.Segment.Info,!0);)if(!(s.skipOverElement(N.Segment.SeekHead,!0)||s.skipOverElement(N.Segment.Tracks,!0)||s.skipOverElement(N.Segment.Cues,!0)||s.skipOverElement(N.Void,!0)))throw new Error("no valid top level element found");for(;void 0===o;){var v=s.getMatroskaCodedNum(!0),m=s.getMatroskaCodedNum();switch(v){case N.Segment.Info.Duration.tag:o=s[N.Segment.Info.Duration.parse](m);break;default:s.setPos(s.getPos()+m)}}f=p(c);var y=function(e){u=i(e,d,h,o),r(u)},b=function(){w("Download Error: Cues "+c.url),r(null)};O.load({request:f,success:y,error:b}),w("Perform cues load: "+c.url+" bytes="+c.range.start+"-"+c.range.end)}function u(){if(!M||!M.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function f(e,t){u();var n=null,r=M.resolve(e.path),i=r?r.url:void 0,s=e.range.split("-"),a=t||{range:{start:parseFloat(s[0]),end:parseFloat(s[1])},request:n,url:i,init:!0};w("Start loading initialization."),n=p(a);var f=function(){S.trigger(o.default.INITIALIZATION_LOADED,{representation:e})},l=function(){S.trigger(o.default.INITIALIZATION_LOADED,{representation:e})};O.load({request:n,success:f,error:l}),w("Perform init load: "+a.url)}function c(e,t,n,r){u();var i=null,o=M.resolve(e.path),a=o?o.url:void 0,f=8192,l={bytesLoaded:0,bytesToLoad:f,range:{start:0,end:f},request:i,url:a,init:!1};r=r||h,i=p(l),w("Parsing ebml header");var c=function(i){s(i,a,n,function(n){r(n,e,t)})},d=function(){r(null,e,t)};O.load({request:i,success:c,error:d})}function h(e,t,n){e?S.trigger(o.default.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):S.trigger(o.default.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new Error(null,"error loading segments",null)})}function p(e){var t=new E.default;return t.type=e.init?b.HTTPRequest.INIT_SEGMENT_TYPE:b.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}function v(){C=null,k=null,w=null}var g=this.context,w=(0,d.default)(g).getInstance().log,S=(0,a.default)(g).getInstance(),T=void 0,N=void 0,C=void 0,k=void 0,L=void 0,A=void 0,O=void 0,M=void 0;return T={setConfig:n,initialize:t,loadInitialization:f,loadSegments:c,reset:v},e(),T}Object.defineProperty(n,"__esModule",{value:!0});var s=e(54),o=r(s),u=e(50),a=r(u),f=e(198),l=r(f),c=e(51),h=r(c),p=e(49),d=r(p),v=e(204),m=r(v),g=e(88),y=r(g),b=e(230),w=e(213),E=r(w),S=e(98),x=r(S);i.__dashjs_factory_name="WebmSegmentBaseLoader",n.default=h.default.getSingletonFactory(i),t.exports=n.default},{198:198,204:204,213:213,230:230,49:49,50:50,51:51,54:54,88:88,98:98}],61:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(){r(this,e),this.init()}return i(e,[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight"}}]),e}(),o=new s;n.default=o,t.exports=n.default},{}],62:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){c(),D.on(d.default.QUALITY_CHANGE_REQUESTED,O,P),D.on(d.default.REPRESENTATION_UPDATED,k,P),D.on(d.default.WALLCLOCK_TIME_UPDATED,L,P),D.on(d.default.BUFFER_LEVEL_UPDATED,A,P)}function t(e){e.abrController&&(q=e.abrController),e.domStorage&&(W=e.domStorage),e.metricsModel&&(z=e.metricsModel),e.dashMetrics&&($=e.dashMetrics),e.dashManifestModel&&(V=e.dashManifestModel),e.playbackController&&(U=e.playbackController),e.timelineConverter&&(X=e.timelineConverter),e.manifestModel&&(K=e.manifestModel),e.streamProcessor&&(J=e.streamProcessor)}function n(){R=J.getIndexHandler()}function r(){return J}function i(){return H}function s(){return B}function u(){return j}function f(){return I}function c(){H=null,B=-1,j=!0,F=[],q=null,U=null,z=null,W=null,X=null,V=null,$=null}function p(){D.off(d.default.QUALITY_CHANGE_REQUESTED,O,P),D.off(d.default.REPRESENTATION_UPDATED,k,P),D.off(d.default.WALLCLOCK_TIME_UPDATED,L,P),D.off(d.default.BUFFER_LEVEL_UPDATED,A,P),c()}function v(e,t,n){var r=J.getStreamInfo(),i=q.getTopQualityIndexFor(n,r.id),s=q.getMinAllowedIndexFor(n),u=void 0,a=void 0,f=null;if(j=!0,D.trigger(d.default.DATA_UPDATE_STARTED,{sender:this}),F=x(t),null!==H&&H.id==e.id||n===o.default.FRAGMENTED_TEXT?u=q.getQualityFor(n,r):(a=q.getThroughputHistory().getAverageThroughput(n),f=a||q.getInitialBitrateFor(n,r),u=q.getQualityForBitrate(J.getMediaInfo(),f)),void 0!==s&&u<s&&(u=s),u>i&&(u=i),I=b(u),H=e,n!==o.default.VIDEO&&n!==o.default.AUDIO&&n!==o.default.FRAGMENTED_TEXT)return j=!1,void D.trigger(d.default.DATA_UPDATE_COMPLETED,{sender:this,data:H,currentRepresentation:I});for(var l=0;l<F.length;l++)R.updateRepresentation(F[l],!0)}function g(){var e=new Date,t=f(),n=1e3*U.getTime();z.addRepresentationSwitch(t.adaptation.type,e,n,t.id)}function y(){var e=J.getStreamInfo(),t=e?e.manifestInfo:null,n=t?t.isDynamic:null,r=X.calcSegmentAvailabilityRange(I,n);z.addDVRInfo(J.getType(),U.getTime(),t,r)}function b(e){return F[e]}function E(e){return F.indexOf(e)}function S(){for(var e=0,t=F.length;e<t;e++){var n=F[e].segmentInfoType;if(null===F[e].segmentAvailabilityRange||!w.default.hasInitialization(F[e])||(n===a.default.SEGMENT_BASE||n===a.default.BASE_URL)&&!F[e].segments)return!1}return!0}function x(e){return B=V.getIndexForAdaptation(H,e.period.mpd.manifest,e.period.index),V.getRepresentationsForAdaptation(e)}function T(e){for(var t=void 0,n=0,r=F.length;n<r;n++)t=F[n],t.segmentAvailabilityRange=X.calcSegmentAvailabilityRange(t,e)}function N(){F.forEach(function(e){e.segmentAvailabilityRange=null})}function C(e){var t=e,n=function(){if(!u()){j=!0,D.trigger(d.default.DATA_UPDATE_STARTED,{sender:P}),N();for(var e=0;e<F.length;e++)R.updateRepresentation(F[e],!0)}};j=!1,D.trigger(m.default.AST_IN_FUTURE,{delay:t}),setTimeout(n,t)}function k(e){if(e.sender.getStreamProcessor()===J&&u()){var t=e.representation,n=z.getMetricsFor(o.default.STREAM),r=z.getMetricsFor(f().adaptation.type),i=$.getCurrentManifestUpdate(n),s=!1,c=0,h=void 0,p=void 0,v=void 0;if(t.adaptation.period.mpd.manifest.type===a.default.DYNAMIC&&!t.adaptation.period.mpd.manifest.ignorePostponeTimePeriod){var m=t.segmentAvailabilityRange.end-t.segmentAvailabilityRange.start;c=1e3*(U.computeLiveDelay(I.segmentDuration,J.getStreamInfo().manifestInfo.DVRWindowSize)-m)}if(c>0)return y(),C(c),p=new l.default(M,"Segments update failed",null),void D.trigger(d.default.DATA_UPDATE_COMPLETED,{sender:this,data:H,currentRepresentation:I,error:p});if(i){for(var b=0;b<i.representationInfo.length;b++)if(h=i.representationInfo[b],h.index===t.index&&h.mediaType===J.getType()){s=!0;break}s||z.addManifestUpdateRepresentationInfo(i,t.id,t.index,t.adaptation.period.index,J.getType(),t.presentationTimeOffset,t.startNumber,t.segmentInfoType)}S()&&(j=!1,q.setPlaybackQuality(J.getType(),J.getStreamInfo(),E(I)),z.updateManifestUpdateInfo(i,{latency:I.segmentAvailabilityRange.end-U.getTime()}),v=$.getCurrentRepresentationSwitch(r),v||g(),D.trigger(d.default.DATA_UPDATE_COMPLETED,{sender:this,data:H,currentRepresentation:I}))}}function L(e){e.isDynamic&&T(e.isDynamic)}function A(e){e.sender.getStreamProcessor()===J&&(K.getValue().doNotUpdateDVRWindowOnBufferUpdated||y())}function O(e){if(e.mediaType===J.getType()&&J.getStreamInfo().id===e.streamInfo.id&&e.oldQuality!==e.newQuality){I=b(e.newQuality);var t=q.getThroughputHistory().getAverageThroughput(e.mediaType);isNaN(t)||W.setSavedBitrateSettings(e.mediaType,t),g()}}var M=1,_=this.context,D=(0,h.default)(_).getInstance(),P=void 0,H=void 0,B=void 0,j=void 0,F=void 0,I=void 0,q=void 0,R=void 0,U=void 0,z=void 0,W=void 0,X=void 0,V=void 0,$=void 0,J=void 0,K=void 0;return P={initialize:n,setConfig:t,getData:i,getDataIndex:s,isUpdating:u,updateData:v,getStreamProcessor:r,getCurrentRepresentation:f,getRepresentationForQuality:b,reset:p},e(),P}Object.defineProperty(n,"__esModule",{value:!0});var s=e(100),o=r(s),u=e(61),a=r(u),f=e(211),l=r(f),c=e(50),h=r(c),p=e(54),d=r(p),v=e(94),m=r(v),g=e(51),y=r(g),b=e(87),w=r(b);i.__dashjs_factory_name="RepresentationController",n.default=y.default.getClassFactory(i),t.exports=n.default},{100:100,211:211,50:50,51:51,54:54,61:61,87:87,94:94}],63:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e,t){var n=void 0,r=void 0,i=void 0,s=void 0,u=void 0,f=void 0,l=!1,c=!1;if(!e)throw new Error("adaptation is not defined");if(!t)throw new Error("type is not defined");if(e.hasOwnProperty("ContentComponent_asArray")&&(s=e.ContentComponent_asArray),u=t!==o.default.TEXT?new RegExp(t):new RegExp("(vtt|ttml)"),e.Representation_asArray&&e.Representation_asArray.length&&e.Representation_asArray.length>0&&e.Representation_asArray[0].hasOwnProperty(a.default.CODECS)&&(f=e.Representation_asArray[0].codecs,0===f.search(o.default.STPP)||0===f.search(o.default.WVTT)))return t===o.default.FRAGMENTED_TEXT;if(s){if(s.length>1)return t===o.default.MUXED;s[0]&&s[0].contentType===t&&(l=!0,c=!0)}if(e.hasOwnProperty(a.default.MIME_TYPE)&&(l=u.test(e.mimeType),c=!0),!c)for(n=0,r=e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0;!c&&n<r;)i=e.Representation_asArray[n],i.hasOwnProperty(a.default.MIME_TYPE)&&(l=u.test(i.mimeType),c=!0),n++;return l}function n(e){return t(e,o.default.AUDIO)}function r(e){return t(e,o.default.VIDEO)}function i(e){return t(e,o.default.FRAGMENTED_TEXT)}function s(e){return t(e,o.default.TEXT)}function u(e){return t(e,o.default.MUXED)}function f(e){return t(e,o.default.IMAGE)}function c(e){return"text/vtt"===e||"application/ttml+xml"===e}function p(e){var t="";return e&&e.hasOwnProperty(a.default.LANG)&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t}function v(e){return e&&e.hasOwnProperty(a.default.VIEWPOINT)?e.Viewpoint:null}function g(e){return e&&e.hasOwnProperty(a.default.ROLE_ASARRAY)?e.Role_asArray:[]}function b(e){return e&&e.hasOwnProperty(a.default.ACCESSIBILITY_ASARRAY)?e.Accessibility_asArray:[]}function E(e){return e&&e.hasOwnProperty(a.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]}function x(e){return g(e).filter(function(e){return e.value===a.default.MAIN})[0]}function N(){return function(e,t){return e.bandwidth-t.bandwidth}}function k(e){return e&&void 0!==e.Representation_asArray&&null!==e.Representation_asArray&&e.Representation_asArray.sort(N()),e}function A(e,t,n){var r=t&&t.Period_asArray&&pt(n)&&t.Period_asArray[n]?t.Period_asArray[n].AdaptationSet_asArray:[],i=void 0,s=void 0;for(i=0,s=r.length;i<s;i++)if(r[i].hasOwnProperty(a.default.ID)&&r[i].id===e)return r[i];return null}function O(e,t,n){var r=t&&t.Period_asArray&&pt(n)&&t.Period_asArray[n]?t.Period_asArray[n].AdaptationSet_asArray:null;return r&&pt(e)?r[e]:null}function M(e,t,n){var r=t&&t.Period_asArray&&pt(n)&&t.Period_asArray[n]?t.Period_asArray[n].AdaptationSet_asArray:[],i=r.length;if(e)for(var s=0;s<i;s++){var o=(0,C.default)(ut).getInstance();if(o.areEqual(r[s],e))return s}return-1}function _(e,n,r){var i=e&&e.Period_asArray&&pt(n)&&e.Period_asArray[n]?e.Period_asArray[n].AdaptationSet_asArray:[],s=void 0,o=void 0,u=[];for(s=0,o=i.length;s<o;s++)t(i[s],r)&&u.push(k(i[s]));return u}function D(e,t,n,r){var i=_(e,t,n);if(!i||0===i.length)return null;if(i.length>1&&r){for(var s=ft.getCurrentTrackFor(n,r),o=ct.getAllMediaInfoForType(r,n),u=0,a=i.length;u<a;u++)if(s&&ft.isTracksEqual(s,o[u]))return i[u];for(var u=0,a=i.length;u<a;u++)if(x(i[u]))return i[u]}return i[0]}function P(e,t,n){if(e&&e.Representation_asArray&&e.Representation_asArray.length>0){var r=pt(t)&&t>=0&&t<e.Representation_asArray.length?e.Representation_asArray[t]:e.Representation_asArray[0],i=r.mimeType+';codecs="'+r.codecs+'"';return n&&void 0!==r.width&&(i+=';width="'+r.width+'";height="'+r.height+'"'),i}return null}function H(e){return e&&e.Representation_asArray&&e.Representation_asArray.length>0?e.Representation_asArray[0].mimeType:null}function B(e){return e&&e.hasOwnProperty(a.default.CENC_DEFAULT_KID)?e[a.default.CENC_DEFAULT_KID]:null}function j(e){return e&&e.hasOwnProperty(a.default.CONTENTPROTECTION_ASARRAY)&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null}function F(e){var t=!1;return e&&e.hasOwnProperty("type")&&(t=e.type===a.default.DYNAMIC),t}function I(e,t){var n=!1;return e&&e.profiles&&e.profiles.length>0&&(n=-1!==e.profiles.indexOf(t)),n}function q(e){return I(e,ht)}function R(e){return e&&e.hasOwnProperty(a.default.MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE}function U(e){return e&&e.bandwidth?e.bandwidth:NaN}function z(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=NaN;return e&&e.hasOwnProperty(a.default.MINIMUM_UPDATE_PERIOD)&&(n=e.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-t,1)}function W(e){return e&&e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0}function X(e){return e&&e.Representation_asArray&&e.Representation_asArray.length?k(e).Representation_asArray.map(function(e){return{bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null}}):null}function V(e){return e&&e.EssentialProperty_asArray&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map(function(e){return{schemeIdUri:e.schemeIdUri,value:e.value}}):null}function $(e,t){return t&&t.Representation_asArray&&t.Representation_asArray.length>0&&pt(e)?t.Representation_asArray[e]:null}function J(e){var t=[],n=void 0,r=void 0,i=void 0,s=void 0,o=void 0,u=void 0,f=void 0;if(e&&e.period&&pt(e.period.index)){var h=e.period.mpd.manifest.Period_asArray[e.period.index];h&&h.AdaptationSet_asArray&&pt(e.index)&&(s=k(h.AdaptationSet_asArray[e.index]))}if(s&&s.Representation_asArray)for(u=0;s&&u<s.Representation_asArray.length;u++)o=s.Representation_asArray[u],n=new l.default,n.index=u,n.adaptation=e,o.hasOwnProperty(a.default.ID)&&(n.id=o.id),o.hasOwnProperty(a.default.CODECS)&&(n.codecs=o.codecs),o.hasOwnProperty(a.default.CODEC_PRIVATE_DATA)&&(n.codecPrivateData=o.codecPrivateData),o.hasOwnProperty(a.default.BANDWITH)&&(n.bandwidth=o.bandwidth),o.hasOwnProperty(a.default.WIDTH)&&(n.width=o.width),o.hasOwnProperty(a.default.HEIGHT)&&(n.height=o.height),o.hasOwnProperty(a.default.SCAN_TYPE)&&(n.scanType=o.scanType),o.hasOwnProperty(a.default.MAX_PLAYOUT_RATE)&&(n.maxPlayoutRate=o.maxPlayoutRate),o.hasOwnProperty(a.default.SEGMENT_BASE)?(i=o.SegmentBase,n.segmentInfoType=a.default.SEGMENT_BASE):o.hasOwnProperty(a.default.SEGMENT_LIST)?(i=o.SegmentList,i.hasOwnProperty(a.default.SEGMENT_TIMELINE)?(n.segmentInfoType=a.default.SEGMENT_TIMELINE,f=i.SegmentTimeline.S_asArray[i.SegmentTimeline.S_asArray.length-1],(!f.hasOwnProperty("r")||f.r>=0)&&(n.useCalculatedLiveEdgeTime=!0)):(n.segmentInfoType=a.default.SEGMENT_LIST,n.useCalculatedLiveEdgeTime=!0)):o.hasOwnProperty(a.default.SEGMENT_TEMPLATE)?(i=o.SegmentTemplate,i.hasOwnProperty(a.default.SEGMENT_TIMELINE)?(n.segmentInfoType=a.default.SEGMENT_TIMELINE,f=i.SegmentTimeline.S_asArray[i.SegmentTimeline.S_asArray.length-1],(!f.hasOwnProperty("r")||f.r>=0)&&(n.useCalculatedLiveEdgeTime=!0)):n.segmentInfoType=a.default.SEGMENT_TEMPLATE,i.hasOwnProperty(a.default.INITIALIZATION_MINUS)&&(n.initialization=i.initialization.split("$Bandwidth$").join(o.bandwidth).split("$RepresentationID$").join(o.id))):n.segmentInfoType=a.default.BASE_URL,n.essentialProperties=V(o),i&&(i.hasOwnProperty(a.default.INITIALIZATION)?(r=i.Initialization,r.hasOwnProperty(a.default.SOURCE_URL)?n.initialization=r.sourceURL:r.hasOwnProperty(a.default.RANGE)&&(n.range=r.range)):o.hasOwnProperty(a.default.MIME_TYPE)&&c(o.mimeType)&&(n.range=0),i.hasOwnProperty(a.default.TIMESCALE)&&(n.timescale=i.timescale),i.hasOwnProperty(a.default.DURATION)&&(n.segmentDuration=i.duration/n.timescale),i.hasOwnProperty(a.default.MEDIA)&&(n.media=i.media),i.hasOwnProperty(a.default.START_NUMBER)&&(n.startNumber=i.startNumber),i.hasOwnProperty(a.default.INDEX_RANGE)&&(n.indexRange=i.indexRange),i.hasOwnProperty(a.default.PRESENTATION_TIME_OFFSET)&&(n.presentationTimeOffset=i.presentationTimeOffset/n.timescale)),n.MSETimeOffset=lt.calcMSETimeOffset(n),n.path=[e.period.index,e.index,u],t.push(n);return t}function K(e){var t=e&&pt(e.index)?e.mpd.manifest.Period_asArray[e.index]:null,s=[],l=void 0,c=void 0,p=void 0;if(t&&t.AdaptationSet_asArray)for(p=0;p<t.AdaptationSet_asArray.length;p++)c=t.AdaptationSet_asArray[p],l=new h.default,c.hasOwnProperty(a.default.ID)&&(l.id=c.id),l.index=p,l.period=e,u(c)?l.type=o.default.MUXED:n(c)?l.type=o.default.AUDIO:r(c)?l.type=o.default.VIDEO:i(c)?l.type=o.default.FRAGMENTED_TEXT:f(c)?l.type=o.default.IMAGE:l.type=o.default.TEXT,s.push(l);return s}function Q(e){var t=!!e&&F(e.manifest),n=[],r=null,i=null,s=null,o=null,u=void 0,f=void 0;for(f=0,u=e&&e.manifest&&e.manifest.Period_asArray?e.manifest.Period_asArray.length:0;f<u;f++)i=e.manifest.Period_asArray[f],i.hasOwnProperty(a.default.START)?(o=new d.default,o.start=i.start):null!==r&&i.hasOwnProperty(a.default.DURATION)&&null!==s?(o=new d.default,o.start=parseFloat((s.start+s.duration).toFixed(5)),o.duration=i.duration):0!==f||t||(o=new d.default,o.start=0),null!==s&&isNaN(s.duration)&&(s.duration=parseFloat((o.start-s.start).toFixed(5))),null!==o&&(o.id=G(i,f)),null!==o&&i.hasOwnProperty(a.default.DURATION)&&(o.duration=i.duration),null!==o&&(o.index=f,o.mpd=e,n.push(o),r=i,s=o),i=null,o=null;return 0===n.length?n:(null!==s&&isNaN(s.duration)&&(s.duration=parseFloat((Z(s)-s.start).toFixed(5))),n)}function G(e,t){if(!e)throw new Error("Period cannot be null or undefined");var n=d.default.DEFAULT_ID+"_"+t;return e.hasOwnProperty(a.default.ID)&&e.id.length>0&&"__proto__"!==e.id&&(n=e.id),n}function Y(e){var t=new m.default;return e&&(t.manifest=e,e.hasOwnProperty(a.default.AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):t.availabilityStartTime=new Date(e.loadedTime.getTime()),e.hasOwnProperty(a.default.AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty(a.default.MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty(a.default.MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(o.default.SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty(a.default.TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty(a.default.MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration)),t}function Z(e){var t=F(e.mpd.manifest),n=void 0;if(e.mpd.manifest.mediaPresentationDuration)n=e.mpd.manifest.mediaPresentationDuration;else if(e.duration)n=e.duration;else{if(!t)throw new Error("Must have @mediaPresentationDuratio on MPD or an explicit @duration on the last period.");n=Number.POSITIVE_INFINITY}return n}function et(e){var t=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null,n=t?t.Period_asArray:null,r=n&&e&&pt(e.index)?n[e.index].EventStream_asArray:null,i=[],s=void 0,u=void 0;if(r)for(s=0;s<r.length;s++){var f=new T.default;if(f.period=e,f.timescale=1,!r[s].hasOwnProperty(o.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(f.schemeIdUri=r[s].schemeIdUri,r[s].hasOwnProperty(a.default.TIMESCALE)&&(f.timescale=r[s].timescale),r[s].hasOwnProperty(a.default.VALUE)&&(f.value=r[s].value),u=0;u<r[s].Event_asArray.length;u++){var l=new w.default;l.presentationTime=0,l.eventStream=f,r[s].Event_asArray[u].hasOwnProperty(a.default.PRESENTATION_TIME)&&(l.presentationTime=r[s].Event_asArray[u].presentationTime),r[s].Event_asArray[u].hasOwnProperty(a.default.DURATION)&&(l.duration=r[s].Event_asArray[u].duration),r[s].Event_asArray[u].hasOwnProperty(a.default.ID)&&(l.id=r[s].Event_asArray[u].id),i.push(l)}}return i}function tt(e,t){var n=[],r=void 0;if(!e)return n;for(r=0;r<e.length;r++){var i=new T.default;if(i.timescale=1,i.representation=t,!e[r].hasOwnProperty(o.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");i.schemeIdUri=e[r].schemeIdUri,e[r].hasOwnProperty(a.default.TIMESCALE)&&(i.timescale=e[r].timescale),e[r].hasOwnProperty(a.default.VALUE)&&(i.value=e[r].value),n.push(i)}return n}function nt(e,t){var n=void 0,r=void 0,i=void 0;return e&&e.Period_asArray&&t&&t.period&&pt(t.period.index)&&(r=e.Period_asArray[t.period.index])&&r.AdaptationSet_asArray&&pt(t.index)&&(i=r.AdaptationSet_asArray[t.index])&&(n=i.InbandEventStream_asArray),tt(n,null)}function rt(e,t){var n=void 0,r=void 0,i=void 0,s=void 0;return e&&e.Period_asArray&&t&&t.adaptation&&t.adaptation.period&&pt(t.adaptation.period.index)&&(r=e.Period_asArray[t.adaptation.period.index])&&r.AdaptationSet_asArray&&pt(t.adaptation.index)&&(i=r.AdaptationSet_asArray[t.adaptation.index])&&i.Representation_asArray&&pt(t.index)&&(s=i.Representation_asArray[t.index])&&(n=s.InbandEventStream_asArray),tt(n,t)}function it(e){var t=F(e),n=!!e&&e.hasOwnProperty(a.default.AVAILABILITY_START_TIME),r=e?e.UTCTiming_asArray:null,i=[];return(t||n)&&r&&r.forEach(function(e){var t=new y.default;e.hasOwnProperty(o.default.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty(a.default.VALUE)&&(t.value=e.value.toString(),i.push(t)))}),i}function st(e){var t=[],n=e.BaseURL_asArray||[e.baseUri],r=!1;return n.some(function(n){if(n){var i=new S.default,s=n.__text||n;return at.isRelative(s)&&(r=!0,e.baseUri&&(s=at.resolve(s,e.baseUri))),i.url=s,n.hasOwnProperty(a.default.SERVICE_LOCATION)&&n.serviceLocation.length?i.serviceLocation=n.serviceLocation:i.serviceLocation=s,n.hasOwnProperty(a.default.DVB_PRIORITY)&&(i.dvb_priority=n[a.default.DVB_PRIORITY]),n.hasOwnProperty(a.default.DVB_WEIGHT)&&(i.dvb_weight=n[a.default.DVB_WEIGHT]),t.push(i),r}}),t}function ot(e){if(e&&e.hasOwnProperty(o.default.LOCATION))return e.Location=e.Location_asArray[0],e.Location}e=e||{};var ut=this.context,at=(0,L.default)(ut).getInstance(),ft=e.mediaController,lt=e.timelineConverter,ct=e.adapter,ht="urn:dvb:dash:profile:dvb-dash:2014",pt=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};return{getIsTypeOf:t,getIsAudio:n,getIsVideo:r,getIsText:s,getIsMuxed:u,getIsTextTrack:c,getIsFragmentedText:i,getIsImage:f,getIsMain:x,getLanguageForAdaptation:p,getViewpointForAdaptation:v,getRolesForAdaptation:g,getAccessibilityForAdaptation:b,getAudioChannelConfigurationForAdaptation:E,getAdaptationForIndex:O,getIndexForAdaptation:M,getAdaptationForId:A,getAdaptationsForType:_,getAdaptationForType:D,getCodec:P,getMimeType:H,getKID:B,getContentProtectionData:j,getIsDynamic:F,getIsDVB:q,getDuration:R,getBandwidth:U,getManifestUpdatePeriod:z,getRepresentationCount:W,getBitrateListForAdaptation:X,getRepresentationFor:$,getRepresentationsForAdaptation:J,getAdaptationsForPeriod:K,getRegularPeriods:Q,getMpd:Y,getEventsForPeriod:et,getEventStreamForAdaptationSet:nt,getEventStreamForRepresentation:rt,getUTCTimingSources:it,getBaseURLsFromElement:st,getRepresentationSortFunction:N,getLocation:ot}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(100),o=r(s),u=e(61),a=r(u),f=e(87),l=r(f),c=e(81),h=r(c),p=e(86),d=r(p),v=e(85),m=r(v),g=e(89),y=r(g),b=e(83),w=r(b),E=e(82),S=r(E),x=e(84),T=r(x),N=e(203),C=r(N),k=e(206),L=r(k),A=e(51),O=r(A);i.__dashjs_factory_name="DashManifestModel",n.default=O.default.getSingletonFactory(i),t.exports=n.default},{100:100,203:203,206:206,51:51,61:61,81:81,82:82,83:83,84:84,85:85,86:86,87:87,89:89}],64:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){p=[new m.default,new y.default,new w.default,new d.default],v=new h.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:p}),g=new l.default([new S.default,new T.default])}function n(){if(!f||!f.hasOwnProperty("manifestError"))throw new Error("Missing config parameter(s)")}function r(){return p}function i(){return g}function s(e){var t=void 0;n();try{var r=window.performance.now();if(!(t=v.xml_str2json(e)))throw new Error("parser error");var i=window.performance.now();g.run(t);var s=window.performance.now();u("Parsing complete: ( xml2json: "+(i-r).toPrecision(3)+"ms, objectiron: "+(s-i).toPrecision(3)+"ms, total: "+((s-r)/1e3).toPrecision(3)+"s)")}catch(o){return f.manifestError("parsing the manifest failed","parse",e,o),null}return t}e=e||{};var o=this.context,u=(0,a.default)(o).getInstance().log,f=e.errorHandler,c=void 0,p=void 0,v=void 0,g=void 0;return c={parse:s,getMatchers:r,getIron:i},t(),c}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s),u=e(49),a=r(u),f=e(3),l=r(f),c=e(4),h=r(c),p=e(73),d=r(p),v=e(71),m=r(v),g=e(70),y=r(g),b=e(72),w=r(b),E=e(67),S=r(E),x=e(68),T=r(x);i.__dashjs_factory_name="DashParser",n.default=o.default.getClassFactory(i),t.exports=n.default},{3:3,4:4,49:49,51:51,67:67,68:68,70:70,71:71,72:72,73:73}],65:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(t,n){r(this,e);var i=function(e){return e&&e.length&&e.charAt(0)===e.charAt(0).toUpperCase()};this._name=t,this._merge=void 0!==n?n:i(t)}return i(e,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),e}();n.default=s,t.exports=n.default},{}],66:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(65),u=r(o),a=function(){function e(t,n,r,s,o){var a=this;i(this,e),this._name=t||"",this._properties=[],this._children=r||[],this._isRoot=s||!1,this._isArray=o||!0,Array.isArray(n)&&n.forEach(function(e){a._properties.push(new u.default(e))})}return s(e,[{key:"name",get:function(){return this._name}},{key:"isRoot",get:function(){return this._isRoot}},{key:"isArray",get:function(){return this._isArray}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),e}();n.default=a,t.exports=n.default},{65:65}],67:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(e,t,n){for(var r=!0;r;){var i=e,s=t,o=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,s);if(void 0!==u){if("value"in u)return u.value;var a=u.get;if(void 0===a)return;return a.call(o)}var f=Object.getPrototypeOf(i);if(null===f)return;e=f,t=s,n=o,r=!0,u=f=void 0}},u=e(66),a=r(u),f=e(61),l=r(f),c=function(e){function t(){i(this,t);var e=[l.default.PROFILES,l.default.WIDTH,l.default.HEIGHT,l.default.SAR,l.default.FRAMERATE,l.default.AUDIO_SAMPLING_RATE,l.default.MIME_TYPE,l.default.SEGMENT_PROFILES,l.default.CODECS,l.default.MAXIMUM_SAP_PERIOD,l.default.START_WITH_SAP,l.default.MAX_PLAYOUT_RATE,l.default.CODING_DEPENDENCY,l.default.SCAN_TYPE,l.default.FRAME_PACKING,l.default.AUDIO_CHANNEL_CONFIGURATION,l.default.CONTENT_PROTECTION,l.default.ESSENTIAL_PROPERTY,l.default.SUPPLEMENTAL_PROPERTY,l.default.INBAND_EVENT_STREAM];o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,l.default.ADAPTATION_SET,e,[new a.default(l.default.REPRESENTATION,e,[new a.default(l.default.SUB_REPRESENTATION,e)])])}return s(t,e),t}(a.default);n.default=c,t.exports=n.default},{61:61,66:66}],68:[function(e,t,n){"use strict";function r
(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(e,t,n){for(var r=!0;r;){var i=e,s=t,o=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,s);if(void 0!==u){if("value"in u)return u.value;var a=u.get;if(void 0===a)return;return a.call(o)}var f=Object.getPrototypeOf(i);if(null===f)return;e=f,t=s,n=o,r=!0,u=f=void 0}},u=e(66),a=r(u),f=e(61),l=r(f),c=function(e){function t(){i(this,t);var e=[l.default.SEGMENT_BASE,l.default.SEGMENT_TEMPLATE,l.default.SEGMENT_LIST];o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,l.default.PERIOD,e,[new a.default(l.default.ADAPTATION_SET,e,[new a.default(l.default.REPRESENTATION,e)])])}return s(t,e),t}(a.default);n.default=c,t.exports=n.default},{61:61,66:66}],69:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(t,n){r(this,e),this._test=t,this._converter=n}return i(e,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),e}();n.default=s,t.exports=n.default},{}],70:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(e,t,n){for(var r=!0;r;){var i=e,s=t,o=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,s);if(void 0!==u){if("value"in u)return u.value;var a=u.get;if(void 0===a)return;return a.call(o)}var f=Object.getPrototypeOf(i);if(null===f)return;e=f,t=s,n=o,r=!0,u=f=void 0}},u=e(69),a=r(u),f=60,l=60,c=1e3,h=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,p=function(e){function t(){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){return h.test(e.value)},function(e){var t=h.exec(e),n=void 0;if(n=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&parseInt(t[6],10)||0,t[7]&&parseFloat(t[7])*c||0),t[9]&&t[10]){var r=parseInt(t[9],10)*l+parseInt(t[10],10);n+=("+"===t[8]?-1:1)*r*f*c}return new Date(n)})}return s(t,e),t}(a.default);n.default=p,t.exports=n.default},{69:69}],71:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(e,t,n){for(var r=!0;r;){var i=e,s=t,o=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,s);if(void 0!==u){if("value"in u)return u.value;var a=u.get;if(void 0===a)return;return a.call(o)}var f=Object.getPrototypeOf(i);if(null===f)return;e=f,t=s,n=o,r=!0,u=f=void 0}},u=e(69),a=r(u),f=e(100),l=r(f),c=e(61),h=r(c),p=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,d=31536e3,v=2592e3,m=86400,g=3600,y=60,b=function(e){function t(){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){for(var t=[h.default.MIN_BUFFER_TIME,h.default.MEDIA_PRESENTATION_DURATION,h.default.MINIMUM_UPDATE_PERIOD,h.default.TIMESHIFT_BUFFER_DEPTH,h.default.MAX_SEGMENT_DURATION,h.default.MAX_SUBSEGMENT_DURATION,l.default.SUGGESTED_PRESENTATION_DELAY,h.default.START,l.default.START_TIME,h.default.DURATION],n=t.length,r=0;r<n;r++)if(e.nodeName===t[r])return p.test(e.value);return!1},function(e){var t=p.exec(e),n=parseFloat(t[2]||0)*d+parseFloat(t[4]||0)*v+parseFloat(t[6]||0)*m+parseFloat(t[8]||0)*g+parseFloat(t[10]||0)*y+parseFloat(t[12]||0);return void 0!==t[1]&&(n=-n),n})}return s(t,e),t}(a.default);n.default=b,t.exports=n.default},{100:100,61:61,69:69}],72:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(e,t,n){for(var r=!0;r;){var i=e,s=t,o=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,s);if(void 0!==u){if("value"in u)return u.value;var a=u.get;if(void 0===a)return;return a.call(o)}var f=Object.getPrototypeOf(i);if(null===f)return;e=f,t=s,n=o,r=!0,u=f=void 0}},u=e(69),a=r(u),f=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,l=function(e){function t(){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){return f.test(e.value)},function(e){return parseFloat(e)})}return s(t,e),t}(a.default);n.default=l,t.exports=n.default},{69:69}],73:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(e,t,n){for(var r=!0;r;){var i=e,s=t,o=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,s);if(void 0!==u){if("value"in u)return u.value;var a=u.get;if(void 0===a)return;return a.call(o)}var f=Object.getPrototypeOf(i);if(null===f)return;e=f,t=s,n=o,r=!0,u=f=void 0}},a=e(69),f=r(a),l=e(61),c=r(l),h=function(e){function t(){s(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e,t){var n,r=(n={},i(n,c.default.MPD,[c.default.ID,c.default.PROFILES]),i(n,c.default.PERIOD,[c.default.ID]),i(n,c.default.BASE_URL,[c.default.SERVICE_LOCATION,c.default.BYTE_RANGE]),i(n,c.default.SEGMENT_BASE,[c.default.INDEX_RANGE]),i(n,c.default.INITIALIZATION,[c.default.RANGE]),i(n,c.default.REPRESENTATION_INDEX,[c.default.RANGE]),i(n,c.default.SEGMENT_LIST,[c.default.INDEX_RANGE]),i(n,c.default.BITSTREAM_SWITCHING,[c.default.RANGE]),i(n,c.default.SEGMENT_URL,[c.default.MEDIA_RANGE,c.default.INDEX_RANGE]),i(n,c.default.SEGMENT_TEMPLATE,[c.default.INDEX_RANGE,c.default.MEDIA,c.default.INDEX,c.default.INITIALIZATION_MINUS,c.default.BITSTREAM_SWITCHING_MINUS]),i(n,c.default.ASSET_IDENTIFIER,[c.default.VALUE,c.default.ID]),i(n,c.default.EVENT_STREAM,[c.default.VALUE]),i(n,c.default.ADAPTATION_SET,[c.default.PROFILES,c.default.MIME_TYPE,c.default.SEGMENT_PROFILES,c.default.CODECS,c.default.CONTENT_TYPE]),i(n,c.default.FRAME_PACKING,[c.default.VALUE,c.default.ID]),i(n,c.default.AUDIO_CHANNEL_CONFIGURATION,[c.default.VALUE,c.default.ID]),i(n,c.default.CONTENT_PROTECTION,[c.default.VALUE,c.default.ID]),i(n,c.default.ESSENTIAL_PROPERTY,[c.default.VALUE,c.default.ID]),i(n,c.default.SUPPLEMENTAL_PROPERTY,[c.default.VALUE,c.default.ID]),i(n,c.default.INBAND_EVENT_STREAM,[c.default.VALUE,c.default.ID]),i(n,c.default.ACCESSIBILITY,[c.default.VALUE,c.default.ID]),i(n,c.default.ROLE,[c.default.VALUE,c.default.ID]),i(n,c.default.RATING,[c.default.VALUE,c.default.ID]),i(n,c.default.VIEWPOINT,[c.default.VALUE,c.default.ID]),i(n,c.default.CONTENT_COMPONENT,[c.default.CONTENT_TYPE]),i(n,c.default.REPRESENTATION,[c.default.ID,c.default.DEPENDENCY_ID,c.default.MEDIA_STREAM_STRUCTURE_ID]),i(n,c.default.SUBSET,[c.default.ID]),i(n,c.default.METRICS,[c.default.METRICS_MINUS]),i(n,c.default.REPORTING,[c.default.VALUE,c.default.ID]),n);if(r.hasOwnProperty(t)){var s=r[t];return void 0!==s&&s.indexOf(e.name)>=0}return!1},function(e){return String(e)})}return o(t,e),t}(f.default);n.default=h,t.exports=n.default},{61:61,69:69}],74:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){e&&e.boxParser&&(r=e.boxParser)}function t(e){if(!r)throw new Error("boxParser is undefined");if(!e)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var t=r.parse(e),n=t.getBoxes("moof"),i=t.getBoxes("mfhd"),s=void 0,o=void 0,u=void 0,a=void 0,f=void 0,l=void 0,c=void 0,h=void 0,p=void 0,d=void 0,v=void 0,m=void 0,g=void 0,y=void 0,b=void 0,w=void 0,E=void 0;w=t.getBoxes("moof").length,b=i[i.length-1].sequence_number,u=0,l=[];var S=-1,x=-1;for(v=0;v<n.length;v++){var T=n[v],N=T.getChildBoxes("traf");for(p=0;p<N.length;p++){var C=N[p],k=C.getChildBox("tfhd"),L=C.getChildBox("tfdt");f=L.baseMediaDecodeTime;var A=C.getChildBoxes("trun"),O=C.getChildBoxes("subs");for(d=0;d<A.length;d++){var M=A[d];for(u=M.sample_count,y=(k.base_data_offset||0)+(M.data_offset||0),h=0;h<u;h++){c=M.samples[h],s=void 0!==c.sample_duration?c.sample_duration:k.default_sample_duration,a=void 0!==c.sample_size?c.sample_size:k.default_sample_size,o=void 0!==c.sample_composition_time_offset?c.sample_composition_time_offset:0;var _={dts:f,cts:f+o,duration:s,offset:T.offset+y,size:a,subSizes:[a]};if(O)for(m=0;m<O.length;m++){var D=O[m];if(S<D.entry_count&&h>x&&(S++,x+=D.entries[S].sample_delta),h==x){_.subSizes=[];var P=D.entries[S];for(g=0;g<P.subsample_count;g++)_.subSizes.push(P.subsamples[g].subsample_size)}}l.push(_),y+=a,f+=s}}E=f-L.baseMediaDecodeTime}}return{sampleList:l,lastSequenceNumber:b,totalDuration:E,numSequences:w}}function n(e){if(!r)throw new Error("boxParser is undefined");var t=r.parse(e),n=t?t.getBox("mdhd"):void 0;return n?n.timescale:NaN}var r=void 0;return{getSamplesInfo:t,getMediaTimescaleFromMoov:n,setConfig:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s);i.__dashjs_factory_name="FragmentedTextBoxParser",n.default=o.default.getSingletonFactory(i),t.exports=n.default},{51:51}],75:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){function n(e,n,i,s){var o=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,a=o.SegmentURL_asArray.length,f=[],l=void 0,c=void 0,h=void 0,p=void 0,d=void 0,v=void 0,m=void 0;for(m=e.startNumber,p=(0,u.decideSegmentListRangeForTemplate)(r,t,e,n,i,s),d=Math.max(p.start,0),v=Math.min(p.end,o.SegmentURL_asArray.length-1),l=d;l<=v;l++)h=o.SegmentURL_asArray[l],c=(0,u.getIndexBasedSegment)(r,t,e,l),c.replacementTime=(m+l-1)*e.segmentDuration,c.media=h.media?h.media:"",c.mediaRange=h.mediaRange,c.index=h.index,c.indexRange=h.indexRange,f.push(c),c=null;return e.availableSegmentsNumber=a,f}e=e||{};var r=e.timelineConverter;return{getSegments:n}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s),u=e(77);i.__dashjs_factory_name="ListSegmentsGetter";var a=o.default.getClassFactory(i);n.default=a,t.exports=n.default},{51:51,77:77}],76:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){function n(){a=(0,l.default)(s).create(e,t),f=(0,h.default)(s).create(e,t),c=(0,d.default)(s).create(e,t)}function r(e,t,n,r,s){var u=void 0,l=e.segmentInfoType;l!==o.default.SEGMENT_BASE&&l!==o.default.BASE_URL&&i(e,n)?(l===o.default.SEGMENT_TIMELINE?u=a.getSegments(e,t,n,s):l===o.default.SEGMENT_TEMPLATE?u=f.getSegments(e,t,n,s):l===o.default.SEGMENT_LIST&&(u=c.getSegments(e,t,n,s)),r&&r(e,u)):u=e.segments}function i(e,t){var n=e.segments,r=!1,i=void 0,s=void 0;return n&&0!==n.length?(s=n[0].availabilityIdx,i=n[n.length-1].availabilityIdx,r=t<s||t>i):r=!0,r}var s=this.context,u=void 0,a=void 0,f=void 0,c=void 0;return u={getSegments:r},n(),u}Object.defineProperty(n,"__esModule",{value:!0});var s=e(61),o=r(s),u=e(51),a=r(u),f=e(80),l=r(f),c=e(78),h=r(c),p=e(75),d=r(p);i.__dashjs_factory_name="SegmentsGetter";var v=a.default.getClassFactory(i);n.default=v,t.exports=n.default},{51:51,61:61,75:75,78:78,80:80}],77:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){for(;e.length<t;)e="0"+e;return e}function s(e,t){return e.representation.startNumber+t}function o(e){return e?e.split("$$").join("$"):e}function u(e,t){if(!t||!e||-1===e.indexOf("$RepresentationID$"))return e;var n=t.toString();return e.split("$RepresentationID$").join(n)}function a(e,t,n){var r="%0",s=void 0,o=void 0,u=void 0,a=void 0,f=void 0,l=void 0,c=t.length,h=r.length;if(!e)return e;for(;;){if((s=e.indexOf("$"+t))<0)return e;if((o=e.indexOf("$",s+c))<0)return e;if((u=e.indexOf(r,s+c))>s&&u<o)switch(a=e.charAt(o-1),f=parseInt(e.substring(u+h,o-1),10),a){case"d":case"i":case"u":l=i(n.toString(),f);break;case"x":l=i(n.toString(16),f);break;case"X":l=i(n.toString(16),f).toUpperCase();break;case"o":l=i(n.toString(8),f);break;default:return e}else l=n;e=e.substring(0,s)+l+e.substring(o+1)}}function f(e,t,n,r){var i=void 0,o=void 0,u=void 0,a=void 0;return o=n.segmentDuration,isNaN(o)&&(o=n.adaptation.period.duration),u=parseFloat((n.adaptation.period.start+r*o).toFixed(5)),a=parseFloat((u+o).toFixed(5)),i=new d.default,i.representation=n,i.duration=o,i.presentationStartTime=u,i.mediaStartTime=e.calcMediaTimeFromPresentationTime(i.presentationStartTime,n),i.availabilityStartTime=e.calcAvailabilityStartTimeFromPresentationTime(i.presentationStartTime,n.adaptation.period.mpd,t),i.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(a,n.adaptation.period.mpd,t),i.wallStartTime=e.calcWallTimeForSegment(i,t),i.replacementNumber=s(i,r),i.availabilityIdx=r,i}function l(e,t,n,r,i,o,u,f,l,c){var h=r/o,p=Math.min(i/o,n.adaptation.period.mpd.maxSegmentDuration),v=void 0,m=void 0,g=void 0;return v=e.calcPresentationTimeFromMediaTime(h,n),m=v+p,g=new d.default,g.representation=n,g.duration=p,g.mediaStartTime=h,g.presentationStartTime=v,g.availabilityStartTime=n.adaptation.period.mpd.manifest.loadedTime,g.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(m,n.adaptation.period.mpd,t),g.wallStartTime=e.calcWallTimeForSegment(g,t),g.replacementTime=c||r,g.replacementNumber=s(g,l),u=a(u,"Number",g.replacementNumber),u=a(u,"Time",g.replacementTime),g.media=u,g.mediaRange=f,g.availabilityIdx=l,g}function c(e,t){if(!t||!t.segments)return null;var n=t.segments.length,r=void 0,i=void 0;if(e<n&&(r=t.segments[e])&&r.availabilityIdx===e)return r;for(i=0;i<n;i++)if((r=t.segments[i])&&r.availabilityIdx===e)return r;return null}function h(e,t,n,r,i,s){var o=n.segmentDuration,u=n.adaptation.period.mpd.manifest.minBufferTime,a=n.segmentAvailabilityRange,f={start:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,a.start),end:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,a.end)},l=n.segments,h=2*o,p=s||Math.max(2*u,10*o),d=NaN,v=null,m=void 0,g=void 0;return f.start=Math.max(f.start,0),t&&!e.isTimeSyncCompleted()?(m=Math.floor(f.start/o),g=Math.floor(f.end/o),{start:m,end:g}):(l&&l.length>0?(v=c(i,n),d=v?e.calcPeriodRelativeTimeFromMpdRelativeTime(n,v.presentationStartTime):i>0?i*o:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,r)):d=i>0?i*o:t?f.end:f.start,m=Math.floor(Math.max(d-h,f.start)/o),g=Math.floor(Math.min(m+p/o,f.end/o)),{start:m,end:g})}Object.defineProperty(n,"__esModule",{value:!0}),n.unescapeDollarsInTemplate=o,n.replaceIDForTemplate=u,n.replaceTokenForTemplate=a,n.getIndexBasedSegment=f,n.getTimeBasedSegment=l,n.getSegmentByIndex=c,n.decideSegmentListRangeForTemplate=h;var p=e(88),d=r(p)},{88:88}],78:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){function n(e,n,i,s){var o=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate,a=e.segmentDuration,f=e.segmentAvailabilityRange,l=[],c=null,h=null,p=void 0,d=void 0,v=void 0,m=void 0,g=void 0;for(g=e.startNumber,p=isNaN(a)&&!t?{start:g,end:g}:(0,u.decideSegmentListRangeForTemplate)(r,t,e,n,i,s),v=p.start,m=p.end,d=v;d<=m;d++)h=(0,u.getIndexBasedSegment)(r,t,e,d),h.replacementTime=(g+d-1)*e.segmentDuration,c=o.media,c=(0,u.replaceTokenForTemplate)(c,"Number",h.replacementNumber),c=(0,u.replaceTokenForTemplate)(c,"Time",h.replacementTime),h.media=c,l.push(h),h=null;return isNaN(a)?e.availableSegmentsNumber=1:e.availableSegmentsNumber=Math.ceil((f.end-f.start)/a),l}var r=e.timelineConverter;return{getSegments:n}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s),u=e(77);i.__dashjs_factory_name="TemplateSegmentsGetter";var a=o.default.getClassFactory(i);n.default=a,t.exports=n.default},{51:51,77:77}],79:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){w(),x.on(a.default.TIME_SYNCHRONIZATION_COMPLETED,y,this)}function t(){return N}function n(e){N=e}function r(){return T}function i(e){T=e}function s(){return C}function u(e){C=e}function f(e,t,n,r){return r?n&&t.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:n?new Date(t.availabilityStartTime.getTime()+1e3*(e-T)):t.availabilityStartTime}function l(e,t,n){return f.call(this,e,t,n)}function c(e,t,n){return f.call(this,e,t,n,!0)}function h(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*T)/1e3}function p(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)}function d(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset}function v(e,t){var n=void 0,r=void 0,i=void 0;return t&&(n=e.representation.adaptation.period.mpd.suggestedPresentationDelay,r=e.presentationStartTime+n,i=new Date(e.availabilityStartTime.getTime()+1e3*r)),i}function m(e,t){var n=e.adaptation.period,r={start:n.start,end:n.start+n.duration};if(!t)return r;if(!N&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var i=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0),s=h(new Date,n),o=n.start+n.duration;return r.start=Math.max(s-n.mpd.timeShiftBufferDepth,n.start),r.end=s>=o&&s-i<o?o-i:s-i,r}function g(e,t){return t-e.adaptation.period.start}function y(e){N||void 0!==e.offset&&(i(e.offset/1e3),N=!0)}function b(e){var t=e.presentationTimeOffset;return e.adaptation.period.start-t}function w(){T=0,N=!1,C=NaN}function E(){x.off(a.default.TIME_SYNCHRONIZATION_COMPLETED,y,this),w()}var S=this.context,x=(0,o.default)(S).getInstance(),T=void 0,N=void 0,C=void 0;return{initialize:e,isTimeSyncCompleted:t,setTimeSyncCompleted:n,getClientTimeOffset:r,setClientTimeOffset:i,getExpectedLiveEdge:s,setExpectedLiveEdge:u,calcAvailabilityStartTimeFromPresentationTime:l,calcAvailabilityEndTimeFromPresentationTime:c,calcPresentationTimeFromWallTime:h,calcPresentationTimeFromMediaTime:p,calcPeriodRelativeTimeFromMpdRelativeTime:g,calcMediaTimeFromPresentationTime:d,calcSegmentAvailabilityRange:m,calcWallTimeForSegment:v,calcMSETimeOffset:b,reset:E}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(50),o=r(s),u=e(54),a=r(u),f=e(51),l=r(f);i.__dashjs_factory_name="TimelineConverter",n.default=l.default.getSingletonFactory(i),t.exports=n.default},{50:50,51:51,54:54}],80:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){function n(){if(!(i&&i.hasOwnProperty("calcMediaTimeFromPresentationTime")&&i.hasOwnProperty("calcSegmentAvailabilityRange")&&i.hasOwnProperty("calcMediaTimeFromPresentationTime")))throw new Error("Missing config parameter(s)")}function r(e,r,s,o){if(n(),!e)throw new Error("no representation");void 0===r&&(r=null);var a=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,f=a.SegmentTimeline,l=a.SegmentURL_asArray,c=e.availableSegmentsNumber>0,h=void 0;h=o||(s>-1||null!==r?10:1/0);var p=0,d=0,v=-1,m=[],g=null,y=void 0,b=void 0,w=void 0,E=void 0,S=void 0,x=void 0,T=void 0,N=void 0,C=void 0,k=void 0,L=void 0,A=function(n,r){var s=a.media,o=n.mediaRange;return l&&(s=l[r].media||"",o=l[r].mediaRange),(0,u.getTimeBasedSegment)(i,t,e,p,n.d,L,s,o,v,n.tManifest)};for(L=e.timescale,y=f.S_asArray,k=s,null!==r&&(g=i.calcMediaTimeFromPresentationTime(r,e)),w=0,E=y.length;w<E;w++){if(b=y[w],x=0,b.hasOwnProperty("r")&&(x=b.r),b.hasOwnProperty("t")&&(p=b.t,d=p/L),x<0){if((N=y[w+1])&&N.hasOwnProperty("t"))T=N.t/L;else{var O=e.segmentAvailabilityRange?e.segmentAvailabilityRange.end:i.calcSegmentAvailabilityRange(e,t).end;T=i.calcMediaTimeFromPresentationTime(O,e),e.segmentDuration=b.d/L}x=Math.ceil((T-d)/(b.d/L))-1}if(C){if(c)break;v+=x+1}else for(S=0;S<=x;S++)if(v++,m.length>h){if(C=!0,c)break}else null!==g?d>=g-b.d/L*1.5&&m.push(A(b,v)):v>=k&&m.push(A(b,v)),p+=b.d,d=p/L}return c||(e.availableSegmentsNumber=v+1),m}e=e||{};var i=e.timelineConverter;return{getSegments:r}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s),u=e(77);i.__dashjs_factory_name="TimelineSegmentsGetter";var a=o.default.getClassFactory(i);n.default=a,t.exports=n.default},{51:51,77:77}],81:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.period=null,this.index=-1,this.type=null};n.default=i,t.exports=n.default},{}],82:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=1,s=1,o=function u(e,t,n,o){r(this,u),this.url=e||"",this.serviceLocation=t||e||"",this.dvb_priority=n||i,this.dvb_weight=o||s};o.DEFAULT_DVB_PRIORITY=i,o.DEFAULT_DVB_WEIGHT=s,n.default=o,t.exports=n.default},{}],83:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN};n.default=i,t.exports=n.default},{}],84:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri=""};n.default=i,t.exports=n.default},{}],85:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN};n.default=i,t.exports=n.default},{}],86:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null};i.DEFAULT_ID="defaultId",n.default=i,t.exports=n.default},{}],87:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(61),u=r(o),a=function(){function e(){i(this,e),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN}return s(e,null,[{key:"hasInitialization",value:function(e){return null!==e.initialization||(e.segmentInfoType===u.default.BASE_URL||e.segmentInfoType===u.default.SEGMENT_BASE)&&null!==e.range}},{key:"hasSegments",value:function(e){return e.segmentInfoType!==u.default.BASE_URL&&e.segmentInfoType!==u.default.SEGMENT_BASE&&!e.indexRange}}]),e}();n.default=a,t.exports=n.default},{61:61}],88:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null};n.default=i,t.exports=n.default},{}],89:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.schemeIdUri="",this.value=""};n.default=i,t.exports=n.default},{}],90:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){p=(0,o.default)(u).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier})}function n(e){var t=function(t){f.trigger(d.default.CHECK_FOR_EXISTENCE_COMPLETED,{request:e,exists:t})};if(e){var n=new a.default(e.url);p.load({request:n,success:function(){t(!0)},error:function(){t(!1)}})}else t(!1)}function r(e){var t=function(t,n){f.trigger(d.default.LOADING_COMPLETED,{request:e,response:t||null,error:n||null,sender:c})};e?p.load({request:e,progress:function(){f.trigger(d.default.LOADING_PROGRESS,{request:e})},success:function(e){t(e)},error:function(e,n,r){t(void 0,new l.default(g,r,n))},abort:function(e,t){e&&0===t&&f.trigger(d.default.LOADING_ABANDONED,{request:e,mediaType:e.mediaType,sender:c})}}):t(void 0,new l.default(y,b))}function i(){p&&p.abort()}function s(){p&&(p.abort(),p=null)}e=e||{};var u=this.context,f=(0,h.default)(u).getInstance(),c=void 0,p=void 0;return c={checkForExistence:n,load:r,abort:i,reset:s},t(),c}Object.defineProperty(n,"__esModule",{value:!0});var s=e(98),o=r(s),u=e(214),a=r(u),f=e(211),l=r(f),c=e(50),h=r(c),p=e(54),d=r(p),v=e(51),m=r(v),g=1,y=2,b="request is null";i.__dashjs_factory_name="FragmentLoader";var w=m.default.getClassFactory(i);w.FRAGMENT_LOADER_ERROR_LOADING_FAILURE=g,w.FRAGMENT_LOADER_ERROR_NULL_REQUEST=y,m.default.updateClassFactory(i.__dashjs_factory_name,w),n.default=w,t.exports=n.default},{211:211,214:214,50:50,51:51,54:54,98:98}],91:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){f.on(E.default.XLINK_READY,n,y),w=(0,l.default)(u).create({errHandler:C,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),S=(0,a.default)(u).create({errHandler:C,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),x=null}function n(e){f.trigger(E.default.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}function r(e){var t=null;return e.indexOf("SmoothStreamingMedia")>-1?(T?(t=T.createMssParser(),T.registerEvents()):C.manifestError("manifest type unsupported","createParser"),t):e.indexOf("MPD")>-1?(0,N.default)(u).create({errorHandler:C}):t}function i(e){var t=new d.default(e,g.HTTPRequest.MPD_TYPE);w.load({request:t,success:function(t,n,i){var s=void 0,u=void 0;if(i.responseURL&&i.responseURL!==e?(u=c.parseBaseUrl(i.responseURL),s=i.responseURL):(c.isRelative(e)&&(e=c.resolve(e,window.location.href)),u=c.parseBaseUrl(e)),null===x&&(x=r(t)),null===x)return void f.trigger(E.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new m.default(L,"Failed detecting manifest type: "+e)});S.setMatchers(x.getMatchers()),S.setIron(x.getIron());var a=x.parse(t);a?(a.url=s||e,a.originalUrl||(a.originalUrl=a.url),a.hasOwnProperty(o.default.LOCATION)&&(u=c.parseBaseUrl(a.Location_asArray[0]),v("BaseURI set by Location to: "+u)),a.baseUri=u,a.loadedTime=new Date,S.resolveManifestOnLoad(a)):f.trigger(E.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new m.default(L,O)})},error:function(t,n,r){f.trigger(E.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new m.default(A,"Failed loading manifest: "+e+", "+r)})}})}function s(){f.off(E.default.XLINK_READY,n,y),S&&(S.reset(),S=null),w&&(w.abort(),w=null),T&&T.reset()}e=e||{};var u=this.context,f=(0,b.default)(u).getInstance(),c=(0,h.default)(u).getInstance(),p=(0,k.default)(u).getInstance(),v=p.log,y=void 0,w=void 0,S=void 0,x=void 0,T=e.mssHandler,C=e.errHandler;return y={load:i,reset:s},t(),y}Object.defineProperty(n,"__esModule",{value:!0});var s=e(100),o=r(s),u=e(116),a=r(u),f=e(98),l=r(f),c=e(206),h=r(c),p=e(221),d=r(p),v=e(211),m=r(v),g=e(230),y=e(50),b=r(y),w=e(54),E=r(w),S=e(51),x=r(S),T=e(64),N=r(T),C=e(49),k=r(C),L=1,A=2,O="parsing failed";i.__dashjs_factory_name="ManifestLoader";var M=x.default.getClassFactory(i);M.MANIFEST_LOADER_ERROR_PARSING_FAILURE=L,M.MANIFEST_LOADER_ERROR_LOADING_FAILURE=A,x.default.updateClassFactory(i.__dashjs_factory_name,M),n.default=M,t.exports=n.default},{100:100,116:116,206:206,211:211,221:221,230:230,49:49,50:50,51:51,54:54,64:64,98:98}],92:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){e&&(e.manifestModel&&(N=e.manifestModel),e.dashManifestModel&&(C=e.dashManifestModel),e.mediaPlayerModel&&(k=e.mediaPlayerModel),e.manifestLoader&&(T=e.manifestLoader))}function t(){r(),b.on(a.default.STREAMS_COMPOSED,m,this),b.on(a.default.PLAYBACK_STARTED,d,this),b.on(a.default.PLAYBACK_PAUSED,v,this),b.on(a.default.INTERNAL_MANIFEST_LOADED,p,this)}function n(e){l(e)}function r(){w=NaN,x=!1,S=!0,s()}function i(){b.off(a.default.PLAYBACK_STARTED,d,this),b.off(a.default.PLAYBACK_PAUSED,v,this),b.off(a.default.STREAMS_COMPOSED,m,this),b.off(a.default.INTERNAL_MANIFEST_LOADED,p,this),r()}function s(){null!==E&&(clearInterval(E),E=null)}function u(){s(),isNaN(w)||(y("Refresh manifest in "+w+" seconds."),E=setTimeout(c,1e3*w))}function f(){x=!0;var e=N.getValue(),t=e.url,n=C.getLocation(e);n&&(t=n),T.load(t)}function l(e){N.setValue(e);var t=new Date,n=(t.getTime()-e.loadedTime.getTime())/1e3;w=C.getManifestUpdatePeriod(e,n),b.trigger(a.default.MANIFEST_UPDATED,{manifest:e}),y("Manifest has been refreshed at "+t+"["+t.getTime()/1e3+"] "),S||u()}function c(){S&&!k.getScheduleWhilePaused
()||x||f()}function p(e){e.error||l(e.manifest)}function d(){S=!1,u()}function v(){S=!0,s()}function m(){x=!1}var g=this.context,y=(0,h.default)(g).getInstance().log,b=(0,o.default)(g).getInstance(),w=void 0,E=void 0,S=void 0,x=void 0,T=void 0,N=void 0,C=void 0,k=void 0;return{initialize:t,setManifest:n,refreshManifest:f,setConfig:e,reset:i}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(50),o=r(s),u=e(54),a=r(u),f=e(51),l=r(f),c=e(49),h=r(c);i.__dashjs_factory_name="ManifestUpdater",n.default=l.default.getClassFactory(i),t.exports=n.default},{49:49,50:50,51:51,54:54}],93:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){Mr=!1,_r=!1,Dr=!0,jr=null,Or=null,qr=null,Q.default.extend(Y.default),Ur=(0,P.default)(Tr).getInstance()}function t(e){e&&(e.capabilities&&(Wr=e.capabilities),e.streamController&&(Xr=e.streamController),e.playbackController&&(Vr=e.playbackController),e.mediaPlayerModel&&(Ur=e.mediaPlayerModel),e.abrController&&(Pr=e.abrController),e.mediaController&&(Br=e.mediaController))}function n(e,t,n){if(Wr||(Wr=(0,S.default)(Tr).getInstance()),zr=(0,w.default)(Tr).getInstance(),!Wr.supportsMediaSource())return void zr.capabilityError("mediasource");Mr||(Mr=!0,Hr=(0,ft.default)(Tr).getInstance(),Pr||(Pr=(0,F.default)(Tr).getInstance()),Vr||(Vr=(0,h.default)(Tr).getInstance()),Br||(Br=(0,m.default)(Tr).getInstance()),qr=(0,rt.default)(Tr).getInstance(),Jr=(0,st.default)(Tr).getInstance({mediaController:Br,timelineConverter:Hr,adapter:qr}),Kr=(0,_.default)(Tr).getInstance(),$r=(0,ut.default)(Tr).getInstance({manifestModel:Kr,dashManifestModel:Jr}),Rr=(0,B.default)(Tr).getInstance(),Gr=(0,L.default)(Tr).getInstance(),Yr=(0,W.default)(Tr).getInstance({mediaPlayerModel:Ur}),qr.setConfig({dashManifestModel:Jr}),Rr.setConfig({adapter:qr}),Yt(),Lt(void 0===n||n),e&&Hn(e),t&&nr(t),kr("[dash.js "+f()+"] MediaPlayer has been initialized"))}function r(){nr(null),Hn(null),Or=null,jr&&(jr.reset(),jr=null),Fr&&(Fr.reset(),Fr=null)}function i(){return!!Qr&&!!Ar}function s(e,t,n){Nr.on(e,t,n)}function u(e,t,n){Nr.off(e,t,n)}function f(){return(0,tt.getVersionString)()}function c(){return Cr}function p(){if(!_r)throw wr;(!Dr||g()&&_r)&&Vr.play()}function v(){if(!_r)throw wr;Vr.pause()}function g(){if(!_r)throw wr;return Vr.isPaused()}function b(e){if(!_r)throw wr;var t=Vr.getIsDynamic()?R(e):e;Vr.seek(t)}function E(){if(!_r)throw wr;return Vr.isSeeking()}function x(){if(!_r)throw wr;return Vr.getIsDynamic()}function N(e){if(!Qr)throw Er;_n().playbackRate=e}function k(){if(!Qr)throw Er;return _n().playbackRate}function A(e){if(!Qr)throw Er;_n().muted=e}function M(){if(!Qr)throw Er;return _n().muted}function D(e){if(!Qr)throw Er;_n().volume=e}function H(){if(!Qr)throw Er;return _n().volume}function j(e){var t=[o.default.VIDEO,o.default.AUDIO,o.default.FRAGMENTED_TEXT];if(e){if(-1!==t.indexOf(e)){var n=En().getCurrentBufferLevel(Sn(e));return n||NaN}return kr("Warning  - getBufferLength requested for invalid type"),NaN}var n=t.map(function(e){return qn(e).length>0?En().getCurrentBufferLevel(Sn(e)):Number.MAX_VALUE}).reduce(function(e,t){return Math.min(e,t)});return n===Number.MAX_VALUE?NaN:n}function I(){var e=mr();return e?e.manifestInfo.DVRWindowSize:0}function R(e){var t=mr(),n=Vr.getLiveDelay();if(!t)return 0;var r=t.range.start+e;return r>t.range.end-n&&(r=t.range.end-n),r}function z(e){if(!_r)throw wr;var t=_n().currentTime;if(void 0!==e)t=Xr.getTimeRelativeToStreamId(t,e);else if(Vr.getIsDynamic()){var n=mr();t=null===n?0:X()-(n.range.end-n.time)}return t}function X(){if(!_r)throw wr;var e=_n().duration;if(Vr.getIsDynamic()){var t=mr(),n=void 0;if(!t)return 0;n=t.range.end-t.range.start,e=n<t.manifestInfo.DVRWindowSize?n:t.manifestInfo.DVRWindowSize}return e}function $(){if(!_r)throw wr;return z()<0?NaN:gr(z())}function K(){if(!_r)throw wr;return gr(X())}function G(e,t){Pr.setMaxAllowedBitrateFor(e,t)}function Z(e,t){Pr.setMinAllowedBitrateFor(e,t)}function nt(e){return Pr.getMaxAllowedBitrateFor(e)}function it(e){return Pr.getMinAllowedBitrateFor(e)}function ot(e,t){Pr.setMaxAllowedRepresentationRatioFor(e,t)}function at(e){return Pr.getMaxAllowedRepresentationRatioFor(e)}function ct(e){if(!_r)throw wr;if(e===o.default.IMAGE){var t=yr();if(!t)return-1;var n=t.getThumbnailController();return n?n.getCurrentTrackIndex():-1}return Pr.getQualityFor(e,Xr.getActiveStreamInfo())}function pt(e,t){if(!_r)throw wr;if(e===o.default.IMAGE){var n=yr();if(!n)return;var r=n.getThumbnailController();r&&r.setTrackByIndex(t)}Pr.setPlaybackQuality(e,Xr.getActiveStreamInfo(),t)}function vt(){Pr.setElementSize(),Pr.setWindowResizeEventCalled(!0)}function mt(){return Pr.getLimitBitrateByPortal()}function gt(e){Pr.setLimitBitrateByPortal(e)}function yt(){return Pr.getUsePixelRatioInLimitBitrateByPortal()}function bt(e){Pr.setUsePixelRatioInLimitBitrateByPortal(e)}function wt(e,t){Pr.setInitialBitrateFor(e,t)}function Et(e){if(!_r)throw wr;return Pr.getInitialBitrateFor(e)}function St(e,t){Pr.setInitialRepresentationRatioFor(e,t)}function xt(e){return Pr.getInitialRepresentationRatioFor(e)}function Tt(e){return Pr.getAutoSwitchBitrateFor(e)}function Nt(e,t){Pr.setAutoSwitchBitrateFor(e,t)}function Ct(){return Pr.getUseDeadTimeLatency()}function kt(e){Pr.setUseDeadTimeLatency(e)}function Lt(e){Dr=e}function At(){return Dr}function Ot(e){Ur.setLiveDelayFragmentCount(e)}function Mt(e){Ur.setLiveDelay(e)}function _t(){return Ur.getLiveDelay()}function Dt(e){Ur.setUseSuggestedPresentationDelay(e)}function Pt(e,t){Ur.setLastBitrateCachingInfo(e,t)}function Ht(e,t){Ur.setLastMediaSettingsCachingInfo(e,t)}function Bt(e){Ur.setScheduleWhilePaused(e)}function jt(){return Ur.getScheduleWhilePaused()}function Ft(e){Ur.setFastSwitchEnabled(e)}function It(){return Ur.getFastSwitchEnabled()}function qt(e){throw new Error("Calling obsolete function - enabledBufferOccupancyABR("+e+") has no effect.")}function Rt(e){e===o.default.ABR_STRATEGY_DYNAMIC||e===o.default.ABR_STRATEGY_BOLA||e===o.default.ABR_STRATEGY_THROUGHPUT?Ur.setABRStrategy(e):kr("Warning: Ignoring setABRStrategy("+e+") - unknown value.")}function Ut(){return Ur.getABRStrategy()}function zt(e){Ur.setUseDefaultABRRules(e)}function Wt(e,t,n){Ur.addABRCustomRule(e,t,n)}function Xt(e){Ur.removeABRCustomRule(e)}function Vt(){Ur.removeAllABRCustomRule()}function $t(e){e===o.default.MOVING_AVERAGE_SLIDING_WINDOW||e===o.default.MOVING_AVERAGE_EWMA?Ur.setMovingAverageMethod(e):kr("Warning: Ignoring setMovingAverageMethod("+e+") - unknown value.")}function Jt(){return Ur.getMovingAverageMethod()}function Kt(e,t){Qt(e,t);var n=new l.default;n.schemeIdUri=e,n.value=t,Ur.getUTCTimingSources().push(n)}function Qt(e,t){var n=Ur.getUTCTimingSources();n.forEach(function(r,i){r.schemeIdUri===e&&r.value===t&&n.splice(i,1)})}function Gt(){Ur.setUTCTimingSources([])}function Yt(){Kt(P.default.DEFAULT_UTC_TIMING_SOURCE.scheme,P.default.DEFAULT_UTC_TIMING_SOURCE.value)}function Zt(e){Ur.setUseManifestDateHeaderTimeSource(e)}function en(e){Ur.setBufferToKeep(e)}function tn(e){Ur.setBufferPruningInterval(e)}function nn(e){Ur.setStableBufferTime(e)}function rn(){return Ur.getStableBufferTime()}function sn(e){Ur.setBufferTimeAtTopQuality(e)}function on(){return Ur.getBufferTimeAtTopQuality()}function un(e){Ur.setBufferTimeAtTopQualityLongForm(e)}function an(){return Ur.getBufferTimeAtTopQualityLongForm()}function fn(e){Ur.setLongFormContentDurationThreshold(e)}function ln(e){throw new Error("Calling obsolete function - setRichBufferThreshold("+e+") has no effect.")}function cn(e){Ur.setBandwidthSafetyFactor(e)}function hn(){return Ur.getBandwidthSafetyFactor()}function pn(e){var t=Pr.getThroughputHistory();return t?t.getAverageThroughput(e):0}function dn(e){Ur.setAbandonLoadTimeout(e)}function vn(e){Ur.setFragmentRetryAttempts(e)}function mn(e){Ur.setFragmentRetryInterval(e)}function gn(e){Ur.setManifestRetryAttempts(e)}function yn(e){Ur.setManifestRetryInterval(e)}function bn(e,t){Ur.setXHRWithCredentialsForType(e,t)}function wn(e){return Ur.getXHRWithCredentialsForType(e)}function En(){return $r}function Sn(e){return Rr.getReadOnlyMetricsFor(e)}function xn(e){void 0===Gr&&(Gr=(0,L.default)(Tr).getInstance()),Gr.setTextDefaultLanguage(e)}function Tn(){return void 0===Gr&&(Gr=(0,L.default)(Tr).getInstance()),Gr.getTextDefaultLanguage()}function Nn(e){void 0===Gr&&(Gr=(0,L.default)(Tr).getInstance()),Gr.setTextDefaultEnabled(e)}function Cn(){return void 0===Gr&&(Gr=(0,L.default)(Tr).getInstance()),Gr.getTextDefaultEnabled()}function kn(e){void 0===Gr&&(Gr=(0,L.default)(Tr).getInstance()),Gr.enableText(e)}function Ln(){return void 0===Gr&&(Gr=(0,L.default)(Tr).getInstance()),Gr.isTextEnabled()}function An(e){if(!_r)throw wr;void 0===Gr&&(Gr=(0,L.default)(Tr).getInstance()),Gr.setTextTrack(e)}function On(){var e=NaN;return Gr&&(e=Gr.getCurrentTrackIdx()),e}function Mn(e){var t=(0,T.default)(Tr).getInstance();t.setConfig({videoModel:Qr}),t.initialize(),t.displayCConTop(e)}function _n(){if(!Qr)throw Er;return Qr.getElement()}function Dn(){return Qr?Qr.getVideoContainer():null}function Pn(e){if(!Qr)throw Er;Qr.setVideoContainer(e)}function Hn(e){if(!Mr)throw xr;Qr&&Qr.reset(),Qr=null,e&&(Qr=(0,U.default)(Tr).getInstance(),Qr.initialize(),Qr.setElement(e),pr(),dr(),vr()),lr()}function Bn(){return Qr?Qr.getTTMLRenderingDiv():null}function jn(e){if(!Qr)throw Er;Qr.setTTMLRenderingDiv(e)}function Fn(e){if(!_r)throw wr;var t=yr();return t?t.getBitrateListFor(e):[]}function In(e){if(!_r)throw wr;return qr.getStreamsInfo(e)}function qn(e){if(!_r)throw wr;var t=Xr.getActiveStreamInfo();return t?Br.getTracksFor(e,t):[]}function Rn(e,t,n){if(!_r)throw wr;return n=n||qr.getStreamsInfo(t)[0],n?qr.getAllMediaInfoForType(n,e,t):[]}function Un(e){if(!_r)throw wr;var t=Xr.getActiveStreamInfo();return t?Br.getCurrentTrackFor(e,t):null}function zn(e,t){if(!Mr)throw xr;Br.setInitialSettings(e,t)}function Wn(e){if(!Mr)throw xr;return Br.getInitialSettings(e)}function Xn(e){if(!_r)throw wr;Br.setTrack(e)}function Vn(e){if(!Mr)throw xr;return Br.getSwitchMode(e)}function $n(e,t){if(!Mr)throw xr;Br.setSwitchMode(e,t)}function Jn(e){if(!Mr)throw xr;Br.setSelectionModeForInitialTrack(e)}function Kn(){if(!Mr)throw xr;return Br.getSelectionModeForInitialTrack()}function Qn(){return pr()}function Gn(e){jr=e}function Yn(e){Or=e}function Zn(e){if(e<0)return null;var t=Vr.getIsDynamic()?R(e):e,n=Xr.getStreamForTime(t);if(null===n)return null;var r=n.getThumbnailController(),i=n.getStreamInfo();if(!r||!i)return null;var s=Xr.getTimeRelativeToStreamId(e,n.getId());return r.get(s)}function er(e,t){var n=hr(),r=this,i=function o(e){e.error?t(null,e.error):t(e.manifest),Nr.off(Q.default.INTERNAL_MANIFEST_LOADED,o,r),n.reset()};Nr.on(Q.default.INTERNAL_MANIFEST_LOADED,i,r);var s=(0,O.default)(Tr).getInstance();s.initialize(),n.load(s.parseURI(e))}function tr(){if(!Ar)throw Sr;return Ar}function nr(e){if(!Mr)throw xr;if("string"==typeof e){var t=(0,O.default)(Tr).getInstance();t.initialize(),Ar=t.parseURI(e)}else Ar=e;lr()}function rr(e,t,n){var r=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],i=new Date(1e3*e),s=i.toLocaleDateString(t),o=i.toLocaleTimeString(t,{hour12:n});return r?o+" "+s:o}function ir(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(r<10?"0"+r.toString():r.toString())}function sr(e,t,n){et.default.extend(e,t,n,Tr)}function or(){if(!Qr)throw Er;return Qr}function ur(){return Pr.getAutoSwitchBitrateFor(o.default.VIDEO)||Pr.getAutoSwitchBitrateFor(o.default.AUDIO)}function ar(e){Pr.setAutoSwitchBitrateFor(o.default.VIDEO,e),Pr.setAutoSwitchBitrateFor(o.default.AUDIO,e)}function fr(e){bn(void 0,e)}function lr(){_r?(_r=!1,qr.reset(),Xr.reset(),Vr.reset(),Pr.reset(),Br.reset(),Gr.reset(),jr&&(jr.reset(),jr=null,pr()),i()&&br()):i()&&br()}function cr(){var e=hr(),t=(0,q.default)(Tr).getInstance({textController:Gr});Xr||(Xr=(0,d.default)(Tr).getInstance()),Br.setConfig({errHandler:zr,domStorage:Yr}),Xr.setConfig({capabilities:Wr,manifestLoader:e,manifestModel:Kr,dashManifestModel:Jr,mediaPlayerModel:Ur,protectionController:jr,adapter:qr,metricsModel:Rr,dashMetrics:$r,errHandler:zr,timelineConverter:Hr,videoModel:Qr,playbackController:Vr,domStorage:Yr,abrController:Pr,mediaController:Br,textController:Gr,sourceBufferController:t}),Vr.setConfig({streamController:Xr,metricsModel:Rr,dashMetrics:$r,manifestModel:Kr,mediaPlayerModel:Ur,dashManifestModel:Jr,adapter:qr,videoModel:Qr}),Pr.setConfig({streamController:Xr,domStorage:Yr,mediaPlayerModel:Ur,metricsModel:Rr,dashMetrics:$r,dashManifestModel:Jr,manifestModel:Kr,videoModel:Qr,adapter:qr}),Pr.createAbrRulesCollection(),Gr.setConfig({errHandler:zr,manifestModel:Kr,dashManifestModel:Jr,mediaController:Br,streamController:Xr,videoModel:Qr}),Xr.initialize(Dr,Or)}function hr(){return(0,y.default)(Tr).create({errHandler:zr,metricsModel:Rr,mediaPlayerModel:Ur,requestModifier:(0,C.default)(Tr).getInstance(),mssHandler:Ir})}function pr(){if(jr)return jr;var e=dashjs.Protection;if("function"==typeof e){var t=e(Tr).create();return Q.default.extend(e.events),Y.default.extend(e.events,{publicOnly:!0}),jr=t.createProtectionSystem({log:kr,errHandler:zr,videoModel:Qr,capabilities:Wr,eventBus:Nr,adapter:qr,events:Q.default,BASE64:ht.default,constants:o.default})}return null}function dr(){if(!Fr){var e=dashjs.MetricsReporting;if("function"==typeof e){var t=e(Tr).create();Fr=t.createMetricsReporting({log:kr,eventBus:Nr,mediaElement:_n(),dashManifestModel:Jr,metricsModel:Rr,events:Q.default,constants:o.default,metricsConstants:a.default})}}}function vr(){if(!Ir){var e=dashjs.MssHandler;"function"==typeof e&&(Ir=e(Tr).create({eventBus:Nr,mediaPlayerModel:Ur,metricsModel:Rr,playbackController:Vr,protectionController:jr,errHandler:zr,events:Q.default,constants:o.default,log:kr,initSegmentType:lt.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:ht.default,ISOBoxer:dt.default}))}}function mr(){var e=Rr.getReadOnlyMetricsFor(o.default.VIDEO)||Rr.getReadOnlyMetricsFor(o.default.AUDIO);return $r.getCurrentDVRInfo(e)}function gr(e){var t=mr(),n=void 0;return t?(n=t.manifestInfo.availableFrom.getTime()/1e3,e+(n+t.range.start)):0}function yr(){if(!_r)throw wr;var e=Xr.getActiveStreamInfo();return e?Xr.getStreamById(e.id):null}function br(){_r||(cr(),_r=!0,kr("Playback Initialized"),"string"==typeof Ar?Xr.load(Ar):Xr.loadWithManifest(Ar))}var wr="You must first call initialize() to init playback before calling this method",Er="You must first call attachView() to set the video element before calling this method",Sr="You must first call attachSource() with a valid source before calling this method",xr="MediaPlayer not initialized!",Tr=this.context,Nr=(0,J.default)(Tr).getInstance(),Cr=(0,V.default)(Tr).getInstance(),kr=Cr.log,Lr=void 0,Ar=void 0,Or=void 0,Mr=void 0,_r=void 0,Dr=void 0,Pr=void 0,Hr=void 0,Br=void 0,jr=void 0,Fr=void 0,Ir=void 0,qr=void 0,Rr=void 0,Ur=void 0,zr=void 0,Wr=void 0,Xr=void 0,Vr=void 0,$r=void 0,Jr=void 0,Kr=void 0,Qr=void 0,Gr=void 0,Yr=void 0;return Lr={initialize:n,setConfig:t,on:s,off:u,extend:sr,attachView:Hn,attachSource:nr,isReady:i,play:p,isPaused:g,pause:v,isSeeking:E,isDynamic:x,seek:b,setPlaybackRate:N,getPlaybackRate:k,setMute:A,isMuted:M,setVolume:D,getVolume:H,time:z,duration:X,timeAsUTC:$,durationAsUTC:K,getActiveStream:yr,getDVRWindowSize:I,getDVRSeekOffset:R,convertToTimeCode:ir,formatUTC:rr,getVersion:f,getDebug:c,getBufferLength:j,getVideoModel:or,getVideoContainer:Dn,getTTMLRenderingDiv:Bn,getVideoElement:_n,getSource:tr,setLiveDelayFragmentCount:Ot,setLiveDelay:Mt,getLiveDelay:_t,useSuggestedPresentationDelay:Dt,enableLastBitrateCaching:Pt,enableLastMediaSettingsCaching:Ht,setMaxAllowedBitrateFor:G,getMaxAllowedBitrateFor:nt,setMinAllowedBitrateFor:Z,getMinAllowedBitrateFor:it,setMaxAllowedRepresentationRatioFor:ot,getMaxAllowedRepresentationRatioFor:at,setAutoPlay:Lt,getAutoPlay:At,setScheduleWhilePaused:Bt,getScheduleWhilePaused:jt,getDashMetrics:En,getMetricsFor:Sn,getQualityFor:ct,setQualityFor:pt,updatePortalSize:vt,getLimitBitrateByPortal:mt,setLimitBitrateByPortal:gt,getUsePixelRatioInLimitBitrateByPortal:yt,setUsePixelRatioInLimitBitrateByPortal:bt,setTextDefaultLanguage:xn,getTextDefaultLanguage:Tn,setTextDefaultEnabled:Nn,getTextDefaultEnabled:Cn,enableText:kn,isTextEnabled:Ln,setTextTrack:An,getBitrateInfoListFor:Fn,setInitialBitrateFor:wt,getInitialBitrateFor:Et,setInitialRepresentationRatioFor:St,getInitialRepresentationRatioFor:xt,getStreamsFromManifest:In,getTracksFor:qn,getTracksForTypeFromManifest:Rn,getCurrentTrackFor:Un,setInitialMediaSettingsFor:zn,getInitialMediaSettingsFor:Wn,setCurrentTrack:Xn,getTrackSwitchModeFor:Vn,setTrackSwitchModeFor:$n,setSelectionModeForInitialTrack:Jn,getSelectionModeForInitialTrack:Kn,getAutoSwitchQuality:ur,setAutoSwitchQuality:ar,setFastSwitchEnabled:Ft,getFastSwitchEnabled:It,setMovingAverageMethod:$t,getMovingAverageMethod:Jt,getAutoSwitchQualityFor:Tt,setAutoSwitchQualityFor:Nt,enableBufferOccupancyABR:qt,setABRStrategy:Rt,getABRStrategy:Ut,useDefaultABRRules:zt,addABRCustomRule:Wt,removeABRCustomRule:Xt,removeAllABRCustomRule:Vt,setBandwidthSafetyFactor:cn,getBandwidthSafetyFactor:hn,getAverageThroughput:pn,setAbandonLoadTimeout:dn,retrieveManifest:er,addUTCTimingSource:Kt,removeUTCTimingSource:Qt,clearDefaultUTCTimingSources:Gt,restoreDefaultUTCTimingSources:Yt,setBufferToKeep:en,setBufferPruningInterval:tn,setStableBufferTime:nn,getStableBufferTime:rn,setBufferTimeAtTopQuality:sn,getBufferTimeAtTopQuality:on,setBufferTimeAtTopQualityLongForm:un,getBufferTimeAtTopQualityLongForm:an,setFragmentLoaderRetryAttempts:vn,setFragmentLoaderRetryInterval:mn,setManifestLoaderRetryAttempts:gn,setManifestLoaderRetryInterval:yn,setXHRWithCredentials:fr,setXHRWithCredentialsForType:bn,getXHRWithCredentialsForType:wn,setLongFormContentDurationThreshold:fn,setRichBufferThreshold:ln,getProtectionController:Qn,attachProtectionController:Gn,setProtectionData:Yn,enableManifestDateHeaderTimeSource:Zt,displayCaptionsOnTop:Mn,attachVideoContainer:Pn,attachTTMLRenderingDiv:jn,getCurrentTextTrackIndex:On,getUseDeadTimeLatencyForAbr:Ct,setUseDeadTimeLatencyForAbr:kt,getThumbnail:Zn,reset:r},e(),Lr}Object.defineProperty(n,"__esModule",{value:!0});var s=e(100),o=r(s),u=e(101),a=r(u),f=e(89),l=r(f),c=e(111),h=r(c),p=e(114),d=r(p),v=e(109),m=r(v),g=e(91),y=r(g),b=e(199),w=r(b),E=e(195),S=r(E),x=e(190),T=r(x),N=e(204),C=r(N),k=e(188),L=r(k),A=e(145),O=r(A),M=e(142),_=r(M),D=e(143),P=r(D),H=e(144),B=r(H),j=e(103),F=r(j),I=e(113),q=r(I),R=e(146),U=r(R),z=e(197),W=r(z),X=e(49),V=r(X),$=e(50),J=r($),K=e(54),Q=r(K),G=e(94),Y=r(G),Z=e(51),et=r(Z),tt=e(52),nt=e(56),rt=r(nt),it=e(63),st=r(it),ot=e(58),ut=r(ot),at=e(79),ft=r(at),lt=e(230),ct=e(1),ht=r(ct),pt=e(11),dt=r(pt);i.__dashjs_factory_name="MediaPlayer";var vt=et.default.getClassFactory(i);vt.events=Y.default,et.default.updateClassFactory(i.__dashjs_factory_name,vt),n.default=vt,t.exports=n.default},{1:1,100:100,101:101,103:103,109:109,11:11,111:111,113:113,114:114,142:142,143:143,144:144,145:145,146:146,188:188,190:190,195:195,197:197,199:199,204:204,230:230,49:49,50:50,51:51,52:52,54:54,56:56,58:58,63:63,79:79,89:89,91:91,94:94}],94:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(e,t,n){for(var r=!0;r;){var i=e,s=t,o=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,s);if(void 0!==u){if("value"in u)return u.value;var a=u.get;if(void 0===a)return;return a.call(o)}var f=Object.getPrototypeOf(i);if(null===f)return;e=f,t=s,n=o,r=!0,u=f=void 0}},u=e(55),a=r(u),f=function(e){function t(){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.AST_IN_FUTURE="astInFuture",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.SOURCE_INITIALIZED="sourceInitialized",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.CAN_PLAY="canPlay",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_SEEK_ASKED="playbackSeekAsked",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated"}return s(t,e),t}(a.default),l=new f;n.default=l,t.exports=n.default},{55:55}],95:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t,n){if(!e||"VIDEO"!==e.nodeName)return null;if(e._dashjs_player)return e._dashjs_player;var i=void 0,s=e.id||e.name||"video element";if(!(t=t||[].slice.call(e.querySelectorAll("source")).filter(function(e){return e.type==r})[0])&&e.src)t=document.createElement("source"),t.src=e.src;else if(!t&&!e.src)return null;return n=n||{},i=(0,a.default)(n).create(),i.initialize(e,t.src,e.autoplay),i.getDebug().log("Converted "+s+" to dash.js player and added content: "+t.src),e._dashjs_player=i,i}function t(t,i){var s=[];t=t||"[data-dashjs-player]",i=i||document;for(var o=i.querySelectorAll(t),u=0;u<o.length;u++){var a=e(o[u],null);s.push(a)}for(var f=i.querySelectorAll('source[type="'+r+'"]'),u=0;u<f.length;u++){var l=n(f[u]),a=e(l,null);s.push(a)}return s}function n(e){for(var t=!0;t;){var n=e;if(t=!1,"video"===n.nodeName.toLowerCase())return n;e=n.parentNode,t=!0}}var r="application/dash+xml";return{create:e,createAll:t}}function s(){window.removeEventListener("load",s),f.createAll()}function o(){window.dashjs&&(window.clearInterval(l),f.createAll())}Object.defineProperty(n,"__esModule",{value:!0});var u=e(93),a=r(u),f=i(),l=void 0;!("undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&"undefined"!=typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?f.createAll():l=window.setInterval(o,500):window.addEventListener("load",s)),n.default=f,t.exports=n.default},{93:93}],96:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){s(),pt=(0,h.default)(z).create({mediaPlayerModel:J,metricsModel:et,errHandler:Y}),X.on(y.default.BUFFERING_COMPLETED,j,st),X.on(y.default.DATA_UPDATE_COMPLETED,F,st)}function n(e,t){ft=e,(ht=t)&&(X.on(y.default.KEY_ERROR,C,st),X.on(y.default.SERVER_CERTIFICATE_UPDATED,C,st),X.on(y.default.LICENSE_REQUEST_COMPLETE,C,st),X.on(y.default.KEY_SYSTEM_SELECTED,C,st),X.on(y.default.KEY_SESSION_CREATED,C,st))}function r(e){ut||(X.on(y.default.CURRENT_TRACK_CHANGED,A,st),_(e),ut=!0)}function i(){for(var e=ot?ot.length:0,t=0;t<e;t++)ot[t].getFragmentModel().removeExecutedRequestsBeforeTime(c()+f()),ot[t].reset();ot=[],ut=!1,at=!1,X.off(y.default.CURRENT_TRACK_CHANGED,A,st)}function s(){i(),ft=null,lt={},ct=!1}function u(){nt&&nt.pause(),pt&&(pt.reset(),pt=null),s(),W=null,X.off(y.default.DATA_UPDATE_COMPLETED,F,st),X.off(y.default.BUFFERING_COMPLETED,j,st),X.off(y.default.KEY_ERROR,C,st),X.off(y.default.SERVER_CERTIFICATE_UPDATED,C,st),X.off(y.default.LICENSE_REQUEST_COMPLETE,C,st),X.off(y.default.KEY_SYSTEM_SELECTED,C,st),X.off(y.default.KEY_SESSION_CREATED,C,st)}function f(){return ft?ft.duration:NaN}function c(){return ft?ft.start:NaN}function p(){return ft?ft.id:NaN}function v(){return ft}function g(){return vt}function b(){return pt}function E(){return dt}function S(){if(!(tt&&tt.hasOwnProperty("getBitrateList")&&Q&&Q.hasOwnProperty("getAllMediaInfoForType")&&Q.hasOwnProperty("getEventsFor")))throw new Error("Missing config parameter(s)")}function x(e){if(S(),e===o.default.IMAGE)return dt?dt.getBitrateList():[];var t=H(e);return tt.getBitrateList(t)}function T(){vt&&vt.start()}function N(){vt&&vt.stop()}function C(e){e.error&&(Y.mediaKeySessionError(e.error),W(e.error),u())}function k(e){return e.type===o.default.TEXT?e.mimeType:e.type}function L(e){var t=e.type,n=void 0,r=void 0;if(t===o.default.MUXED&&e)return r="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",W(r),Y.manifestError(r,"multiplexedrep",V.getValue()),!1;if(t===o.default.TEXT||t===o.default.FRAGMENTED_TEXT||t===o.default.EMBEDDED_TEXT||t===o.default.IMAGE)return!0;if(n=e.codec,W(t+" codec: "+n),e.contentProtection&&!G.supportsEncryptedMedia())Y.capabilityError("encryptedmedia");else if(!G.supportsCodec(n))return r=t+"Codec ("+n+") is not supported.",Y.manifestError(r,"codec",V.getValue()),W(r),!1;return!0}function A(e){if(e.newMediaInfo.streamInfo.id===ft.id){var t=I(e.oldMediaInfo);if(t){var n=nt.getTime();W("Stream -  Process track changed at current time "+n);var r=e.newMediaInfo,i=V.getValue();W("Stream -  Update stream controller"),i.refreshManifestOnSwitchTrack?(W("Stream -  Refreshing manifest for switch track"),mt=e,K.refreshManifest()):(t.updateMediaInfo(r),r.type!==o.default.FRAGMENTED_TEXT&&(tt.updateTopQualityIndex(r),t.switchTrackAsked()))}}}function O(t,n,r,i){var s=(0,a.default)(z).create({type:k(t),mimeType:t.mimeType,timelineConverter:Z,adapter:Q,manifestModel:V,dashManifestModel:$,mediaPlayerModel:J,metricsModel:et,dashMetrics:e.dashMetrics,baseURLController:e.baseURLController,stream:st,abrController:tt,domStorage:e.domStorage,playbackController:nt,mediaController:rt,streamController:e.streamController,textController:it,sourceBufferController:e.sourceBufferController,errHandler:Y});if(s.initialize(r),tt.updateTopQualityIndex(t),i?(s.setBuffer(i.buffer),s.getIndexHandler().setCurrentTime(i.currentTime),ot[i.replaceIdx]=s):ot.push(s),!i||!i.ignoreMediaInfo)if(t.type===o.default.TEXT||t.type===o.default.FRAGMENTED_TEXT){for(var u=void 0,f=0;f<n.length;f++)n[f].index===t.index&&(u=f),s.updateMediaInfo(n[f]);t.type===o.default.FRAGMENTED_TEXT&&s.updateMediaInfo(n[u])}else s.updateMediaInfo(t)}function M(t,n){var r=Q.getAllMediaInfoForType(ft,t),i=null,s=void 0;if(!r||0===r.length)return void W("No "+t+" data.");for(var u=0,a=r.length;u<a;u++)if(i=r[u],t===o.default.EMBEDDED_TEXT)it.addEmbeddedTrack(i);else{if(!L(i))continue;rt.isMultiTrackSupportedByType(i.type)&&rt.addTrack(i,ft)}if(t!==o.default.EMBEDDED_TEXT&&0!==rt.getTracksFor(t,ft).length){if(t===o.default.IMAGE)return void (dt=(0,d.default)(z).create({dashManifestModel:$,adapter:Q,baseURLController:e.baseURLController,stream:st}));rt.checkInitialMediaSettingsForType(t,ft),s=rt.getCurrentTrackFor(t,ft),O(s,r,n)}}function _(e){S();var t=void 0;if(vt||(vt=(0,l.default)(z).create(),vt.setConfig({manifestModel:V,manifestUpdater:K,playbackController:nt}),t=Q.getEventsFor(ft),vt.addInlineEvents(t)),ct=!0,D(o.default.VIDEO),D(o.default.AUDIO),M(o.default.VIDEO,e),M(o.default.AUDIO,e),M(o.default.TEXT,e),M(o.default.FRAGMENTED_TEXT,e),M(o.default.EMBEDDED_TEXT,e),M(o.default.MUXED,e),M(o.default.IMAGE,e),B(),at=!0,ct=!1,0===ot.length){var n="No streams to play.";Y.manifestError(n,"nostreams",V.getValue()),W(n)}else P()}function D(e){var t=$.getAdaptationForType(V.getValue(),ft.index,e,ft);if(!t||!Array.isArray(t.Representation_asArray))return null;t.Representation_asArray=t.Representation_asArray.filter(function(e,n){if(0===n)return!0;var r=$.getCodec(t,n,!0);return!!G.supportsCodec(r)||(W("[Stream] codec not supported: "+r),!1)})}function P(){for(var e=ot.length,t=!!lt.audio||!!lt.video,n=t?new Error(U,"Data update failed",null):null,r=0;r<e;r++)if(ot[r].isUpdating()||ct)return;at&&(ht&&ht.initialize(V.getValue(),H(o.default.AUDIO),H(o.default.VIDEO)),X.trigger(y.default.STREAM_INITIALIZED,{streamInfo:ft,error:n}))}function H(e){for(var t=ot.length,n=null,r=0;r<t;r++)if(n=ot[r],n.getType()===e)return n.getMediaInfo();return null}function B(){for(var e=0,t=ot.length;e<t;e++)ot[e].createBuffer()}function j(e){if(e.streamInfo===ft){var t=q(),n=t.length;if(0===n)return void W("[Stream] onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined");for(var r=0;r<n;r++)if(!t[r].isBufferingCompleted()&&(t[r].getType()===o.default.AUDIO||t[r].getType()===o.default.VIDEO))return void W("[Stream] onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because streamProcessor "+t[r].getType()+" is not buffering completed");W("[Stream] onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),X.trigger(y.default.STREAM_BUFFERING_COMPLETED,{streamInfo:ft})}}function F(e){var t=e.sender.getStreamProcessor();t.getStreamInfo()===ft&&(lt[t.getType()]=e.error,P())}function I(e){return!!e&&q().filter(function(t){return t.getType()===e.type})[0]}function q(){for(var e=ot.length,t=[],n=void 0,r=void 0,i=0;i<e;i++)r=ot[i],(n=r.getType())!==o.default.AUDIO&&n!==o.default.VIDEO&&n!==o.default.FRAGMENTED_TEXT||t.push(r);return t}function R(e){if(W("Manifest updated... updating data system wide."),ut=!1,ct=!0,ft=e,vt){var t=Q.getEventsFor(ft);vt.addInlineEvents(t)}D(o.default.VIDEO),D(o.default.AUDIO);for(var n=0,r=ot.length;n<r;n++){var i=ot[n],s=Q.getMediaInfoForType(ft,i.getType());tt.updateTopQualityIndex(s),i.updateMediaInfo(s)}if(mt){var s=mt.newMediaInfo;if("fragmentedText"!==s.type){var u=I(mt.oldMediaInfo);if(!u)return;u.switchTrackAsked(),mt=void 0}}ct=!1,P()}var U=1;e=e||{};var z=this.context,W=(0,w.default)(z).getInstance().log,X=(0,m.default)(z).getInstance(),V=e.manifestModel,$=e.dashManifestModel,J=e.mediaPlayerModel,K=e.manifestUpdater,Q=e.adapter,G=e.capabilities,Y=e.errHandler,Z=e.timelineConverter,et=e.metricsModel,tt=e.abrController,nt=e.playbackController,rt=e.mediaController,it=e.textController,st=void 0,ot=void 0,ut=void 0,at=void 0,ft=void 0,lt=void 0,ct=void 0,ht=void 0,pt=void 0,dt=void 0,vt=void 0,mt=void 0;return st={initialize:n,activate:r,deactivate:i,getDuration:f,getStartTime:c,getId:p,getStreamInfo:v,getFragmentController:b,getThumbnailController:E,getEventController:g,getBitrateListFor:x,startEventController:T,stopEventController:N,updateData:R,reset:u,getProcessors:q},t(),st}Object.defineProperty(n,"__esModule",{value:!0});var s=e(100),o=r(s),u=e(97),a=r(u),f=e(107),l=r(f),c=e(108),h=r(c),p=e(191),d=r(p),v=e(50),m=r(v),g=e(54),y=r(g),b=e(49),w=r(b),E=e(51),S=r(E);i.__dashjs_factory_name="Stream",n.default=S.default.getClassFactory(i),t.exports=n.default},{100:100,107:107,108:108,191:191,49:49,50:50,51:51,54:54,97:97}],97:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){Y&&Y.getIsDynamic()&&(ht=(0,a.default)(R).create({timelineConverter:V,streamProcessor:ut})),f()}function n(t){U=(0,w.default)(R).create({mimeType:X,timelineConverter:V,dashMetrics:st,metricsModel:it,mediaPlayerModel:K,baseURLController:e.baseURLController,errHandler:W}),U.initialize(ut),G.registerStreamType(z,ut),dt=Q.getFragmentController().getModel(z),dt.setStreamProcessor(ut),lt=q(z),ct=(0,d.default)(R).create({type:z,metricsModel:it,adapter:$,dashMetrics:st,dashManifestModel:ot,timelineConverter:V,mediaPlayerModel:K,abrController:G,playbackController:Y,streamController:Z,textController:tt,sourceBufferController:nt,streamProcessor:ut}),pt=(0,m.default)(R).create(),pt.setConfig({abrController:G,domStorage:rt,metricsModel:it,dashMetrics:st,dashManifestModel:ot,manifestModel:J,playbackController:Y,timelineConverter:V,streamProcessor:ut}),lt.initialize(t),ct.initialize(),pt.initialize()}function r(e){vt.push(e)}function i
(e){var t=vt.indexOf(e);-1!==t&&vt.splice(t,1)}function s(){return vt}function u(){vt=[]}function f(){ft=[],at=null,u()}function c(e){U.reset(),lt&&(lt.reset(e),lt=null),ct&&(ct.reset(),ct=null),pt&&(pt.reset(),pt=null),G&&G.unRegisterStreamType(z),vt.forEach(function(e){e.reset()}),f(),z=null,Q=null,ht&&(ht.reset(),ht=null)}function p(){return!!pt&&pt.isUpdating()}function v(){return z}function g(){return pt}function y(){return U}function b(){return Q?Q.getFragmentController():null}function E(){return lt.getBuffer()}function S(e){lt.setBuffer(e)}function x(){return lt}function T(){return dt}function N(){return ht}function C(){return Q?Q.getStreamInfo():null}function k(){return Q?Q.getEventController():null}function L(e){e===at||e&&at&&e.type!==at.type||(at=e),-1===ft.indexOf(e)&&ft.push(e),$.updateData(this)}function A(){return ft}function O(){return at}function M(){return lt.getMediaSource()}function _(){return ct}function D(){return $.getCurrentRepresentationInfo(pt)}function P(e){return $.getRepresentationInfoForQuality(pt,e)}function H(){return!!lt&&lt.getIsBufferingCompleted()}function B(){return lt.getBufferLevel()}function j(e){lt&&lt.switchInitData(C().id,e)}function F(){return lt.getBuffer()||lt.createBuffer(at)}function I(){ct.switchTrackAsked()}function q(e){return e===o.default.VIDEO||e===o.default.AUDIO?(0,l.default)(R).create({type:e,metricsModel:it,mediaPlayerModel:K,manifestModel:J,sourceBufferController:nt,errHandler:W,streamController:Z,mediaController:et,adapter:$,textController:tt,abrController:G,playbackController:Y,streamProcessor:ut}):(0,h.default)(R).create({type:e,metricsModel:it,mediaPlayerModel:K,manifestModel:J,sourceBufferController:nt,errHandler:W,streamController:Z,mediaController:et,adapter:$,textController:tt,abrController:G,playbackController:Y,streamProcessor:ut})}e=e||{};var R=this.context,U=void 0,z=e.type,W=e.errHandler,X=e.mimeType,V=e.timelineConverter,$=e.adapter,J=e.manifestModel,K=e.mediaPlayerModel,Q=e.stream,G=e.abrController,Y=e.playbackController,Z=e.streamController,et=e.mediaController,tt=e.textController,nt=e.sourceBufferController,rt=e.domStorage,it=e.metricsModel,st=e.dashMetrics,ot=e.dashManifestModel,ut=void 0,at=void 0,ft=void 0,lt=void 0,ct=void 0,ht=void 0,pt=void 0,dt=void 0,vt=void 0;return ut={initialize:n,isUpdating:p,getType:v,getBufferController:x,getFragmentModel:T,getScheduleController:_,getLiveEdgeFinder:N,getEventController:k,getFragmentController:b,getRepresentationController:g,getIndexHandler:y,getCurrentRepresentationInfo:D,getRepresentationInfoForQuality:P,getBufferLevel:B,switchInitData:j,isBufferingCompleted:H,createBuffer:F,getStreamInfo:C,updateMediaInfo:L,switchTrackAsked:I,getMediaInfoArr:A,getMediaInfo:O,getMediaSource:M,getBuffer:E,setBuffer:S,registerExternalController:r,unregisterExternalController:i,getExternalControllers:s,unregisterAllExternalController:u,reset:c},t(),ut}Object.defineProperty(n,"__esModule",{value:!0});var s=e(100),o=r(s),u=e(202),a=r(u),f=e(106),l=r(f),c=e(187),h=r(c),p=e(112),d=r(p),v=e(62),m=r(v),g=e(51),y=r(g),b=e(57),w=r(b);i.__dashjs_factory_name="StreamProcessor",n.default=y.default.getClassFactory(i),t.exports=n.default},{100:100,106:106,112:112,187:187,202:202,51:51,57:57,62:62}],98:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){function t(){var e;p=[],d=[],v=[],e={},i(e,o.HTTPRequest.MPD_TYPE,l.default.DOWNLOAD_ERROR_ID_MANIFEST),i(e,o.HTTPRequest.XLINK_EXPANSION_TYPE,l.default.DOWNLOAD_ERROR_ID_XLINK),i(e,o.HTTPRequest.INIT_SEGMENT_TYPE,l.default.DOWNLOAD_ERROR_ID_INITIALIZATION),i(e,o.HTTPRequest.MEDIA_SEGMENT_TYPE,l.default.DOWNLOAD_ERROR_ID_CONTENT),i(e,o.HTTPRequest.INDEX_SEGMENT_TYPE,l.default.DOWNLOAD_ERROR_ID_CONTENT),i(e,o.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,l.default.DOWNLOAD_ERROR_ID_CONTENT),i(e,o.HTTPRequest.OTHER_TYPE,l.default.DOWNLOAD_ERROR_ID_CONTENT),m=e}function n(e,t){var r=e.request,i=new XMLHttpRequest,s=[],l=!0,h=!0,g=new Date,y=g,b=0,w=function(e){h=!1,r.requestStartDate=g,r.requestEndDate=new Date,r.firstByteDate=r.firstByteDate||g,r.checkExistenceOnly||a.addHttpRequest(r.mediaType,null,r.type,r.url,i.responseURL||null,r.serviceLocation||null,r.range||null,r.requestStartDate,r.firstByteDate,r.requestEndDate,i.status,r.duration,i.getAllResponseHeaders(),e?s:null)},E=function(){-1!==p.indexOf(i)&&(p.splice(p.indexOf(i),1),h&&(w(!1),t>0?(t--,v.push(setTimeout(function(){n(e,t)},f.getRetryIntervalForType(r.type)))):(u.downloadError(m[r.type],r.url,r),e.error&&e.error(r,"error",i.statusText),e.complete&&e.complete(r,i.statusText))))},S=function(t){var n=new Date;l&&(l=!1,(!t.lengthComputable||t.lengthComputable&&t.total!==t.loaded)&&(r.firstByteDate=n)),t.lengthComputable&&(r.bytesLoaded=t.loaded,r.bytesTotal=t.total),s.push({s:y,d:n.getTime()-y.getTime(),b:[t.loaded?t.loaded-b:0]}),y=n,b=t.loaded,e.progress&&e.progress()},x=function(){i.status>=200&&i.status<=299&&(w(!0),e.success&&e.success(i.response,i.statusText,i),e.complete&&e.complete(r,i.statusText))},T=function(){e.abort&&e.abort(r,i.status)};if(!c||!a||!u)throw new Error("config object is not correct or missing");try{var N=c.modifyRequestURL(r.url),C=r.checkExistenceOnly?o.HTTPRequest.HEAD:o.HTTPRequest.GET;i.open(C,N,!0),r.responseType&&(i.responseType=r.responseType),r.range&&i.setRequestHeader("Range","bytes="+r.range),r.requestStartDate||(r.requestStartDate=g),i=c.modifyRequestHeader(i),i.withCredentials=f.getXHRWithCredentialsForType(r.type),i.onload=x,i.onloadend=E,i.onerror=E,i.onprogress=S,i.onabort=T;var k=(new Date).getTime();isNaN(r.delayLoadingTime)||k>=r.delayLoadingTime?(p.push(i),i.send()):function(){var e={xhr:i};d.push(e),e.delayTimeout=setTimeout(function(){if(-1!==d.indexOf(e)){d.splice(d.indexOf(e),1);try{g=new Date,y=g,p.push(e.xhr),e.xhr.send()}catch(t){e.xhr.onerror()}}},r.delayLoadingTime-k)}()}catch(L){i.onerror()}}function r(e){e.request&&n(e,f.getRetryAttemptsForType(e.request.type))}function s(){v.forEach(function(e){return clearTimeout(e)}),v=[],d.forEach(function(e){return clearTimeout(e.delayTimeout)}),d=[],p.forEach(function(e){e.onloadend=e.onerror=e.onprogress=void 0,e.abort()}),p=[]}e=e||{};var u=e.errHandler,a=e.metricsModel,f=e.mediaPlayerModel,c=e.requestModifier,h=void 0,p=void 0,d=void 0,v=void 0,m=void 0;return h={load:r,abort:s},t(),h}Object.defineProperty(n,"__esModule",{value:!0});var o=e(230),u=e(51),a=r(u),f=e(199),l=r(f);s.__dashjs_factory_name="XHRLoader";var c=a.default.getClassFactory(s);n.default=c,t.exports=n.default},{199:199,230:230,51:51}],99:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e,t,n){var i=function(r,i){t.resolved=!0,t.resolvedContent=r||null,s.trigger(v.default.XLINK_ELEMENT_LOADED,{element:t,resolveObject:n,error:r||i?null:new o.default(y,"Failed loading Xlink element: "+e)})};if(e===r)i(null,!0);else{var a=new c.default(e,f.HTTPRequest.XLINK_TYPE);u.load({request:a,success:function(e){i(e)},error:function(){i(null)}})}}function n(){u&&(u.abort(),u=null)}e=e||{};var r="urn:mpeg:dash:resolve-to-zero:2013",i=this.context,s=(0,p.default)(i).getInstance(),u=(0,a.default)(i).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier});return{load:t,reset:n}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(211),o=r(s),u=e(98),a=r(u),f=e(230),l=e(221),c=r(l),h=e(50),p=r(h),d=e(54),v=r(d),m=e(51),g=r(m),y=1;i.__dashjs_factory_name="XlinkLoader";var b=g.default.getClassFactory(i);b.XLINK_LOADER_ERROR_LOADING_FAILURE=y,g.default.updateClassFactory(i.__dashjs_factory_name,b),n.default=b,t.exports=n.default},{211:211,221:221,230:230,50:50,51:51,54:54,98:98}],100:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(){r(this,e),this.init()}return i(e,[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.FRAGMENTED_TEXT="fragmentedText",this.EMBEDDED_TEXT="embeddedText",this.MUXED="muxed",this.IMAGE="image",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.UTF8="utf-8",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma"}}]),e}(),o=new s;n.default=o,t.exports=n.default},{}],101:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(){r(this,e),this.init()}return i(e,[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors"}}]),e}(),o=new s;n.default=o,t.exports=n.default},{}],102:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(){r(this,e),this.init()}return i(e,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready"}}]),e}(),o=new s;n.default=o,t.exports=n.default},{}],103:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){wt=gt.log.bind(bt),i()}function t(e,t){zt[e]=(0,C.default)(mt).create(),Lt[e]=t,At[e]=At[e]||{},At[e].state=H,Vt[e]=!1,yt.on(y.default.LOADING_PROGRESS,vt,this),e==a.default.VIDEO&&(yt.on(y.default.QUALITY_CHANGE_RENDERED,f,this),Wt=(0,L.default)(mt).create(),pt()),yt.on(y.default.METRIC_ADDED,c,this),Xt=(0,O.default)(mt).create({mediaPlayerModel:qt})}function n(e){delete Lt[e]}function r(){Et=(0,o.default)(mt).create({metricsModel:$t,dashMetrics:Jt,mediaPlayerModel:qt,adapter:Ft}),Et.initialize()}function i(){xt={video:!0,audio:!0},Tt={},Nt={},Ct={},kt={},At={},Lt={},zt={},Vt={},Mt=!1,Kt=!0,_t=!1,void 0===Dt&&(Dt=!1),Ut=void 0,Wt=void 0,Xt=void 0,clearTimeout(Ot),Ot=null}function s(){i(),yt.off(y.default.LOADING_PROGRESS,vt,this),yt.off(y.default.QUALITY_CHANGE_RENDERED,f,this),yt.off(y.default.METRIC_ADDED,c,this),Et&&Et.reset()}function u(e){e&&(e.streamController&&(St=e.streamController),e.domStorage&&(Rt=e.domStorage),e.mediaPlayerModel&&(qt=e.mediaPlayerModel),e.metricsModel&&($t=e.metricsModel),e.dashMetrics&&(Jt=e.dashMetrics),e.dashManifestModel&&(jt=e.dashManifestModel),e.adapter&&(Ft=e.adapter),e.manifestModel&&(Bt=e.manifestModel),e.videoModel&&(It=e.videoModel))}function f(e){e.mediaType===a.default.VIDEO&&(Ut=e.oldQuality,Wt.push(Ut,It.getPlaybackQuality()))}function c(e){e.metric!==l.default.HTTP_REQUEST||!e.value||e.value.type!==M.HTTPRequest.MEDIA_SEGMENT_TYPE||e.mediaType!==a.default.AUDIO&&e.mediaType!==a.default.VIDEO||Xt.push(e.mediaType,e.value,Kt),e.metric!==l.default.BUFFER_LEVEL||e.mediaType!==a.default.AUDIO&&e.mediaType!==a.default.VIDEO||nt(e.mediaType,.001*e.value.level)}function p(e,t){var n=void 0;return Tt[t]=Tt[t]||{},Tt[t].hasOwnProperty(e)||(Tt[t][e]=0),n=lt(Tt[t][e],e),n=ct(n,e,Tt[t][e]),n=dt(n,e)}function v(e){var t=Rt.getSavedBitrateSettings(e);if(!Ct.hasOwnProperty(e))if(kt.hasOwnProperty(e)){var n=Bt.getValue(),r=jt.getAdaptationForType(n,0,e).Representation;if(Array.isArray(r)){var i=Math.max(Math.round(r.length*kt[e])-1,0);Ct[e]=r[i].bandwidth}else Ct[e]=0}else isNaN(t)?Ct[e]=e===a.default.VIDEO?B:j:Ct[e]=t;return Ct[e]}function g(e,t){Ct[e]=t}function b(e){return kt.hasOwnProperty(e)?kt[e]:null}function w(e,t){kt[e]=t}function E(e){return Ct.hasOwnProperty("max")&&Ct.max.hasOwnProperty(e)?Ct.max[e]:NaN}function x(e){return Ct.hasOwnProperty("min")&&Ct.min.hasOwnProperty(e)?Ct.min[e]:NaN}function N(e,t){Ct.max=Ct.max||{},Ct.max[e]=t}function k(e,t){Ct.min=Ct.min||{},Ct.min[e]=t}function A(e){var t=E(e);return t?et(Lt[e].getMediaInfo(),t):void 0}function _(e){var t=x(e);if(t){var n=tt(Lt[e].getMediaInfo()),r=et(Lt[e].getMediaInfo(),t);return n[r]&&r<n.length-1&&n[r].bitrate<1e3*t&&r++,r}}function I(e){return kt.hasOwnProperty("max")&&kt.max.hasOwnProperty(e)?kt.max[e]:1}function q(e,t){kt.max=kt.max||{},kt.max[e]=t}function R(e){return xt[e]}function U(e,t){xt[e]=t}function z(){return Mt}function W(e){Mt=e}function X(){return _t}function V(e){_t=e}function $(){return Kt}function J(e){Kt=e}function K(e){if(e&&Lt&&Lt[e]){var t=Lt[e].getStreamInfo(),n=t?t.id:null,r=ut(e),i=(0,S.default)(mt).create({abrController:bt,streamProcessor:Lt[e],currentValue:r,switchHistory:zt[e],droppedFramesHistory:Wt,useBufferOccupancyABR:rt(e)});if(Wt&&Wt.push(Ut,It.getPlaybackQuality()),R(e)){var s=_(e),o=p(e,n),u=Et.getMaxQuality(i),a=u.quality;if(void 0!==s&&a<s&&(a=s),a>o&&(a=o),zt[e].push({oldValue:r,newValue:a}),a>T.default.NO_CHANGE&&a!=r)(At[e].state===H||a>r)&&G(e,r,a,o,u.reason);else if(gt.getLogToBrowserConsole()){var f=Jt.getCurrentBufferLevel($t.getReadOnlyMetricsFor(e));wt("AbrController ("+e+") stay on "+r+"/"+o+" (buffer: "+f+")")}}}}function Q(e,t,n,r){var i=t.id,s=ut(e);if(null===n||isNaN(n)||n%1!=0)throw new Error("argument is not an integer");var o=p(e,i);n!==s&&n>=0&&n<=o&&G(e,s,n,o,r)}function G(e,t,n,r,i){if(e&&Lt[e]){var s=Lt[e].getStreamInfo(),o=s?s.id:null;if(gt.getLogToBrowserConsole()){var u=Jt.getCurrentBufferLevel($t.getReadOnlyMetricsFor(e));wt("AbrController ("+e+") switch from "+t+" to "+n+"/"+r+" (buffer: "+u+") "+(i?JSON.stringify(i):"."))}at(e,o,n),yt.trigger(y.default.QUALITY_CHANGE_REQUESTED,{mediaType:e,streamInfo:s,oldQuality:t,newQuality:n,reason:i})}}function Y(e,t){At[e].state=t}function Z(e){return At[e]?At[e].state:null}function et(e,t,n){if(Kt&&n&&Lt[e.type].getCurrentRepresentationInfo()&&Lt[e.type].getCurrentRepresentationInfo().fragmentDuration){n/=1e3;var r=Lt[e.type].getCurrentRepresentationInfo().fragmentDuration;if(n>r)return 0;t*=1-n/r}var i=tt(e);if(!i||0===i.length)return F;for(var s=i.length-1;s>=0;s--)if(1e3*t>=i[s].bitrate)return s;return 0}function tt(e){if(!e||!e.bitrateList)return null;for(var t=e.bitrateList,n=e.type,r=[],i=void 0,s=0,o=t.length;s<o;s++)i=new h.default,i.mediaType=n,i.qualityIndex=s,i.bitrate=t[s].bandwidth,i.width=t[s].width,i.height=t[s].height,i.scanType=t[s].scanType,r.push(i);return r}function nt(e,t){var n=qt.getABRStrategy();if(n===a.default.ABR_STRATEGY_BOLA)return void (Vt[e]=!0);if(n===a.default.ABR_STRATEGY_THROUGHPUT)return void (Vt[e]=!1);var r=qt.getStableBufferTime(),i=r,s=.5*r,o=Vt[e],u=t>(o?s:i);Vt[e]=u,u!==o&&wt(u?"AbrController ("+e+") switching from throughput to buffer occupancy ABR rule (buffer: "+t.toFixed(3)+").":"AbrController ("+e+") switching from buffer occupancy to throughput ABR rule (buffer: "+t.toFixed(3)+").")}function rt(e){return Vt[e]}function it(){return Xt}function st(e){var t=e.type,n=e.streamInfo.id,r=e.representationCount-1;return ft(t,n,r),r}function ot(e){var t=e.id,n=ut(a.default.AUDIO),r=ut(a.default.VIDEO);return n===p(a.default.AUDIO,t)&&r===p(a.default.VIDEO,t)}function ut(e){if(e&&Lt[e]){var t=Lt[e].getStreamInfo(),n=t?t.id:null;if(n)return Nt[n]=Nt[n]||{},Nt[n].hasOwnProperty(e)||(Nt[n][e]=F),Nt[n][e]}return F}function at(e,t,n){Nt[t]=Nt[t]||{},Nt[t][e]=n}function ft(e,t,n){Tt[t]=Tt[t]||{},Tt[t][e]=n}function lt(e,t){var n=e;if(!Lt[t])return n;var r=_(t);void 0!==r&&(n=Math.max(e,r));var i=A(t);return void 0!==i&&(n=Math.min(n,i)),n}function ct(e,t,n){var r=I(t);return isNaN(r)||r>=1||r<0?e:Math.min(e,Math.round(n*r))}function ht(e){Dt=e}function pt(){var e=_t&&window.hasOwnProperty("devicePixelRatio"),t=e?window.devicePixelRatio:1;Pt=It.getClientWidth()*t,Ht=It.getClientHeight()*t}function dt(e,t){if(t!==a.default.VIDEO||!Mt||!Lt[t])return e;Dt||pt();var n=Bt.getValue(),r=jt.getAdaptationForType(n,0,t).Representation,i=e;if(Pt>0&&Ht>0){for(;i>0&&r[i]&&Pt<r[i].width&&Pt-r[i-1].width<r[i].width-Pt;)i-=1;r.length-2>=i&&r[i].width===r[i+1].width&&(i=Math.min(e,i+1))}return i}function vt(e){var t=e.request.mediaType;if(R(t)){var n=Lt[t];if(!n)return;var r=(0,S.default)(mt).create({abrController:bt,streamProcessor:n,currentRequest:e.request,useBufferOccupancyABR:rt(t)}),i=Et.shouldAbandonFragment(r);if(i.quality>T.default.NO_CHANGE){var s=n.getFragmentModel();s.getRequests({state:d.default.FRAGMENT_MODEL_LOADING,index:e.request.index})[0]&&(s.abortRequests(),Y(t,P),zt[t].reset(),zt[t].push({oldValue:ut(t,St.getActiveStreamInfo()),newValue:i.quality,confidence:1,reason:i.reason}),Q(t,St.getActiveStreamInfo(),i.quality,i.reason),clearTimeout(Ot),Ot=setTimeout(function(){Y(t,H),Ot=null},qt.getAbandonLoadTimeout()))}}}var mt=this.context,gt=(0,D.default)(mt).getInstance(),yt=(0,m.default)(mt).getInstance(),bt=void 0,wt=void 0,Et=void 0,St=void 0,xt=void 0,Tt=void 0,Nt=void 0,Ct=void 0,kt=void 0,Lt=void 0,At=void 0,Ot=void 0,Mt=void 0,_t=void 0,Dt=void 0,Pt=void 0,Ht=void 0,Bt=void 0,jt=void 0,Ft=void 0,It=void 0,qt=void 0,Rt=void 0,Ut=void 0,zt=void 0,Wt=void 0,Xt=void 0,Vt=void 0,$t=void 0,Jt=void 0,Kt=void 0;return bt={isPlayingAtTopQuality:ot,updateTopQualityIndex:st,getThroughputHistory:it,getBitrateList:tt,getQualityForBitrate:et,getMaxAllowedBitrateFor:E,getMinAllowedBitrateFor:x,setMaxAllowedBitrateFor:N,setMinAllowedBitrateFor:k,getMaxAllowedIndexFor:A,getMinAllowedIndexFor:_,getMaxAllowedRepresentationRatioFor:I,setMaxAllowedRepresentationRatioFor:q,getInitialBitrateFor:v,setInitialBitrateFor:g,getInitialRepresentationRatioFor:b,setInitialRepresentationRatioFor:w,setAutoSwitchBitrateFor:U,getAutoSwitchBitrateFor:R,getUseDeadTimeLatency:$,setUseDeadTimeLatency:J,setLimitBitrateByPortal:W,getLimitBitrateByPortal:z,getUsePixelRatioInLimitBitrateByPortal:X,setUsePixelRatioInLimitBitrateByPortal:V,getQualityFor:ut,getAbandonmentStateFor:Z,setPlaybackQuality:Q,checkPlaybackQuality:K,getTopQualityIndexFor:p,setElementSize:pt,setWindowResizeEventCalled:ht,createAbrRulesCollection:r,registerStreamType:t,unRegisterStreamType:n,setConfig:u,reset:s},e(),bt}Object.defineProperty(n,"__esModule",{value:!0});var s=e(176),o=r(s),u=e(100),a=r(u),f=e(101),l=r(f),c=e(210),h=r(c),p=e(141),d=r(p),v=e(50),m=r(v),g=e(54),y=r(g),b=e(51),w=r(b),E=e(172),S=r(E),x=e(173),T=r(x),N=e(174),C=r(N),k=e(171),L=r(k),A=e(175),O=r(A),M=e(230),_=e(49),D=r(_),P="abandonload",H="allowload",B=1e3,j=100,F=0;i.__dashjs_factory_name="AbrController";var I=w.default.getSingletonFactory(i);I.ABANDON_LOAD=P,I.QUALITY_DEFAULT=F,w.default.updateSingletonFactory(i.__dashjs_factory_name,I),n.default=I,t.exports=n.default},{100:100,101:101,141:141,171:171,172:172,173:173,174:174,175:175,176:176,210:210,230:230,49:49,50:50,51:51,54:54}],104:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){g.invalidateSelectedIndexes(e.entry)}function t(){g=(0,o.default)(p).create(),b=(0,a.default)(p).create(),d.on(y.default.SERVICE_LOCATION_BLACKLIST_CHANGED,e,f)}function n(e){e.baseURLTreeModel&&(g=e.baseURLTreeModel),e.baseURLSelector&&(b=e.baseURLSelector),e.dashManifestModel&&(c=e.dashManifestModel)}function r(e){g.update(e),b.chooseSelectorFromManifest(e)}function i(e){var t=g.getForPath(e),n=t.reduce(function(e,t){var n=b.select(t);return n?(v.isRelative(n.url)?e.url=v.resolve(n.url,e.url):(e.url=n.url,e.serviceLocation=n.serviceLocation),e):new h.default},new h.default);if(!v.isRelative(n.url))return n}function s(){g.reset(),b.reset()}function u(e){g.setConfig({dashManifestModel:c}),b.setConfig({dashManifestModel:c}),r(e)}var f=void 0,c=void 0,p=this.context,d=(0,m.default)(p).getInstance(),v=(0,l.default)(p).getInstance(),g=void 0,b=void 0;return f={reset:s,initialize:u,resolve:i,setConfig:n},t(),f}Object.defineProperty(n,"__esModule",{value:!0});var s=e(140),o=r(s),u=e(193),a=r(u),f=e(206),l=r(f),c=e(82),h=r(c),p=e(51),d=r(p),v=e(50),m=r(v),g=e(54),y=r(g);i.__dashjs_factory_name="BaseURLController",n.default=d.default.getSingletonFactory(i),t.exports=n.default},{140:140,193:193,206:206,50:50,51:51,54:54,82:82}],105:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e){return!!(o.length&&e&&e.length)&&-1!==o.indexOf(e)}function n(e){-1===o.indexOf(e)&&(o.push(e),u.trigger(f,{entry:e}))}function r(e){n(e.entry)}function i(){l&&u.on(l,r,this)}function s(){o=[]}e=e||{};var o=[],u=(0,a.default)(this.context).getInstance(),f=e.updateEventName,l=e.addBlacklistEventName;return i(),{add:n,contains:t,reset:s}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s),u=e(50),a=r(u);i.__dashjs_factory_name="BlackListController",n.default=o.default.getClassFactory(i),t.exports=n.default},{50:50,51:51}],106:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){wt=(0,T.default)(st).getInstance().log.bind(bt),Ht=(0,C.default)(st).getInstance(),rt()}function n(){return O}function r(e){et(e),Et=vt.getQualityFor(gt,yt.getStreamInfo());var t=navigator.userAgent.toLowerCase();Ft=/safari/.test(t)&&/mac/.test(t)&&!/chrome/.test(t)&&!/windows phone/.test(t),ot.on(y.default.DATA_UPDATE_COMPLETED,R,this),ot.on(y.default.INIT_FRAGMENT_LOADED,u,this),ot.on(y.default.MEDIA_FRAGMENT_LOADED,c,this),ot.on(y.default.QUALITY_CHANGE_REQUESTED,g,this),ot.on(y.default.STREAM_COMPLETED,U,this),ot.on(y.default.PLAYBACK_PROGRESS,S,this),ot.on(y.default.PLAYBACK_TIME_UPDATED,S,this),ot.on(y.default.PLAYBACK_RATE_CHANGED,$,this),ot.on(y.default.PLAYBACK_SEEKING,b,this),ot.on(y.default.WALLCLOCK_TIME_UPDATED,W,this),ot.on(y.default.CURRENT_TRACK_CHANGED,z,this,m.default.EVENT_PRIORITY_HIGH),ot.on(y.default.SOURCEBUFFER_APPEND_COMPLETED,v,this),ot.on(y.default.SOURCEBUFFER_REMOVE_COMPLETED,I,this),Ft&&ot.on(y.default.PLAYBACK_SEEKED,X,this)}function i(e){if(!e||!Nt||!yt)return null;var t=null;try{t=ft.createSourceBuffer(Nt,e),t&&t.hasOwnProperty(o.default.INITIALIZE)&&t.initialize(gt,yt)}catch(n){lt.mediaSourceError("Error creating "+gt+" source buffer.")}return Y(t),q(yt.getRepresentationInfoForQuality(Et).MSETimeOffset),t}function s(){return!!yt&&!!ct&&yt.getStreamInfo().id===ct.getActiveStreamInfo().id}function u(e){e.fragmentModel===yt.getFragmentModel()&&(wt("Init fragment finished loading saving to",gt+"'s init cache"),Ht.save(e.chunk),p(e.chunk))}function f(e,t){var n=Ht.extract(e,t);n?p(n):ot.trigger(y.default.INIT_REQUESTED,{sender:bt})}function c(e){if(e.fragmentModel===yt.getFragmentModel()){var t=e.chunk,n=t.bytes,r=t.quality,i=yt.getRepresentationInfoForQuality(r),s=pt.getEventsFor(i.mediaInfo,yt),o=pt.getEventsFor(i,yt);if(s&&s.length>0||o&&o.length>0){var u=yt.getFragmentModel().getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,quality:r,index:t.index})[0],f=P(n,u,s,o);yt.getEventController().addInbandEvents(f)}p(t)}}function p(e){St||(Dt=!0,Ot=e,ft.append(Lt,e),e.mediaInfo.type===o.default.VIDEO&&ot.trigger(y.default.VIDEO_CHUNK_RECEIVED,{chunk:e}))}function v(e){if(Lt===e.buffer){if(e.error)return e.error.code===l.default.QUOTA_EXCEEDED_ERROR_CODE&&(Tt=.8*ft.getTotalBufferedTime(Lt)),void (e.error.code!==l.default.QUOTA_EXCEEDED_ERROR_CODE&&H()||(ot.trigger(y.default.QUOTA_EXCEEDED,{sender:bt,criticalBufferLevel:Tt}),F(j())));Ot&&!isNaN(Ot.index)&&(Ct=Math.max(Ot.index,Ct),M());var t=ft.getAllRanges(Lt);if(t&&t.length>0)for(var n=0,r=t.length;n<r;n++)wt("Buffered Range for type:",gt,":",t.start(n)," - ",t.end(n));S(),Dt=!1,Ot&&ot.trigger(y.default.BYTES_APPENDED,{sender:bt,quality:Ot.quality,startTime:Ot.start,index:Ot.index,bufferedRanges:t})}}function g(e){Et!==e.newQuality&&gt===e.mediaType&&yt.getStreamInfo().id===e.streamInfo.id&&(q(yt.getRepresentationInfoForQuality(e.newQuality).MSETimeOffset),Et=e.newQuality)}function b(){St&&(jt=!0,St=!1,Ct=0),Bt=void 0,S()}function E(){var e=mt.getTime();if(Bt){var t=ft.getAllRanges(Lt);t&&t.length&&(e=Math.max(t.start(0),Bt))}return e}function S(){x(),N()}function x(){mt&&(xt=ft.getBufferLength(Lt,E()),ot.trigger(y.default.BUFFER_LEVEL_UPDATED,{sender:bt,bufferLevel:xt}),_())}function N(){s()&&(ut.addBufferState(gt,At,yt.getScheduleController().getBufferTarget()),ut.addBufferLevel(gt,new Date,1e3*xt))}function M(){Ct>=kt-1&&!St&&(St=!0,wt("[BufferController]["+gt+"] checkIfBufferingCompleted trigger BUFFERING_COMPLETED"),ot.trigger(y.default.BUFFERING_COMPLETED,{sender:bt,streamInfo:yt.getStreamInfo()}))}function _(){"audio"!==gt&&"video"!==gt||(jt&&!St&&mt&&mt.getTimeToStreamEnd()-xt<A&&(jt=!1,St=!0,wt("[BufferController]["+gt+"] checkIfSufficientBuffer trigger BUFFERING_COMPLETED"),ot.trigger(y.default.BUFFERING_COMPLETED,{sender:bt,streamInfo:yt.getStreamInfo()})),D(xt<A&&!St?L:k))}function D(e){At===e||gt===o.default.FRAGMENTED_TEXT&&dt.getAllTracksAreDisabled()||(At=e,N(),ot.trigger(y.default.BUFFER_LEVEL_STATE_CHANGED,{sender:bt,state:e,mediaType:gt,streamInfo:yt.getStreamInfo()}),ot.trigger(e===k?y.default.BUFFER_LOADED:y.default.BUFFER_EMPTY,{mediaType:gt}),wt(e===k?"Got enough buffer to start for "+gt:"Waiting for more buffer before starting playback for "+gt))}function P(e,t,n,r){for(var i=Math.max(isNaN(t.startTime)?0:t.startTime,0),s=[],o=[],u=n.concat(r),a=0,f=u.length;a<f;a++)s[u[a].schemeIdUri]=u[a];for(var l=(0,w.default)(st).getInstance().parse(e),c=l.getBoxes("emsg"),a=0,f=c.length;a<f;a++){var h=pt.getEvent(c[a],s,i);h&&o.push(h)}return o}function H(){return ft.getTotalBufferedTime(Lt)<Tt}function B(){if(Lt&&gt!==o.default.FRAGMENTED_TEXT){var e=Lt.buffered.length?Lt.buffered.start(0):0,t=mt.getTime()-e-at.getBufferToKeep();t>0&&(wt("pruning buffer: "+t+" seconds."),Pt=!0,ft.remove(Lt,0,Math.round(e+t),Nt))}}function j(e){if(!Lt)return null;var t=mt.getTime(),n=yt.getFragmentModel().getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:t,threshold:e})[0],r=ft.getBufferRange(Lt,t),i=n&&!isNaN(n.startTime)?n.startTime:Math.floor(t);return null===r&&Lt.buffered.length>0&&(i=Lt.buffered.end(Lt.buffered.length-1)),{start:Lt.buffered.start(0),end:i}}function F(e){e&&Lt&&ft.remove(Lt,e.start,e.end,Nt)}function I(e){Lt===e.buffer&&(Pt&&(Pt=!1),x(),ot.trigger(y.default.BUFFER_CLEARED,{sender:bt,from:e.from,to:e.to,hasEnoughSpaceToAppend:H()}))}function q(e){Lt&&Lt.timestampOffset!==e&&!isNaN(e)&&(Lt.timestampOffset=e)}function R(e){e.sender.getStreamProcessor()!==yt||e.error||q(e.currentRepresentation.MSETimeOffset)}function U(e){e.fragmentModel===yt.getFragmentModel()&&(kt=e.request.index,M())}function z(e){Lt&&e.newMediaInfo.type===gt&&e.newMediaInfo.streamInfo.id===yt.getStreamInfo().id&&ht.getSwitchMode(gt)===d.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&F(j(0))}function W(){++Mt*(at.getWallclockTimeUpdateInterval()/1e3)>=at.getBufferPruningInterval()&&!Dt&&(Mt=0,B())}function X(){V(mt.getTime())}function V(e){for(var t=ft.getAllRanges(Lt),n=0;n<t.length;n++)t.start(n)>e&&(wt("Removing buffer from: "+t.start(n)+"-"+t.end(n)),ft.remove(Lt,t.start(n),t.end(n),Nt))}function $(){_()}function J(){return gt}function K(){return yt}function Q(e){Bt=e}function G(){return Lt}function Y(e){Lt=e}function Z(){return xt}function et(e){Nt=e}function tt(){return Nt}function nt(){return St}function rt(){Tt=Number.POSITIVE_INFINITY,At=L,Et=h.default.QUALITY_DEFAULT,kt=Number.POSITIVE_INFINITY,Ct=0,Ot=null,_t=!1,St=!1,Dt=!1,Pt=!1,jt=!1,xt=0,Mt=0}function it(e){ot.off(y.default.DATA_UPDATE_COMPLETED,R,this),ot.off(y.default.QUALITY_CHANGE_REQUESTED,g,this),ot.off(y.default.INIT_FRAGMENT_LOADED,u,this),ot.off(y.default.MEDIA_FRAGMENT_LOADED,c,this),ot.off(y.default.STREAM_COMPLETED,U,this),ot.off(y.default.CURRENT_TRACK_CHANGED,z,this),ot.off(y.default.PLAYBACK_PROGRESS,S,this),ot.off(y.default.PLAYBACK_TIME_UPDATED,S,this),ot.off(y.default.PLAYBACK_RATE_CHANGED,$,this),ot.off(y.default.PLAYBACK_SEEKING,b,this),ot.off(y.default.WALLCLOCK_TIME_UPDATED,W,this),ot.off(y.default.SOURCEBUFFER_APPEND_COMPLETED,v,this),ot.off(y.default.SOURCEBUFFER_REMOVE_COMPLETED,I,this),Ft&&ot.off(y.default.PLAYBACK_SEEKED,X,this),rt(),e||(ft.abort(Nt,Lt),ft.removeSourceBuffer(Nt,Lt)),Lt=null}e=e||{};var st=this.context,ot=(0,m.default)(st).getInstance(),ut=e.metricsModel,at=e.mediaPlayerModel,ft=e.sourceBufferController,lt=e.errHandler,ct=e.streamController,ht=e.mediaController,pt=e.adapter,dt=e.textController,vt=e.abrController,mt=e.playbackController,gt=e.type,yt=e.streamProcessor,bt=void 0,wt=void 0,Et=void 0,St=void 0,xt=void 0,Tt=void 0,Nt=void 0,Ct=void 0,kt=void 0,Lt=void 0,At=void 0,Ot=void 0,Mt=void 0,_t=void 0,Dt=void 0,Pt=void 0,Ht=void 0,Bt=void 0,jt=void 0,Ft=void 0;return bt={getBufferControllerType:n,initialize:r,createBuffer:i,getType:J,getStreamProcessor:K,setSeekStartTime:Q,getBuffer:G,setBuffer:Y,getBufferLevel:Z,setMediaSource:et,getMediaSource:tt,getIsBufferingCompleted:nt,switchInitData:f,reset:it},t(),bt}Object.defineProperty(n,"__esModule",{value:!0});var s=e(100),o=r(s),u=e(141),a=r(u),f=e(113),l=r(f),c=e(103),h=r(c),p=e(109),d=r(p),v=e(50),m=r(v),g=e(54),y=r(g),b=e(194),w=r(b),E=e(51),S=r(E),x=e(49),T=r(x),N=e(200),C=r(N),k="bufferLoaded",L="bufferStalled",A=.5,O="BufferController";i.__dashjs_factory_name=O;var M=S.default.getClassFactory(i);M.BUFFER_LOADED=k,M.BUFFER_EMPTY=L,S.default.updateClassFactory(i.__dashjs_factory_name,M),n.default=M,t.exports=n.default},{100:100,103:103,109:109,113:113,141:141,194:194,200:200,49:49,50:50,51:51,54:54}],107:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){t()}function t(){O=!1,E={},S={},x={},T=null,N=100,C=N/1e3}function n(){if(!k||!L||!A)throw new Error("setConfig function has to be called previously")}function r(){null!==T&&O&&(clearInterval(T),T=null,O=!1)}function i(){n(),y("Start Event Controller"),O||isNaN(N)||(O=!0,T=setInterval(f,N))}function s(e){if(n(),E={},e)for(var t=0;t<e.length;t++){var r=e[t];E[r.id]=r,y("Add inline event with id "+r.id)}y("Added "+e.length+" inline events")}function o(e){n();for(var t=0;t<e.length;t++){var r=e[t];r.id in S?y("Repeated event with id "+r.id):(S[r.id]=r,y("Add inband event with id "+r.id))}}function u(){if(x)for(var e=A.getTime(),t=Object.keys(x),n=0;n<t.length;n++){var r=t[n],i=x[r];null!==i&&(i.duration+i.presentationTime)/i.eventStream.timescale<e&&(y("Remove Event "+r+" at time "+e),i=null,delete x[r])}}function f(){h(S),h(E),u()}function c(){n(),L.refreshManifest()}function h(e){var t,n=A.getTime();if(e)for(var r=Object.keys(e),i=0;i<r.length;i++){var s=r[i],o=e[s];void 0!==o&&(0===(t=o.presentationTime/o.eventStream.timescale)||t<=n&&t+C>n)&&(y("Start Event "+s+" at "+n),o.duration>0&&(x[s]=o),o.eventStream.schemeIdUri==v&&o.eventStream.value==m?c():b.trigger(o.eventStream.schemeIdUri,{event:o}),delete e[s])}}function p(e){e&&(e.manifestModel&&(k=e.manifestModel),e.manifestUpdater&&(L=e.manifestUpdater),e.playbackController&&(A=e.playbackController))}function d(){r(),t()}var v="urn:mpeg:dash:event:2012",m=1,g=this.context,y=(0,a.default)(g).getInstance().log,b=(0,l.default)(g).getInstance(),w=void 0,E=void 0,S=void 0,x=void 0,T=void 0,N=void 0,C=void 0,k=void 0,L=void 0,A=void 0,O=void 0;return w={addInlineEvents:s,addInbandEvents:o,stop:r,start:i,setConfig:p,reset:d},e(),w}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51
),o=r(s),u=e(49),a=r(u),f=e(50),l=r(f);i.__dashjs_factory_name="EventController",n.default=o.default.getClassFactory(i),t.exports=n.default},{49:49,50:50,51:51}],108:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){i(),m.on(b.default.FRAGMENT_LOADING_COMPLETED,l,S)}function n(e){var t=T[e];return t||(t=(0,c.default)(h).create({metricsModel:E,fragmentLoader:(0,p.default)(h).create({metricsModel:E,mediaPlayerModel:w,errHandler:y,requestModifier:(0,v.default)(h).getInstance()})}),T[e]=t),t}function r(e){return e&&e.type&&e.type===u.HTTPRequest.INIT_SEGMENT_TYPE}function i(){for(var e in T)T[e].reset();T={}}function s(){m.off(b.default.FRAGMENT_LOADING_COMPLETED,l,this),i()}function a(e,t,n){var r=new f.default;return r.streamId=n,r.mediaInfo=t.mediaInfo,r.segmentType=t.type,r.start=t.startTime,r.duration=t.duration,r.end=r.start+r.duration,r.bytes=e,r.index=t.index,r.quality=t.quality,r.representationId=t.representationId,r}function l(e){if(T[e.request.mediaType]===e.sender){var t=e.request,n=e.response,i=r(t),s=t.mediaInfo.streamInfo;if(e.error&&(e.request.mediaType!==o.default.AUDIO&&e.request.mediaType!==o.default.VIDEO||m.trigger(b.default.SERVICE_LOCATION_BLACKLIST_ADD,{entry:e.request.serviceLocation})),!n||!s)return void d("No "+t.mediaType+" bytes to push or stream is inactive.");var u=a(n,t,s.id);m.trigger(i?b.default.INIT_FRAGMENT_LOADED:b.default.MEDIA_FRAGMENT_LOADED,{chunk:u,fragmentModel:e.sender})}}e=e||{};var h=this.context,d=(0,x.default)(h).getInstance().log,m=(0,g.default)(h).getInstance(),y=e.errHandler,w=e.mediaPlayerModel,E=e.metricsModel,S=void 0,T=void 0;return S={getModel:n,isInitializationRequest:r,reset:s},t(),S}Object.defineProperty(n,"__esModule",{value:!0});var s=e(100),o=r(s),u=e(230),a=e(212),f=r(a),l=e(141),c=r(l),h=e(90),p=r(h),d=e(204),v=r(d),m=e(50),g=r(m),y=e(54),b=r(y),w=e(51),E=r(w),S=e(49),x=r(S);i.__dashjs_factory_name="FragmentController",n.default=E.default.getClassFactory(i),t.exports=n.default},{100:100,141:141,204:204,212:212,230:230,49:49,50:50,51:51,54:54,90:90}],109:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){N()}function t(e,t){var n=c(e),i=r(e,t),s=[];if(e===o.default.FRAGMENTED_TEXT)return void u(i[0]);n||(n=R.getSavedMediaSettings(e),f(e,n)),i&&0!==i.length&&(n&&i.forEach(function(e){k(n,e)&&s.push(e)}),u(0===s.length?O(i):s.length>1?O(s):s[0]))}function n(e){var t=e?e.type:null,n=e?e.streamInfo.id:null,r=c(t);if(e&&S(t)){B[n]=B[n]||M();for(var s=B[n][t].list.length,o=0;o<s;o++)if(x(B[n][t].list[o],e))return;B[n][t].list.push(e),r&&k(r,e)&&!i(t,e.streamInfo)&&u(e)}}function r(e,t){if(!e||!t)return[];var n=t.id;return B[n]&&B[n][e]?B[n][e].list:[]}function i(e,t){return!e||!t||t&&!B[t.id]?null:B[t.id][e].current}function s(e){var t=e.type,n=e.streamInfo.id;return B[n]&&B[n][t]&&x(B[n][t].current,e)}function u(e){if(e){var t=e.type,n=e.streamInfo,r=n.id,s=i(t,n);if(B[r]&&B[r][t]&&(!s||!x(e,s))){B[r][t].current=e,s&&P.trigger(a.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:s,newMediaInfo:e,switchMode:I[t]});var o=C(e);o&&B[r][t].storeLastSettings&&(o.roles&&(o.role=o.roles[0],delete o.roles),o.accessibility&&(o.accessibility=o.accessibility[0]),o.audioChannelConfiguration&&(o.audioChannelConfiguration=o.audioChannelConfiguration[0]),R.setSavedMediaSettings(t,o))}}}function f(e,t){e&&t&&(j[e]=t)}function c(e){return e?j[e]:null}function h(e,t){if(-1===U.indexOf(t))return void D("track switch mode is not supported: "+t);I[e]=t}function p(e){return I[e]}function w(e){if(-1===z.indexOf(e))return void D("track selection mode is not supported: "+e);F=e}function E(){return F||b}function S(e){return e===o.default.AUDIO||e===o.default.VIDEO||e===o.default.TEXT||e===o.default.FRAGMENTED_TEXT||e===o.default.IMAGE}function x(e,t){var n=e.id===t.id,r=e.viewpoint===t.viewpoint,i=e.lang===t.lang,s=e.roles.toString()===t.roles.toString(),o=e.accessibility.toString()===t.accessibility.toString(),u=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return n&&r&&i&&s&&o&&u}function T(e){e&&(e.errHandler&&(q=e.errHandler),e.domStorage&&(R=e.domStorage))}function N(){B={},A(),L()}function C(e){var t={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration};return t.lang||t.viewpoint||t.role&&t.role.length>0||t.accessibility&&t.accessibility.length>0||t.audioChannelConfiguration&&t.audioChannelConfiguration.length>0?t:null}function k(e,t){var n=!e.lang||e.lang===t.lang,r=!e.viewpoint||e.viewpoint===t.viewpoint,i=!e.role||!!t.roles.filter(function(t){return t===e.role})[0],s=!e.accessibility||!!t.accessibility.filter(function(t){return t===e.accessibility})[0],o=!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter(function(t){return t===e.audioChannelConfiguration})[0];return n&&r&&i&&s&&o}function L(){I={audio:m,video:v}}function A(){j={audio:null,video:null}}function O(e){var t=E(),n=[],r=function(e){var t=0,n=[],r=void 0;return e.forEach(function(e){r=Math.max.apply(Math,e.bitrateList.map(function(e){return e.bandwidth})),r>t?(t=r,n=[e]):r===t&&n.push(e)}),n},i=function(e){var t=0,n=[],r=void 0;return e.forEach(function(e){r=e.representationCount,r>t?(t=r,n=[e]):r===t&&n.push(e)}),n};switch(t){case g:n=r(e),n.length>1&&(n=i(n));break;case y:n=i(e),n.length>1&&(n=r(e));break;default:D("track selection mode is not supported: "+t)}return n[0]}function M(){return{audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}}}var _=this.context,D=(0,d.default)(_).getInstance().log,P=(0,l.default)(_).getInstance(),H=void 0,B=void 0,j=void 0,F=void 0,I=void 0,q=void 0,R=void 0,U=[m,v],z=[g,y];return H={checkInitialMediaSettingsForType:t,addTrack:n,getTracksFor:r,getCurrentTrackFor:i,isCurrentTrack:s,setTrack:u,setInitialSettings:f,getInitialSettings:c,setSwitchMode:h,getSwitchMode:p,setSelectionModeForInitialTrack:w,getSelectionModeForInitialTrack:E,isMultiTrackSupportedByType:S,isTracksEqual:x,setConfig:T,reset:N},e(),H}Object.defineProperty(n,"__esModule",{value:!0});var s=e(100),o=r(s),u=e(54),a=r(u),f=e(50),l=r(f),c=e(51),h=r(c),p=e(49),d=r(p),v="neverReplace",m="alwaysReplace",g="highestBitrate",y="widestRange",b=g;i.__dashjs_factory_name="MediaController";var w=h.default.getSingletonFactory(i);w.TRACK_SWITCH_MODE_NEVER_REPLACE=v,w.TRACK_SWITCH_MODE_ALWAYS_REPLACE=m,w.TRACK_SELECTION_MODE_HIGHEST_BITRATE=g,w.TRACK_SELECTION_MODE_WIDEST_RANGE=y,w.DEFAULT_INIT_TRACK_SELECTION_MODE=b,h.default.updateSingletonFactory(i.__dashjs_factory_name,w),n.default=w,t.exports=n.default},{100:100,49:49,50:50,51:51,54:54}],110:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){var e="WebKitMediaSource"in window;return"MediaSource"in window?new MediaSource:e?new WebKitMediaSource:null}function t(e,t){var n=window.URL.createObjectURL(e);return t.setSource(n),n}function n(e){e.setSource(null)}function r(e,t){return e.duration!=t&&(e.duration=t),e.duration}function i(e,t,n){"function"==typeof e.setLiveSeekableRange&&"function"==typeof e.clearLiveSeekableRange&&"open"===e.readyState&&t>=0&&t<n&&(e.clearLiveSeekableRange(),e.setLiveSeekableRange(t,n))}function s(e){var t=e.sourceBuffers,n=t.length;if("open"===e.readyState){for(var r=0;r<n;r++){if(t[r].updating)return;if(0===t[r].buffered.length)return}e.endOfStream()}}return{createMediaSource:e,attachMediaSource:t,detachMediaSource:n,setDuration:r,setSeekable:i,signalEndOfStream:s}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s);i.__dashjs_factory_name="MediaSourceController",n.default=o.default.getSingletonFactory(i),t.exports=n.default},{51:51}],111:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){C()}function t(e){mt=e,G(),gt=mt.manifestInfo.isDynamic,ct=mt.start,tt.on(d.default.DATA_UPDATE_COMPLETED,D,this),tt.on(d.default.BYTES_APPENDED,K,this),tt.on(d.default.BUFFER_LEVEL_STATE_CHANGED,Q,this),tt.on(d.default.PERIOD_SWITCH_STARTED,n,this),bt&&(bt=!1,i())}function n(e){!gt&&e.fromStreamInfo&&void 0!==pt[e.fromStreamInfo.id]&&(delete vt[e.fromStreamInfo.id],delete pt[e.fromStreamInfo.id])}function r(){var e=L(!0),t=gt?e-mt.start:0;return parseFloat((e+(mt.duration-t)-p()).toFixed(5))}function i(){ft&&ft.getElement()?ft.play():bt=!0}function s(){return ft?ft.isPaused():null}function u(){ft&&ft.pause()}function f(){return ft?ft.isSeeking():null}function c(e){ft&&(tt.trigger(d.default.PLAYBACK_SEEK_ASKED),et("Requesting seek to time: "+e),ft.setCurrentTime(e))}function p(){return ft?ft.getTime():null}function v(){return ft?ft.getPlaybackRate():null}function m(){return ft?ft.getPlayedRanges():null}function g(){return ft?ft.getEnded():null}function w(){return gt}function E(){return rt}function S(e){ct=e}function x(){return ct}function T(e,t){var n=ut.getMpd(ot.getValue()),r=void 0,i=void 0;if(r=yt.getUseSuggestedPresentationDelay()&&n.hasOwnProperty(o.default.SUGGESTED_PRESENTATION_DELAY)?n.suggestedPresentationDelay:yt.getLiveDelay()?yt.getLiveDelay():isNaN(e)?2*mt.manifestInfo.minBufferTime:e*yt.getLiveDelayFragmentCount(),t>0){var s=Math.max(t-10,t/2);i=Math.min(r,s)}else i=r;return dt=i,i}function N(){return dt}function C(){lt=0,ct=NaN,ht=null,bt=!1,pt={},dt=0,vt={},ft&&(tt.off(d.default.DATA_UPDATE_COMPLETED,D,this),tt.off(d.default.BUFFER_LEVEL_STATE_CHANGED,Q,this),tt.off(d.default.BYTES_APPENDED,K,this),M(),Y()),ft=null,mt=null,gt=null}function k(e){e&&(e.streamController&&(rt=e.streamController),e.metricsModel&&(it=e.metricsModel),e.dashMetrics&&(st=e.dashMetrics),e.manifestModel&&(ot=e.manifestModel),e.dashManifestModel&&(ut=e.dashManifestModel),e.mediaPlayerModel&&(yt=e.mediaPlayerModel),e.adapter&&(at=e.adapter),e.videoModel&&(ft=e.videoModel))}function L(e,t){var n=void 0,r=(0,l.default)(Z).getInstance().getURIFragmentData(),i=NaN;if(r){var s=parseInt(r.s,10),o=parseInt(r.t,10);i=e?mt.start:isNaN(s)?o:s}else i=0;if(gt)isNaN(i)||((n=i-mt.manifestInfo.availableFrom.getTime()/1e3)>ct||n<(isNaN(t)?NaN:t-mt.manifestInfo.DVRWindowSize))&&(n=null),n=n||ct;else if(!isNaN(i)&&i<Math.max(mt.manifestInfo.duration,mt.duration)&&i>=0)n=i;else{var u=pt[mt.id];n=void 0!==u?Math.max(void 0!==u.audio?u.audio:0,void 0!==u.video?u.video:0,mt.start):mt.start}return n}function A(e){var t=it.getReadOnlyMetricsFor(o.default.VIDEO)||it.getReadOnlyMetricsFor(o.default.AUDIO),n=st.getCurrentDVRInfo(t),r=n?n.range:null,i=void 0;if(!r)return NaN;if(e>r.end)i=Math.max(r.end-2*mt.manifestInfo.minBufferTime,r.start);else{if(!(e<r.start))return e;i=r.start}return i}function O(){if(null===ht){var e=function(){$()};ht=setInterval(e,yt.getWallclockTimeUpdateInterval())}}function M(){clearInterval(ht),ht=null}function _(){if(!s()&&gt&&0!==ft.getReadyState()){var e=p(),t=A(e);!isNaN(t)&&t!==e&&c(t)}}function D(e){if(!e.error){var t=at.convertDataToRepresentationInfo(e.currentRepresentation),n=t.mediaInfo.streamInfo;mt.id===n.id&&(mt=n,_())}}function P(){tt.trigger(d.default.CAN_PLAY)}function H(){et("Native video element event: play"),_(),O(),tt.trigger(d.default.PLAYBACK_STARTED,{startTime:p()})}function B(){et("Native video element event: playing"),tt.trigger(d.default.PLAYBACK_PLAYING,{playingTime:p()})}function j(){et("Native video element event: pause"),tt.trigger(d.default.PLAYBACK_PAUSED,{ended:g()})}function F(){var e=p();et("Seeking to: "+e),O(),tt.trigger(d.default.PLAYBACK_SEEKING,{seekTime:e})}function I(){et("Native video element event: seeked"),tt.trigger(d.default.PLAYBACK_SEEKED)}function q(){var e=p();lt=e,tt.trigger(d.default.PLAYBACK_TIME_UPDATED,{timeToEnd:r(),time:e})}function R(){var e=Date.now();(!wt||e>wt+b)&&(wt=e,q())}function U(){tt.trigger(d.default.PLAYBACK_PROGRESS)}function z(){var e=v();et("Native video element event: ratechange: ",e),tt.trigger(d.default.PLAYBACK_RATE_CHANGED,{playbackRate:e})}function W(){et("Native video element event: loadedmetadata"),tt.trigger(d.default.PLAYBACK_METADATA_LOADED),O()}function X(){et("Native video element event: ended"),u(),M(),tt.trigger(d.default.PLAYBACK_ENDED)}function V(e){var t=e.target||e.srcElement;tt.trigger(d.default.PLAYBACK_ERROR,{error:t.error})}function $(){tt.trigger(d.default.WALLCLOCK_TIME_UPDATED,{isDynamic:gt,time:new Date}),w()&&s()&&R()}function J(e,t){if(t&&t.length>0)for(var n=0,r=t.length;n<r;n++)if(e>=t.start(n)&&e<t.end(n))return!0;return!1}function K(e){var t=void 0,n=void 0,r=e.bufferedRanges;if(r&&r.length&&(!pt[mt.id]||!0!==pt[mt.id].started)){var i=e.sender.getType();void 0===vt[mt.id]&&(vt[mt.id]=[]),vt[mt.id][i]=r,void 0===pt[mt.id]&&(pt[mt.id]=[],pt[mt.id].started=!1),void 0===pt[mt.id][i]&&(pt[mt.id][i]=Math.max(r.start(0),mt.start));var s=rt.isVideoTrackPresent(),o=rt.isAudioTrackPresent();n=L(!1),o&&s?isNaN(pt[mt.id].audio)||isNaN(pt[mt.id].video)||(pt[mt.id].audio<pt[mt.id].video?(t=pt[mt.id].video>n?pt[mt.id].video:n,r=vt[mt.id].audio):(t=pt[mt.id].audio>n?pt[mt.id].audio:n,r=vt[mt.id].video),J(t,r)&&(f()||c(t),pt[mt.id].started=!0)):pt[mt.id][i]&&(t=pt[mt.id][i]>n?pt[mt.id][i]:n,f()||c(t),pt[mt.id].started=!0)}}function Q(e){e.streamInfo.id===mt.id&&ft.setStallState(e.mediaType,e.state===a.default.BUFFER_EMPTY)}function G(){ft.addEventListener("canplay",P),ft.addEventListener("play",H),ft.addEventListener("playing",B),ft.addEventListener("pause",j),ft.addEventListener("error",V),ft.addEventListener("seeking",F),ft.addEventListener("seeked",I),ft.addEventListener("timeupdate",q),ft.addEventListener("progress",U),ft.addEventListener("ratechange",z),ft.addEventListener("loadedmetadata",W),ft.addEventListener("ended",X)}function Y(){ft.removeEventListener("canplay",P),ft.removeEventListener("play",H),ft.removeEventListener("playing",B),ft.removeEventListener("pause",j),ft.removeEventListener("error",V),ft.removeEventListener("seeking",F),ft.removeEventListener("seeked",I),ft.removeEventListener("timeupdate",q),ft.removeEventListener("progress",U),ft.removeEventListener("ratechange",z),ft.removeEventListener("loadedmetadata",W),ft.removeEventListener("ended",X)}var Z=this.context,et=(0,y.default)(Z).getInstance().log,tt=(0,h.default)(Z).getInstance(),nt=void 0,rt=void 0,it=void 0,st=void 0,ot=void 0,ut=void 0,at=void 0,ft=void 0,lt=void 0,ct=void 0,ht=void 0,pt=void 0,dt=void 0,vt=void 0,mt=void 0,gt=void 0,yt=void 0,bt=void 0,wt=void 0;return nt={initialize:t,setConfig:k,getStreamStartTime:L,getTimeToStreamEnd:r,getTime:p,getPlaybackRate:v,getPlayedRanges:m,getEnded:g,getIsDynamic:w,getStreamController:E,setLiveStartTime:S,getLiveStartTime:x,computeLiveDelay:T,getLiveDelay:N,play:i,isPaused:s,pause:u,isSeeking:f,seek:c,reset:C},e(),nt}Object.defineProperty(n,"__esModule",{value:!0});var s=e(100),o=r(s),u=e(106),a=r(u),f=e(145),l=r(f),c=e(50),h=r(c),p=e(54),d=r(p),v=e(51),m=r(v),g=e(49),y=r(g),b=500;i.__dashjs_factory_name="PlaybackController",n.default=m.default.getSingletonFactory(i),t.exports=n.default},{100:100,106:106,145:145,49:49,50:50,51:51,54:54}],112:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){gt=(0,N.default)(tt).getInstance().log.bind(mt),Z()}function n(){yt=vt.getFragmentModel(),Mt=at.getScheduleWhilePaused(),At=(0,p.default)(tt).create({abrController:ft,dashMetrics:st,metricsModel:rt,mediaPlayerModel:at,textController:ht}),Ot=(0,v.default)(tt).create({adapter:it,sourceBufferController:pt,textController:ht}),ot.getIsTextTrack(dt)&&nt.on(E.default.TIMED_TEXT_REQUESTED,I,this),nt.on(E.default.QUALITY_CHANGE_REQUESTED,x,this),nt.on(E.default.DATA_UPDATE_STARTED,P,this),nt.on(E.default.DATA_UPDATE_COMPLETED,C,this),nt.on(E.default.FRAGMENT_LOADING_COMPLETED,O,this),nt.on(E.default.STREAM_COMPLETED,A,this),nt.on(E.default.STREAM_INITIALIZED,k,this),nt.on(E.default.BUFFER_LEVEL_STATE_CHANGED,B,this),nt.on(E.default.BUFFER_CLEARED,H,this),nt.on(E.default.BYTES_APPENDED,_,this),nt.on(E.default.INIT_REQUESTED,m,this),nt.on(E.default.QUOTA_EXCEEDED,j,this),nt.on(E.default.PLAYBACK_SEEKING,R,this),nt.on(E.default.PLAYBACK_STARTED,q,this),nt.on(E.default.PLAYBACK_RATE_CHANGED,U,this),nt.on(E.default.PLAYBACK_TIME_UPDATED,M,this),nt.on(E.default.URL_RESOLUTION_FAILED,F,this),nt.on(E.default.FRAGMENT_LOADING_ABANDONED,D,this)}function r(){return!1===Et}function i(){bt&&!vt.isBufferingCompleted()&&(Y(),Et=!1,wt&&(wt=!1),d(0),gt("Schedule controller starting for "+dt))}function s(){Et||(Et=!0,clearTimeout(kt),gt("Schedule controller stopping for "+dt))}function a(e,t){Dt[t]=Dt[t]||{};var n=ft.getTopQualityIndexFor(e,t);return Dt[t][e]!=n&&(gt("Top quality "+e+" index has changed from "+Dt[t][e]+" to "+n),Dt[t][e]=n,!0)}function l(){if(Et||Nt||!vt.getBufferController()||lt.isPaused()&&!Mt)return void gt("ScheduleController "+dt+"- schedule stop!");h();var e=Ht.length>0;if(Bt||e||a(bt.mediaInfo.type,vt.getStreamInfo().id)||At.execute(vt,dt,ct.isVideoTrackPresent())){var t=function(){gt("ScheduleController - "+dt+" - getNextFragment");var e=vt.getFragmentController();if(Bt)gt("ScheduleController - "+dt+" - switch track has been asked, get init request for "+dt+" with representationid = "+bt.id),vt.switchInitData(bt.id),Pt=bt.quality,Bt=!1;else if(bt.quality!==Pt)gt("ScheduleController - "+dt+" - quality has changed, get init request for representationid = "+bt.id),Pt=bt.quality,vt.switchInitData(bt.id);else{var t=Ht.shift();if(e.isInitializationRequest(t))vt.switchInitData(t.representationId);else{var n=Ot.execute(vt,t);n?(gt("ScheduleController - "+dt+" - getNextFragment - request is "+n.url),yt.executeRequest(n)):(gt("getNextFragment - "+dt+" - Playing at the bleeding live edge and frag is not available yet"),Nt=!1,d(500))}}};Nt=!0,e||Bt?t():(ft.checkPlaybackQuality(dt),t())}else d(500)}function h(){var e=1.5*bt.fragmentDuration,t=yt.getRequests({state:g.default.FRAGMENT_MODEL_EXECUTED,time:lt.getTime()+e,threshold:0})[0];if(t&&-1===Ht.indexOf(t)&&!ot.getIsTextTrack(dt)){var n=at.getFastSwitchEnabled(),r=vt.getBufferLevel(),i=ft.getAbandonmentStateFor(dt);n&&t.quality<bt.quality&&r>=e&&i!==f.default.ABANDON_LOAD?(S(t),gt("Reloading outdated fragment at index: ",t.index)):t.quality>bt.quality&&W(lt.getTime()+vt.getBufferLevel())}}function d(e){clearTimeout(kt),kt=setTimeout(l,e)}function m(e){e.sender&&e.sender.getStreamProcessor()===vt&&y(bt.quality)}function y(e){var t=it.getInitRequest(vt,e);t&&(Nt=!0,yt.executeRequest(t))}function w(){Bt=!0}function S(e){Ht.push(e)}function x(e){if(dt===e.mediaType&&vt.getStreamInfo().id===e.streamInfo.id){if(null===(bt=vt.getRepresentationInfoForQuality(e.newQuality))||void 0===bt)throw new Error("Unexpected error! - currentRepresentationInfo is null or undefined");G(new Date,u.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),Y()}}function T(e){if(lt&&yt){var t=yt.getRequests({state:g.default.FRAGMENT_MODEL_EXECUTED,time:lt.getTime(),threshold:0})[0];t&&lt.getTime()>=t.startTime&&(t.quality===_t.quality&&t.adaptationIndex===_t.adaptationIndex||!e||nt.trigger(E.default.QUALITY_CHANGE_RENDERED,{mediaType:dt,oldQuality:_t.quality,newQuality:t.quality}),_t={quality:t.quality,adaptationIndex:t.adaptationIndex})}}function C(e){e.error||e.sender.getStreamProcessor()!==vt||(bt=it.convertDataToRepresentationInfo(e.currentRepresentation))}function k(e){e.error||vt.getStreamInfo().id!==e.streamInfo.id||(bt=vt.getCurrentRepresentationInfo(),wt&&(lt.getIsDynamic()?(ut.setTimeSyncCompleted(!0),L()):(Lt=lt.getStreamStartTime(!1),vt.getBufferController().setSeekStartTime(Lt))),Et&&i())}function L(){var e=vt.getLiveEdgeFinder();if(e){var t=e.getLiveEdge(),n=bt.mediaInfo.streamInfo.manifestInfo.DVRWindowSize/2,r=t-lt.computeLiveDelay(bt.fragmentDuration,n),i=it.getFragmentRequestForTime(vt,bt,r,{ignoreIsFinished:!0});lt.setLiveStartTime(i.startTime),Lt=lt.getStreamStartTime(!1,t),Lt>bt.mediaInfo.streamInfo.start+bt.mediaInfo.streamInfo.duration&&lt.seek(Lt);var s=st.getCurrentManifestUpdate(rt.getMetricsFor(o.default.STREAM));rt.updateManifestUpdateInfo(s,{currentTime:Lt,presentationStartTime:t,latency:t-Lt,clientTimeOffset:ut.getClientTimeOffset()})}}function A(e){e.fragmentModel===yt&&(s(),Nt=!1,gt("[ScheduleController] Stream is complete"))}function O(e){e.sender===yt&&(ot.getIsTextTrack(dt)&&(Nt=!1),e.error&&e.request.serviceLocation&&!Et&&(S(e.request),Nt=!1,d(0)))}function M(){T(!0)}function _(e){e.sender.getStreamProcessor()===vt&&(Nt=!1,d(0))}function D(e){e.streamProcessor===vt&&(gt("[ScheduleController]["+dt+"] Request "+e.request.url+" has been aborted"),S(e.request),Nt=!1,d(0))}function P(e){e.sender.getStreamProcessor()===vt&&s()}function H(e){e.sender.getStreamProcessor()===vt&&(yt.removeExecutedRequestsBeforeTime(e.to),e.hasEnoughSpaceToAppend&&Et&&i())}function B(e){e.sender.getStreamProcessor()!==vt||e.state!==c.default.BUFFER_EMPTY||lt.isSeeking()||(gt("Buffer is empty! Stalling!"),G(new Date,u.PlayListTrace.REBUFFERING_REASON))}function j(e){e.sender.getStreamProcessor()===vt&&(s(),Nt=!1)}function F(){yt.abortRequests(),s()}function I(e){e.sender.getStreamProcessor()===vt&&y(e.index)}function q(){!Et&&Mt||i()}function R(e){Lt=e.seekTime,X(0),Et&&i();var t=st.getCurrentManifestUpdate(rt.getMetricsFor(o.default.STREAM)),n=bt.DVRWindow&&lt?bt.DVRWindow.end-lt.getTime():NaN;rt.updateManifestUpdateInfo(t,{latency:n}),Nt||d(0)}function U(e){xt&&(xt.playbackspeed=e.playbackRate.toString())}function z(){return Lt}function W(e){Lt=e}function X(e){Ct=e}function V(){return Ct}function $(){return At.getBufferTarget(vt,dt,ct.isVideoTrackPresent())}function J(){return dt}function K(e){St=e}function Q(e,t){G(e,t),St=null}function G(e,t){if(St&&!1===Tt){var n=xt.start,r=e.getTime()-n.getTime();xt.duration=r,xt.stopreason=t,St.trace.push(xt),Tt=!0}}function Y(){St&&!0===Tt&&bt&&(Tt=!1,xt=new u.PlayListTrace,xt.representationid=bt.id,xt.start=new Date,xt.mstart=1e3*lt.getTime(),xt.playbackspeed=lt.getPlaybackRate().toString())}function Z(){Nt=!1,Ct=0,Lt=NaN,St=null,xt=null,Tt=!0,wt=!0,Pt=NaN,_t={quality:NaN,adaptationIndex:NaN},Dt={},Ht=[],Et=!0,Bt=!0}function et(){nt.off(E.default.DATA_UPDATE_STARTED,P,this),nt.off(E.default.DATA_UPDATE_COMPLETED,C,this),nt.off(E.default.BUFFER_LEVEL_STATE_CHANGED,B,this),nt.off(E.default.QUALITY_CHANGE_REQUESTED,x,this),nt.off(E.default.FRAGMENT_LOADING_COMPLETED,O,this),nt.off(E.default.STREAM_COMPLETED,A,this),nt.off(E.default.STREAM_INITIALIZED,k,this),nt.off(E.default.QUOTA_EXCEEDED,j,this),nt.off(E.default.BYTES_APPENDED,_,this),nt.off(E.default.BUFFER_CLEARED,H,this),nt.off(E.default.INIT_REQUESTED,m,this),nt.off(E.default.PLAYBACK_RATE_CHANGED,U,this),nt.off(E.default.PLAYBACK_SEEKING,R,this),nt.off(E.default.PLAYBACK_STARTED,q,this),nt.off(E.default.PLAYBACK_TIME_UPDATED,M,this),nt.off(E.default.URL_RESOLUTION_FAILED,F,this),nt.off(E.default.FRAGMENT_LOADING_ABANDONED,D,this),ot.getIsTextTrack(dt)&&nt.off(E.default.TIMED_TEXT_REQUESTED,I,this),s(),T(!1),Z()}e=e||{};var tt=this.context,nt=(0,b.default)(tt).getInstance(),rt=e.metricsModel,it=e.adapter,st=e.dashMetrics,ot=e.dashManifestModel,ut=e.timelineConverter,at=e.mediaPlayerModel,ft=e.abrController,lt=e.playbackController,ct=e.streamController,ht=e.textController,pt=e.sourceBufferController,dt=e.type,vt=e.streamProcessor,mt=void 0,gt=void 0,yt=void 0,bt=void 0,wt=void 0,Et=void 0,St=void 0,xt=void 0,Tt=void 0,Nt=void 0,Ct=void 0,kt=void 0,Lt=void 0,At=void 0,Ot=void 0,Mt=void 0,_t=void 0,Dt=void 0,Pt=void 0,Ht=void 0,Bt=void 0;return mt={initialize:n,getType:J,getSeekTarget:z,setSeekTarget:W,setTimeToLoadDelay:X,getTimeToLoadDelay:V,replaceRequest:S,switchTrackAsked:w,isStarted:r,start:i,stop:s,reset:et,setPlayList:K,getBufferTarget:$,finalisePlayList:Q},t(),mt}Object.defineProperty(n,"__esModule",{value:!0});var s=e(100),o=r(s),u=e(232),a=e(103),f=r(a),l=e(106),c=r(l),h=e(183),p=r(h),d=e(184),v=r(d),m=e(141),g=r(m),y=e(50),b=r(y),w=e(54),E=r(w),S=e(51),x=r(S),T=e(49),N=r(T);i.__dashjs_factory_name="ScheduleController",n.default=x.default.getClassFactory(i),t.exports=n.default},{100:100,103:103,106:106,141:141,183:183,184:184,232:232,49:49,50:50,51:51,54:54}],113:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e,t){var n=t.codec,r=null;try{if(n.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new Error("not really supported");r=e.addSourceBuffer(n)}catch(i){if(!t.isText&&-1===n.indexOf('codecs="stpp')&&-1===n.indexOf('codecs="wvtt'))throw i;r=E.getTextSourceBuffer()}return r}function n(e,t){try{e.removeSourceBuffer(t)}catch(n){}}function r(e,t,n){var r=null,i=0,s=0,o=null,u=null,a=0,f=void 0,l=void 0,c=n||.15;try{r=e.buffered}catch(h){return null}if(null!==r&&void 0!==r){for(l=0,f=r.length;l<f;l++)if(i=r.start(l),s=r.end(l),null===o)a=Math.abs(i-t),t>=i&&t<s?(o=i,u=s):a<=c&&(o=i,u=s);else{if(!((a=i-u)<=c))break;u=s}if(null!==o)return{start:o,end:u}}return null}function i(e){try{return e.buffered}catch(t){return null}}function s(e){var t=i(e),n=0,r=void 0,s=void 0;if(!t)return n;for(s=0,r=t.length;s<r;s++)n+=t.end(s)-t.start(s);return n}function u(e,t,n){var i=void 0;return i=r(e,t,n),null===i?0:i.end-t}function f(e,t){if(!t)return null;var n=i(t),r=void 0,s=void 0,o=void 0,u=void 0,a=void 0,f=void 0,l=void 0,c=void 0,h=void 0;if(!n)return null;for(var p=0,d=n.length;p<d;p++){if(c=e.length>p,a=c?{start:e.start(p),end:e.end(p)}:null,r=n.start(p),s=n.end(p),!a)return h={start:r,end:s};if(o=a.start===r,u=a.end===s,!o||!u){if(o)h={start:a.end,end:s};else{if(!u)return h={start:r,end:s};h={start:r,end:a.start}}return f=e.length>p+1?{start:e.start(p+1),end:e.end(p+1)}:null,l=p+1<d?{start:n.start(p+1),end:n.end(p+1)}:null,!f||l&&l.start===f.start&&l.end===f.end||(h.end=f.start),h}}return null}function c(e,t){if(!e||!t)return void w.trigger(l.default.SOURCEBUFFER_APPEND_COMPLETED,{buffer:null,bytes:null,error:new o.default(d,m,null)});var n=t.bytes,r="append"in e?"append":"appendBuffer"in e?"appendBuffer":null,i="Object"===Object.prototype.toString.call(e).slice(8,-1);r&&y(e,function(){try{i?e[r](n,t):e[r](n),y(e,function(){w.trigger(l.default.SOURCEBUFFER_APPEND_COMPLETED,{buffer:e,bytes:n})})}catch(s){w.trigger(l.default.SOURCEBUFFER_APPEND_COMPLETED,{buffer:e,bytes:n,error:new o.default(s.code,s.message,null)})}})}function h(e,t,n,r){if(!e)return void w.trigger(l.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:t,to:n,error:new o.default(v,g,null)});y(e,function(){try{t>=0&&n>t&&"ended"!==r.readyState&&e.remove(t,n),y(e,function(){w.trigger(l.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:t,to:n})})}catch(i){w.trigger(l.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:t,to:n,error:new o.default(i.code,i.message,null)})}})}function p(e,t){try{"open"===e.readyState?t.abort():t.resetEmbedded&&"ended"===e.readyState&&t.abort()}catch(n){}}function y(e,t){var n=void 0,r=50,i=function(){e.updating||(clearInterval(n),t())},s=function u(){e.updating||(e.removeEventListener("updateend",u,!1),t())};if(!e.updating)return void t();if("function"==typeof e.addEventListener)try{e.addEventListener("updateend",s,!1)}catch(o){n=setInterval(i,r)}else n=setInterval(i,r)}var b=this.context,w=(0,a.default)(b).getInstance(),E=e.textController;return{append:c,remove:h,abort:p,createSourceBuffer:t,removeSourceBuffer:n,getBufferRange:r,getAllRanges:i,getTotalBufferedTime:s,getBufferLength:u,getRangeDifference:f}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(211),o=r(s),u=e(50),a=r(u),f=e(54),l=r(f),c=e(51),h=r(c),p=22,d=1,v=2,m="buffer or chunk is not defined",g="buffer is not defined";i.__dashjs_factory_name="SourceBufferController";var y=h.default.getSingletonFactory(i);y.QUOTA_EXCEEDED_ERROR_CODE=p,h.default.updateSingletonFactory(i.__dashjs_factory_name,y),n.default=y,t.exports=n.default},{211:211,50:50,51:51,54:54}],114:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){lt=(0,M.default)(G).getInstance(),ct=(0,D.default)(G).getInstance(),ft=(0,H.default)(G).getInstance(),gt=(0,N.default)(G).getInstance(),yt=(0,k.default)(G).getInstance(),J()}function t(e,t){z(),Nt=e,Tt=t,wt.initialize(),nt=(0,h.default)(G).create(),nt.setConfig({manifestModel:it,dashManifestModel:st,mediaPlayerModel:_t,manifestLoader:rt}),nt.initialize(),ct.setConfig({dashManifestModel:st}),Z.on(m.default.TIME_SYNCHRONIZATION_COMPLETED,O,this),Z.on(m.default.PLAYBACK_SEEKING,r,this),Z.on(m.default.PLAYBACK_TIME_UPDATED,n,this),Z.on(m.default.PLAYBACK_ENDED,v,this),Z.on(m.default.PLAYBACK_ERROR,q,this),Z.on(m.default.PLAYBACK_STARTED,i,this),Z.on(m.default.PLAYBACK_PAUSED,s,this),Z.on(m.default.MANIFEST_UPDATED,_,this),Z.on(m.default.STREAM_BUFFERING_COMPLETED,u,this),Z.on(A.default.METRIC_ADDED,Q,this)}function n(){if(B()){var e=Ot.getPlaybackQuality();e&&ut.addDroppedFrames(o.default.VIDEO,e)}Mt.isSeeking()}function r(e){var t=f(e.seekTime);t&&t!==St?(F(E.PlayListTrace.END_OF_PERIOD_STOP_REASON),b(St,t,e.seekTime)):F(E.PlayListTrace.USER_REQUEST_STOP_REASON),I(E.PlayList.SEEK_START_REASON)}function i(){Pt?(Pt=!1,I(E.PlayList.INITIAL_PLAYOUT_START_REASON)):Dt&&(Dt=!1,I(E.PlayList.RESUME_FROM_PAUSE_START_REASON))}function s(e){e.ended||(Dt=!0,F(E.PlayListTrace.USER_REQUEST_STOP_REASON))}function u(){var e=R().isLast;if(At&&e)Y("[StreamController] onStreamBufferingCompleted calls signalEndOfStream of mediaSourceController"),ft.signalEndOfStream(At);else if(MediaSource&&void 0===Ft){var t=Mt.getTimeToStreamEnd(),n=t>0?1e3*t:0;Y("[StreamController] onStreamBufferingCompleted PLAYBACK_ENDED event will be triggered in "+n+" milliseconds"),Ft=setTimeout(function(){Z.trigger(m.default.PLAYBACK_ENDED)},n)}}function f(e){var t=0,n=null,r=Et.length;r>0&&(t+=Et[0].getStartTime());for(var i=0;i<r;i++)if(n=Et[i],t=parseFloat((t+n.getDuration()).toFixed(5)),e<t)return n;return null}function c(e,t){for(var n=null,r=0,i=0,s=null,o=Et.length,u=0;u<o;u++){if(n=Et[u],i=n.getStartTime(),s=n.getDuration(),Number.isFinite(i)&&(r=i),n.getId()===t)return e-r;Number.isFinite(s)&&(r+=s)}return null}function p(){return St?St.getProcessors():[]}function v(){var e=g();e?(jt=void 0,Bt=void 0,b(St,e,NaN)):Y("StreamController no next stream found"),F(e?E.PlayListTrace.END_OF_PERIOD_STOP_REASON:E.PlayListTrace.END_OF_CONTENT_STOP_REASON),Ft=void 0}function g(){if(St){var e=function(){var e=St.getStreamInfo().start,t=St.getStreamInfo().duration;return{v:Et.filter(function(n){return n.getStreamInfo().start===parseFloat((e+t).toFixed(5))})[0]}}();if("object"==typeof e)return e.v}}function b(e,t,n){!Ct&&t&&e!==t&&(Ct=!0,Z.trigger(m.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:e?e.getStreamInfo():null,toStreamInfo:t.getStreamInfo()}),e&&(e.stopEventController(),e.deactivate()),St=t,Mt.initialize(St.getStreamInfo()),w(n,e))}function w(e,t){function n(){Y("MediaSource is open!"),window.URL.revokeObjectURL(r),At.removeEventListener("sourceopen",n),At.removeEventListener("webkitsourceopen",n),T(),S(e),t||Z.trigger(m.default.SOURCE_INITIALIZED)}var r=void 0;At?ft.detachMediaSource(Ot):At=ft.createMediaSource(),At.addEventListener("sourceopen",n,!1),At.addEventListener("webkitsourceopen",n,!1),r=ft.attachMediaSource(At,Ot),Y("MediaSource attached to element.  Waiting on open...")}function S(e){St.activate(At),P(),B(),Pt||(isNaN(e)?function(){var e=Mt.getStreamStartTime(!0);St.getProcessors().forEach(function(t){ot.setIndexHandlerTime(t,e)})}():Mt.seek(e)),St.startEventController(),!Nt&&Pt||Mt.play(),Ct=!1,Z.trigger(m.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:St.getStreamInfo()})}function T(){var e=St.getStreamInfo().manifestInfo.duration,t=ft.setDuration(At,e);Y("Duration successfully set to: "+t)}function C(e){for(var t=0,n=Et.length;t<n;t++)if(Et[t].getId()===e.id)return Et[t];return null}function L(){try{var e=ot.getStreamsInfo();if(0===e.length)throw new Error("There are no streams");var t=at.getCurrentManifestUpdate(ut.getMetricsFor(o.default.STREAM));ut.updateManifestUpdateInfo(t,{currentTime:Mt.getTime(),buffered:Ot.getBufferRange(),presentationStartTime:e[0].start,clientTimeOffset:wt.getClientTimeOffset()});for(var n=0,r=e.length;n<r;n++){var i=e[n],s=C(i);s?s.updateData(i):(s=(0,l.default)(G).create({manifestModel:it,dashManifestModel:st,mediaPlayerModel:_t,metricsModel:ut,dashMetrics:at,manifestUpdater:nt,adapter:ot,timelineConverter:wt,capabilities:tt,errHandler:bt,baseURLController:ct,domStorage:ht,abrController:pt,playbackController:Mt,mediaController:dt,textController:vt,sourceBufferController:mt,videoModel:Ot,streamController:et}),Et.push(s),s.initialize(i,xt)),ut.addManifestUpdateStreamInfo(t,i
.id,i.index,i.start,i.duration)}St||b(null,Et[0],NaN),Z.trigger(m.default.STREAMS_COMPOSED)}catch(u){bt.manifestError(u.message,"nostreamscomposed",it.getValue()),Lt=!0,K()}}function O(){var e=it.getValue();xt&&(Z.trigger(m.default.PROTECTION_CREATED,{controller:xt,manifest:e}),xt.setMediaElement(Ot.getElement()),Tt&&xt.setProtectionData(Tt)),L()}function _(e){e.error?(Lt=!0,K()):function(){var t=e.manifest;ot.updatePeriods(t);var n=ot.getStreamsInfo(t)[0],r=ot.getMediaInfoForType(n,o.default.VIDEO)||ot.getMediaInfoForType(n,o.default.AUDIO),i=void 0,s=void 0;r&&(i=ot.getDataForMedia(r),(s=st.getRepresentationsForAdaptation(i)[0].useCalculatedLiveEdgeTime)&&(Y("SegmentTimeline detected using calculated Live Edge Time"),_t.setUseManifestDateHeaderTimeSource(!1)));var u=st.getUTCTimingSources(e.manifest),a=!st.getIsDynamic(t)||s?u:u.concat(_t.getUTCTimingSources()),f=yt.isHTTPS(e.manifest.url);a.forEach(function(e){e.value.replace(/.*?:\/\//g,"")===y.default.DEFAULT_UTC_TIMING_SOURCE.value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(f?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),f?"https://":"http://"),Y("Matching default timing source protocol to manifest protocol: ",e.value))}),ct.initialize(t),lt.setConfig({metricsModel:ut,dashMetrics:at,baseURLController:ct}),lt.initialize(a,_t.getUseManifestDateHeaderTimeSource())}()}function P(){return void 0===jt&&(jt=j(o.default.AUDIO)),jt}function B(){return void 0===Bt&&(Bt=j(o.default.VIDEO)),Bt}function j(e){var t=!1;return St&&St.getProcessors().forEach(function(n){n.getMediaInfo().type===e&&(t=!0)}),t}function F(e,t){t=t||new Date,Ht&&(St&&St.getProcessors().forEach(function(n){var r=n.getScheduleController();r&&r.finalisePlayList(t,e)}),ut.addPlayList(Ht),Ht=null)}function I(e){Ht=new E.PlayList,Ht.start=new Date,Ht.mstart=1e3*Mt.getTime(),Ht.starttype=e,St&&St.getProcessors().forEach(function(e){var t=e.getScheduleController();t&&t.setPlayList(Ht)})}function q(e){if(e.error){var t="";switch(e.error.code){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:t="MEDIA_ERR_ENCRYPTED";break;default:t="UNKNOWN"}kt=!0,e.error.message&&(t+=" ("+e.error.message+")"),e.error.msExtendedCode&&(t+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),Y("Video Element Error: "+t),e.error&&Y(e.error),bt.mediaSourceError(t),K()}}function R(){return St?St.getStreamInfo():null}function U(e){return Et.filter(function(t){return t.getId()===e})[0]}function z(){if(!(rt&&rt.hasOwnProperty("load")&&wt&&wt.hasOwnProperty("initialize")&&wt.hasOwnProperty("reset")&&wt.hasOwnProperty("getClientTimeOffset")))throw new Error("setConfig function has to be called previously")}function W(){if(!nt||!nt.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}function X(e){z(),rt.load(e)}function V(e){W(),nt.setManifest(e)}function $(e){e&&(e.capabilities&&(tt=e.capabilities),e.manifestLoader&&(rt=e.manifestLoader),e.manifestModel&&(it=e.manifestModel),e.dashManifestModel&&(st=e.dashManifestModel),e.mediaPlayerModel&&(_t=e.mediaPlayerModel),e.protectionController&&(xt=e.protectionController),e.adapter&&(ot=e.adapter),e.metricsModel&&(ut=e.metricsModel),e.dashMetrics&&(at=e.dashMetrics),e.errHandler&&(bt=e.errHandler),e.timelineConverter&&(wt=e.timelineConverter),e.videoModel&&(Ot=e.videoModel),e.playbackController&&(Mt=e.playbackController),e.domStorage&&(ht=e.domStorage),e.abrController&&(pt=e.abrController),e.mediaController&&(dt=e.mediaController),e.textController&&(vt=e.textController),e.sourceBufferController&&(mt=e.sourceBufferController))}function J(){Et=[],xt=null,Ct=!1,St=null,kt=!1,Lt=!1,Bt=void 0,jt=void 0,Pt=!0,Dt=!1,Nt=!0,Ht=null,Ft=void 0}function K(){z(),lt.reset(),F(kt||Lt?E.PlayListTrace.FAILURE_STOP_REASON:E.PlayListTrace.USER_REQUEST_STOP_REASON);for(var e=0,t=Et?Et.length:0;e<t;e++)Et[e].reset(kt);Z.off(m.default.PLAYBACK_TIME_UPDATED,n,this),Z.off(m.default.PLAYBACK_SEEKING,r,this),Z.off(m.default.PLAYBACK_ERROR,q,this),Z.off(m.default.PLAYBACK_STARTED,i,this),Z.off(m.default.PLAYBACK_PAUSED,s,this),Z.off(m.default.PLAYBACK_ENDED,v,this),Z.off(m.default.MANIFEST_UPDATED,_,this),Z.off(m.default.STREAM_BUFFERING_COMPLETED,u,this),Z.off(A.default.METRIC_ADDED,Q,this),ct.reset(),nt.reset(),ut.clearAllCurrentMetrics(),it.setValue(null),rt.reset(),wt.reset(),gt.reset(),At&&(ft.detachMediaSource(Ot),At=null),Ot=null,xt&&(xt.setMediaElement(null),xt=null,Tt=null,it.getValue()&&Z.trigger(m.default.PROTECTION_DESTROYED,{data:it.getValue().url})),Z.trigger(m.default.STREAM_TEARDOWN_COMPLETE),J()}function Q(e){e.metric===a.default.DVR_INFO&&e.mediaType===o.default.AUDIO&&ft.setSeekable(At,e.value.range.start,e.value.range.end)}var G=this.context,Y=(0,x.default)(G).getInstance().log,Z=(0,d.default)(G).getInstance(),et=void 0,tt=void 0,nt=void 0,rt=void 0,it=void 0,st=void 0,ot=void 0,ut=void 0,at=void 0,ft=void 0,lt=void 0,ct=void 0,ht=void 0,pt=void 0,dt=void 0,vt=void 0,mt=void 0,gt=void 0,yt=void 0,bt=void 0,wt=void 0,Et=void 0,St=void 0,xt=void 0,Tt=void 0,Nt=void 0,Ct=void 0,kt=void 0,Lt=void 0,At=void 0,Ot=void 0,Mt=void 0,_t=void 0,Dt=void 0,Pt=void 0,Ht=void 0,Bt=void 0,jt=void 0,Ft=void 0;return et={initialize:t,getActiveStreamInfo:R,isVideoTrackPresent:B,isAudioTrackPresent:P,getStreamById:U,getStreamForTime:f,getTimeRelativeToStreamId:c,load:X,loadWithManifest:V,getActiveStreamProcessors:p,setConfig:$,reset:K},e(),et}Object.defineProperty(n,"__esModule",{value:!0});var s=e(100),o=r(s),u=e(101),a=r(u),f=e(96),l=r(f),c=e(92),h=r(c),p=e(50),d=r(p),v=e(54),m=r(v),g=e(143),y=r(g),b=e(51),w=r(b),E=e(232),S=e(49),x=r(S),T=e(200),N=r(T),C=e(206),k=r(C),L=e(94),A=r(L),O=e(115),M=r(O),_=e(104),D=r(_),P=e(110),H=r(P);i.__dashjs_factory_name="StreamController",n.default=w.default.getSingletonFactory(i),t.exports=n.default},{100:100,101:101,104:104,110:110,115:115,143:143,200:200,206:206,232:232,49:49,50:50,51:51,54:54,92:92,94:94,96:96}],115:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t){B=t,D=0,P=!1,H=!1,j={"urn:mpeg:dash:utc:http-head:2014":T,"urn:mpeg:dash:utc:http-xsdate:2014":x.bind(null,d),"urn:mpeg:dash:utc:http-iso:2014":x.bind(null,v),"urn:mpeg:dash:utc:direct:2014":S,"urn:mpeg:dash:utc:http-head:2012":T,"urn:mpeg:dash:utc:http-xsdate:2012":x.bind(null,d),"urn:mpeg:dash:utc:http-iso:2012":x.bind(null,v),"urn:mpeg:dash:utc:direct:2012":S,"urn:mpeg:dash:utc:http-ntp:2014":y,"urn:mpeg:dash:utc:ntp:2014":y,"urn:mpeg:dash:utc:sntp:2014":y},i()||(k(e),s(!0))}function t(e){e&&(e.metricsModel&&(F=e.metricsModel),e.dashMetrics&&(I=e.dashMetrics),e.baseURLController&&(q=e.baseURLController))}function n(){return l()}function r(e){P=e}function i(){return P}function s(e){H=e}function u(e){D=e}function l(){return D}function h(e){var t=1e3,n=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/,r=void 0,i=void 0,s=n.exec(e);return r=Date.UTC(parseInt(s[1],10),parseInt(s[2],10)-1,parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5],10),s[6]&&(parseInt(s[6],10)||0),s[7]&&parseFloat(s[7])*t||0),s[9]&&s[10]&&(i=60*parseInt(s[9],10)+parseInt(s[10],10),r+=("+"===s[8]?-1:1)*i*60*t),(new Date(r)).getTime()}function d(e){var t=Date.parse(e);return isNaN(t)&&(t=h(e)),t}function v(e){return Date.parse(e)}function m(e){return Date.parse(e)}function y(e,t,n){n()}function S(e,t,n){var r=d(e);if(!isNaN(r))return void t(r);n()}function x(e,t,n,r,i){var s=void 0,o=void 0,u=!1,a=new XMLHttpRequest,l=i?f.HTTPRequest.HEAD:f.HTTPRequest.GET,c=t.match(/\S+/g);if(t=c.shift(),s=function(){u||(u=!0,c.length?x(e,c.join(" "),n,r,i):r())},o=function(){var t=void 0,r=void 0;200===a.status&&(t=i?a.getResponseHeader("Date"):a.response,r=e(t),isNaN(r)||(n(r),u=!0))},_.isRelative(t)){var h=q.resolve();h&&(t=_.resolve(t,h.url))}a.open(l,t),a.timeout=E||0,a.onload=o,a.onloadend=s,a.send()}function T(e,t,n){x(m,e,t,n,!0)}function N(){var e=F.getReadOnlyMetricsFor(o.default.STREAM),t=I.getLatestMPDRequestHeaderValueByID(e,"Date"),n=null!==t?(new Date(t)).getTime():Number.NaN;isNaN(n)?C(!0):(u(n-(new Date).getTime()),C(!1,n/1e3,D))}function C(e,t,n){r(!1),M.trigger(p.default.TIME_SYNCHRONIZATION_COMPLETED,{time:t,offset:n,error:e?new a.default(w):null})}function k(e,t){var n=t||0,i=e[n],s=function(e,t){var n=!e||!t;n&&B?N():C(n,e,t)};r(!0),i?j.hasOwnProperty(i.schemeIdUri)?j[i.schemeIdUri](i.value,function(e){var t=(new Date).getTime(),n=e-t;u(n),O("Local time:      "+new Date(t)),O("Server time:     "+new Date(e)),O("Difference (ms): "+n),s(e,n)},function(){k(e,n+1)}):k(e,n+1):(u(0),s())}function L(){s(!1),r(!1)}var A=this.context,O=(0,g.default)(A).getInstance().log,M=(0,c.default)(A).getInstance(),_=(0,b.default)(A).getInstance(),D=void 0,P=void 0,H=void 0,B=void 0,j=void 0,F=void 0,I=void 0,q=void 0;return{initialize:e,getOffsetToDeviceTimeMs:n,setConfig:t,reset:L}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(100),o=r(s),u=e(211),a=r(u),f=e(230),l=e(50),c=r(l),h=e(54),p=r(h),d=e(51),v=r(d),m=e(49),g=r(m),y=e(206),b=r(y),w=1,E=5e3;i.__dashjs_factory_name="TimeSyncController";var S=v.default.getSingletonFactory(i);S.TIME_SYNC_FAILED_ERROR_CODE=w,S.HTTP_TIMEOUT_MS=E,v.default.updateSingletonFactory(i.__dashjs_factory_name,S),n.default=S,t.exports=n.default},{100:100,206:206,211:211,230:230,49:49,50:50,51:51,54:54}],116:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){C.on(l.default.XLINK_ELEMENT_LOADED,f,L),D=(0,o.default)(N).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier})}function n(e){e&&(A=e)}function r(e){e&&(O=e)}function i(e){var t=void 0;_=new d.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:A}),M=e,t=h(M.Period_asArray,M,b,g),u(t,b,g)}function s(){C.off(l.default.XLINK_ELEMENT_LOADED,f,L),D&&(D.reset(),D=null)}function u(e,t,n){var r={},i=void 0,s=void 0;r.elements=e,r.type=t,r.resolveType=n,0===r.elements.length&&c(r);for(var o=0;o<r.elements.length;o++)i=r.elements[o],s=k.isHTTPURL(i.url)?i.url:i.originalContent.BaseURL+i.url,D.load(s,i,r)}function f(e){var t=void 0,n=void 0,r="";if(t=e.element,n=e.resolveObject,t.resolvedContent){var i=0;0===t.resolvedContent.indexOf("<?xml")&&(i=t.resolvedContent.indexOf("?>")+2),r=t.resolvedContent.substr(0,i)+"<response>"+t.resolvedContent.substr(i)+"</response>",t.resolvedContent=_.xml_str2json(r)}x(n)&&c(n)}function c(e){var t=[],n=void 0,r=void 0;if(p(e),e.resolveType===y&&C.trigger(l.default.XLINK_READY,{manifest:M}),e.resolveType===g)switch(e.type){case b:for(n=0;n<M[b+"_asArray"].length;n++)r=M[b+"_asArray"][n],r.hasOwnProperty(w+"_asArray")&&(t=t.concat(h(r[w+"_asArray"],r,w,g))),r.hasOwnProperty(E+"_asArray")&&(t=t.concat(h(r[E+"_asArray"],r,E,g)));u(t,w,g);break;case w:C.trigger(l.default.XLINK_READY,{manifest:M})}}function h(e,t,n,r){var i=[],s=void 0,o=void 0,u=void 0;for(o=e.length-1;o>=0;o--)s=e[o],s.hasOwnProperty("xlink:href")&&s["xlink:href"]===S&&e.splice(o,1);for(o=0;o<e.length;o++)s=e[o],s.hasOwnProperty("xlink:href")&&s.hasOwnProperty("xlink:actuate")&&s["xlink:actuate"]===r&&(u=v(s["xlink:href"],t,n,o,r,s),i.push(u));return i}function p(e){var t=[],n=void 0,r=void 0,i=void 0,s=void 0,o=void 0,u=void 0;for(s=e.elements.length-1;s>=0;s--){if(n=e.elements[s],r=n.type+"_asArray",!n.resolvedContent||T())delete n.originalContent["xlink:actuate"],delete n.originalContent["xlink:href"],t.push(n.originalContent);else if(n.resolvedContent)for(o=0;o<n.resolvedContent[r].length;o++)i=n.resolvedContent[r][o],t.push(i);for(n.parentElement[r].splice(n.index,1),u=0;u<t.length;u++)n.parentElement[r].splice(n.index+u,0,t[u]);t=[]}e.elements.length>0&&O.run(M)}function v(e,t,n,r,i,s){return{url:e,parentElement:t,type:n,index:r,resolveType:i,originalContent:s,resolvedContent:null,resolved:!1}}function x(e){var t=void 0,n=void 0;for(t=0;t<e.elements.length;t++)if(n=e.elements[t],!1===n.resolved)return!1;return!0}function T(){return!1}e=e||{};var N=this.context,C=(0,a.default)(N).getInstance(),k=(0,m.default)(N).getInstance(),L=void 0,A=void 0,O=void 0,M=void 0,_=void 0,D=void 0;return L={resolveManifestOnLoad:i,setMatchers:n,setIron:r,reset:s},t(),L}Object.defineProperty(n,"__esModule",{value:!0});var s=e(99),o=r(s),u=e(50),a=r(u),f=e(54),l=r(f),c=e(51),h=r(c),p=e(4),d=r(p),v=e(206),m=r(v),g="onLoad",y="onActuate",b="Period",w="AdaptationSet",E="EventStream",S="urn:mpeg:dash:resolve-to-zero:2013";i.__dashjs_factory_name="XlinkController",n.default=h.default.getClassFactory(i),t.exports=n.default},{206:206,4:4,50:50,51:51,54:54,99:99}],117:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){return i=(0,o.default)(r).getInstance({eventBus:e.eventBus,metricsModel:e.metricsModel,metricsConstants:e.metricsConstants,events:e.events}),(0,l.default)(r).create(e)}function t(){return(0,d.default)(r).getInstance()}function n(){return(0,h.default)(r).getInstance()}var r=this.context,i=void 0;return{createMetricsReporting:e,getReportingFactory:t,getMetricsHandlerFactory:n}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(131),o=r(s),u=e(118),a=r(u),f=e(119),l=r(f),c=e(124),h=r(c),p=e(129),d=r(p);i.__dashjs_factory_name="MetricsReporting";var v=dashjs.FactoryMaker.getClassFactory(i);v.events=a.default,dashjs.FactoryMaker.updateClassFactory(i.__dashjs_factory_name,v),n.default=v,t.exports=n.default},{118:118,119:119,124:124,129:129,131:131}],118:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(e,t,n){for(var r=!0;r;){var i=e,s=t,o=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,s);if(void 0!==u){if("value"in u)return u.value;var a=u.get;if(void 0===a)return;return a.call(o)}var f=Object.getPrototypeOf(i);if(null===f)return;e=f,t=s,n=o,r=!0,u=f=void 0}},u=e(55),a=r(u),f=function(e){function t(){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer"}return s(t,e),t}(a.default),l=new f;n.default=l,t.exports=n.default},{55:55}],119:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(t){if(!t.error){var n=Object.keys(s);(0,a.default)(u).getInstance({dashManifestModel:e.dashManifestModel,constants:e.constants}).getMetrics(t.manifest).forEach(function(t){var r=JSON.stringify(t);if(s.hasOwnProperty(r))n.splice(r,1);else try{var i=(0,o.default)(u).create(e);i.initialize(t),s[r]=i}catch(t){}}),n.forEach(function(e){s[e].reset(),delete s[e]}),f.trigger(l.default.METRICS_INITIALISATION_COMPLETE)}}function n(){Object.keys(s).forEach(function(e){s[e].reset()}),s={}}function r(){f.on(c.MANIFEST_UPDATED,t),f.on(c.STREAM_TEARDOWN_COMPLETE,n)}function i(){f.off(c.MANIFEST_UPDATED,t),f.off(c.STREAM_TEARDOWN_COMPLETE,n)}e=e||{};var s={},u=this.context,f=e.eventBus,c=e.events;return r(),{reset:i}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(120),o=r(s),u=e(133),a=r(u),f=e(118),l=r(f);i.__dashjs_factory_name="MetricsCollectionController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{118:118,120:120,133:133}],120:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(t){try{s=(0,o.default)(u).create({mediaElement:e.mediaElement}),s.initialize(t.Range),i=(0,a.default)(u).create({log:e.log,metricsConstants:e.metricsConstants}),i.initialize(t.Reporting,s),r=(0,l.default)(u).create({log:e.log,eventBus:e.eventBus,metricsConstants:e.metricsConstants,events:e.events}),r.initialize(t.metrics,i)}catch(f){throw n(),f}}function n(){r&&r.reset(),i&&i.reset(),s&&s.reset()}e=e||{};var r=void 0,i=void 0,s=void 0,u=this.context;return{initialize:t,reset:n}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(122),o=r(s),u=e(123),a=r(u),f=e(121),l=r(f);i.__dashjs_factory_name="MetricsController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{121:121,122:122,123:123}],121:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e){i.forEach(function(t){t.handleNewMetric(e.metric,e.value,e.mediaType)})}function n(e,n){e.split(",").forEach(function(e,t,r){var s=void 0;if(-1!==e.indexOf("(")&&-1===e.indexOf(")")){var o=r[t+1];o&&-1===o.indexOf("(")&&-1!==o.indexOf(")")&&(e+=","+o,delete r[t+1])}(s=l.create(e,n))&&i.push(s)}),a.on(f.METRIC_ADDED,t,s),a.on(f.METRIC_UPDATED,t,s)}function r(){a.off(f.METRIC_ADDED,t,s),a.off(f.METRIC_UPDATED,t,s),i.forEach(function(e){return e.reset()}),i=[]}e=e||{};var i=[],s=void 0,u=this.context,a=e.eventBus,f=e.events,l=(0,o.default)(u).getInstance({log:e.log,eventBus:e.eventBus,metricsConstants:e.metricsConstants});return s={initialize:n,reset:r}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(124),o=r(s);i.__dashjs_factory_name="MetricsHandlersController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{124:124}],122:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e){e&&e.length&&(e.forEach(function(e){var t=e.starttime,n=t+e.duration;f.add(t,n)}),s=!!e[0]._useWallClockTime)}function n(){f.clear()}function r(){f=(0,o.default)(u).create()}function i(){var e=f.length,t=void 0;if(!e)return!0;t=s?(new Date).getTime()/1e3:l.currentTime;for(var n=0;n<e;n+=1){var r=f.start(n),i=f.end(n);if(r<=t&&t<i)return!0}return!1}e=e||{};var s=!1,u=this.context,a=void 0,f=void 0,l=e.mediaElement;return a={initialize:t,reset:n,isEnabled:i},r(),a}Object.defineProperty(n,"__esModule",{value:!0});var s=e(196),o=r(s);i.__dashjs_factory_name="RangeController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{196:196}],123:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e,t){e.some(function(e){var n=s.create(e,t);if(n)return i.push(n),!0})}function n(){i.forEach(function(e){return e.reset()}),i=[]}function r(e,t){i.forEach(function(n){return n.report(e,t)})}var i=[],s=(0,o.default)(this.context).getInstance(e);return{initialize:t,reset:n,report:r}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(129),o=r(s);i.__dashjs_factory_name="ReportingController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{129:129}],124:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(t,n){var r,o=t.match(s);if(o){try{r=f[o[1]](u).create({eventBus:e.eventBus,metricsConstants:e.metricsConstants}),r.initialize(o[1],n,o[3],o[5])}catch(a){r=null,i("MetricsHandlerFactory: Could not create handler for type "+o[1]+" with args "+o[3]+", "+o[5]+" ("+a.message+")")}return r}}function n(e,t){f[e]=t}function r(e){delete f[e]}e=e||{};var i=e.log,s=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,u=this.context,f={BufferLevel:o.default,DVBErrors:a.default,HttpList:l.default,PlayList:h.default,RepSwitchList:h.default,TcpList:h.default};return{create:t,register:n,unregister:r}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(125),o=r(s),u=e(126),a=r(u),f=e(128),l=r(f),c=e(127),h=r(c);i.__dashjs_factory_name="MetricsHandlerFactory",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{125:125,126:126,127:127,128:128}],125:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){try{return Object.keys(d).map(function(e){return d[e]}).reduce(function(e,t){return e.level<t.level?e:t})}catch(e){return}}function n(){var e=t();e&&c!==e.t&&(c=e.t,u.report(f,e))}function r(e,t,r){t&&(a=p.validateN(r),u=t,f=p.reconstructFullMetricName(e,r),l=setInterval(n,a))}function i(){clearInterval(l),l=null,a=0,u=null,c=null}function s(e,t,n){e===v.BUFFER_LEVEL&&(d[n]=t)}e=e||{};var u=void 0,a=void 0,f=void 0,l=void 0,c=void 0,h=this.context,p=(0,o.default)(h).getInstance(),d=[],v=e.metricsConstants;return{initialize:r,reset:i,handleNewMetric:s}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(132),o=r(s);i.__dashjs_factory_name="BufferLevelHandler",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{132:132}],126:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){u.off(o.default.METRICS_INITIALISATION_COMPLETE,t,this),u.trigger(o.default.BECAME_REPORTING_PLAYER)}function n(e,n){n&&(s=n,u.on(o.default.METRICS_INITIALISATION_COMPLETE,t,this))}function r(){s=null}function i(e,t){e===a.DVB_ERRORS&&s&&s.report(e,t)}e=e||{};var s=void 0,u=e.eventBus,a=e.metricsConstants;return{initialize:n,reset:r,handleNewMetric:i}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(118),o=r(s);n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{118:118}],127:[function(e,t,n){"use strict";function r(){function e(e,t){r=e,i=t}function t(){i=null,r=void 0}function n(e,t){e===r&&i&&i.report(r,t)}var r=void 0,i=void 0;return{initialize:e,reset:t,handleNewMetric:n}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="GenericMetricHandler",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default},{}],128:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){var e=c;e.length&&s&&s.report(f,e),c=[]}function n(e,n,r,i){n&&(u=h.validateN(r),s=n,i&&i.length&&(a=i),f=h.reconstructFullMetricName(e,r,i),l=setInterval(t,u))}function r(){clearInterval(l),l=null,u=null,a=null,c=[],s=null}function i(e,t){e===p.HTTP_REQUEST&&(a&&a!==t.type||c.push(t))}e=e||{};var s=void 0,u=void 0,a=void 0,f=void 0,l=void 0,c=[],h=(0,o.default)(this.context).getInstance(),p=e.metricsConstants;return{initialize:n,reset:r,handleNewMetric:i}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(132),o=r(s);i.__dashjs_factory_name="HttpListHandler",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{132:132}],129:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e,t){var n=void 0;try{n=i[e.schemeIdUri](s).create({metricsConstants:a}),n.initialize(e,t)}catch(r){n=null,u("ReportingFactory: could not create Reporting with schemeIdUri "+e.schemeIdUri+" ("+r.message+")")}return n}function n(e,t){i[e]=t}function r(e){delete i[e]}e=e||{};var i={"urn:dvb:dash:reporting:2014":o.default},s=this.context,u=e.log,a=e.metricsConstants;return{create:t,register:n,unregister:r}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(130),o=r(s);i.__dashjs_factory_name="ReportingFactory",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{130:130}],130:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e,t,n){var r=new XMLHttpRequest,i=function(){var e=m.indexOf(r);-1!==e&&(m.splice(e,1),r.status>=200&&r.status<300?t&&t():n&&n())};m.push(r);try{r.open("GET",e),r.onloadend=i,r.onerror=i,r.send()}catch(s){r.onerror()}}function n(e,n){Array.isArray(n)||(n=[n]),c&&d.isEnabled()&&n.forEach(function(n){var r=u.serialise(n);l&&e!==g.DVB_ERRORS&&(r="metricname="+e+"&"+r),r=p+"?"+r,t(r,null,function(){c=!1})})}function r(e,t){var n=void 0;if(d=t,!(p=e["dvb:reportingUrl"]))throw new Error("required parameter missing (dvb:reportingUrl)");h||(n=e["dvb:probability"]||e["dvb:priority"]||0,n&&(1e3===n||n/1e3>=f.random())&&(c=!0),h=!0)}function i(){v||(m.forEach(function(e){return e.abort()}),m=[]),h=!1,c=!1,p=null,d=null}e=e||{};var s=this.context,u=(0,o.default)(s).getInstance(),f=(0,a.default)(s).getInstance(),l=!0,c=!1,h=!1,p=null,d=null,v=!0,m=[],g=e.metricsConstants;return{report:n,initialize:r,reset:i}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(134),o=r(s),u=e(135),a=r(u);i.__dashjs_factory_name="DVBReporting",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{134:134,135:135}],131:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e){var t=new o.default;if(v){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.mpdurl||(t.mpdurl=v.originalUrl||v.url),t.terror||(t.terror=new Date),d.addDVBErrors(t)}}function n(e){e.error||(v=e.manifest)}function r(e){t({errorcode:o.default.BASE_URL_CHANGED,servicelocation:e.entry})}function i(){t({errorcode:o.default.BECAME_REPORTER})}function s(e){(0===e.responsecode||e.responsecode>=400||e.responsecode<100||e.responsecode>=600)&&t({errorcode:e.responsecode||o.default.CONNECTION_ERROR,url:e.url,terror:e.tresponse,servicelocation:e._serviceLocation})}function u(e){switch(e.metric){case m.HTTP_REQUEST:s(e.value)}}function f(e){var n=e.error?e.error.code:0,r=void 0;switch(n){case MediaError.MEDIA_ERR_NETWORK:r=o.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:r=o.default.CORRUPT_MEDIA_OTHER;break;default:return}t({errorcode:r})}function l(){p.on(g.MANIFEST_UPDATED,n,h),p.on(g.SERVICE_LOCATION_BLACKLIST_CHANGED,r,h),p.on(g.METRIC_ADDED,u,h),p.on(g.METRIC_UPDATED,u,h),p.on(g.PLAYBACK_ERROR,f,h),p.on(a.default.BECAME_REPORTING_PLAYER,i,h)}function c(){p.off(g.MANIFEST_UPDATED,n,h),p.off(g.SERVICE_LOCATION_BLACKLIST_CHANGED,r,h),p.off(g.METRIC_ADDED,u,h),p.off(g.METRIC_UPDATED,u,h),p.off(g.PLAYBACK_ERROR,f,h),p.off(a.default.BECAME_REPORTING_PLAYER,i,h)}e=e||{};var h=void 0,p=e.eventBus,d=e.metricsModel,v=void 0,m=e.metricsConstants,g=e.events;return h={initialise:l,reset:c},l(),h}Object.defineProperty(n,"__esModule",{value:!0});var s=e(136),o=r(s),u=e(118),a=r(u);i.__dashjs_factory_name="DVBErrorsTranslator",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{118:118,136:136}],132:[function(e,t,n){"use strict";function r(){return{reconstructFullMetricName:function(e,t,n){var r=e;return t&&(r+="("+t,n&&n.length&&(r+=","+n),r+=")"),r},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="HandlerHelpers",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],133:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e,t,n){var s,o,u=r.getMpd(e),a=0;return t?a=u.availabilityStartTime.getTime()/1e3:(s=this.getRegularPeriods(u),s.length&&(a=s[0].start)),o=a,n&&n.hasOwnProperty(i.START_TIME)&&(o+=n.starttime),o}function n(e){var n=[];return e.Metrics_asArray&&e.Metrics_asArray.forEach(function(s){var u=new o.default,f=r.getIsDynamic(e);s.hasOwnProperty("metrics")&&(u.metrics=s.metrics,s.Range_asArray&&s.Range_asArray.forEach(function(n){var i=new a.default;i.starttime=t(e,f,n),n.hasOwnProperty("duration")?i.duration=n.duration:i.duration=r.getDuration(e),i._useWallClockTime=f,u.Range.push(i)}),s.Reporting_asArray&&(s.Reporting_asArray.forEach(function(e){var t=new l.default;if(e.hasOwnProperty(i.SCHEME_ID_URI)){t.schemeIdUri=e.schemeIdUri;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);u.Reporting.push(t)}}),n.push(u)))}),n}e=e||{};var r=e.dashManifestModel,i=e.constants;return{getMetrics:n}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(137),o=r(s),u=e(138),a=r(u),f=e(139),l=r(f);i.__dashjs_factory_name="ManifestParsing",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{137:137,138:138,139:139}],134:[function(e,t,n){"use strict";function r(){function e(t){var n=[],r=[],i=void 0,s=void 0;for(i in t)if(t.hasOwnProperty(i)&&0!==i.indexOf("_")){if(s=t[i],void 0!==s&&null!==s||(s=""),Array.isArray(s)){if(!s.length)continue;r=[],s.forEach(function(t){var n="Object"!==Object.prototype.toString.call(t).slice(8,-1);r.push(n?t:e(t))}),s=r.map(encodeURIComponent).join(",")}else"string"==typeof s?s=encodeURIComponent(s):s instanceof Date?s=s.toISOString():"number"==typeof s&&(s=Math.round(s));n.push(i+"="+s)}return n.join("&")}return{serialise:e}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="MetricSerialiser",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],135:[function(e,t,n){"use strict";function r(){function e(){n&&(o||(o=new r(s)),n.getRandomValues(o),u=0)}function t(t,r){var s=void 0;return t||(t=0),r||(r=1),n?(u===o.length&&e(),s=o[u]/i,u+=1):s=Math.random(),s*(r-t)+t}var n=window.crypto||window.msCrypto,r=Uint32Array,i=Math.pow(2,8*r.BYTES_PER_ELEMENT)-1,s=10,o=void 0,u=void 0,a=void 0;return a={random:t},e(),a}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="RNG",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],136:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};i.SSL_CONNECTION_FAILED_PREFIX="SSL",i.DNS_RESOLUTION_FAILED="C00",i.HOST_UNREACHABLE="C01",i.CONNECTION_REFUSED="C02",i.CONNECTION_ERROR="C03",i.CORRUPT_MEDIA_ISOBMFF="M00",i.CORRUPT_MEDIA_OTHER="M01",i.BASE_URL_CHANGED="F00",i.BECAME_REPORTER="S00",n.default=i,t.exports=n.default},{}],137:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.metrics="",this.Range=[],this.Reporting=[]};n.default=i,t.exports=n.default},{}],138:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1};n.default=i,t.exports=n.default},{}],139:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.schemeIdUri="",this.value=""};n.default=i,t.exports=n.default},{}],140:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(){function e(){a()}function t(e){e.dashManifestModel&&(d=e.dashManifestModel)}function n(e,t,n){var r=d.getBaseURLsFromElement(n);e[t]?m.areEqual(r,e[t].data.baseUrls)||(e[t].data.baseUrls=r,e[t].data.selectedIdx=l):e[t]=new c(r)}function r(e){var t=d.getBaseURLsFromElement(e);m.areEqual(t,p.data.baseUrls)||(p.data.baseUrls=t,p.data.selectedIdx=l),e.Period_asArray&&e.Period_asArray.forEach(function(e,t){n(p.children,t,e),e.AdaptationSet_asArray&&e.AdaptationSet_asArray.forEach(function(e,r){n(p.children[t].children,r,e),e.Representation_asArray&&e.Representation_asArray.sort(d.getRepresentationSortFunction()).forEach(function(e,i){n(p.children[t].children[r].children,i,e)})})})}function i(e,t){var n=t||p;e(n.data),n.children&&n.children.forEach(function(t){return i(e,t)})}function s(e){i(function(t){isNaN(t.selectedIdx)||e===t.baseUrls[t.selectedIdx].serviceLocation&&(t.selectedIdx=l)})}function o(e){r(e)}function a(){p=new c}function f(e){var t=p,n=[t.data];return e&&e.forEach(function(e){(t=t.children[e])&&n.push(t.data)}),n.filter(function(e){return e.baseUrls.length})}var h=void 0,p=void 0,d=void 0,v=this.context,m=(0,u.default)(v).getInstance();return h={reset:a,update:o,getForPath:f,invalidateSelectedIndexes:s,setConfig:t},e(),h}Object.defineProperty(n,"__esModule",{value:!0});var o=e(203),u=r(o),a=e(51),f=r(a),l=NaN,c=function h(e,t){i(this,h),this.data={baseUrls:e||null,selectedIdx:t||l},this.children=[]};s.__dashjs_factory_name="BaseURLTreeModel",n.default=f.default.getClassFactory(s),t.exports=n.default},{203:203,51:51}],141:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default"
:e}}function i(e){function t(){T(),L.on(a.default.LOADING_COMPLETED,S,M),L.on(a.default.LOADING_ABANDONED,x,M)}function n(e){_=e}function r(){return _}function i(e){var t=function(e,t){return e.url===t.url},n=function(e,t){return e.action===h.default.ACTION_COMPLETE&&e.action===t.action},r=function(e,t){return!isNaN(e.index)&&e.startTime===t.startTime&&e.adaptationIndex===t.adaptationIndex},i=function(e,t){return isNaN(e.index)&&isNaN(t.index)&&e.quality===t.quality},s=function(s){var o=!1;return s.some(function(s){if(t(e,s)&&(r(e,s)||i(e,s)||n(e,s)))return o=!0}),o};return!!e&&s(D)}function s(e){var t=!1,n=0,r=void 0;if(!(t=i(e)))for(n=0;n<P.length;n++)r=P[n],e.url===r.url&&e.startTime===r.startTime&&(t=!0);return t}function u(e){var t=e?e.state instanceof Array?e.state:[e.state]:[],n=[];return t.forEach(function(t){var r=w(t);n=n.concat(b(r,e))}),n}function f(e){D=D.filter(function(t){return(!!isNaN(t.startTime)||void 0!==e)&&t.startTime>=e})}function l(){O.abort(),P=[]}function c(e){switch(e.action){case h.default.ACTION_COMPLETE:D.push(e),E(e,m),k("[FragmentModel] executeRequest trigger STREAM_COMPLETED"),L.trigger(a.default.STREAM_COMPLETED,{request:e,fragmentModel:this});break;case h.default.ACTION_DOWNLOAD:E(e,v),P.push(e),p(e);break;default:k("Unknown request action.")}}function p(e){L.trigger(a.default.FRAGMENT_LOADING_STARTED,{sender:M,request:e}),O.load(e)}function g(e,t,n){for(var r=e.length-1,i=r;i>=0;i--){var s=e[i],o=s.startTime,u=o+s.duration;if(n=void 0!==n?n:s.duration/2,!isNaN(o)&&!isNaN(u)&&t+n>=o&&t-n<u||isNaN(o)&&isNaN(t))return s}return null}function b(e,t){return t.hasOwnProperty("time")?[g(e,t.time,t.threshold)]:e.filter(function(e){for(var n in t)if("state"!==n&&t.hasOwnProperty(n)&&e[n]!=t[n])return!1;return!0})}function w(e){var t=void 0;switch(e){case v:t=P;break;case m:t=D;break;default:t=[]}return t}function E(e,t){A.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t),A.addRequestsQueue(e.mediaType,P,D)}function S(e){e.sender===O&&(P.splice(P.indexOf(e.request),1),e.response&&!e.error&&D.push(e.request),E(e.request,e.error?y:m),L.trigger(a.default.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this}))}function x(e){e.sender===O&&L.trigger(a.default.FRAGMENT_LOADING_ABANDONED,{streamProcessor:this.getStreamProcessor(),request:e.request,mediaType:e.mediaType})}function T(){D=[],P=[]}function N(){L.off(a.default.LOADING_COMPLETED,S,this),L.off(a.default.LOADING_ABANDONED,x,this),O&&O.reset(),T()}e=e||{};var C=this.context,k=(0,d.default)(C).getInstance().log,L=(0,o.default)(C).getInstance(),A=e.metricsModel,O=e.fragmentLoader,M=void 0,_=void 0,D=void 0,P=void 0;return M={setStreamProcessor:n,getStreamProcessor:r,getRequests:u,isFragmentLoaded:i,isFragmentLoadedOrPending:s,removeExecutedRequestsBeforeTime:f,abortRequests:l,executeRequest:c,reset:N},t(),M}Object.defineProperty(n,"__esModule",{value:!0});var s=e(50),o=r(s),u=e(54),a=r(u),f=e(51),l=r(f),c=e(213),h=r(c),p=e(49),d=r(p),v="loading",m="executed",g="canceled",y="failed";i.__dashjs_factory_name="FragmentModel";var b=l.default.getClassFactory(i);b.FRAGMENT_MODEL_LOADING=v,b.FRAGMENT_MODEL_EXECUTED=m,b.FRAGMENT_MODEL_CANCELED=g,b.FRAGMENT_MODEL_FAILED=y,l.default.updateClassFactory(i.__dashjs_factory_name,b),n.default=b,t.exports=n.default},{213:213,49:49,50:50,51:51,54:54}],142:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){return i}function t(e){i=e,e&&r.trigger(a.default.MANIFEST_LOADED,{data:e})}var n=this.context,r=(0,o.default)(n).getInstance(),i=void 0;return{getValue:e,setValue:t}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(50),o=r(s),u=e(54),a=r(u),f=e(51),l=r(f);i.__dashjs_factory_name="ManifestModel",n.default=l.default.getSingletonFactory(i),t.exports=n.default},{50:50,51:51,54:54}],143:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){function e(){var e,t;Ht=[],Pt=!1,Dt=!0,Ft=!0,Yt=l.default.ABR_STRATEGY_DYNAMIC,Zt=!0,tn=!1,Rt={enabled:!0,ttl:p},Ut={enabled:!0,ttl:d},Bt=h,jt=void 0,It=g,qt=y,zt=NaN,Wt=E,Xt=S,Vt=x,$t=v,Jt=m,Gt=O,en={"default":M},nn=[],rn=l.default.MOVING_AVERAGE_SLIDING_WINDOW,e={},i(e,a.HTTPRequest.MPD_TYPE,C),i(e,a.HTTPRequest.XLINK_EXPANSION_TYPE,L),i(e,a.HTTPRequest.MEDIA_SEGMENT_TYPE,T),i(e,a.HTTPRequest.INIT_SEGMENT_TYPE,T),i(e,a.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,T),i(e,a.HTTPRequest.INDEX_SEGMENT_TYPE,T),i(e,a.HTTPRequest.OTHER_TYPE,T),Kt=e,t={},i(t,a.HTTPRequest.MPD_TYPE,k),i(t,a.HTTPRequest.XLINK_EXPANSION_TYPE,A),i(t,a.HTTPRequest.MEDIA_SEGMENT_TYPE,N),i(t,a.HTTPRequest.INIT_SEGMENT_TYPE,N),i(t,a.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,N),i(t,a.HTTPRequest.INDEX_SEGMENT_TYPE,N),i(t,a.HTTPRequest.OTHER_TYPE,N),Qt=t}function t(e){Yt=e}function n(){return Yt}function r(e){Zt=e}function s(){return Zt}function o(e){var t=void 0;for(t=0;t<nn.length;t++)if(nn[t].rulename===e)return t;return-1}function u(){return nn}function f(e,t,n){var r=o(t);-1===r?nn.push({type:e,rulename:t,rule:n}):(nn[r].type=e,nn[r].rule=n)}function c(e){var t=o(e);-1!==t&&nn.splice(t,1)}function _(){nn=[]}function D(e){$t=e}function P(){return $t}function H(e){Jt=e}function B(){return Jt}function j(e){zt=e}function F(){return isNaN(zt)?tn?w:b:zt}function I(e){Wt=e}function q(){return Wt}function R(e){Xt=e}function U(){return Xt}function z(e){Vt=e}function W(){return Vt}function X(e){It=e}function V(){return It}function $(e,t){Rt.enabled=e,void 0===t||isNaN(t)||"number"!=typeof t||(Rt.ttl=t)}function J(){return Rt}function K(e,t){Ut.enabled=e,void 0===t||isNaN(t)||"number"!=typeof t||(Ut.ttl=t)}function Q(){return Ut}function G(e){qt=e}function Y(){return qt}function Z(e){Kt[a.HTTPRequest.MEDIA_SEGMENT_TYPE]=e}function et(e){Kt[a.HTTPRequest.MPD_TYPE]=e}function tt(e,t){Kt[e]=t}function nt(){return Kt[a.HTTPRequest.MEDIA_SEGMENT_TYPE]}function rt(){return Kt[a.HTTPRequest.MPD_TYPE]}function it(e){return Kt[e]}function st(e){Qt[a.HTTPRequest.MEDIA_SEGMENT_TYPE]=e}function ot(e){Qt[a.HTTPRequest.MPD_TYPE]=e}function ut(e,t){Qt[e]=t}function at(){return Qt[a.HTTPRequest.MEDIA_SEGMENT_TYPE]}function ft(){return Qt[a.HTTPRequest.MPD_TYPE]}function lt(e){return Qt[e]}function ct(e){Gt=e}function ht(){return Gt}function pt(e){Ft=e}function dt(){return Ft}function vt(e){Bt=e}function mt(e){jt=e}function gt(){return Bt}function yt(){return jt}function bt(e){Dt=e}function wt(){return Dt}function Et(e){Pt=e}function St(){return Pt}function xt(e){Ht=e}function Tt(){return Ht}function Nt(e,t){e?en[e]=!!t:Object.keys(en).forEach(function(e){Nt(e,t)})}function Ct(e){var t=en[e];return void 0===t?en.default:t}function kt(){return tn}function Lt(e){tn=e}function At(e){rn=e}function Ot(){return rn}function Mt(){}var _t=void 0,Dt=void 0,Pt=void 0,Ht=void 0,Bt=void 0,jt=void 0,Ft=void 0,It=void 0,qt=void 0,Rt=void 0,Ut=void 0,zt=void 0,Wt=void 0,Xt=void 0,Vt=void 0,$t=void 0,Jt=void 0,Kt=void 0,Qt=void 0,Gt=void 0,Yt=void 0,Zt=void 0,en=void 0,tn=void 0,nn=void 0,rn=void 0;return _t={setABRStrategy:t,getABRStrategy:n,setUseDefaultABRRules:r,getUseDefaultABRRules:s,getABRCustomRules:u,addABRCustomRule:f,removeABRCustomRule:c,removeAllABRCustomRule:_,setBandwidthSafetyFactor:D,getBandwidthSafetyFactor:P,setAbandonLoadTimeout:H,getAbandonLoadTimeout:B,setLastBitrateCachingInfo:$,getLastBitrateCachingInfo:J,setLastMediaSettingsCachingInfo:K,getLastMediaSettingsCachingInfo:Q,setStableBufferTime:j,getStableBufferTime:F,setBufferTimeAtTopQuality:I,getBufferTimeAtTopQuality:q,setBufferTimeAtTopQualityLongForm:R,getBufferTimeAtTopQualityLongForm:U,setLongFormContentDurationThreshold:z,getLongFormContentDurationThreshold:W,setBufferToKeep:X,getBufferToKeep:V,setBufferPruningInterval:G,getBufferPruningInterval:Y,setFragmentRetryAttempts:Z,getFragmentRetryAttempts:nt,setManifestRetryAttempts:et,getManifestRetryAttempts:rt,setRetryAttemptsForType:tt,getRetryAttemptsForType:it,setFragmentRetryInterval:st,getFragmentRetryInterval:at,setManifestRetryInterval:ot,getManifestRetryInterval:ft,setRetryIntervalForType:ut,getRetryIntervalForType:lt,setWallclockTimeUpdateInterval:ct,getWallclockTimeUpdateInterval:ht,setScheduleWhilePaused:pt,getScheduleWhilePaused:dt,getUseSuggestedPresentationDelay:St,setUseSuggestedPresentationDelay:Et,setLiveDelayFragmentCount:vt,getLiveDelayFragmentCount:gt,getLiveDelay:yt,setLiveDelay:mt,setUseManifestDateHeaderTimeSource:bt,getUseManifestDateHeaderTimeSource:wt,setUTCTimingSources:xt,getUTCTimingSources:Tt,setXHRWithCredentialsForType:Nt,getXHRWithCredentialsForType:Ct,setFastSwitchEnabled:Lt,getFastSwitchEnabled:kt,setMovingAverageMethod:At,getMovingAverageMethod:Ot,reset:Mt},e(),_t}Object.defineProperty(n,"__esModule",{value:!0});var o=e(51),u=r(o),a=e(230),f=e(100),l=r(f),c={scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso"},h=4,p=36e4,d=36e4,v=.9,m=1e4,g=30,y=30,b=12,w=20,E=30,S=60,x=600,T=3,N=1e3,C=3,k=500,L=1,A=500,O=50,M=!1;s.__dashjs_factory_name="MediaPlayerModel";var _=u.default.getSingletonFactory(s);_.DEFAULT_UTC_TIMING_SOURCE=c,u.default.updateSingletonFactory(s.__dashjs_factory_name,_),n.default=_,t.exports=n.default},{100:100,230:230,51:51}],144:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){J={}}function t(e){e&&e.adapter&&($=e.adapter)}function n(){X.trigger(_.default.METRICS_CHANGED)}function r(e){X.trigger(_.default.METRIC_CHANGED,{mediaType:e}),n()}function i(e,t,n){X.trigger(_.default.METRIC_UPDATED,{mediaType:e,metric:t,value:n}),r(e)}function s(e,t,n){X.trigger(_.default.METRIC_ADDED,{mediaType:e,metric:t,value:n}),r(e)}function u(e){delete J[e],r(e)}function f(){J={},n()}function c(e){return J.hasOwnProperty(e)?J[e]:null}function d(e){var t=void 0;return J.hasOwnProperty(e)?t=J[e]:(t=new l.default,J[e]=t),t}function m(e,t,n){var r=d(e);r[t].push(n),r[t].length>z&&r[t].shift()}function y(e,t,n,r,i,s){var o=new h.default;return o.tcpid=t,o.dest=n,o.topen=r,o.tclose=i,o.tconnect=s,k(e,a.default.TCP_CONNECTION,o),o}function w(e,t,n,r){var i=new p.HTTPRequestTrace;return i.s=t,i.d=n,i.b=r,e.trace.push(i),e.interval||(e.interval=0),e.interval+=n,i}function S(e,t,n,r,i,s,o,u,f,l,c,h,d,v){var m=new p.HTTPRequest;return i&&i!==r&&(S(e,null,n,r,null,null,o,u,null,null,null,h,null,null),m.actualurl=i),m.tcpid=t,m.type=n,m.url=r,m.range=o,m.trequest=u,m.tresponse=f,m.responsecode=c,m._tfinish=l,m._stream=e,m._mediaduration=h,m._responseHeaders=d,m._serviceLocation=s,v?v.forEach(function(e){w(m,e.s,e.d,e.b)}):(delete m.interval,delete m.trace),k(e,a.default.HTTP_REQUEST,m),m}function N(e,t,n,r,i){var s=new v.default;return s.t=t,s.mt=n,s.to=r,i?s.lto=i:delete s.lto,k(e,a.default.TRACK_SWITCH,s),s}function k(e,t,n){m(e,t,n),s(e,t,n)}function A(e,t,n){var r=new g.default;return r.t=t,r.level=n,k(e,a.default.BUFFER_LEVEL,r),r}function M(e,t,n){var r=new b.default;return r.target=n,r.state=t,k(e,a.default.BUFFER_STATE,r),r}function D(e,t,n,r){var i=new E.default;return i.time=t,i.range=r,i.manifestInfo=n,k(e,a.default.DVR_INFO,i),i}function P(e,t){var n=new x.default,r=d(e).DroppedFrames;return n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,r.length>0&&r[r.length-1]==n?r[r.length-1]:(k(e,a.default.DROPPED_FRAMES,n),n)}function H(e,t,n,r,i,s,o,u,f){var l=new C.default;return l.mediaType=e,l.t=t,l.type=n,l.startTime=r,l.availabilityStartTime=i,l.duration=s,l.quality=o,l.range=u,l.state=f,k(e,a.default.SCHEDULING_INFO,l),l}function B(e,t,n){var r=new O.default;r.loadingRequests=t,r.executedRequests=n,d(e).RequestsQueue=r,s(e,a.default.REQUESTS_QUEUE,r)}function j(e,t,n,r,i,u,f,l,c,h){var p=new T.ManifestUpdate;return p.mediaType=e,p.type=t,p.requestTime=n,p.fetchTime=r,p.availabilityStartTime=i,p.presentationStartTime=u,p.clientTimeOffset=f,p.currentTime=l,p.buffered=c,p.latency=h,m(o.default.STREAM,a.default.MANIFEST_UPDATE,p),s(e,a.default.MANIFEST_UPDATE,p),p}function F(e,t){if(e){for(var n in t)e[n]=t[n];i(e.mediaType,a.default.MANIFEST_UPDATE,e)}}function I(e,t,n,r,s){if(e){var o=new T.ManifestUpdateStreamInfo;return o.id=t,o.index=n,o.start=r,o.duration=s,e.streamInfo.push(o),i(e.mediaType,a.default.MANIFEST_UPDATE_STREAM_INFO,e),o}return null}function q(e,t,n,r,s,o,u,f){if(e){var l=new T.ManifestUpdateRepresentationInfo;return l.id=t,l.index=n,l.streamIndex=r,l.mediaType=s,l.startNumber=u,l.fragmentInfoType=f,l.presentationTimeOffset=o,e.representationInfo.push(l),i(e.mediaType,a.default.MANIFEST_UPDATE_TRACK_INFO,e),l}return null}function R(e){var t=o.default.STREAM;return e.trace&&Array.isArray(e.trace)?e.trace.forEach(function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel}):delete e.trace,k(t,a.default.PLAY_LIST,e),e}function U(e){return k(o.default.STREAM,a.default.DVB_ERRORS,e),e}var z=1e3,W=this.context,X=(0,L.default)(W).getInstance(),V=void 0,$=void 0,J=void 0;return V={clearCurrentMetricsForType:u,clearAllCurrentMetrics:f,getReadOnlyMetricsFor:c,getMetricsFor:d,addTcpConnection:y,addHttpRequest:S,addRepresentationSwitch:N,addBufferLevel:A,addBufferState:M,addDVRInfo:D,addDroppedFrames:P,addSchedulingInfo:H,addRequestsQueue:B,addManifestUpdate:j,updateManifestUpdateInfo:F,addManifestUpdateStreamInfo:I,addManifestUpdateRepresentationInfo:q,addPlayList:R,addDVBErrors:U,setConfig:t},e(),V}Object.defineProperty(n,"__esModule",{value:!0});var s=e(100),o=r(s),u=e(101),a=r(u),f=e(218),l=r(f),c=e(236),h=r(c),p=e(230),d=e(233),v=r(d),m=e(226),g=r(m),y=e(227),b=r(y),w=e(228),E=r(w),S=e(229),x=r(S),T=e(231),N=e(235),C=r(N),k=e(50),L=r(k),A=e(234),O=r(A),M=e(54),_=r(M),D=e(51),P=r(D);i.__dashjs_factory_name="MetricsModel",n.default=P.default.getSingletonFactory(i),t.exports=n.default},{100:100,101:101,218:218,226:226,227:227,228:228,229:229,230:230,231:231,233:233,234:234,235:235,236:236,50:50,51:51,54:54}],145:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){s=new o.default,u=[],a=!1}function t(){return s}function n(){return u}function r(){return a}function i(e){function t(e,t,n,r){var i=r[0].split(/[=]/);return r.push({key:i[0],value:i[1]}),r.shift(),r}function n(e,t,n){return t>0&&(l&&0===u.length?u=n[t].split(/[&]/):c&&(r=n[t].split(/[&]/))),n}if(!e)return null;var r=[],i=new RegExp(/[?]/),o=new RegExp(/[#]/),f=new RegExp(/^(https:)?\/\//i),l=i.test(e),c=o.test(e);return a=f.test(e),e.split(/[?#]/).map(n),u.length>0&&(u=u.reduce(t,null)),r.length>0&&(r=r.reduce(t,null),r.forEach(function(e){s[e.key]=e.value})),e}var s=void 0,u=void 0,a=void 0;return{initialize:e,parseURI:i,getURIFragmentData:t,getURIQueryData:n,isManifestHTTPS:r}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(225),o=r(s),u=e(51),a=r(u);i.__dashjs_factory_name="URIQueryAndFragmentModel",n.default=a.default.getSingletonFactory(i),t.exports=n.default},{225:225,51:51}],146:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){K=[],Z.on(l.default.PLAYBACK_PLAYING,E,this)}function t(){Z.off(l.default.PLAYBACK_PLAYING,E,this)}function n(){V.playbackRate=Q||1,V.removeEventListener("canplay",n)}function r(e){V&&(V.readyState<=2&&e>0?V.addEventListener("canplay",n):V.playbackRate=e)}function i(e){if(V.currentTime!=e)try{V.currentTime=e}catch(t){0===V.readyState&&t.code===t.INVALID_STATE_ERR&&setTimeout(function(){V.currentTime=e},400)}}function s(){return V}function o(e){V=e,V.preload="auto"}function u(e){e?V.src=e:(V.removeAttribute("src"),V.load())}function f(){return V.src}function c(){return J}function p(e){J=e}function d(){return $}function v(e){$=e,$.style.position="absolute",$.style.display="flex",$.style.overflow="hidden",$.style.pointerEvents="none",$.style.top=0,$.style.left=0}function m(e,t){w(e,t)}function g(){return K.length>0}function y(e){var t=void 0;null===e||V.seeking||-1!==K.indexOf(e)||(K.push(e),1===K.length&&(t=document.createEvent("Event"),t.initEvent("waiting",!0,!1),Q=V.playbackRate,r(0),V.dispatchEvent(t)))}function b(e){var t=K.indexOf(e),n=void 0;null!==e&&(-1!==t&&K.splice(t,1),!1===g()&&0===V.playbackRate&&(r(Q||1),V.paused||(n=document.createEvent("Event"),n.initEvent("playing",!0,!1),V.dispatchEvent(n))))}function w(e,t){t?y(e):b(e)}function E(){if(V&&g()&&0===V.playbackRate){var e=document.createEvent("Event");e.initEvent("waiting",!0,!1),V.dispatchEvent(e)}}function S(){var e="webkitDroppedFrameCount"in V&&"webkitDecodedFrameCount"in V,t="getVideoPlaybackQuality"in V,n=null;return t?n=V.getVideoPlaybackQuality():e&&(n={droppedVideoFrames:V.webkitDroppedFrameCount,totalVideoFrames:V.webkitDroppedFrameCount+V.webkitDecodedFrameCount,creationTime:new Date}),n}function x(){if(V){V.autoplay=!0;var e=V.play();e&&"undefined"!=typeof Promise&&e instanceof Promise&&e.catch(function(e){"NotAllowedError"===e.name&&Z.trigger(l.default.PLAYBACK_NOT_ALLOWED),Y("Caught pending play exception - continuing ("+e+")")})}}function T(){return V?V.paused:null}function N(){V&&(V.pause(),V.autoplay=!1)}function C(){return V?V.seeking:null}function k(){return V?V.currentTime:null}function L(){return V?V.playbackRate:null}function A(){return V?V.played:null}function O(){return V?V.ended:null}function M(e,t){V&&V.addEventListener(e,t)}function _(e,t){V&&V.removeEventListener(e,t)}function D(){return V?V.readyState:NaN}function P(){return V?V.buffered:null}function H(){return V?V.clientWidth:NaN}function B(){return V?V.clientHeight:NaN}function j(){return V?V.videoWidth:NaN}function F(){return V?V.videoHeight:NaN}function I(){return V&&V.parentNode?V.getBoundingClientRect().top-V.parentNode.getBoundingClientRect().top:NaN}function q(){return V&&V.parentNode?V.getBoundingClientRect().left-V.parentNode.getBoundingClientRect().left:NaN}function R(){return V?V.textTracks:[]}function U(e,t,n,r,i){if(V)for(var s=0;s<V.textTracks.length;s++)if(V.textTracks[s].kind===e&&(!t||V.textTracks[s].label==t)&&V.textTracks[s].language===n&&V.textTracks[s].isTTML===r&&V.textTracks[s].isEmbedded===i)return V.textTracks[s];return null}function z(e,t,n){return V?V.addTextTrack(e,t,n):null}function W(e){V&&(V.appendChild(e),void 0!==e.isTTML&&(V.textTracks[V.textTracks.length-1].isTTML=e.isTTML,V.textTracks[V.textTracks.length-1].isEmbedded=e.isEmbedded))}function X(e){V&&V.removeChild(e)}var V=void 0,$=void 0,J=void 0,K=void 0,Q=void 0,G=this.context,Y=(0,h.default)(G).getInstance().log,Z=(0,a.default)(G).getInstance();return{initialize:e,setCurrentTime:i,play:x,isPaused:T,pause:N,isSeeking:C,getTime:k,getPlaybackRate:L,getPlayedRanges:A,getEnded:O,setStallState:m,getElement:s,setElement:o,setSource:u,getSource:f,getVideoContainer:c,setVideoContainer:p,getTTMLRenderingDiv:d,setTTMLRenderingDiv:v,getPlaybackQuality:S,addEventListener:M,removeEventListener:_,getReadyState:D,getBufferRange:P,getClientWidth:H,getClientHeight:B,getTextTracks:R,getTextTrack:U,addTextTrack:z,appendChild:W,removeChild:X,getVideoWidth:j,getVideoHeight:F,getVideoRelativeOffsetTop:I,getVideoRelativeOffsetLeft:q,reset:t}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s),u=e(50),a=r(u),f=e(54),l=r(f),c=e(49),h=r(c);i.__dashjs_factory_name="VideoModel",n.default=o.default.getSingletonFactory(i),t.exports=n.default},{49:49,50:50,51:51,54:54}],147:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(){r(this,e)}return i(e,null,[{key:"findCencContentProtection",value:function(e){for(var t=null,n=0;n<e.length;++n){var r=e[n];"urn:mpeg:dash:mp4protection:2011"===r.schemeIdUri.toLowerCase()&&"cenc"===r.value.toLowerCase()&&(t=r)}return t}},{key:"getPSSHData",value:function(e){var t=8,n=new DataView(e),r=n.getUint8(t);return t+=20,r>0&&(t+=4+16*n.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(t,n){var r=e.parsePSSHList(n);return r.hasOwnProperty(t.uuid.toLowerCase())?r[t.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e,t){return"pssh"in e?t.decodeArray(e.pssh.__text).buffer:null}},{key:"parsePSSHList",value:function(e){if(null===e)return[];for(var t=new DataView(e.buffer||e),n=!1,r={},i=0;!n;){var s=void 0,o=void 0,u=void 0,a=void 0,f=i;if(i>=t.buffer.byteLength)break;if(s=t.getUint32(i),o=i+s,i+=4,1886614376===t.getUint32(i))if(i+=4,0===(u=t.getUint8(i))||1===u){i++,i+=3,a="";var l=void 0,c=void 0;for(l=0;l<4;l++)c=t.getUint8(i+l).toString(16),a+=1===c.length?"0"+c:c;for(i+=4,a+="-",l=0;l<2;l++)c=t.getUint8(i+l).toString(16),a+=1===c.length?"0"+c:c;for(i+=2,a+="-",l=0;l<2;l++)c=t.getUint8(i+l).toString(16),a+=1===c.length?"0"+c:c;for(i+=2,a+="-",l=0;l<2;l++)c=t.getUint8(i+l).toString(16),a+=1===c.length?"0"+c:c;for(i+=2,a+="-",l=0;l<6;l++)c=t.getUint8(i+l).toString(16),a+=1===c.length?"0"+c:c;i+=6,a=a.toLowerCase(),t.getUint32(i),i+=4,r[a]=t.buffer.slice(f,o),i=o}else i=o;else i=o}return r}}]),e}();n.default=s,t.exports=n.default},{}],148:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){var n=null,i=(0,a.default)(r).getInstance();i.setConfig({log:e.log,BASE64:e.BASE64}),i.initialize();var s=t(e);return!n&&s&&(n=(0,o.default)(r).create({protectionModel:s,protectionKeyController:i,adapter:e.adapter,eventBus:e.eventBus,log:e.log,events:e.events,BASE64:e.BASE64,Constants:e.Constants}),e.capabilities.setEncryptedMediaSupported(!0)),n}function t(e){var t=e.log,i=e.eventBus,s=e.errHandler,o=e.videoModel.getElement();return void 0!==o.onencrypted&&void 0!==o.mediaKeys&&void 0!==navigator.requestMediaKeySystemAccess&&"function"==typeof navigator.requestMediaKeySystemAccess?(t("EME detected on this user agent! (ProtectionModel_21Jan2015)"),(0,h.default)(r).create({log:t,eventBus:i,events:e.events})):n(o,y)?(t("EME detected on this user agent! (ProtectionModel_3Feb2014)"),(0,d.default)(r).create({log:t,eventBus:i,events:e.events,api:n(o,y)})):n(o,g)?(t("EME detected on this user agent! (ProtectionModel_01b)"),(0,m.default)(r).create({log:t,eventBus:i,errHandler:s,events:e.events,api:n(o,g)})):(t("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null)}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];if("function"==typeof e[r[Object.keys(r)[0]]])return r}return null}var r=this.context;return{createProtectionSystem:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(150),o=r(s),u=e(151),a=r(u),f=e(149),l=r(f),c=e(157),h=r(c),p=e(158),d=r(p),v=e(156),m=r(v),g=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],y=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];i.__dashjs_factory_name="Protection";var b=dashjs.FactoryMaker.getClassFactory(i);b.events=l.default,dashjs.FactoryMaker.updateClassFactory(i.__dashjs_factory_name,b),n.default=b,t.exports=n.default},{149:149,150:150,151:151,156:156,157:157,158:158}],149:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(e,t,n){for(var r=!0;r;){var i=e,s=t,o=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,s);if(void 0!==u){if("value"in u)return u.value;var a=u.get;if(void 0===a)return;return a.call(o)}var f=Object.getPrototypeOf(i);if(null===f)return;e=f,t=s,n=o,r=!0,u=f=void 0}},u=e(55),a=r(u),f=function(e){function t(){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_SYSTEM_SELECTED="internalKeySystemSelected",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_SYSTEM_ACCESS_COMPLETE="keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected"}return s(t,e),t}(a.default),l=new f;n.default=l,t.exports=n.default},{55:55}],150:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){D=[],j=!1,F="temporary",I=""}function n(e,t,n){if(!j){var r=void 0;t||n||(r=C.getStreamsInfo()[0]),P=t||(r?C.getMediaInfoForType(r,M.AUDIO):null),H=n||(r?C.getMediaInfoForType(r,M.VIDEO):null);var i=H||P,s=T.getSupportedKeySystemsFromContentProtection(i.contentProtection);s&&s.length>0&&b(s,!0),j=!0}}function r(e){return T.getSupportedKeySystemsFromContentProtection(e)}function i(e,t){var n=o.default.getPSSHForKeySystem(q,e),r=g(q);if(n){for(var i=N.getAllInitData(),s=0;s<i.length;s++)if(T.initDataEquals(n,i[s]))return void A("DRM: Ignoring initData because we have already seen it!");try{N.createKeySession(n,r,F,t)}catch(u){k.trigger(L.KEY_SESSION_CREATED,{data:null,error:"Error creating key session! "+u.message})}}else e?N.createKeySession(e,r,F,t):k.trigger(L.KEY_SESSION_CREATED,{data:null,error:"Selected key system is "+q.systemString+".  needkey/encrypted event contains no initData corresponding to that key system!"})}function s(e){N.loadKeySession(e)}function u(e){N.removeKeySession(e)}function f(e){N.closeKeySession(e)}function c(e){N.setServerCertificate(e)}function h(e){e?(N.setMediaElement(e),k.on(L.NEED_KEY,S,this),k.on(L.INTERNAL_KEY_MESSAGE,E,this)):null===e&&(N.setMediaElement(e),k.off(L.NEED_KEY,S,this),k.off(L.INTERNAL_KEY_MESSAGE,E,this))}function p(e){F=e}function d(e){I=e}function v(e){B=e,T.setProtectionData(e)}function m(){h(null),q=void 0,N&&(N.reset(),N=null)}function g(e){var t=null,n=e.systemString;return B&&(t=n in B?B[n]:null),t}function y(e){var t=g(e),n=[],r=[],i=t&&t.audioRobustness&&t.audioRobustness.length>0?t.audioRobustness:I,s=t&&t.videoRobustness&&t.videoRobustness.length>0?t.videoRobustness:I;return P&&n.push(new a.default(P.codec,i)),H&&r.push(new a.default(H.codec,s)),new l.default(n,r,"optional","temporary"===F?"optional":"required",[F])}function b(e,t){var n=this,r=[],s=void 0;if(q){for(s=0;s<e.length;s++)if(q===e[s].ks){var o=function(){r.push({ks:e[s].ks,configs:[y(q)]});var o=function u(r){k.off(L.KEY_SYSTEM_ACCESS_COMPLETE,u,n),r.error?t||k.trigger(L.KEY_SYSTEM_SELECTED,{error:"DRM: KeySystem Access Denied! -- "+r.error}):(A("DRM: KeySystem Access Granted"),k.trigger(L.KEY_SYSTEM_SELECTED,{data:r.data}),i(e[s].initData,e[s].cdmData))};return k.on(L.KEY_SYSTEM_ACCESS_COMPLETE,o,n),N.requestKeySystemAccess(r),"break"}();if("break"===o)break}}else if(void 0===q){var u;!function(){q=null,D.push(e);for(var o=0;o<e.length;o++)r.push({ks:e[o].ks,configs:[y(e[o].ks)]});var a=void 0,f=function l(e){k.off(L.KEY_SYSTEM_ACCESS_COMPLETE,l,n),e.error?(q=void 0,k.off(L.INTERNAL_KEY_SYSTEM_SELECTED,u,n),t||k.trigger(L.KEY_SYSTEM_SELECTED,{data:null,error:"DRM: KeySystem Access Denied! -- "+e.error})):(a=e.data,A("DRM: KeySystem Access Granted ("+a.keySystem.systemString+")!  Selecting key system..."),N.selectKeySystem(a))};u=function c(e){if(k.off(L.INTERNAL_KEY_SYSTEM_SELECTED,c,n),k.off(L.KEY_SYSTEM_ACCESS_COMPLETE,f,n),e.error)q=void 0,t||k.trigger(L.KEY_SYSTEM_SELECTED,{data:null,error:"DRM: Error selecting key system! -- "+e.error});else{q=N.getKeySystem(),k.trigger(L.KEY_SYSTEM_SELECTED,{data:a});var r=g(q);r&&r.serverCertificate&&r.serverCertificate.length>0&&N.setServerCertificate(O.decodeArray(r.serverCertificate).buffer);for(var o=0;o<D.length;o++)for(s=0;s<D[o].length;s++)if(q===D[o][s].ks){if(null===D[o][s].initData&&r&&r.hasOwnProperty("clearkeys")){var u={kids:Object.keys(r.clearkeys)};D[o][s].initData=(new TextEncoder).encode(JSON.stringify(u))}i(D[o][s].initData,D[o][s].cdmData);break}}},k.on(L.INTERNAL_KEY_SYSTEM_SELECTED,u,n),k.on(L.KEY_SYSTEM_ACCESS_COMPLETE,f,n),N.requestKeySystemAccess(r)}()}else D.push(e)}function w(e,t){k.trigger(L.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function E(e){if(A("DRM: onKeyMessage"),e.error)return void A(e.error);var t=e.data;k.trigger(L.KEY_MESSAGE,{data:t});var n=t.messageType?t.messageType:"license-request",r=t.message,i=t.sessionToken,s=g(q),u=q.systemString,a=T.getLicenseServer(q,s,n),f={sessionToken:i,messageType:n};if(!a)return A("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+i.getSessionID()),void w(f);if(T.isClearKey(q)){var l=T.processClearKeyLicenseRequest(q,s,r);if(l)return A("DRM: ClearKey license request handled by application!"),w(f),void N.updateKeySession(i,l)}var c=new XMLHttpRequest,h=null;if(s&&s.serverURL){var p=s.serverURL;"string"==typeof p&&""!==p?h=p:"object"==typeof p&&p.hasOwnProperty(n)&&(h=p[n])}else s&&s.laURL&&""!==s.laURL?h=s.laURL:(h=q.getLicenseServerURLFromInitData(o.default.getPSSHData(i.initData)))||(h=e.data.laURL);if(!(h=a.getServerURLFromMessage(h,r,n)))return void w(f,"DRM: No license server URL specified!");var d=function(e,t,n,r){var i=e.response?a.getErrorResponse(e.response,n,r):"NONE";w(t,"DRM: "+n+' update, XHR complete. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState+".  Response is "+i)};c.open(a.getHTTPMethod(n),h,!0),c.responseType=a.getResponseType(u,n),c.onload=function(){if(200==this.status){var e=a.getLicenseMessage(this.response,u,n);null!==e?(w(f),N.updateKeySession(i,e)):d(this,f,u,n)}else d(this,f,u,n)},c.onabort=function(){w(f,"DRM: "+u+' update, XHR aborted. status is "'+this.statusText+'" ('+this.status+"), readyState is "+this.readyState)},c.onerror=function(){w(f,"DRM: "+u+' update, XHR error. status is "'+this.statusText+'" ('+this.status+"), readyState is "+this.readyState)};var v=function(e){if(e)for(var t in e)"authorization"===t.toLowerCase()&&(c.withCredentials=!0),c.setRequestHeader(t,e[t])};s&&v(s.httpRequestHeaders),v(q.getRequestHeadersFromMessage(r)),s&&"boolean"==typeof s.withCredentials&&(c.withCredentials=s.withCredentials),c.send(q.getLicenseRequestFromMessage(r))}function S(e){if(A("DRM: onNeedKey"),"cenc"!==e.key.initDataType)return void A("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType);var t=e.key.initData;if(ArrayBuffer.isView(t)&&(t=t.buffer),q){var n=o.default.getPSSHForKeySystem(q,t);if(n)for(var r=N.getAllInitData(),i=0;i<r.length;i++)if(T.initDataEquals(n,r[i]))return void A("DRM: Ignoring initData because we have already seen it!")}A("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(t)));var s=T.getSupportedKeySystems(t,B);if(0===s.length)return void A("DRM: Received needkey event with initData, but we don't support any of the key systems!");b(s,!1)}function x(){return T?T.getKeySystems():[]}e=e||{};var T=e.protectionKeyController,N=e.protectionModel,C=e.adapter,k=e.eventBus,L=e.events,A=e.log,O=e.BASE64,M=e.Constants,_=void 0,D=void 0,P=void 0,H=void 0,B=void 0,j=void 0,F=void 0,I=void 0,q=void 0;return _={initialize:n,createKeySession:i,loadKeySession:s,removeKeySession:u,closeKeySession:f,setServerCertificate
:c,setMediaElement:h,setSessionType:p,setRobustnessLevel:d,setProtectionData:v,getSupportedKeySystemsFromContentProtection:r,getKeySystems:x,reset:m},t(),_}Object.defineProperty(n,"__esModule",{value:!0});var s=e(147),o=r(s),u=e(169),a=r(u),f=e(168),l=r(f);i.__dashjs_factory_name="ProtectionController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{147:147,168:168,169:169}],151:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){e&&(e.log&&(b=e.log),e.BASE64&&(x=e.BASE64))}function t(){E=[];var e=void 0;e=(0,d.default)(g).getInstance({BASE64:x}),E.push(e),e=(0,h.default)(g).getInstance({BASE64:x}),E.push(e),e=(0,a.default)(g).getInstance({BASE64:x}),E.push(e),N=e,e=(0,l.default)(g).getInstance({BASE64:x,log:b}),E.push(e),C=e}function n(){return E}function r(e){for(var t=0;t<E.length;t++)if(E[t].systemString===e)return E[t];return null}function i(e){return e===N||e===C}function s(e,t){if(e.byteLength===t.byteLength){for(var n=new Uint8Array(e),r=new Uint8Array(t),i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}return!1}function u(e){var t=void 0,n=void 0,r=void 0,i=void 0,s=[];if(e)for(r=0;r<E.length;++r)for(n=E[r],i=0;i<e.length;++i)if(t=e[i],t.schemeIdUri.toLowerCase()===n.schemeIdURI){var o=n.getInitData(t);o?s.push({ks:E[r],initData:o,cdmData:n.getCDMData()}):this.isClearKey(n)&&s.push({ks:n,initData:null})}return s}function f(e,t){for(var n=[],r=o.default.parsePSSHList(e),i=0;i<E.length;++i){var s=E[i].systemString,u=!t||s in t;E[i].uuid in r&&u&&n.push({ks:E[i],initData:r[E[i].uuid]})}return n}function c(e,t,n){if("license-release"===n||"individualization-request"===n)return null;var r=null;return t&&t.hasOwnProperty("drmtoday")?r=(0,m.default)(g).getInstance({BASE64:x}):e.systemString===T.default.WIDEVINE_KEYSTEM_STRING?r=(0,w.default)(g).getInstance():e.systemString===T.default.PLAYREADY_KEYSTEM_STRING?r=(0,y.default)(g).getInstance():e.systemString===T.default.CLEARKEY_KEYSTEM_STRING&&(r=(0,S.default)(g).getInstance()),r}function p(e,t,n){try{return e.getClearKeysFromProtectionData(t,n)}catch(r){return b("Failed to retrieve clearkeys from ProtectionData"),null}}function v(e){for(var t=function(t){var n=null;return e&&(n=t in e?e[t]:null),n},n=0;n<E.length;n++){var r=E[n];r.hasOwnProperty("init")&&r.init(t(r.systemString))}}var g=this.context,b=void 0,E=void 0,x=void 0,N=void 0,C=void 0;return{initialize:t,setProtectionData:v,isClearKey:i,initDataEquals:s,getKeySystems:n,getKeySystemBySystemString:r,getSupportedKeySystemsFromContentProtection:u,getSupportedKeySystems:f,getLicenseServer:c,processClearKeyLicenseRequest:p,setConfig:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(147),o=r(s),u=e(152),a=r(u),f=e(154),l=r(f),c=e(155),h=r(c),p=e(153),d=r(p),v=e(160),m=r(v),g=e(161),y=r(g),b=e(162),w=r(b),E=e(159),S=r(E),x=e(102),T=r(x);i.__dashjs_factory_name="ProtectionKeyController",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{102:102,147:147,152:152,153:153,154:154,155:155,159:159,160:160,161:161,162:162}],152:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e,t){var n=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[],s=0;s<r.kids.length;s++){var u=r.kids[s],f=e.clearkeys&&e.clearkeys.hasOwnProperty(u)?e.clearkeys[u]:null;if(!f)throw new Error("DRM: ClearKey keyID ("+u+") is not known!");i.push(new o.default(u,f))}n=new a.default(i)}return n}function n(e){return l.default.parseInitDataFromContentProtection(e,f)}function r(){return null}function i(e){return new Uint8Array(e)}function s(){return null}function u(){return null}e=e||{};var f=e.BASE64;return{uuid:p,schemeIdURI:v,systemString:d,getInitData:n,getRequestHeadersFromMessage:r,getLicenseRequestFromMessage:i,getLicenseServerURLFromInitData:s,getCDMData:u,getClearKeysFromProtectionData:t}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(166),o=r(s),u=e(163),a=r(u),f=e(147),l=r(f),c=e(102),h=r(c),p="e2719d58-a985-b3c9-781a-b030af78d30e",d=h.default.CLEARKEY_KEYSTEM_STRING,v="urn:uuid:"+p;i.__dashjs_factory_name="KeySystemClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{102:102,147:147,163:163,166:166}],153:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){if(!m||!m.hasOwnProperty("decodeArray")||!m.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}function n(e){var t=void 0,n=void 0,r={},i=new DOMParser,s="utf16"===v?new Uint16Array(e):new Uint8Array(e);t=String.fromCharCode.apply(null,s),n=i.parseFromString(t,"application/xml");for(var o=n.getElementsByTagName("name"),u=n.getElementsByTagName("value"),a=0;a<o.length;a++)r[o[a].childNodes[0].nodeValue]=u[a].childNodes[0].nodeValue;return r.hasOwnProperty("Content")&&(r["Content-Type"]=r.Content,delete r.Content),r}function r(e){var n=void 0,r=void 0,i=null,s=new DOMParser,o="utf16"===v?new Uint16Array(e):new Uint8Array(e);if(t(),n=String.fromCharCode.apply(null,o),r=s.parseFromString(n,"application/xml"),r.getElementsByTagName("Challenge")[0]){var u=r.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;u&&(i=m.decode(u))}return i}function i(e){if(e)for(var t=new DataView(e),n=t.getUint16(4,!0),r=6,i=new DOMParser,s=0;s<n;s++){var o=t.getUint16(r,!0);r+=2;var u=t.getUint16(r,!0);if(r+=2,1===o){var a=e.slice(r,r+u),f=String.fromCharCode.apply(null,new Uint16Array(a)),l=i.parseFromString(f,"application/xml");if(l.getElementsByTagName("LA_URL")[0]){var c=l.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(c)return c}if(l.getElementsByTagName("LUI_URL")[0]){var h=l.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(h)return h}}else r+=u}return null}function s(e){var n=new Uint8Array([112,115,115,104,0,0,0,0]),r=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),i=0,s=null,u=void 0,a=void 0,f=void 0,l=void 0,c=void 0;if(t(),"pssh"in e)return o.default.parseInitDataFromContentProtection(e,m);if("pro"in e)s=m.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;s=m.decodeArray(e.prheader.__text)}return u=s.length,a=4+n.length+r.length+4+u,f=new ArrayBuffer(a),l=new Uint8Array(f),c=new DataView(f),c.setUint32(i,a),i+=4,l.set(n,i),i+=n.length,l.set(r,i),i+=r.length,c.setUint32(i,u),i+=4,l.set(s,i),i+=u,l.buffer}function u(e){if("utf8"!==e&&"utf16"!==e)throw new Error("Illegal PlayReady message format! -- "+e);v=e}function a(e){e&&(p=e)}function d(){var e=void 0,n=void 0,r=void 0,i=void 0;if(t(),p&&p.cdmData){for(e=[],i=0;i<p.cdmData.length;++i)e.push(p.cdmData.charCodeAt(i)),e.push(0);for(e=String.fromCharCode.apply(null,e),e=m.encode(e),n=h.replace("%CUSTOMDATA%",e),r=[],i=0;i<n.length;++i)r.push(n.charCodeAt(i)),r.push(0);return(new Uint8Array(r)).buffer}return null}e=e||{};var v="utf16",m=e.BASE64;return{uuid:f,schemeIdURI:c,systemString:l,getInitData:s,getRequestHeadersFromMessage:n,getLicenseRequestFromMessage:r,getLicenseServerURLFromInitData:i,getCDMData:d,setPlayReadyMessageFormat:u,init:a}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(147),o=r(s),u=e(102),a=r(u),f="9a04f079-9840-4286-ab92-e65be0885f95",l=a.default.PLAYREADY_KEYSTEM_STRING,c="urn:uuid:"+f,h='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>',p=void 0;i.__dashjs_factory_name="KeySystemPlayReady",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{102:102,147:147}],154:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e,t){var n=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[],s=0;s<r.kids.length;s++){var u=r.kids[s],f=e.clearkeys&&e.clearkeys.hasOwnProperty(u)?e.clearkeys[u]:null;if(!f)throw new Error("DRM: ClearKey keyID ("+u+") is not known!");i.push(new o.default(u,f))}n=new a.default(i),c("Warning: ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return n}function n(e){return l.default.parseInitDataFromContentProtection(e,f)}function r(){return null}function i(e){return new Uint8Array(e)}function s(){return null}function u(){return null}var f=e.BASE64,c=e.log;return{uuid:p,schemeIdURI:v,systemString:d,getInitData:n,getRequestHeadersFromMessage:r,getLicenseRequestFromMessage:i,getLicenseServerURLFromInitData:s,getCDMData:u,getClearKeysFromProtectionData:t}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(166),o=r(s),u=e(163),a=r(u),f=e(147),l=r(f),c=e(102),h=r(c),p="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",d=h.default.CLEARKEY_KEYSTEM_STRING,v="urn:uuid:"+p;i.__dashjs_factory_name="KeySystemW3CClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{102:102,147:147,163:163,166:166}],155:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e){e&&(h=e)}function n(e,t){var n=void 0,r=!0,i=16,s=void 0,o=void 0,u=void 0;for(n=new Uint8Array(e),o=0;o<=n.length-(i+2);o++)if(18===n[o]&&16===n[o+1]){for(s=o+2,u=s;u<s+i;u++)if(255!==n[u]){r=!1;break}break}return r&&n.set(t,s),n.buffer}function r(e){var t=null;return t=h&&h.pssh?p.decodeArray(h.pssh).buffer:o.default.parseInitDataFromContentProtection(e,p),t&&(t=n(t,e["cenc:default_KID"])),t}function i(){return null}function s(e){return new Uint8Array(e)}function u(){return null}function a(){return null}e=e||{};var h=null,p=e.BASE64;return{uuid:f,schemeIdURI:c,systemString:l,init:t,getInitData:r,getRequestHeadersFromMessage:i,getLicenseRequestFromMessage:s,getLicenseServerURLFromInitData:u,getCDMData:a}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(147),o=r(s),u=e(102),a=r(u),f="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",l=a.default.WIDEVINE_KEYSTEM_STRING,c="urn:uuid:"+f;i.__dashjs_factory_name="KeySystemWidevine",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{102:102,147:147}],156:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){O=null,M=null,D=[],P=[],_=(0,o.default)(x).getInstance(),B=w()}function n(){O&&S();for(var e=0;e<P.length;e++)v(P[e]);T.trigger(N.TEARDOWN_COMPLETE)}function r(){return M}function i(){for(var e=[],t=0;t<D.length;t++)e.push(D[t].initData);for(var t=0;t<P.length;t++)e.push(P[t].initData);return e}function s(e){var t=O;t||(t=document.createElement("video"));for(var n=!1,r=0;r<e.length;r++)for(var i=e[r].ks.systemString,s=e[r].configs,o=null,u=null,a=0;a<s.length;a++){var f=s[a].videoCapabilities;if(f&&0!==f.length){u=[];for(var l=0;l<f.length;l++)""!==t.canPlayType(f[l].contentType,i)&&u.push(f[l])}if(!(!o&&!u||o&&0===o.length||u&&0===u.length)){n=!0;var c=new d.default(o,u),h=_.getKeySystemBySystemString(i);T.trigger(N.KEY_SYSTEM_ACCESS_COMPLETE,{data:new m.default(h,c)});break}}n||T.trigger(N.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})}function u(e){M=e.keySystem,T.trigger(N.INTERNAL_KEY_SYSTEM_SELECTED)}function f(e){O!==e&&(O&&S(),(O=e)&&(O.addEventListener(k.keyerror,B),O.addEventListener(k.needkey,B),O.addEventListener(k.keymessage,B),O.addEventListener(k.keyadded,B),T.trigger(N.VIDEO_ELEMENT_SELECTED)))}function c(e){if(!M)throw new Error("Can not create sessions until you have selected a key system");if(H||0===P.length){var t={sessionID:null,initData:e,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return D.push(t),O[k.generateKeyRequest](M.systemString,new Uint8Array(e)),t}throw new Error("Multiple sessions not allowed!")}function p(e,t){var n=e.sessionID;if(_.isClearKey(M))for(var r=0;r<t.keyPairs.length;r++)O[k.addKey](M.systemString,t.keyPairs[r].key,t.keyPairs[r].keyID,n);else O[k.addKey](M.systemString,new Uint8Array(t),new Uint8Array(e.initData),n)}function v(e){O[k.cancelKeyRequest](M.systemString,e.sessionID)}function g(){}function y(){}function b(){}function w(){return{handleEvent:function(e){var t=null;switch(e.type){case k.needkey:var n=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;T.trigger(N.NEED_KEY,{key:new a.default(n,"cenc")});break;case k.keyerror:if(t=E(P,e.sessionId),t||(t=E(D,e.sessionId)),t){var r="";switch(e.errorCode.code){case 1:r+="MEDIA_KEYERR_UNKNOWN - An unspecified error occurred. This value is used for errors that don't match any of the other codes.";break;case 2:r+="MEDIA_KEYERR_CLIENT - The Key System could not be installed or updated.";break;case 3:r+="MEDIA_KEYERR_SERVICE - The message passed into update indicated an error from the license service.";break;case 4:r+="MEDIA_KEYERR_OUTPUT - There is no available output device with the required characteristics for the content protection system.";break;case 5:r+="MEDIA_KEYERR_HARDWARECHANGE - A hardware configuration change caused a content protection error.";break;case 6:r+="MEDIA_KEYERR_DOMAIN - An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain."}r+="  System Code = "+e.systemCode,T.trigger(N.KEY_ERROR,{data:new l.default(t,r)})}else C("No session token found for key error");break;case k.keyadded:t=E(P,e.sessionId),t||(t=E(D,e.sessionId)),t?(C("DRM: Key added."),T.trigger(N.KEY_ADDED,{data:t})):C("No session token found for key added");break;case k.keymessage:if(H=null!==e.sessionId&&void 0!==e.sessionId,H?!(t=E(P,e.sessionId))&&D.length>0&&(t=D.shift(),P.push(t),t.sessionID=e.sessionId):D.length>0&&(t=D.shift(),P.push(t),0!==D.length&&L.mediaKeyMessageError("Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!")),t){var i=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;t.keyMessage=i,T.trigger(N.INTERNAL_KEY_MESSAGE,{data:new h.default(t,i,e.defaultURL)})}else C("No session token found for key message")}}}}function E(e,t){if(t&&e){for(var n=e.length,r=0;r<n;r++)if(e[r].sessionID==t)return e[r];return null}return null}function S(){O.removeEventListener(k.keyerror,B),O.removeEventListener(k.needkey,B),O.removeEventListener(k.keymessage,B),O.removeEventListener(k.keyadded,B)}e=e||{};var x=this.context,T=e.eventBus,N=e.events,C=e.log,k=e.api,L=e.errHandler,A=void 0,O=void 0,M=void 0,_=void 0,D=void 0,P=void 0,H=void 0,B=void 0;return A={getAllInitData:i,requestKeySystemAccess:s,getKeySystem:r,selectKeySystem:u,setMediaElement:f,createKeySession:c,updateKeySession:p,closeKeySession:v,setServerCertificate:g,loadKeySession:y,removeKeySession:b,reset:n},t(),A}Object.defineProperty(n,"__esModule",{value:!0});var s=e(151),o=r(s),u=e(170),a=r(u),f=e(164),l=r(f),c=e(165),h=r(c),p=e(168),d=r(p),v=e(167),m=r(v);i.__dashjs_factory_name="ProtectionModel_01b",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{151:151,164:164,165:165,167:167,168:168,170:170}],157:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){O=null,M=null,_=null,D=[],H=(0,o.default)(N).getInstance(),P=S()}function n(){var e=D.length,t=void 0;0!==e?function(){for(var n=function(e){x(e),0===D.length&&(M?(M.removeEventListener("encrypted",P),M.setMediaKeys(null).then(function(){C.trigger(k.TEARDOWN_COMPLETE)})):C.trigger(k.TEARDOWN_COMPLETE))},r=0;r<e;r++)t=D[r],function(e){t.session.closed.then(function(){n(e)}),E(t).catch(function(){n(e)})}(t)}():C.trigger(k.TEARDOWN_COMPLETE)}function r(){return O}function i(){for(var e=[],t=0;t<D.length;t++)e.push(D[t].initData);return e}function s(e){w(e,0)}function u(e){e.mksa.createMediaKeys().then(function(t){O=e.keySystem,_=t,M&&M.setMediaKeys(_).then(function(){C.trigger(k.INTERNAL_KEY_SYSTEM_SELECTED)})}).catch(function(){C.trigger(k.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+e.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})}function f(e){M!==e&&(M&&(M.removeEventListener("encrypted",P),M.setMediaKeys(null)),(M=e)&&(M.addEventListener("encrypted",P),_&&M.setMediaKeys(_)))}function c(e){if(!O||!_)throw new Error("Can not set server certificate until you have selected a key system");_.setServerCertificate(e).then(function(){L("DRM: License server certificate successfully updated."),C.trigger(k.SERVER_CERTIFICATE_UPDATED)}).catch(function(e){C.trigger(k.SERVER_CERTIFICATE_UPDATED,{error:"Error updating server certificate -- "+e.name})})}function p(e,t,n){if(!O||!_)throw new Error("Can not create sessions until you have selected a key system");var r=_.createSession(n),i=T(r,e,n),s=this.getKeySystem(),o=s.systemString===m.default.CLEARKEY_KEYSTEM_STRING&&t&&t.clearkeys?"keyids":"cenc";r.generateRequest(o,e).then(function(){L("DRM: Session created.  SessionID = "+i.getSessionID()),C.trigger(k.KEY_SESSION_CREATED,{data:i})}).catch(function(e){x(i),C.trigger(k.KEY_SESSION_CREATED,{data:null,error:"Error generating key request -- "+e.name})})}function v(e,t){var n=e.session;H.isClearKey(O)&&(t=t.toJWK()),n.update(t).catch(function(t){C.trigger(k.KEY_ERROR,{data:new l.default(e,"Error sending update() message! "+t.name)})})}function g(e){if(!O||!_)throw new Error("Can not load sessions until you have selected a key system");var t=_.createSession();t.load(e).then(function(n){if(n){var r=T(t);L("DRM: Session created.  SessionID = "+r.getSessionID()),C.trigger(k.KEY_SESSION_CREATED,{data:r})}else C.trigger(k.KEY_SESSION_CREATED,{data:null,error:"Could not load session! Invalid Session ID ("+e+")"})}).catch(function(t){C.trigger(k.KEY_SESSION_CREATED,{data:null,error:"Could not load session ("+e+")! "+t.name})})}function y(e){e.session.remove().then(function(){L("DRM: Session removed.  SessionID = "+e.getSessionID()),C.trigger(k.KEY_SESSION_REMOVED,{data:e.getSessionID()})},function(t){C.trigger(k.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+e.getSessionID()+"). "+t.name})})}function b(e){E(e).catch(function(t){x(e),C.trigger(k.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.getSessionID()+") "+t.name})})}function w(e,t){!function(t){var n=e[t].ks,r=e[t].configs;navigator.requestMediaKeySystemAccess(n.systemString,r).then(function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,r=new d.default(n,t);r.mksa=e,C.trigger(k.KEY_SYSTEM_ACCESS_COMPLETE,{data:r})}).catch(function(){++t<e.length?w(e,t):C.trigger(k.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied!"})})}(t)}function E(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function S(){return{handleEvent:function(e){switch(e.type){case"encrypted":if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;C.trigger(k.NEED_KEY,{key:new a.default(t,e.initDataType)})}}}}}function x(e){for(var t=0;t<D.length;t++)if(D[t]===e){D.splice(t,1);break}}function T(e,t,n){var r={session:e,initData:t,handleEvent:function(e){switch(e.type){case"keystatuseschange":C.trigger(k.KEY_STATUSES_CHANGED,{data:this});break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;C.trigger(k.INTERNAL_KEY_MESSAGE,{data:new h.default(this,t,void 0,e.messageType)})}},getSessionID:function(){return e.sessionId},getExpirationTime:function(){return e.expiration},getKeyStatuses:function(){return e.keyStatuses},getSessionType:function(){return n}};return e.addEventListener("keystatuseschange",r),e.addEventListener("message",r),e.closed.then(function(){x(r),L("DRM: Session closed.  SessionID = "+r.getSessionID()),C.trigger(k.KEY_SESSION_CLOSED,{data:r.getSessionID()})}),D.push(r),r}e=e||{};var N=this.context,C=e.eventBus,k=e.events,L=e.log,A=void 0,O=void 0,M=void 0,_=void 0,D=void 0,P=void 0,H=void 0;return A={getAllInitData:i,requestKeySystemAccess:s,getKeySystem:r,selectKeySystem:u,setMediaElement:f,setServerCertificate:c,createKeySession:p,updateKeySession:v,loadKeySession:g,removeKeySession:y,closeKeySession:b,reset:n},t(),A}Object.defineProperty(n,"__esModule",{value:!0});var s=e(151),o=r(s),u=e(170),a=r(u),f=e(164),l=r(f),c=e(165),h=r(c),p=e(167),d=r(p),v=e(102),m=r(v);i.__dashjs_factory_name="ProtectionModel_21Jan2015",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{102:102,151:151,164:164,165:165,167:167,170:170}],158:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){A=null,O=null,M=null,_=null,D=[],H=(0,o.default)(x).getInstance(),P=w()}function n(){try{for(var e=0;e<D.length;e++)v(D[e]);A&&A.removeEventListener(k.needkey,P),T.trigger(N.TEARDOWN_COMPLETE)}catch(t){T.trigger(N.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+t.message})}}function r(){return O}function i(){for(var e=[],t=0;t<D.length;t++)e.push(D[t].initData);return e}function s(e){for(var t=!1,n=0;n<e.length;n++)for(var r=e[n].ks.systemString,i=e[n].configs,s=null,o=null,u=0;u<i.length;u++){var a=i[u].audioCapabilities,f=i[u].videoCapabilities;if(a&&0!==a.length){s=[];for(var l=0;l<a.length;l++)window[k.MediaKeys].isTypeSupported(r,a[l].contentType)&&s.push(a[l])}if(f&&0!==f.length){o=[];for(var c=0;c<f.length;c++)window[k.MediaKeys].isTypeSupported(r,f[c].contentType)&&o.push(f[c])}if(!(!s&&!o||s&&0===s.length||o&&0===o.length)){t=!0;var h=new d.default(s,o),p=H.getKeySystemBySystemString(r);T.trigger(N.KEY_SYSTEM_ACCESS_COMPLETE,{data:new m.default(p,h)});break}}t||T.trigger(N.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})}function u(e){try{M=e.mediaKeys=new window[k.MediaKeys](e.keySystem.systemString),O=e.keySystem,_=e,A&&E(),T.trigger(N.INTERNAL_KEY_SYSTEM_SELECTED)}catch(t){T.trigger(N.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+O.systemString+")! Could not create MediaKeys -- TODO"})}}function f(e){A!==e&&(A&&A.removeEventListener(k.needkey,P),(A=e)&&(A.addEventListener(k.needkey,P),M&&E()))}function c(e,t,n,r){if(!O||!M||!_)throw new Error("Can not create sessions until you have selected a key system");var i=null;if(null!==_.ksConfiguration.videoCapabilities&&_.ksConfiguration.videoCapabilities.length>0&&(i=_.ksConfiguration.videoCapabilities[0]),null===i&&null!==_.ksConfiguration.audioCapabilities&&_.ksConfiguration.audioCapabilities.length>0&&(i=_.ksConfiguration.audioCapabilities[0]),null===i)throw new Error("Can not create sessions for unknown content types.");var s=i.contentType,o=M.createSession(s,new Uint8Array(e),r?new Uint8Array(r):null),u=S(o,e);o.addEventListener(k.error,u),o.addEventListener(k.message,u),o.addEventListener(k.ready,u),o.addEventListener(k.close,u),D.push(u),C("DRM: Session created.  SessionID = "+u.getSessionID()),T.trigger(N.KEY_SESSION_CREATED,{data:u})}function p(e,t){var n=e.session;H.isClearKey(O)?n.update(new Uint8Array(t.toJWK())):n.update(new Uint8Array(t))}function v(e){var t=e.session;t.removeEventListener(k.error,e),t.removeEventListener(k.message,e),t.removeEventListener(k.ready,e),t.removeEventListener(k.close,e);for(var n=0;n<D.length;n++)if(D[n]===e){D.splice(n,1);break}t[k.release]()}function g(){}function y(){}function b(){}function w(){return{handleEvent:function(e){switch(e.type){case k.needkey:if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;T.trigger(N.NEED_KEY,{key:new a.default(t,"cenc")})}}}}}function E(){var e=null,t=function(){A.removeEventListener("loadedmetadata",e),A[k.setMediaKeys](M),T.trigger(N.VIDEO_ELEMENT_SELECTED)};A.readyState>=1?t():(e=t.bind(this),A.addEventListener("loadedmetadata",e))}function S(e,t){return{session:e,initData:t,getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case k.error:T.trigger(N.KEY_ERROR,{data:new l.default(this,"KeyError")});break;case k.message:var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;T.trigger(N.INTERNAL_KEY_MESSAGE,{data:new h.default(this,t,e.destinationURL)});break;case k.ready:C("DRM: Key added."),T.trigger(N.KEY_ADDED);break;case k.close:C("DRM: Session closed.  SessionID = "+this.getSessionID()),T.trigger(N.KEY_SESSION_CLOSED,{data:this.getSessionID()})}}}}e=e||{};var x=this.context,T=e.eventBus,N=e.events,C=e.log,k=e.api,L=void 0,A=void 0,O=void 0,M=void 0,_=void 0,D=void 0,P=void 0,H=void 0;return L={getAllInitData:i,requestKeySystemAccess:s,getKeySystem:r,selectKeySystem:u,setMediaElement:f,createKeySession:c,updateKeySession:p,closeKeySession:v,setServerCertificate:g,loadKeySession:y,removeKeySession:b,reset:n},t(),L}Object.defineProperty(n,"__esModule",{value:!0});var s=e(151),o=r(s),u=e(170),a=r(u),f=e(164),l=r(f),c=e(165),h=r(c),p=e(168),d=r(p),v=e(167),m=r(v);i.__dashjs_factory_name="ProtectionModel_3Feb2014",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{151:151,164:164,165:165,167:167,168:168,170:170}],159:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t){var n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t)));e+="/?";for(var r=0;r<n.kids.length;r++)e+=n.kids[r]+"&";return e=e.substring(0,e.length-1)}function t(){return"GET"}function n(){return"json"}function r(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],n=0;n<e.keys.length;n++){var r=e.keys[n],i=r.kid.replace(/=/g,""),s=r.k.replace(/=/g,"");t.push(new o.default(i,s))}return new a.default(t)}function i(e){return String.fromCharCode.apply(null,new Uint8Array(e))}return{getServerURLFromMessage:e,getHTTPMethod:t,getResponseType:n,getLicenseMessage:r,getErrorResponse:i}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(166),o=r(s),u=e(163),a=r(u);i.__dashjs_factory_name="ClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{163:163,166:166}],160:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){if(!a||!a.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}function n(e){return e}function r(){return"POST"}function i(e){return f[e].responseType}function s(e,n){return t(),f[n].getLicenseMessage(e)}function u(e,t){return f[t].getErrorResponse(e)}e=e||{};var a=e.BASE64,f={};return f[o.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(e){return a.decodeArray(e.license)},getErrorResponse:function(e){return e}},f[o.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}},{getServerURLFromMessage:n,getHTTPMethod:r,getResponseType:i,getLicenseMessage:s,getErrorResponse:u}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(102),o=r(s);i.__dashjs_factory_name="DRMToday",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{102:102}],161:[function(e,t,n){"use strict";function r(){function e(e){var t=String.fromCharCode.apply(null,new Uint8Array(e));return decodeURIComponent(escape(t))}function t(t){if(window.DOMParser){var n=e(t),r=new window.DOMParser,i=r.parseFromString(n,"text/xml"),s=i?i.getElementsByTagNameNS(a,"Envelope")[0]:null,o=s?s.getElementsByTagNameNS(a,"Body")[0]:null;if(o?o.getElementsByTagNameNS(a,"Fault")[0]:null)return null}return t}function n(t){var n="",r="",i="",s=-1,o=-1;if(window.DOMParser){var u=e(t),f=new window.DOMParser,l=f.parseFromString(u,"text/xml"),c=l?l.getElementsByTagNameNS(a,"Envelope")[0]:null,h=c?c.getElementsByTagNameNS(a,"Body")[0]:null,p=h?h.getElementsByTagNameNS(a,"Fault")[0]:null,d=p?p.getElementsByTagName("detail")[0]:null,v=d?d.getElementsByTagName("Exception")[0]:null,m=null;if(null===p)return u;m=p.getElementsByTagName("faultstring")[0].firstChild,n=m?m.nodeValue:null,null!==v&&(m=v.getElementsByTagName("StatusCode")[0],r=m?m.firstChild.nodeValue:null,m=v.getElementsByTagName("Message")[0],i=m?m.firstChild.nodeValue:null,s=i?i.lastIndexOf("[")+1:-1,o=i?i.indexOf("]"):-1,i=i?i.substring(s,o):"")}var g="code: "+r+", name: "+n;return i&&(g+=", message: "+i),g}function r(e){return e}function i(){return"POST"}function s(){return"arraybuffer"}function o(e){return t.call(this,e)}function u(e){return n.call(this,e)}var a="http://schemas.xmlsoap.org/soap/envelope/";return{getServerURLFromMessage:r,getHTTPMethod:i,getResponseType:s,getLicenseMessage:o,getErrorResponse:u}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="PlayReady",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],162:[function(e,t,n){"use strict";function r(){function e(e){return e}function t(){return"POST"}function n(){return"arraybuffer"}function r(e){return e}function i(e){return String.fromCharCode.apply(null,new Uint8Array(e))}return{getServerURLFromMessage:e,getHTTPMethod:t,getResponseType:n,getLicenseMessage:r,getErrorResponse:i}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="Widevine",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],163:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(t,n){if(r(this,e),n&&"persistent"!==n&&"temporary"!==n)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=t,this.type=n}return i(e,[{key:"toJWK",value:function(){var e=void 0,t=this.keyPairs.length,n={keys:[]};for(e=0;e<t;e++){var r={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};n.keys.push(r)}this.type&&(n.type=this.type);var i=JSON.stringify(n),s=i.length,o=new ArrayBuffer(s),u=new Uint8Array(o);for(e=0;e<s;e++)u[e]=i.charCodeAt(e);return o}}]),e}();n.default=s,t.exports=n.default},{}],164:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(e,t){r(this,s),this.sessionToken=e,this.error=t};n.default=i,t.exports=n.default},{}],165:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(e,t,n,i){r(this,s),this.sessionToken=e,this.message=t,this.defaultURL=n,this.messageType=i||"license-request"};n.default=i,t.exports=n.default},{}],166:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(e,t){r(this,s),this.keyID=e,this.key=t};n.default=i,t.exports=n.default},{}],167:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(e,t){r(this,s),this.keySystem=e,this.ksConfiguration=t};n.default=i,t.exports=n.default},{}],168:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(e,t,n,i,o){r(this,s),this.initDataTypes=["cenc"],e&&e.length&&(this.audioCapabilities=e),t&&t.length&&(this.videoCapabilities=t),this.distinctiveIdentifier=n,this.persistentState=i,this.sessionTypes=o};n.default=i,t.exports=n.default},{}],169:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(e,t){r(this,s),this.contentType=e,this.robustness=t};n.default=i,t.exports=n.default},{}],170:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(e,t){r(this,s),this.initData=e,this.initDataType=t};n.default=i,t.exports=n.default},{}],171:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t){var n=t.droppedVideoFrames-i;i=t.droppedVideoFrames;var o=t.totalVideoFrames-s;s=t.totalVideoFrames
,isNaN(e)||(r[e]?(r[e].droppedVideoFrames+=n,r[e].totalVideoFrames+=o):r[e]={droppedVideoFrames:n,totalVideoFrames:o})}function t(){return r}function n(e){r=[],i=e.droppedVideoFrames,s=e.totalVideoFrames}var r=[],i=0,s=0;return{push:e,getFrameHistory:t,reset:n}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s);i.__dashjs_factory_name="DroppedFramesHistory";var u=o.default.getClassFactory(i);n.default=u,t.exports=n.default},{51:51}],172:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){return p.mediaInfo.type}function n(){return p.mediaInfo.streamInfo}function r(){return p.mediaInfo}function i(){return p}function s(){return h}function o(){return c}function u(){return d}function a(){return v}function f(){return m}function l(){return g}e=e||{};var c=e.abrController,h=e.streamProcessor,p=e.streamProcessor.getCurrentRepresentationInfo(),d=e.switchHistory,v=e.droppedFramesHistory,m=e.currentRequest,g=e.useBufferOccupancyABR;return{getMediaType:t,getMediaInfo:r,getDroppedFramesHistory:a,getCurrentRequest:f,getSwitchHistory:u,getStreamInfo:n,getStreamProcessor:s,getAbrController:o,getRepresentationInfo:i,useBufferOccupancyABR:l}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s);i.__dashjs_factory_name="RulesContext",n.default=o.default.getClassFactory(i),t.exports=n.default},{51:51}],173:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){function r(e){var t=a.DEFAULT;return e!==a.DEFAULT&&e!==a.STRONG&&e!==a.WEAK||(t=e),t}var i=void 0,s=void 0,o=void 0;return i=void 0===e?u:e,s=r(n),o=void 0===t?null:t,{quality:i,reason:o,priority:s}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s),u=-1,a={DEFAULT:.5,STRONG:1,WEAK:0};i.__dashjs_factory_name="SwitchRequest";var f=o.default.getClassFactory(i);f.NO_CHANGE=u,f.PRIORITY=a,o.default.updateClassFactory(i.__dashjs_factory_name,f),n.default=f,t.exports=n.default},{51:51}],174:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){e.newValue===a.default.NO_CHANGE&&(e.newValue=e.oldValue),r[e.oldValue]||(r[e.oldValue]={noDrops:0,drops:0,dropSize:0});var t=e.newValue-e.oldValue,n=t<0?1:0,s=n?-t:0,o=n?0:1;if(r[e.oldValue].drops+=n,r[e.oldValue].dropSize+=s,r[e.oldValue].noDrops+=o,i.push({idx:e.oldValue,noDrop:o,drop:n,dropSize:s}),i.length>f){var u=i.shift();r[u.idx].drops-=u.drop,r[u.idx].dropSize-=u.dropSize,r[u.idx].noDrops-=u.noDrop}}function t(){return r}function n(){r=[],i=[]}var r=[],i=[];return{push:e,getSwitchRequests:t,reset:n}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s),u=e(173),a=r(u),f=8;i.__dashjs_factory_name="SwitchRequestHistory";var l=o.default.getClassFactory(i);n.default=l,t.exports=n.default},{173:173,51:51}],175:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){D={throughputHalfLife:{fast:x,slow:S},latencyHalfLife:{fast:N,slow:T}},v()}function n(e,t,n){return e===o.default.VIDEO?n<C:e===o.default.AUDIO?n<k:void 0}function r(e,t,r){if(t.trace&&t.trace.length){var s=t.tresponse.getTime()-t.trequest.getTime()||1,o=t._tfinish.getTime()-t.tresponse.getTime()||1,u=t.trace.reduce(function(e,t){return e+t.b[0]},0),a=r?o:s+o,f=Math.round(8*u/a);if(p(e),n(e,s,o)){if(A[e].length>0&&!A[e].hasCachedEntries)return;A[e].hasCachedEntries=!0}else A[e]&&A[e].hasCachedEntries&&d(e);A[e].push(f),A[e].length>m&&A[e].shift(),O[e].push(s),O[e].length>m&&O[e].shift(),i(M[e],f,.001*o,D.throughputHalfLife),i(_[e],s,1,D.latencyHalfLife)}}function i(e,t,n,r){var i=Math.pow(.5,n/r.fast);e.fastEstimate=(1-i)*t+i*e.fastEstimate;var s=Math.pow(.5,n/r.slow);e.slowEstimate=(1-s)*t+s*e.slowEstimate,e.totalWeight+=n}function s(e,t,n){var r=void 0,i=void 0;if(e?(r=A[t],i=n?g:y):(r=O[t],i=b),r){if(i>=r.length)i=r.length;else if(e)for(var s=1;s<i;++s){var o=r[-s]/r[-s-1];if((o>=E||o<=1/w)&&(i+=1)===r.length)break}}else i=0;return i}function u(e,t,n){return L.getMovingAverageMethod()!==o.default.MOVING_AVERAGE_SLIDING_WINDOW?f(e,t):a(e,t,n)}function a(e,t,n){var r=s(e,t,n),i=e?A:O,o=i[t];return 0!==r&&o&&0!==o.length?(o=o.slice(-r),o.reduce(function(e,t){return e+t})/o.length):NaN}function f(e,t){var n=e?D.throughputHalfLife:D.latencyHalfLife,r=e?M[t]:_[t];if(!r||r.totalWeight<=0)return NaN;var i=r.fastEstimate/(1-Math.pow(.5,r.totalWeight/n.fast)),s=r.slowEstimate/(1-Math.pow(.5,r.totalWeight/n.slow));return e?Math.min(i,s):Math.max(i,s)}function l(e,t){return u(!0,e,t)}function c(e,t){var n=l(e,t);return isNaN(n)||(n*=L.getBandwidthSafetyFactor()),n}function h(e){return u(!1,e)}function p(e){A[e]=A[e]||[],O[e]=O[e]||[],M[e]=M[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0},_[e]=_[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function d(e){delete A[e],delete O[e],delete M[e],delete _[e],p(e)}function v(){A={},O={},M={},_={}}e=e||{};var m=20,g=3,y=4,b=4,w=1.3,E=1.3,S=8,x=3,T=2,N=1,C=50,k=5,L=e.mediaPlayerModel,A=void 0,O=void 0,M=void 0,_=void 0,D=void 0,P={push:r,getAverageThroughput:l,getSafeAverageThroughput:c,getAverageLatency:h,reset:v};return t(),P}Object.defineProperty(n,"__esModule",{value:!0});var s=e(100),o=r(s),u=e(51),a=r(u);i.__dashjs_factory_name="ThroughputHistory",n.default=a.default.getClassFactory(i),t.exports=n.default},{100:100,51:51}],176:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){g=[],y=[],c.getUseDefaultABRRules()&&(g.push((0,m.default)(f).create({metricsModel:p,dashMetrics:v,mediaPlayerModel:c})),g.push((0,o.default)(f).create({metricsModel:p,dashMetrics:v})),g.push((0,a.default)(f).create({metricsModel:p,dashMetrics:v})),g.push((0,d.default)(f).create()),g.push((0,h.default)(f).create()),y.push((0,l.default)(f).create({metricsModel:p,dashMetrics:v,mediaPlayerModel:c}))),c.getABRCustomRules().forEach(function(e){e.type===E&&g.push(e.rule(f).create()),e.type===S&&y.push(e.rule(f).create())})}function n(e){return e.filter(function(e){return e.quality>w.default.NO_CHANGE})}function r(e){var t={},n=void 0,r=void 0,i=void 0,s=void 0,o=void 0;if(0!==e.length){for(t[w.default.PRIORITY.STRONG]=w.default.NO_CHANGE,t[w.default.PRIORITY.WEAK]=w.default.NO_CHANGE,t[w.default.PRIORITY.DEFAULT]=w.default.NO_CHANGE,n=0,r=e.length;n<r;n+=1)i=e[n],i.quality!==w.default.NO_CHANGE&&(t[i.priority]=t[i.priority]>w.default.NO_CHANGE?Math.min(t[i.priority],i.quality):i.quality);return t[w.default.PRIORITY.WEAK]!==w.default.NO_CHANGE&&(s=t[w.default.PRIORITY.WEAK]),t[w.default.PRIORITY.DEFAULT]!==w.default.NO_CHANGE&&(s=t[w.default.PRIORITY.DEFAULT]),t[w.default.PRIORITY.STRONG]!==w.default.NO_CHANGE&&(s=t[w.default.PRIORITY.STRONG]),s!==w.default.NO_CHANGE&&(o=s),(0,w.default)(f).create(o)}}function i(e){return r(n(g.map(function(t){return t.getMaxIndex(e)})))||(0,w.default)(f).create()}function s(e){return r(n(y.map(function(t){return t.shouldAbandon(e)})))||(0,w.default)(f).create()}function u(){[g,y].forEach(function(e){e&&e.length&&e.forEach(function(e){return e.reset&&e.reset()})}),g=[],y=[]}e=e||{};var f=this.context,c=e.mediaPlayerModel,p=e.metricsModel,v=e.dashMetrics,g=void 0,y=void 0;return{initialize:t,reset:u,getMaxQuality:i,shouldAbandonFragment:s}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(182),o=r(s),u=e(180),a=r(u),f=e(177),l=r(f),c=e(179),h=r(c),p=e(181),d=r(p),v=e(178),m=r(v),g=e(51),y=r(g),b=e(173),w=r(b),E="qualitySwitchRules",S="abandonFragmentRules";i.__dashjs_factory_name="ABRRulesCollection";var x=y.default.getClassFactory(i);x.QUALITY_SWITCH_RULES=E,x.ABANDON_FRAGMENT_RULES=S,y.default.updateSingletonFactory(i.__dashjs_factory_name,x),n.default=x,t.exports=n.default},{173:173,177:177,178:178,179:179,180:180,181:181,182:182,51:51}],177:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){u()}function n(e,t){g[e]=g[e]||{},g[e][t]=g[e][t]||{}}function r(e,t){b[e]=b[e]||[],b[e].push(t)}function s(e){var t=(0,o.default)(h).create(o.default.NO_CHANGE,{name:i.__dashjs_factory_name});if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getCurrentRequest")&&e.hasOwnProperty("getRepresentationInfo")&&e.hasOwnProperty("getAbrController")))return t;var s=e.getMediaInfo(),u=e.getMediaType(),l=e.getCurrentRequest();if(!isNaN(l.index)){n(u,l.index);var w=d.getStableBufferTime();if(m.getCurrentBufferLevel(v.getReadOnlyMetricsFor(u))>w)return t;var E=g[u][l.index];if(null===E||null===l.firstByteDate||y.hasOwnProperty(E.id))return t;if(void 0===E.firstByteTime&&(b[u]=[],E.firstByteTime=l.firstByteDate.getTime(),E.segmentDuration=l.duration,E.bytesTotal=l.bytesTotal,E.id=l.index),E.bytesLoaded=l.bytesLoaded,E.elapsedTime=(new Date).getTime()-E.firstByteTime,E.bytesLoaded>0&&E.elapsedTime>0&&r(u,Math.round(8*E.bytesLoaded/E.elapsedTime)),b[u].length>=c&&E.elapsedTime>f&&E.bytesLoaded<E.bytesTotal){var S=b[u].reduce(function(e,t){return e+t},0);if(E.measuredBandwidthInKbps=Math.round(S/b[u].length),E.estimatedTimeOfDownload=+(8*E.bytesTotal/E.measuredBandwidthInKbps/1e3).toFixed(2),E.estimatedTimeOfDownload<E.segmentDuration*a||0===e.getRepresentationInfo().quality)return t;if(!y.hasOwnProperty(E.id)){var x=e.getAbrController(),T=E.bytesTotal-E.bytesLoaded,N=x.getBitrateList(s),C=x.getQualityForBitrate(s,E.measuredBandwidthInKbps*d.getBandwidthSafetyFactor());T>E.bytesTotal*N[C].bitrate/N[x.getQualityFor(u,s.streamInfo)].bitrate&&(t.quality=C,t.reason.throughput=E.measuredBandwidthInKbps,t.reason.fragmentID=E.id,y[E.id]=E,p("AbandonRequestsRule ( ",u,"frag id",E.id,") is asking to abandon and switch to quality to ",C," measured bandwidth was",E.measuredBandwidthInKbps),delete g[u][E.id])}}else E.bytesLoaded===E.bytesTotal&&delete g[u][E.id]}return t}function u(){g={},y={},b=[]}e=e||{};var a=1.8,f=500,c=5,h=this.context,p=(0,l.default)(h).getInstance().log,d=e.mediaPlayerModel,v=e.metricsModel,m=e.dashMetrics,g=void 0,y=void 0,b=void 0,w={shouldAbandon:s,reset:u};return t(),w}Object.defineProperty(n,"__esModule",{value:!0});var s=e(173),o=r(s),u=e(51),a=r(u),f=e(49),l=r(f);i.__dashjs_factory_name="AbandonRequestsRule",n.default=a.default.getClassFactory(i),t.exports=n.default},{173:173,49:49,51:51}],178:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){D(),q.on(v.default.BUFFER_EMPTY,T,R),q.on(v.default.PLAYBACK_SEEKING,N,R),q.on(v.default.PERIOD_SWITCH_STARTED,C,R),q.on(v.default.MEDIA_FRAGMENT_LOADED,k,R),q.on(v.default.METRIC_ADDED,L,R),q.on(v.default.QUALITY_CHANGE_REQUESTED,O,R),q.on(v.default.FRAGMENT_LOADING_ABANDONED,M,R)}function n(e){return e.map(function(e){return Math.log(e)})}function r(e,t,n){var r=n.reduce(function(e,t,r){return t>n[e]?r:e},0);if(0===r)return null;var i=Math.max(e,E+S*t.length),s=(n[r]-1)/(i/E-1);return{gp:s,Vp:E/s}}function i(e){var t={},i=e.getMediaInfo(),o=i.bitrateList.map(function(e){return e.bandwidth}),u=n(o);u=u.map(function(e){return e-u[0]+1});var a=I.getStableBufferTime(),f=r(a,o,u);return f?(t.state=b,t.bitrates=o,t.utilities=u,t.stableBufferTime=a,t.Vp=f.Vp,t.gp=f.gp,t.lastQuality=0,s(t)):t.state=y,t}function s(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function u(e,t){var n=I.getStableBufferTime();if(e.stableBufferTime!==n){var i=r(n,e.bitrates,e.utilities);if(i.Vp!==e.Vp||i.gp!==e.gp){var s=j.getCurrentBufferLevel(F.getReadOnlyMetricsFor(t)),o=s+e.placeholderBuffer;o-=E,o*=i.Vp/e.Vp,o+=E,e.stableBufferTime=n,e.Vp=i.Vp,e.gp=i.gp,e.placeholderBuffer=Math.max(0,o-s)}}}function f(e){var t=e.getMediaType(),n=U[t];return n?n.state!==y&&u(n,t):(n=i(e),U[t]=n),n}function l(e,t){for(var n=e.bitrates.length,r=NaN,i=NaN,s=0;s<n;++s){var o=(e.Vp*(e.utilities[s]+e.gp)-t)/e.bitrates[s];(isNaN(i)||o>=i)&&(i=o,r=s)}return r}function h(e,t){return e.Vp*(e.utilities[t]+e.gp)}function d(e,t){for(var n=e.bitrates[t],r=e.utilities[t],i=0,s=t-1;s>=0;--s)if(e.utilities[s]<e.utilities[t]){var o=e.bitrates[s],u=e.utilities[s],a=e.Vp*(e.gp+(n*u-o*r)/(n-o));i=Math.max(i,a)}return i}function m(e,t){var n=Date.now();if(isNaN(e.lastSegmentFinishTimeMs)){if(!isNaN(e.lastCallTimeMs)){var r=.001*(n-e.lastCallTimeMs);e.placeholderBuffer+=Math.max(0,r)}}else{var r=.001*(n-e.lastSegmentFinishTimeMs);e.placeholderBuffer+=Math.max(0,r)}e.lastCallTimeMs=n,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN,u(e,t)}function T(){for(var e in U)U.hasOwnProperty(e)&&U[e].state===w&&(U[e].placeholderBuffer=0)}function N(){for(var e in U)if(U.hasOwnProperty(e)){var t=U[e];t.state!==y&&(t.state=b,s(t))}}function C(){}function k(e){if(e&&e.chunk&&e.chunk.mediaInfo){var t=U[e.chunk.mediaInfo.type];if(t&&t.state!==y){var n=e.chunk.start;isNaN(t.mostAdvancedSegmentStart)||n>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=n,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=n,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,A(t,e.chunk.mediaInfo.type)}}}function L(e){if(e&&e.metric===o.default.HTTP_REQUEST&&e.value&&e.value.type===c.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length){var t=U[e.mediaType];t&&t.state!==y&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),A(t,e.mediaType))}}function A(e,t){if(!isNaN(e.lastSegmentStart)&&!isNaN(e.lastSegmentRequestTimeMs)&&!isNaN(e.placeholderBuffer)){if(e.placeholderBuffer*=x,!isNaN(e.lastSegmentFinishTimeMs)){var n=j.getCurrentBufferLevel(F.getReadOnlyMetricsFor(t)),r=n+.001*(e.lastSegmentFinishTimeMs-e.lastSegmentRequestTimeMs),i=h(e,e.lastQuality),s=Math.max(0,i-r);e.placeholderBuffer=Math.min(s,e.placeholderBuffer)}e.lastSegmentWasReplacement&&!isNaN(e.lastSegmentDurationS)&&(e.placeholderBuffer+=e.lastSegmentDurationS),e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN}}function O(e){if(e){var t=U[e.mediaType];t&&t.state!==y&&(t.abrQuality=e.newQuality)}}function M(e){if(e){var t=U[e.mediaType];if(t&&t.state!==y){var n=j.getCurrentBufferLevel(F.getReadOnlyMetricsFor(e.mediaType)),r=void 0;r=t.abrQuality>0?d(t,t.abrQuality):E;var i=Math.max(0,r-n);t.placeholderBuffer=Math.min(t.placeholderBuffer,i)}}}function _(e){var t=e.getMediaInfo(),n=e.getMediaType(),r=F.getReadOnlyMetricsFor(n),i=e.getStreamProcessor(),o=e.getStreamInfo(),u=e.getAbrController(),c=u.getThroughputHistory(),p=o?o.id:null,v=o&&o.manifestInfo&&o.manifestInfo.isDynamic,g=e.useBufferOccupancyABR(),E=(0,a.default)(H).create();if(E.reason=E.reason||{},!g)return E;i.getScheduleController().setTimeToLoadDelay(0);var S=f(e);if(S.state===y)return B("BOLA ABR rule invoked for media type '"+n+"' with only one bitrate."),E;var x=j.getCurrentBufferLevel(r),T=c.getAverageThroughput(n,v),N=c.getSafeAverageThroughput(n,v),C=c.getAverageLatency(n),k=void 0;if(E.reason.state=S.state,E.reason.throughput=T,E.reason.latency=C,isNaN(T))return E;switch(S.state){case b:k=u.getQualityForBitrate(t,N,C),E.quality=k,E.reason.throughput=N,S.placeholderBuffer=Math.max(0,d(S,k)-x),S.lastQuality=k,!isNaN(S.lastSegmentDurationS)&&x>=S.lastSegmentDurationS&&(S.state=w);break;case w:m(S,n),k=l(S,x+S.placeholderBuffer);var L=u.getQualityForBitrate(t,N,C);k>S.lastQuality&&k>L&&(k=Math.max(L,S.lastQuality));var A=Math.max(0,x+S.placeholderBuffer-h(S,k));A<=S.placeholderBuffer?(S.placeholderBuffer-=A,A=0):(A-=S.placeholderBuffer,S.placeholderBuffer=0,k<u.getTopQualityIndexFor(n,p)?i.getScheduleController().setTimeToLoadDelay(1e3*A):A=0),E.quality=k,E.reason.throughput=T,E.reason.latency=C,E.reason.bufferLevel=x,E.reason.placeholderBuffer=S.placeholderBuffer,E.reason.delay=A,S.lastQuality=k;break;default:B("BOLA ABR rule invoked in bad state."),E.quality=u.getQualityForBitrate(t,N,C),E.reason.state=S.state,E.reason.throughput=N,E.reason.latency=C,S.state=b,s(S)}return E}function D(){U={}}function P(){D(),q.off(v.default.BUFFER_EMPTY,T,R),q.off(v.default.PLAYBACK_SEEKING,N,R),q.off(v.default.PERIOD_SWITCH_STARTED,C,R),q.off(v.default.MEDIA_FRAGMENT_LOADED,k,R),q.off(v.default.METRIC_ADDED,L,R),q.off(v.default.QUALITY_CHANGE_REQUESTED,O,R),q.off(v.default.FRAGMENT_LOADING_ABANDONED,M,R)}e=e||{};var H=this.context,B=(0,g.default)(H).getInstance().log,j=e.dashMetrics,F=e.metricsModel,I=e.mediaPlayerModel,q=(0,p.default)(H).getInstance(),R=void 0,U=void 0;return R={getMaxIndex:_,reset:P},t(),R}Object.defineProperty(n,"__esModule",{value:!0});var s=e(101),o=r(s),u=e(173),a=r(u),f=e(51),l=r(f),c=e(230),h=e(50),p=r(h),d=e(54),v=r(d),m=e(49),g=r(m),y=0,b=1,w=2,E=10,S=2,x=.99;i.__dashjs_factory_name="BolaRule",n.default=l.default.getClassFactory(i),t.exports=n.default},{101:101,173:173,230:230,49:49,50:50,51:51,54:54}],179:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){var s=e.getDroppedFramesHistory();if(s){for(var o=s.getFrameHistory(),u=0,f=0,l=a.default.NO_CHANGE,c=1;c<o.length;c++)if(o[c]&&(u=o[c].droppedVideoFrames,(f=o[c].totalVideoFrames)>i&&u/f>r)){l=c-1,n("DroppedFramesRule, index: "+l+" Dropped Frames: "+u+" Total Frames: "+f);break}return(0,a.default)(t).create(l,{droppedFrames:u})}return(0,a.default)(t).create()}var t=this.context,n=(0,l.default)(t).getInstance().log,r=.15,i=375;return{getMaxIndex:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s),u=e(173),a=r(u),f=e(49),l=r(f);i.__dashjs_factory_name="DroppedFramesRule",n.default=o.default.getClassFactory(i),t.exports=n.default},{173:173,49:49,51:51}],180:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){s(),v.on(l.default.PLAYBACK_SEEKING,u,b)}function n(){if(!(g&&g.hasOwnProperty("getReadOnlyMetricsFor")&&y&&y.hasOwnProperty("getCurrentBufferLevel")))throw new Error("Missing config parameter(s)")}function r(e){var t=(0,m.default)(h).create();if(!e||!e.hasOwnProperty("getMediaType"))return t;n();var r=e.getMediaType(),s=g.getReadOnlyMetricsFor(r),u=s.BufferState.length>0?s.BufferState[s.BufferState.length-1]:null,a=e.getRepresentationInfo(),f=a.fragmentDuration;if(!u||!i(r,u)||!f)return t;if(u.state===o.default.BUFFER_EMPTY)p("Switch to index 0; buffer is empty."),t.quality=0,t.reason="InsufficientBufferRule: Buffer is empty";else{var l=e.getMediaInfo(),d=e.getAbrController(),v=d.getThroughputHistory(),b=y.getCurrentBufferLevel(s),w=v.getAverageThroughput(r),E=v.getAverageLatency(r),S=w*(b/f)*c;t.quality=d.getQualityForBitrate(l,S,E),t.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return t}function i(e,t){w[e]=w[e]||{};var n=!1;return w[e].firstBufferLoadedEvent?n=!0:t&&t.state===o.default.BUFFER_LOADED&&(w[e].firstBufferLoadedEvent=!0,n=!0),n}function s(){w={}}function u(){s()}function f(){s(),v.off(l.default.PLAYBACK_SEEKING,u,b)}e=e||{};var c=.5,h=this.context,p=(0,d.default)(h).getInstance().log,v=(0,a.default)(h).getInstance(),g=e.metricsModel,y=e.dashMetrics,b=void 0,w=void 0;return b={getMaxIndex:r,reset:f},t(),b}Object.defineProperty(n,"__esModule",{value:!0});var s=e(106),o=r(s),u=e(50),a=r(u),f=e(54),l=r(f),c=e(51),h=r(c),p=e(49),d=r(p),v=e(173),m=r(v);i.__dashjs_factory_name="InsufficientBufferRule",n.default=h.default.getClassFactory(i),t.exports=n.default},{106:106,173:173,49:49,50:50,51:51,54:54}],181:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){for(var s=e?e.getSwitchHistory():null,o=s?s.getSwitchRequests():[],u=0,a=0,f=0,c=(0,l.default)(t).create(),h=0;h<o.length;h++)if(void 0!==o[h]&&(u+=o[h].drops,a+=o[h].noDrops,f+=o[h].dropSize,u+a>=i&&u/a>r)){c.quality=h>0&&o[h].drops>0?h-1:h,c.reason={index:c.quality,drops:u,noDrops:a,dropSize:f},n("Switch history rule index: "+c.quality+" samples: "+(u+a)+" drops: "+u);break}return c}var t=this.context,n=(0,a.default)(t).getInstance().log,r=.075,i=6;return{getMaxIndex:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s),u=e(49),a=r(u),f=e(173),l=r(f);i.__dashjs_factory_name="SwitchHistoryRule",n.default=o.default.getClassFactory(i),t.exports=n.default},{173:173,49:49,51:51}],182:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){if(!u||!u.hasOwnProperty("getReadOnlyMetricsFor"))throw new Error("Missing config parameter(s)")}function n(e){var n=(0,d.default)(i).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("useBufferOccupancyABR")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("getStreamProcessor")))return n;t();var r=e.getMediaInfo(),f=e.getMediaType(),l=u.getReadOnlyMetricsFor(f),c=e.getStreamProcessor(),h=e.getAbrController(),p=e.getStreamInfo(),v=p&&p.manifestInfo?p.manifestInfo.isDynamic:null,m=h.getThroughputHistory(),g=m.getSafeAverageThroughput(f,v),y=m.getAverageLatency(f),b=l.BufferState.length>0?l.BufferState[l.BufferState.length-1]:null,w=e.useBufferOccupancyABR();return!l||isNaN(g)||!b||w?n:(h.getAbandonmentStateFor(f)!==a.default.ABANDON_LOAD&&(b.state===o.default.BUFFER_LOADED||v)&&(n.quality=h.getQualityForBitrate(r,g,y),c.getScheduleController().setTimeToLoadDelay(0),s("ThroughputRule requesting switch to index: ",n.quality,"type: ",f,"Average throughput",Math.round(g),"kbps"),n.reason={throughput:g,latency:y}),n)}function r(){}e=e||{};var i=this.context,s=(0,h.default)(i).getInstance().log,u=e.metricsModel;return{getMaxIndex:n,reset:r}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(106),o=r(s),u=e(103),a=r(u),f=e(51),l=r(f),c=e(49),h=r(c),p=e(173),d=r(p);i.__dashjs_factory_name="ThroughputRule",n.default=l.default.getClassFactory(i),t.exports=n.default},{103:103,106:106,173:173,49:49,51:51}],183:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){}function n(e,t,n){return i.getCurrentBufferLevel(s.getReadOnlyMetricsFor(t))<r(e,t,n)}function r(e,t,n){var r=NaN,l=e.getCurrentRepresentationInfo();if(t===o.default.FRAGMENTED_TEXT)r=a.getAllTracksAreDisabled()?0:l.fragmentDuration;else if(t===o.default.AUDIO&&n){var c=i.getCurrentBufferLevel(s.getReadOnlyMetricsFor(o.default.VIDEO));r=isNaN(l.fragmentDuration)?c:Math.max(c,l.fragmentDuration)}else{var h=l.mediaInfo.streamInfo;if(f.isPlayingAtTopQuality(h)){var p=h.manifestInfo.duration>=u.getLongFormContentDurationThreshold();r=p?u.getBufferTimeAtTopQualityLongForm():u.getBufferTimeAtTopQuality()}else r=u.getStableBufferTime()}return r}e=e||{};var i=e.dashMetrics,s=e.metricsModel,u=e.mediaPlayerModel,a=e.textController,f=e.abrController,l={execute:n,getBufferTarget:r};return t(),l}Object.defineProperty(n,"__esModule",{value:!0});var s=e(100),o=r(s),u=e(51),a=r(u);i.__dashjs_factory_name="BufferLevelRule",n.default=a.default.getClassFactory(i),t.exports=n.default},{100:100,51:51}],184:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e,t){var n=e.getCurrentRepresentationInfo(),a=n.mediaInfo,f=a.type,l=e.getScheduleController(),c=l.getSeekTarget(),p=!isNaN(c),d=e.getBuffer(),v=p?c:i.getIndexHandlerTime(e);if(isNaN(v)||f===o.default.FRAGMENTED_TEXT&&u.getAllTracksAreDisabled())return null;if(p&&l.setSeekTarget(NaN),d){var m=s.getBufferRange(d,v);null!==m&&(r("Prior to making a request for time, NextFragmentRequestRule is aligning index handler's currentTime with bufferedRange.end.",v," was changed to ",m.end),v=m.end)}var g=void 0;if(t)v=t.startTime+t.duration/2,g=i.getFragmentRequestForTime(e,n,v,{timeThreshold:0,ignoreIsFinished:!0});else{for(g=i.getFragmentRequestForTime(e,n,v,{keepIdx:!p});g&&g.action!==h.default.ACTION_COMPLETE&&e.getFragmentModel().isFragmentLoaded(g);)g=i.getNextFragmentRequest(e,n);g&&(i.setIndexHandlerTime(e,g.startTime+g.duration),g.delayLoadingTime=(new Date).getTime()+l.getTimeToLoadDelay(),l.setTimeToLoadDelay(0))}return g}e=e||{};var n=this.context,r=(0,a.default)(n).getInstance().log,i=e.adapter,s=e.sourceBufferController,u=e.textController;return{execute:t}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(100),o=r(s),u=e(49),a=r(u),f=e(51),l=r(f),c=e(213),h=r(c);i.__dashjs_factory_name="NextFragmentRequestRule",n.default=l.default.getClassFactory(i),t.exports=n.default},{100:100,213:213,49:49,51:51}],185:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){for(var t="",n=0;n<e.length;++n)t+=e[n].uchar;return t.length-t.replace(/^\s+/,"").length}function t(e){return"left: "+3.125*e.x+"%; top: "+6.66*e.y1+"%; width: "+(100-3.125*e.x)+"%; height: "+6.66*Math.max(e.y2-1-e.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function n(e){return"red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function r(e,t){var r=e.videoHeight/15;return t?"font-size: "+r+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?n(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?n(t.background):"transparent")+";":"font-size: "+r+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function i(e){return e.replace(/^\s+/g,"")}function s(e){return e.replace(/\s+$/g,"")}function o(n,o,a,f){var l=null,c=null,h=!1,p=-1,d={start:o,end:a,spans:[]},v="style_cea608_white_black",m={},g={},y=[],b=void 0,w=void 0;for(b=0;b<15;++b){var E=f.rows[b],S="",x=null;if(!1===E.isEmpty()){var T=e(E.chars);null===l&&(l={x:T,y1:b,y2:b+1,p:[]}),T!==p&&h&&(l.p.push(d),d={start:o,end:a,spans:[]},l.y2=b,l.name="region_"+l.x+"_"+l.y1+"_"+l.y2,!1===m.hasOwnProperty(l.name)?(y.push(l),m[l.name]=l):(c=m[l.name],c.p.contat(l.p)),l={x:T,y1:b,y2:b+1,p:[]});for(var N=0;N<E.chars.length;++N){var C=E.chars[N],k=C.penState;if(null===x||!k.equals(x)){S.trim().length>0&&(d.spans.push({name:v,line:S,row:b}),S="");var L="style_cea608_"+k.foreground+"_"+k.background;k.underline&&(L+="_underline"),k.italics&&(L+="_italics"),g.hasOwnProperty(L)||(g[L]=JSON.parse(JSON.stringify(k))),x=k,v=L}S+=C.uchar}S.trim().length>0&&d.spans.push({name:v,line:S,row:b}),h=!0,p=T}else h=!1,p=-1,l&&(l.p.push(d),d={start:o,end:a,spans:[]},l.y2=b,l.name="region_"+l.x+"_"+l.y1+"_"+l.y2,!1===m.hasOwnProperty(l.name)?(y.push(l),m[l.name]=l):(c=m[l.name],c.p.contat(l.p)),l=null)}l&&(l.p.push(d),l.y2=b+1,l.name="region_"+l.x+"_"+l.y1+"_"+l.y2,!1===m.hasOwnProperty(l.name)?(y.push(l),m[l.name]=l):(c=m[l.name],c.p.contat(l.p)),l=null);var A=[];for(b=0;b<y.length;++b){var O=y[b],M="sub_cea608_"+u++,_=document.createElement("div");_.id=M;var D=t(O);_.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+D;var P=document.createElement("div");P.className="paragraph bodyStyle",P.style.cssText=r(n);var H=document.createElement("div");H.className="cueUniWrapper",H.style.cssText="unicode-bidi: normal; direction: ltr;";for(var B=0;B<O.p.length;++B){var j=O.p[B],F=0;for(w=0;w<j.spans.length;++w){var I=j.spans[w];if(I.line.length>0){if(0!==w&&F!=I.row){var q=document.createElement("br");q.className="lineBreak",H.appendChild(q)}var R=!1;F===I.row&&(R=!0),F=I.row;var U=g[I.name],z=document.createElement("span");z.className="spanPadding "+I.name+" customSpanColor",z.style.cssText=r(n,U),0!==w&&R?w===j.spans.length-1?z.textContent=s(I.line):z.textContent=I.line:j.spans.length>1&&w<j.spans.length-1&&I.row===j.spans[w+1].row?z.textContent=i(I.line):z.textContent=I.line.trim(),H.appendChild(z)}}}P.appendChild(H),_.appendChild(P);var W={bodyStyle:["%",90]};for(w in g)g.hasOwnProperty(w)&&(W[w]=["%",90]);A.push({type:"html",start:o,end:a,cueHTMLElement:_,cueID:M,cellResolution:[32,15],isFromCEA608:!0,regions:y,regionID:O.name,videoHeight:n.videoHeight,videoWidth:n.videoWidth,fontSize:W,lineHeight:{},linePadding:{}})}return A}var u=0;return{createHTMLCaptionsFromScreen:o}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s);i.__dashjs_factory_name="EmbeddedTextHtmlRender",n.default=o.default.getSingletonFactory(i),t.exports=n.default},{51:51}],186:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){_=!1,D=null,P=null,B=null,M=!1,N.on(l.default.DATA_UPDATE_COMPLETED,E,this),N.on(l.default.INIT_FRAGMENT_LOADED,S,this)}function n(){return v}function r(e){c(e),B=A.getRepresentationController(),j=(0,d.default)(T).getInstance()}function i(e){try{P=C.createSourceBuffer(D,e),_||(P.hasOwnProperty(o.default.INITIALIZE)&&P.initialize(L,A),_=!0)}catch(t){k.mediaSourceError("Error creating "+L+" source buffer.")}return P}function s(){return L}function u(){return P}function f(e){P=e}function c(e){D=e}function h(){return D}function p(){return A}function m(e){H=e}function g(){return H}function y(){return 0}function b(){return M}function w(e){N.off(l.default.DATA_UPDATE_COMPLETED,E,this),N.off(l.default.INIT_FRAGMENT_LOADED,S,this),e||(C.abort(D,P),C.removeSourceBuffer(D,P))}function E(e){e.sender.getStreamProcessor()===A&&N.trigger(l.default.TIMED_TEXT_REQUESTED,{index:0,sender:e.sender})}function S(e){e.fragmentModel===A.getFragmentModel()&&e.chunk.bytes&&(j.save(e.chunk),C.append(P,e.chunk))}function x(e,t){var n=j.extract(e,t);n?C.append(P,n):N.trigger(l.default.INIT_REQUESTED,{sender:O})}e=e||{};var T=this.context,N=(0,a.default)(T).getInstance(),C=e.sourceBufferController,k=e.errHandler,L=e.type,A=e.streamProcessor,O=void 0,M=void 0,_=void 0,D=void 0,P=void 0,H=void 0,B=void 0,j=void 0;return O={getBufferControllerType:n,initialize:r,createBuffer:i,getType:s,getStreamProcessor:p,setSeekStartTime:m,getSeekStartTime:g,getBuffer:u,setBuffer:f,getBufferLevel:y,setMediaSource:c,getMediaSource:h,getIsBufferingCompleted:b,switchInitData:x,reset:w},t(),O}Object.defineProperty(n,"__esModule",{value:!0});var s=e(100),o=r(s),u=e(50),a=r(u),f=e(54),l=r(f),c=e(51),h=r(c),p=e(200),d=r(p),v="NotFragmentedTextBufferController";i.__dashjs_factory_name=v,n.default=h.default.getClassFactory(i),t.exports=n.default},{100:100,200:200,50:50,51:51,54:54}],187:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){w=e.type===o.default.FRAGMENTED_TEXT?(0,l.default)(b).create({type:e.type,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,manifestModel:e.manifestModel,sourceBufferController:e.sourceBufferController,errHandler:e.errHandler,streamController:e.streamController,mediaController:e.mediaController,adapter:e.adapter,textController:e.textController,abrController:e.abrController,playbackController:e.playbackController,streamProcessor:e.streamProcessor}):(0,h.default)(b).create({type:e.type,errHandler:e.errHandler,sourceBufferController:e.sourceBufferController,streamProcessor:e.streamProcessor})}function n(){return w.getBufferControllerType()}function r(e,t){return w.initialize(e,t)}function i(e){return w.createBuffer(e)}function s(){return w.getType()}function u(){return w.getBuffer()}function a(e){w.setBuffer(e)}function f(){return w.getMediaSource()}function c(e){w.setMediaSource(e)}function p(){w.getStreamProcessor()}function d(e){w.setSeekStartTime(e)}function v(){return w.getBufferLevel()}function m(e){w.reset(e)}function g(){return w.getIsBufferingCompleted()}function y(e,t){w.switchInitData(e,t)}e=e||{};var b=this.context,w=void 0,E=void 0;return E={getBufferControllerType:n,initialize:r,createBuffer:i,getType:s,getStreamProcessor:p,setSeekStartTime:d,getBuffer:u,setBuffer:a,getBufferLevel:v,setMediaSource:c,getMediaSource:f,getIsBufferingCompleted:g,switchInitData:y,reset:m},t(),E}Object.defineProperty(n,"__esModule",{value:!0});var s=e(100),o=r(s),u=e(51),a=r(u),f=e(106),l=r(f),c=e(186),h=r(c);i.__dashjs_factory_name="TextBufferController",n.default=a.default.getClassFactory(i),t.exports=n.default},{100:100,106:106,186:186,51:51}],188:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){B="",j=-1,F=!0,_=(0,h.default)(x).getInstance(),D=(0,d.default)(x).getInstance(),P=(0,m.default)(x).getInstance(),N=(0,l.default)(x).getInstance(),H=(0,y.default)(x).getInstance(),_.initialize(),H.on(w.default.TEXT_TRACKS_QUEUE_INITIALIZED
,a,T),E()}function t(e){e&&(e.errHandler&&(C=e.errHandler),e.dashManifestModel&&(k=e.dashManifestModel),e.manifestModel&&(L=e.manifestModel),e.mediaController&&(A=e.mediaController),e.videoModel&&(O=e.videoModel),e.streamController&&(M=e.streamController),e.textTracks&&(_=e.textTracks),e.vttParser&&(D=e.vttParser),e.ttmlParser&&(P=e.ttmlParser),N.setConfig({errHandler:C,dashManifestModel:k,manifestModel:L,mediaController:A,videoModel:O,streamController:M,textTracks:_,vttParser:D,ttmlParser:P}))}function n(){return N}function r(){return I}function i(e){N.addEmbeddedTrack(e)}function s(e){"string"==typeof e&&(B=e)}function u(){return B}function a(e){var t=e.tracks,n=e.index,r=t.findIndex(function(e){return e.lang===B});-1!==r&&(this.setTextTrack(r),n=r),F||this.setTextTrack(-1),j=n,H.trigger(w.default.TEXT_TRACKS_ADDED,{enabled:!I,index:n,tracks:t})}function f(e){"boolean"==typeof e&&(F=e)}function c(){return F}function p(e){"boolean"==typeof e&&!I!==e&&(e&&this.setTextTrack(j),e||(j=this.getCurrentTrackIdx(),this.setTextTrack(-1)))}function v(){return!I}function g(e){var t=N.getConfig(),n=t.fragmentModel,r=t.fragmentedTracks,i=_.getCurrentTrackIdx();if(i!==e){_.setModeForTrackIdx(i,o.default.TEXT_HIDDEN),_.setCurrentTrackIdx(e),_.setModeForTrackIdx(e,o.default.TEXT_SHOWING);var s=_.getCurrentTrackInfo();if(s&&s.isFragmented&&!s.isEmbedded)for(var u=0;u<r.length;u++){var a=r[u];if(s.lang===a.lang&&s.index===a.index&&(!s.label||s.label===a.id)){var f=A.getCurrentTrackFor(o.default.FRAGMENTED_TEXT,M.getActiveStreamInfo());a!==f&&(n.abortRequests(),n.removeExecutedRequestsBeforeTime(),N.remove(),_.deleteCuesFromTrackIdx(i),A.setTrack(a),N.setCurrentFragmentedTrackIdx(u))}}}I=-1===e}function b(){return _.getCurrentTrackIdx()}function E(){I=!1}function S(){E(),N.resetEmbedded()}var x=this.context,T=void 0,N=void 0,C=void 0,k=void 0,L=void 0,A=void 0,O=void 0,M=void 0,_=void 0,D=void 0,P=void 0,H=void 0,B=void 0,j=void 0,F=void 0,I=void 0;return T={setConfig:t,getTextSourceBuffer:n,getAllTracksAreDisabled:r,addEmbeddedTrack:i,getTextDefaultLanguage:u,setTextDefaultLanguage:s,setTextDefaultEnabled:f,getTextDefaultEnabled:c,enableText:p,isTextEnabled:v,setTextTrack:g,getCurrentTrackIdx:b,reset:S},e(),T}Object.defineProperty(n,"__esModule",{value:!0});var s=e(100),o=r(s),u=e(51),a=r(u),f=e(189),l=r(f),c=e(190),h=r(c),p=e(207),d=r(p),v=e(205),m=r(v),g=e(50),y=r(g),b=e(54),w=r(b);i.__dashjs_factory_name="TextController",n.default=a.default.getSingletonFactory(i),t.exports=n.default},{100:100,189:189,190:190,205:205,207:207,50:50,51:51,54:54}],189:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t){if(B=null,z=null,W=!1,X=NaN,V=[],K=null,L||r(),q=t.getMediaInfoArr(),R.setConfig({videoModel:$}),R.initialize(),U=!D.getIsTextTrack(e),O=(0,p.default)(S).getInstance(),I=(0,c.default)(S).getInstance(),I.setConfig({boxParser:O}),U){z=t.getFragmentModel(),this.buffered=(0,v.default)(S).create(),V=H.getTracksFor(o.default.FRAGMENTED_TEXT,J.getActiveStreamInfo());for(var n=H.getCurrentTrackFor(o.default.FRAGMENTED_TEXT,J.getActiveStreamInfo()),i=0;i<V.length;i++)if(V[i]===n){Q=i;break}}}function t(){R.deleteAllTextTracks(),B=null,I=null,q=null,R=null,U=!1,z=null,W=!1,X=NaN,V=[],$=null,J=null,L=!1,G=null}function n(e){var t=e.chunk;t.mediaInfo.embeddedCaptions&&d(t.bytes,t)}function r(){G=[],q=[],R=(0,E.default)(S).getInstance(),R.setConfig({videoModel:$}),R.initialize(),O=(0,p.default)(S).getInstance(),I=(0,c.default)(S).getInstance(),I.setConfig({boxParser:O}),U=!1,Q=null,Y=!1,Z=0,nt=[],tt=[],et=null,L=!0,rt=(0,x.default)(S).getInstance(),C.on(M.default.VIDEO_CHUNK_RECEIVED,n,this)}function i(){C.off(M.default.VIDEO_CHUNK_RECEIVED,n,this),R&&R.deleteAllTextTracks(),L=!1,G=[],nt=[null,null],tt=[],et=null}function s(e){L||r(),e.id===o.default.CC1||e.id===o.default.CC3?G.push(e):T("Warning: Embedded track "+e.id+" not supported!")}function a(e){e&&(e.errHandler&&(_=e.errHandler),e.dashManifestModel&&(D=e.dashManifestModel),e.manifestModel&&(P=e.manifestModel),e.mediaController&&(H=e.mediaController),e.videoModel&&($=e.videoModel),e.streamController&&(J=e.streamController),e.textTracks&&(R=e.textTracks),e.vttParser&&(j=e.vttParser),e.ttmlParser&&(F=e.ttmlParser))}function l(){return{errHandler:_,dashManifestModel:D,mediaController:H,videoModel:$,fragmentModel:z,streamController:J,textTracks:R,isFragmented:U,embeddedTracks:G,fragmentedTracks:V}}function h(e){Q=e}function d(e,t){function n(e,t){var n=new f.default,r={subtitle:"subtitles",caption:"captions"},i=function(){var e=t.roles.length>0?r[t.roles[0]]:r.caption;return e=e===r.caption||e===r.subtitle?e:r.caption},s=function(){var e=!1;return t.codec&&t.codec.search(o.default.STPP)>=0&&(e=!0),t.mimeType&&t.mimeType.search(o.default.TTML)>=0&&(e=!0),e};n.captionData=e,n.lang=t.lang,n.label=t.id,n.index=t.index,n.isTTML=s(),n.defaultTrack=g(t),n.isFragmented=U,n.isEmbedded=!!t.isEmbedded,n.kind=i(),n.roles=t.roles;var u=(q?q.length:0)+G.length;R.addTextTrack(n,u)}var r=void 0,i=void 0,s=void 0,a=void 0,l=void 0,c=void 0,h=void 0,p=t.mediaInfo,d=p.type,v=p.mimeType,b=p.codec||v;if(!b)return void T("No text type defined");if(d===o.default.FRAGMENTED_TEXT)if(W)if(c=I.getSamplesInfo(e),i=c.sampleList,!K&&i.length>0&&(K=i[0].cts-t.start*X),b.search(o.default.STPP)>=0)for(B=null!==B?B:y(b),s=0;s<i.length;s++){var w=i[s],E=w.cts,S=E-K;this.buffered.add(S/X,(S+w.duration)/X);var x=new DataView(e,w.offset,w.subSizes[0]);h=N.default.Utils.dataViewToString(x,o.default.UTF8);var C=[],L=w.offset+w.subSizes[0];for(a=1;a<w.subSizes.length;a++){var A=new Uint8Array(e,L,w.subSizes[a]),O=String.fromCharCode.apply(null,A);C.push(O),L+=w.subSizes[a]}try{var M=P.getValue(),D=M.ttmlTimeIsRelative?E/X:0;r=B.parse(h,D,E/X,(E+w.duration)/X,C),R.addCaptions(Q,K/X,r)}catch(H){T("TTML parser error: "+H.message)}}else{var j=[];for(s=0;s<i.length;s++){var w=i[s];w.cts-=K,this.buffered.add(w.cts/X,(w.cts+w.duration)/X);var F=e.slice(w.offset,w.offset+w.size),z=N.default.parseBuffer(F);for(a=0;a<z.boxes.length;a++){var V=z.boxes[a];if(T("VTT box1: "+V.type),"vtte"!==V.type&&"vttc"===V.type)for(T("VTT vttc boxes.length = "+V.boxes.length),l=0;l<V.boxes.length;l++){var J=V.boxes[l];if(T("VTT box2: "+J.type),"payl"===J.type){var Y=J.cue_text;T("VTT cue_text = "+Y);var ft=w.cts/X,lt=(w.cts+w.duration)/X;j.push({start:ft,end:lt,data:Y,styles:{}}),T("VTT "+ft+"-"+lt+" : "+Y)}}}}j.length>0&&R.addCaptions(Q,0,j)}else{for(W=!0,s=0;s<q.length;s++)n(null,q[s]);X=I.getMediaTimescaleFromMoov(e)}else if(d===o.default.TEXT){var x=new DataView(e,0,e.byteLength);h=N.default.Utils.dataViewToString(x,o.default.UTF8);try{r=y(b).parse(h,0),n(r,p)}catch(H){_.timedTextError(H,"parse",h)}}else if(d===o.default.VIDEO)if(t.segmentType===u.HTTPRequest.INIT_SEGMENT_TYPE){if(0===Z)for(Z=I.getMediaTimescaleFromMoov(e),s=0;s<G.length;s++)n(null,G[s])}else{if(0===Z)return void T("CEA-608: No timescale for embeddedTextTrack yet");var ct=function(e,t){function n(e,n,r){var i=null;$.getTTMLRenderingDiv()?i=rt.createHTMLCaptionsFromScreen($.getElement(),e,n,r):i=[{start:e,end:n,data:r.getDisplayText(),styles:{}}],i&&R.addCaptions(t,0,i)}return n};c=I.getSamplesInfo(e);var ht=c.lastSequenceNumber;if(!nt[0]&&!nt[1]){var pt=void 0,dt=void 0;for(s=0;s<G.length;s++){if(G[s].id===o.default.CC1?(0,dt=R.getTrackIdxForId(o.default.CC1)):G[s].id===o.default.CC3&&(1,dt=R.getTrackIdxForId(o.default.CC3)),-1===dt)return void T("CEA-608: data before track is ready.");pt=ct(this,dt),nt[s]=new k.default.Cea608Parser(s,{newCue:pt},null)}}if(Z&&-1==tt.indexOf(ht)){if(null!==et&&ht!==et+c.numSequences)for(s=0;s<nt.length;s++)nt[s]&&nt[s].reset();for(var vt=m(e,c.sampleList),mt=0;mt<nt.length;mt++){var gt=vt.fields[mt],yt=nt[mt];if(yt)for(s=0;s<gt.length;s++)yt.addData(gt[s][0]/Z,gt[s][1])}et=ht,tt.push(ht)}}}function m(e,t){if(0===t.length)return null;for(var n={splits:[],fields:[[],[]]},r=new DataView(e),i=0;i<t.length;i++)for(var s=t[i],o=k.default.findCea608Nalus(r,s.offset,s.size),u=null,a=0,f=0;f<o.length;f++)for(var l=k.default.extractCea608DataFromRange(r,o[f]),c=0;c<2;c++)l[c].length>0&&(s.cts!==u?a=0:a+=1,n.fields[c].push([s.cts,l[c],a]),u=s.cts);return n.fields.forEach(function(e){e.sort(function(e,t){return e[0]===t[0]?e[2]-t[2]:e[0]-t[0]})}),n}function g(e){var t=!1;return G.length>1&&e.isEmbedded?t=e.id&&e.id===o.default.CC1:1===G.length?e.id&&"CC"===e.id.substring(0,2)&&(t=!0):0===G.length&&(t=e.index===q[0].index),t}function y(e){var t=void 0;return e.search(o.default.VTT)>=0?t=j:(e.search(o.default.TTML)>=0||e.search(o.default.STPP)>=0)&&(t=F),t}function w(e,t){void 0===e&&e===t&&(e=this.buffered.start(0),t=this.buffered.end(this.buffered.length-1)),this.buffered.remove(e,t)}var S=this.context,T=(0,b.default)(S).getInstance().log,C=(0,A.default)(S).getInstance(),L=!1,O=void 0,_=void 0,D=void 0,P=void 0,H=void 0,B=void 0,j=void 0,F=void 0,I=void 0,q=void 0,R=void 0,U=void 0,z=void 0,W=void 0,X=void 0,V=void 0,$=void 0,J=void 0,K=void 0,Q=void 0,G=void 0,Y=void 0,Z=void 0,et=void 0,tt=void 0,nt=void 0,rt=void 0;return{initialize:e,append:d,abort:t,addEmbeddedTrack:s,resetEmbedded:i,setConfig:a,getConfig:l,setCurrentFragmentedTrackIdx:h,remove:w}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(100),o=r(s),u=e(230),a=e(222),f=r(a),l=e(74),c=r(l),h=e(194),p=r(h),d=e(196),v=r(d),m=e(51),g=r(m),y=e(49),b=r(y),w=e(190),E=r(w),S=e(185),x=r(S),T=e(11),N=r(T),C=e(2),k=r(C),L=e(50),A=r(L),O=e(54),M=r(O);i.__dashjs_factory_name="TextSourceBuffer",n.default=g.default.getSingletonFactory(i),t.exports=n.default},{100:100,11:11,185:185,190:190,194:194,196:196,2:2,222:222,230:230,49:49,50:50,51:51,54:54,74:74}],190:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(_=window.VTTCue||window.TextTrackCue,P=[],H=[],B=-1,j=0,F=0,I=0,q=0,R=null,U=null,X=!1,V=2147483647,z=!!navigator.userAgent.match(/Chrome/)&&!navigator.userAgent.match(/Edge/),void 0!==document.fullscreenElement?W="fullscreenElement":void 0!==document.webkitIsFullScreen?W="webkitIsFullScreen":document.msFullscreenElement?W="msFullscreenElement":document.mozFullScreen&&(W="mozFullScreen"))}function t(e){var t=P[e].kind,n=void 0!==P[e].label?P[e].label:P[e].lang,r=P[e].lang,i=P[e].isTTML,s=P[e].isEmbedded,o=z?document.createElement("track"):D.addTextTrack(t,n,r);return z&&(o.kind=t,o.label=n,o.srclang=r),o.isEmbedded=s,o.isTTML=i,o}function n(e){X=e,R&&!document[W]&&(R.style.zIndex=e?V:null)}function r(e,n){if(P.length===n)return void M("Trying to add too many tracks.");if(P.push(e),P.length===n){P.sort(function(e,t){return e.index-t.index}),R=D.getTTMLRenderingDiv();for(var r=-1,i=0;i<P.length;i++){var s=t.call(this,i);H.push(s),P[i].defaultTrack&&(s.default=!0,r=i),z&&D.appendChild(s);var u=h(i);u&&(u.mode=o.default.TEXT_SHOWING,R&&(P[i].isTTML||P[i].isEmbedded)?u.renderingType="html":u.renderingType="default"),this.addCaptions(i,0,P[i].captionData),O.trigger(l.default.TEXT_TRACK_ADDED)}if(g.call(this,r),r>=0)for(var a=0;a<P.length;a++){var f=h(a);f&&(f.mode=a===r?o.default.TEXT_SHOWING:o.default.TEXT_HIDDEN)}O.trigger(l.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:B,tracks:P})}}function i(e,t,n,r,i,s){var o=e/t,u=n/r,a=0,f=0;o>u?(f=t,a=f/r*n):(a=e,f=a/n*r);var l=0,c=0,h=0,p=0;return a/f>i?(p=f,h=f*i):(h=a,p=a/i),l=(e-h)/2,c=(t-p)/2,s?{x:l+.1*h,y:c+.1*p,w:.8*h,h:.8*p}:{x:l,y:c,w:h,h:p}}function s(e){var t=D.getClientWidth(),n=D.getClientHeight(),r=D.getVideoWidth(),s=D.getVideoHeight(),o=D.getVideoRelativeOffsetTop(),u=D.getVideoRelativeOffsetLeft(),a=r/s,f=!1;e.isFromCEA608&&(a=3.5/3,f=!0);var l=i.call(this,t,n,r,s,a,f),c=l.w,h=l.h,p=l.x,d=l.y;if(c!=I||h!=q||p!=j||d!=F){j=p+u,F=d+o,I=c,q=h,R.style.left=j+"px",R.style.top=F+"px",R.style.width=I+"px",R.style.height=q+"px";for(var v=0;e.activeCues&&v<e.activeCues.length;++v){var m=e.activeCues[v];m.scaleCue(m)}W&&document[W]||X?R.style.zIndex=V:R.style.zIndex=null}}function u(e){var t=I,n=q,r=void 0,i=void 0,s=void 0,o=void 0,u=void 0;if(e.cellResolution){var a=[t/e.cellResolution[0],n/e.cellResolution[1]];if(e.linePadding)for(r in e.linePadding)if(e.linePadding.hasOwnProperty(r)){var l=e.linePadding[r];i=(l*a[0]).toString();for(var c=document.getElementsByClassName("spanPadding"),h=0;h<c.length;h++)c[h].style.cssText=c[h].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i),c[h].style.cssText=c[h].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}if(e.fontSize){for(r in e.fontSize)if(e.fontSize.hasOwnProperty(r)){"%"===e.fontSize[r][0]?s=e.fontSize[r][1]/100:"c"===e.fontSize[r][0]&&(s=e.fontSize[r][1]),i=(s*a[1]).toString(),u="defaultFontSize"!==r?document.getElementsByClassName(r):document.getElementsByClassName("paragraph");for(var p=0;p<u.length;p++)u[p].style.cssText=u[p].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}if(e.lineHeight)for(r in e.lineHeight)if(e.lineHeight.hasOwnProperty(r)){"%"===e.lineHeight[r][0]?o=e.lineHeight[r][1]/100:"c"===e.fontSize[r][0]&&(o=e.lineHeight[r][1]),i=(o*a[1]).toString(),u=document.getElementsByClassName(r);for(var d=0;d<u.length;d++)u[d].style.cssText=u[d].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}}}if(e.isd){var v=document.getElementById(e.cueID);v&&(R.removeChild(v),f(e))}}function f(e){var t=document.createElement("div");R.appendChild(t),(0,v.renderHTML)(e.isd,t,function(t){var n=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9])$/,r=/^#(.*)$/;if(n.test(t)){var i=n.exec(t),s=parseInt(i[4],10)-1,o=btoa(e.images[s]),u="data:image/png;base64,"+o;return u}if(r.test(t)){var i=r.exec(t),s=i[1],u="data:image/png;base64,"+e.embeddedImages[s];return u}return null},R.clientHeight,R.clientWidth),t.id=e.cueID}function c(e,t,n){var r=h(e),i=this;if(r&&n&&0!==n.length)for(var s in n){var a=void 0,l=n[s];r.cellResolution=l.cellResolution,r.isFromCEA608=l.isFromCEA608,"html"===l.type?(a=new _(l.start-t,l.end-t,""),a.cueHTMLElement=l.cueHTMLElement,a.isd=l.isd,a.images=l.images,a.embeddedImages=l.embeddedImages,a.cueID=l.cueID,a.scaleCue=u.bind(i),a.cellResolution=l.cellResolution,a.lineHeight=l.lineHeight,a.linePadding=l.linePadding,a.fontSize=l.fontSize,R.style.left=j+"px",R.style.top=F+"px",R.style.width=I+"px",R.style.height=q+"px",a.onenter=function(){r.mode===o.default.TEXT_SHOWING&&(this.isd?(f(this),M("Cue enter id:"+this.cueID)):(R.appendChild(this.cueHTMLElement),u.call(i,this)))},a.onexit=function(){for(var e=R.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&(M("Cue exit id:"+e[t].id),R.removeChild(e[t]))}):(a=new _(l.start-t,l.end-t,l.data),l.styles&&(void 0!==l.styles.align&&"align"in a&&(a.align=l.styles.align),void 0!==l.styles.line&&"line"in a&&(a.line=l.styles.line),void 0!==l.styles.position&&"position"in a&&(a.position=l.styles.position),void 0!==l.styles.size&&"size"in a&&(a.size=l.styles.size))),r.addCue(a)}}function h(e){return e>=0&&P[e]?D.getTextTrack(P[e].kind,P[e].label,P[e].lang,P[e].isTTML,P[e].isEmbedded):null}function p(){return B}function m(e){for(var t=-1,n=0;n<P.length;n++)if(P[n].label===e){t=n;break}return t}function g(e){if(e!==B){B=e;var t=h(B);y.call(this,t),U&&(clearInterval(U),U=null),t&&"html"===t.renderingType&&(s.call(this,t),U=setInterval(s.bind(this,t),500))}}function y(e){N.call(this),e&&"html"===e.renderingType?x.call(this):T.call(this)}function b(e){if(e.cues)for(var t=e.cues,n=t.length-1,r=n;r>=0;r--)e.removeCue(t[r])}function w(e){var t=h(e);t&&b(t)}function E(){for(var e=H?H.length:0,t=0;t<e;t++)if(z)D.removeChild(H[t]);else{var n=h(t);n&&(b.call(this,n),n.mode="disabled")}H=[],P=[],U&&(clearInterval(U),U=null),B=-1,N.call(this)}function S(e){D.removeChild(H[e]),H.splice(e,1)}function x(){if(z){var e=document.getElementById("native-cue-style");if(!e){e=document.createElement("style"),e.id="native-cue-style",document.head.appendChild(e);var t=e.sheet,n=D.getElement();n&&(n.id?t.insertRule("#"+n.id+"::cue {background: transparent}",0):0!==n.classList.length?t.insertRule("."+n.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0))}}}function T(){if(z){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}}function N(){if(R)for(;R.firstChild;)R.removeChild(R.firstChild)}function C(e){e&&e.videoModel&&(D=e.videoModel)}function k(e,t){var n=h(e);n&&n.mode!==t&&(n.mode=t)}function L(){return P[B]}var A=this.context,O=(0,a.default)(A).getInstance(),M=(0,d.default)(A).getInstance().log,_=void 0,D=void 0,P=void 0,H=void 0,B=void 0,j=void 0,F=void 0,I=void 0,q=void 0,R=void 0,U=void 0,z=void 0,W=void 0,X=void 0,V=void 0;return{initialize:e,displayCConTop:n,addTextTrack:r,addCaptions:c,getCurrentTrackIdx:p,setCurrentTrackIdx:g,getTrackIdxForId:m,getCurrentTrackInfo:L,setModeForTrackIdx:k,deleteCuesFromTrackIdx:w,deleteAllTextTracks:E,deleteTextTrack:S,setConfig:C}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(100),o=r(s),u=e(50),a=r(u),f=e(54),l=r(f),c=e(51),h=r(c),p=e(49),d=r(p),v=e(21);i.__dashjs_factory_name="TextTracks",n.default=h.default.getSingletonFactory(i),t.exports=n.default},{100:100,21:21,49:49,50:50,51:51,54:54}],191:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){u(),p=(0,h.default)(f).create({dashManifestModel:e.dashManifestModel,adapter:e.adapter,baseURLController:e.baseURLController,stream:e.stream})}function n(e){var t=p.getCurrentTrack();if(!t||t.segmentDuration<=0)return null;var n=Math.floor(e/t.segmentDuration),i=e%t.segmentDuration,s=Math.floor(i*t.tilesHor*t.tilesVert/t.segmentDuration),o=new l.default;return o.url=r(t,n),o.width=Math.floor(t.widthPerTile),o.height=Math.floor(t.heightPerTile),o.x=Math.floor(s%t.tilesHor)*t.widthPerTile,o.y=Math.floor(s/t.tilesHor)*t.heightPerTile,o}function r(e,t){var n=t+e.startNumber,r=(0,v.replaceTokenForTemplate)(e.templateUrl,"Number",n);return r=(0,v.replaceTokenForTemplate)(r,"Time",(n-1)*e.segmentDuration),r=(0,v.replaceTokenForTemplate)(r,"Bandwidth",e.bandwidth),(0,v.unescapeDollarsInTemplate)(r)}function i(e){p.setTrackByIndex(e)}function s(){return p.getCurrentTrackIndex()}function o(){var e=p.getTracks();if(!e||0===e.length)return[];var t=0;return e.map(function(e){var n=new d.default;return n.mediaType=a.default.IMAGE,n.qualityIndex=t++,n.bitrate=e.bitrate,n.width=e.width,n.height=e.height,n})}function u(){p&&p.reset()}var f=this.context,c=void 0,p=void 0;return c={get:n,setTrackByIndex:i,getCurrentTrackIndex:s,getBitrateList:o,reset:u},t(),c}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s),u=e(100),a=r(u),f=e(223),l=r(f),c=e(192),h=r(c),p=e(210),d=r(p),v=e(77);i.__dashjs_factory_name="ThumbnailController",n.default=o.default.getClassFactory(i),t.exports=n.default},{100:100,192:192,210:210,223:223,51:51,77:77}],192:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){c(),n()}function n(){if(w&&g&&y){var e=w?w.getStreamInfo():null;if(e){var t=y.getMediaInfoForType(e,o.default.IMAGE);if(t){var n=y.getDataForMedia(t);if(n){var i=g.getRepresentationsForAdaptation(n);i&&i.length>0&&i.forEach(function(e){e.segmentInfoType===a.default.SEGMENT_TEMPLATE&&e.segmentDuration>0&&e.media&&r(e)}),x.length>0&&(x.sort(function(e,t){return e.bitrate-t.bitrate}),T=x.length-1)}}}}}function r(e){var t=new h.default;t.id=e.id,t.bitrate=e.bandwidth,t.width=e.width,t.height=e.height,t.tilesHor=1,t.tilesVert=1,t.startNumber=e.startNumber,t.segmentDuration=e.segmentDuration,t.timescale=e.timescale,t.templateUrl=i(e),e.essentialProperties&&e.essentialProperties.forEach(function(e){if(e.schemeIdUri===m&&e.value){var n=e.value.split("x");2!==n.length||isNaN(n[0])||isNaN(n[1])||(t.tilesHor=parseInt(n[0],10),t.tilesVert=parseInt(n[1],10))}}),t.tilesHor>0&&t.tilesVert>0&&(t.widthPerTile=t.width/t.tilesHor,t.heightPerTile=t.height/t.tilesVert,x.push(t))}function i(e){var t=E.isRelative(e.media)?E.resolve(e.media,b.resolve(e.path).url):e.media;return t?(0,v.replaceIDForTemplate)(t,e.id):""}function s(){return x}function u(){return T}function f(){return T<0?null:x[T]}function l(e){x&&0!==x.length&&(e>=x.length&&(e=x.length-1),T=e)}function c(){x=[],T=-1}var p=this.context,g=e.dashManifestModel,y=e.adapter,b=e.baseURLController,w=e.stream,E=(0,d.default)(p).getInstance(),S=void 0,x=void 0,T=void 0;return S={initialize:t,getTracks:s,reset:c,setTrackByIndex:l,getCurrentTrack:f,getCurrentTrackIndex:u},t(),S}Object.defineProperty(n,"__esModule",{value:!0});var s=e(100),o=r(s),u=e(61),a=r(u),f=e(51),l=r(f),c=e(224),h=r(c),p=e(206),d=r(p),v=e(77),m="http://dashif.org/thumbnail_tile";i.__dashjs_factory_name="ThumbnailTracks",n.default=l.default.getClassFactory(i),t.exports=n.default},{100:100,206:206,224:224,51:51,61:61,77:77}],193:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){v=(0,l.default)(u).create({updateEventName:a.default.SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:a.default.SERVICE_LOCATION_BLACKLIST_ADD}),m=(0,d.default)(u).create({blacklistController:v}),b=(0,h.default)(u).create({blacklistController:v}),w=m}function t(e){e.selector&&(w=e.selector),e.dashManifestModel&&(c=e.dashManifestModel)}function n(){if(!c||!c.hasOwnProperty("getIsDVB"))throw new Error("Missing config parameter(s)")}function r(e){n(),w=c.getIsDVB(e)?b:m}function i(e){var t=e.baseUrls,n=e.selectedIdx;if(!isNaN(n))return t[n];var r=w.select(t);return r?(e.selectedIdx=t.indexOf(r),r):void f.trigger(a.default.URL_RESOLUTION_FAILED,{error:new Error(g,y)})}function s(){v.reset()}var u=this.context,f=(0,o.default)(u).getInstance(),c=void 0,p=void 0,v=void 0,m=void 0,b=void 0,w=void 0;return p={chooseSelectorFromManifest:r,select:i,reset:s,setConfig:t},e(),p}Object.defineProperty(n,"__esModule",{value:!0});var s=e(50),o=r(s),u=e(54),a=r(u),f=e(105),l=r(f),c=e(209),h=r(c),p=e(208),d=r(p),v=e(51),m=r(v),g=1,y="Failed to resolve a valid URL";i.__dashjs_factory_name="BaseURLSelector";var b=m.default.getClassFactory(i);b.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=g,b.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE=y,m.default.updateClassFactory(i.__dashjs_factory_name,b),n.default=b,t.exports=n.default},{105:105,208:208,209:209,50:50,51:51,54:54}],194:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var n=l.default.parseBuffer(e),r=(0,o.default)(t).create();return r.setData(n),r}var t=this.context;return{parse:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(201),o=r(s),u=e(51),a=r(u),f=e(11),l=r(f);i.__dashjs_factory_name="BoxParser",n.default=a.default.getSingletonFactory(i),t.exports=n.default},{11:11,201:201,51:51}],195:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){o=!1}function t(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t}function n(){return o}function r(e){o=e}function i(e){return!!("MediaSource"in window&&MediaSource.isTypeSupported(e))||!!("WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(e))}var s=void 0,o=void 0;return s={supportsMediaSource:t,supportsEncryptedMedia:n,supportsCodec:i,setEncryptedMediaSupported:r},e(),s}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s);i.__dashjs_factory_name="Capabilities",n.default=o.default.getSingletonFactory(i),t.exports=n.default},{51:51}],196:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t){var n=0;for(n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length}function t(){this.customTimeRangeArray=[],this.length=0}function n(e,t){for(var n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t)}this.length=this.customTimeRangeArray.length}function r(e,t){var n=this.customTimeRangeArray[e],r=this.customTimeRangeArray[t];return n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(n.end=r.end,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(n.start=r.start,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end&&(this.customTimeRangeArray.splice(t,1),!0)}function i(e){if(null===e||isNaN(e)||e%1!=0)throw new Error("index argument is not an integer")}function s(e){return i(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start}function o(e){return i(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}return{customTimeRangeArray:[],length:0,add:e,clear:t,remove:n,mergeRanges:r,start:s,end:o}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s);i.__dashjs_factory_name="CustomTimeRanges",n.default=o.default.getClassFactory(i),t.exports=n.default},{51:51}],197:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e){if(void 0!==x)return x;x=!1;var t="1",n="1",r=void 0;try{"undefined"!=typeof window&&(r=window[e])}catch(i){return w("Warning: DOMStorage access denied: "+i.message),x}if(!r||e!==h&&e!==p)return x;try{r.setItem(t,n),r.removeItem(t),x=!0}catch(i){w("Warning: DOMStorage is supported, but cannot be used: "+i.message)}return x}function n(){t(h)&&f.forEach(function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(n){w(n.message)}}})}function r(){n()}function i(){var e=6e5;return Math.round((new Date).getTime()/e)*e}function s(e,n){return t(e)&&E["get"+n+"CachingInfo"]().enabled}function o(){if(!E||!E.hasOwnProperty("getLastMediaSettingsCachingInfo"))throw new Error("Missing config parameter(s)")}function u(e){if(o(),!s(h,v))return null;var t=null,n=c.replace(/\?/,e);try{var r=JSON.parse(localStorage.getItem(n))||{},i=(new Date).getTime()-parseInt(r.timestamp,10)>=E.getLastMediaSettingsCachingInfo().ttl||!1;t=r.settings,i&&(localStorage.removeItem(n),t=null)}catch(u){return null}return t}function m(e){var t=NaN;if(o(),s(h,d)){var n=l.replace(/\?/,e);try{var r=JSON.parse(localStorage.getItem(n))||{},i=(new Date).getTime()-parseInt(r.timestamp,10)>=E.getLastMediaSettingsCachingInfo().ttl||!1,u=parseFloat(r.bitrate);isNaN(u)||i?i&&localStorage.removeItem(n):(t=u,w("Last saved bitrate for "+e+" was "+u))}catch(a){return null}}return t}function g(e,t){if(s(h,v)){var n=c.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({settings:t,timestamp:i()}))}catch(r){w(r.message)}}}function y(e,t){if(s(h,d)&&t){var n=l.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({bitrate:t.toFixed(3),timestamp:i()}))}catch(r){w(r.message)}}}e=e||{};var b=this.context,w=(0,a.default)(b).getInstance().log,E=e.mediaPlayerModel,S=void 0,x=void 0;return S={getSavedBitrateSettings:m,setSavedBitrateSettings:y,getSavedMediaSettings:u,setSavedMediaSettings:g},r(),S}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s),u=e(49),a=r(u),f=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],l="dashjs_?_bitrate",c="dashjs_?_settings",h="localStorage",p="sessionStorage",d="LastBitrate",v="LastMediaSettings";i.__dashjs_factory_name="DOMStorage";var m=o.default.getSingletonFactory(i);n.default=m,t.exports=n.default},{49:49,51:51}],198:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){return p}function n(e){p=e}function r(e,t){var n=!0,r=0,i=void 0,s=void 0;if(void 0===t&&(t=!1),e.tag>16777215?(h.getUint32(p)!==e.tag&&(n=!1),r=4):e.tag>65535?(i=h.getUint16(p),s=h.getUint8(p+2),256*i+s!==e.tag&&(n=!1),r=3):e.tag>255?(h.getUint16(p)!==e.tag&&(n=!1),r=2):(h.getUint8(p)!==e.tag&&(n=!1),r=1),!n&&e.required&&!t)throw new Error("required tag not found");return n&&(p+=r),n}function i(e,t){var n=r(e,t);return n&&u(),n}function s(e){var t=void 0;return r(e),t=u(),c[e.parse](t)}function o(e,t){var n=r(e,t),i=void 0;return n&&(i=u(),p+=i),n}function u(e){var t=1,n=128,r=8,i=-1,s=0,o=h.getUint8(p),u=0;for(u=0;u<r;u+=1){if((o&n)===n){s=void 0===e?o&~n:o,i=u;break}n>>=1}for(u=0;u<i;u+=1,t+=1)s=s<<8|255&h.getUint8(p+t);return p+=t,s}function a(e){var t=void 0;switch(e){case 4:t=h.getFloat32(p),p+=4;break;case 8:t=h.getFloat64(p),p+=8}return t}function f(e){for(var t=0,n=0;n<e;n+=1)t<<=8,t|=255&h.getUint8(p+n);return p+=e,t}function l(){return p<h.byteLength}e=e||{};var c=void 0,h=new DataView(e.data),p=0;return c={getPos:t,setPos:n,consumeTag:r,consumeTagAndSize:i,parseTag:s,skipOverElement:o,getMatroskaCodedNum:u,getMatroskaFloat:a,getMatroskaUint:f,moreData:l}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s);i.__dashjs_factory_name="EBMLParser",n.default=o.default.getClassFactory(i),t.exports=n.default},{51:51}],199:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){l.trigger(a.default.ERROR,{error:"capability",event:e})}function t(e,t,n){l.trigger(a.default.ERROR,{error:"download",event:{id:e,url:t,request:n}})}function n(e,t,n,r){l.trigger(a.default.ERROR,{error:"manifestError",event:{message:e,id:t,manifest:n,event:r}})}function r(e,t,n){l.trigger(a.default.ERROR,{error:"cc",event:{message:e,id:t,cc:n}})}function i(e){l.trigger(a.default.ERROR,{error:"mediasource",event:e})}function s(e){l.trigger(a.default.ERROR,{error:"key_session",event:e})}function u(e){l.trigger(a.default.ERROR,{error:"key_message",event:e})}var f=this.context,l=(0,o.default)(f).getInstance();return{capabilityError:e,downloadError:t,manifestError:n,timedTextError:r,mediaSourceError:i,mediaKeySessionError:s,mediaKeyMessageError:u}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(50),o=r(s),u=e(54),a=r(u),f=e(51),l=r(f),c="mediasource",h="mediakeys",p="manifest",d="SIDX",v="content",m="initialization",g="xlink",y="codec",b="parse",w="nostreams",E="parse";i.__dashjs_factory_name="ErrorHandler";var S=l.default.getSingletonFactory(i);S.CAPABILITY_ERROR_MEDIASOURCE=c,S.CAPABILITY_ERROR_MEDIAKEYS=h,S.DOWNLOAD_ERROR_ID_MANIFEST=p,S.DOWNLOAD_ERROR_ID_SIDX=d,S.DOWNLOAD_ERROR_ID_CONTENT=v,S.DOWNLOAD_ERROR_ID_INITIALIZATION=m,S.DOWNLOAD_ERROR_ID_XLINK=g,S.MANIFEST_ERROR_ID_CODEC=y,S.MANIFEST_ERROR_ID_PARSE=b,S.MANIFEST_ERROR_ID_NOSTREAMS=w,S.TIMED_TEXT_ERROR_ID_PARSE=E,l.default.updateSingletonFactory(i.__dashjs_factory_name,S),n.default=S,t.exports=n.default},{50:50,51:51,54:54}],200:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){var t=e.streamId,n=e.representationId;r[t]=r[t]||{},r[t][n]=e}function t(e,t){return r&&r[e]&&r[e][t]?r[e][t]:null}function n(){r={}}var r={};return{save:e,extract:t,reset:n}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s);i.__dashjs_factory_name="InitCache",n.default=o.default.getSingletonFactory(i),t.exports=n.default},{51:51}],201:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){return e&&s&&s.boxes&&0!==s.boxes.length&&"function"==typeof s.fetch?i(s.fetch(e)):null}function t(e){var t=[];if(!e||!s||"function"!=typeof s.fetchAll)return t;for(var n=s.fetchAll(e),r=void 0,o=0,u=n.length;o<u;o++)(r=i(n[o]))&&t.push(r);return t}function n(e){s=e}function r(){if(!s||!s.boxes||!s.boxes.length)return null;var e=s.boxes[s.boxes.length-1].type,n=t(e);return n.length>0?n[n.length-1]:null}function i(e){if(!e)return null;var t=new o.default(e);return e.hasOwnProperty("_incomplete")&&(t.isComplete=!e._incomplete),t}var s=void 0;return{getBox:e,getBoxes:t,setData:n,getLastBox:r}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(215),o=r(s),u=e(51),a=r(u);i.__dashjs_factory_name="IsoFile",n.default=a.default.
getClassFactory(i),t.exports=n.default},{215:215,51:51}],202:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){if(!(i&&i.hasOwnProperty("getExpectedLiveEdge")&&s&&s.hasOwnProperty("getCurrentRepresentationInfo")))throw new Error("Missing config parameter(s)")}function n(){t();var e=s.getCurrentRepresentationInfo(),n=e.DVRWindow.end;return e.useCalculatedLiveEdgeTime&&(n=i.getExpectedLiveEdge(),i.setClientTimeOffset(n-e.DVRWindow.end)),n}function r(){i=null,s=null}e=e||{};var i=e.timelineConverter,s=e.streamProcessor;return{getLiveEdge:n,reset:r}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s);i.__dashjs_factory_name="LiveEdgeFinder",n.default=o.default.getClassFactory(i),t.exports=n.default},{51:51}],203:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t){return(0,a.default)(e,t)}return{areEqual:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s),u=e(13),a=r(u);i.__dashjs_factory_name="ObjectUtils",n.default=o.default.getSingletonFactory(i),t.exports=n.default},{13:13,51:51}],204:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){return e}function t(e){return e}return{modifyRequestURL:e,modifyRequestHeader:t}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s);i.__dashjs_factory_name="RequestModifier",n.default=o.default.getSingletonFactory(i),t.exports=n.default},{51:51}],205:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){var e="cue_TTML_"+o;return o++,e}function t(t,n,r,s,o){var u=void 0,a=void 0,l="",c=[],h=void 0,p=void 0,d={},v="",m="",g={onOpenTag:function(e,t,n){if("image"===t&&"http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===e){if(!n[" imagetype"]||"PNG"!==n[" imagetype"].value)return void i("Warning: smpte-tt imagetype != PNG. Discarded");v=n["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){v&&(d[v]=m.trim()),m="",v=""},onText:function(e){v&&(m+=e)}};if(!t)throw l="no ttml data to parse",new Error(l);var y=(0,f.fromXML)(t,function(e){l=e},g),b=y.getMediaTimeEvents();for(u=0;u<b.length;u++){var w=(0,f.generateISD)(y,b[u],function(e){l=e});for(a=0;a<w.contents.length;a++)w.contents[a].contents.length>=1&&(h=b[u]+n<r?r:b[u]+n,p=b[u+1]+n>s?s:b[u+1]+n,h<p&&c.push({start:h,end:p,type:"html",cueID:e(),isd:w,images:o,embeddedImages:d}))}if(""!==l&&i(l),c.length>0)return c;throw new Error(l)}function n(){}var r=this.context,i=(0,a.default)(r).getInstance().log,s=void 0,o=0;return s={parse:t},n(),s}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s),u=e(49),a=r(u),f=e(21);i.__dashjs_factory_name="TTMLParser",n.default=o.default.getSingletonFactory(i),t.exports=n.default},{21:21,49:49,51:51}],206:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){try{new window.URL("x","http://y"),l=v}catch(e){}finally{l=l||m}}function t(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return-1!==t?n===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,n+1)):""}function n(e){var t=e.match(d);return t?t[1]:""}function r(e){var t=e.match(c);return t?t[0]:""}function i(e){return!c.test(e)}function s(e){return i(e)&&"/"===e.charAt(0)}function o(e){return 0===e.indexOf("//")}function u(e){return h.test(e)}function a(e){return p.test(e)}function f(e,t){return l(e,t)}var l=void 0,c=/^[a-z][a-z0-9+\-.]*:/i,h=/^https?:\/\//i,p=/^https:\/\//i,d=/^([a-z][a-z0-9+\-.]*:\/\/[^\/]+)\/?/i,v=function(e,t){try{return(new window.URL(e,t)).toString()}catch(n){return e}},m=function(e,u){var a=t;if(!u)return e;if(!i(e))return e;s(e)&&(a=n),o(e)&&(a=r);var f=a(u);return[f,e].join("/"!==f.charAt(f.length-1)&&"/"!==e.charAt(0)?"/":"")};return e(),{parseBaseUrl:t,parseOrigin:n,parseScheme:r,isRelative:i,isPathAbsolute:s,isSchemeRelative:o,isHTTPURL:u,isHTTPS:a,resolve:f}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s);i.__dashjs_factory_name="URLUtils",n.default=o.default.getSingletonFactory(i),t.exports=n.default},{51:51}],207:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){c=/(?:\r\n|\r|\n)/gm,h=/-->/,p=/(^[\s]+|[\s]+$)/g,d=/\s\b/g}function t(e){var t=[],i=void 0,o=void 0;if(!e)return t;e=e.split(c),i=e.length,o=-1;for(var a=0;a<i;a++){var l=e[a];if(l.length>0&&l!==f&&l.match(h)){var d=r(l),v=d.cuePoints,m=d.styles,g=s(e,a+1),y=n(v[0].replace(p,"")),b=n(v[1].replace(p,""));!isNaN(y)&&!isNaN(b)&&y>=o&&b>y?""!==g?(o=y,t.push({start:y,end:b,data:g,styles:m})):u("Skipping cue due to empty/malformed cue text"):u("Skipping cue due to incorrect cue timing")}}return t}function n(e){var t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2===n&&(e+=3600*parseInt(t[0],10)),e}function r(e){var t=e.split(h),n=t[1].split(d);return n.shift(),t[1]=n[0],n.shift(),{cuePoints:t,styles:i(n)}}function i(e){var t={};return e.forEach(function(e){if(e.split(/:/).length>1){var n=e.split(/:/)[1];n&&-1!=n.search(/%/)&&(n=parseInt(n.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(t.align=n),(e.match(/line/)||e.match(/L/))&&(t.line=n),(e.match(/position/)||e.match(/P/))&&(t.position=n),(e.match(/size/)||e.match(/S/))&&(t.size=n)}}),t}function s(e,t){for(var n=t,r="",i="",s=void 0;""!==e[n]&&n<e.length;)n++;if((s=n-t)>1)for(var o=0;o<s;o++){if(i=e[t+o],i.match(h)){r="";break}r+=i,o!==s-1&&(r+="\n")}else i=e[t],i.match(h)||(r=i);return r}var o=this.context,u=(0,a.default)(o).getInstance().log,l=void 0,c=void 0,h=void 0,p=void 0,d=void 0;return l={parse:t},e(),l}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s),u=e(49),a=r(u),f="WEBVTT";i.__dashjs_factory_name="VTTParser",n.default=o.default.getSingletonFactory(i),t.exports=n.default},{49:49,51:51}],208:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e){var t=0,r=void 0;return e&&e.some(function(e,r){return t=r,!n.contains(e.serviceLocation)})&&(r=e[t]),r}e=e||{};var n=e.blacklistController;return{select:t}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s);i.__dashjs_factory_name="BasicSelector",n.default=o.default.getClassFactory(i),t.exports=n.default},{51:51}],209:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e){var t=[],n=function(e){return!t.length||!e.dvb_priority||-1===t.indexOf(e.dvb_priority)},r=function(e){return!i.contains(e.serviceLocation)||(e.dvb_priority&&t.push(e.dvb_priority),!1)};return e.filter(r).filter(n)}function n(e){var t=function(e,t){var n=e.dvb_priority-t.dvb_priority;return isNaN(n)?0:n},n=function(e,t,n){return!t||n[0].dvb_priority&&e.dvb_priority&&n[0].dvb_priority===e.dvb_priority},r=0,i=[],s=0,o=void 0,u=void 0;if(u=e.sort(t).filter(n),u.length)return u.length>1&&(u.forEach(function(e){r+=e.dvb_weight,i.push(r)}),o=Math.floor(Math.random()*(r-1)),i.every(function(e,t){return s=t,!(o<e)})),u[s]}function r(e){return e&&n(t(e))}e=e||{};var i=e.blacklistController;return{select:r}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(51),o=r(s);i.__dashjs_factory_name="DVBSelector",n.default=o.default.getClassFactory(i),t.exports=n.default},{51:51}],210:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN};n.default=i,t.exports=n.default},{}],211:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(e,t,n){r(this,s),this.code=e||null,this.message=t||null,this.data=n||null};n.default=i,t.exports=n.default},{}],212:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null};n.default=i,t.exports=n.default},{}],213:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.action=s.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null};i.ACTION_DOWNLOAD="download",i.ACTION_COMPLETE="complete",n.default=i,t.exports=n.default},{}],214:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(e,t,n){for(var r=!0;r;){var i=e,s=t,o=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,s);if(void 0!==u){if("value"in u)return u.value;var a=u.get;if(void 0===a)return;return a.call(o)}var f=Object.getPrototypeOf(i);if(null===f)return;e=f,t=s,n=o,r=!0,u=f=void 0}},u=e(213),a=r(u),f=function(e){function t(e){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.url=e||null,this.checkForExistenceOnly=!0}return s(t,e),t}(a.default);n.default=f,t.exports=n.default},{213:213}],215:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(t){if(r(this,e),this.offset=t._offset,this.type=t.type,this.size=t.size,this.boxes=[],t.boxes)for(var n=0;n<t.boxes.length;n++)this.boxes.push(new e(t.boxes[n]));switch(this.isComplete=!0,t.type){case"sidx":if(this.timescale=t.timescale,this.earliest_presentation_time=t.earliest_presentation_time,this.first_offset=t.first_offset,this.references=t.references,t.references){this.references=[];for(var n=0;n<t.references.length;n++){var i={reference_type:t.references[n].reference_type,referenced_size:t.references[n].referenced_size,subsegment_duration:t.references[n].subsegment_duration};this.references.push(i)}}break;case"emsg":this.id=t.id,this.value=t.value,this.timescale=t.timescale,this.scheme_id_uri=t.scheme_id_uri,this.presentation_time_delta=t.presentation_time_delta,this.event_duration=t.event_duration,this.message_data=t.message_data;break;case"mdhd":this.timescale=t.timescale;break;case"mfhd":this.sequence_number=t.sequence_number;break;case"subs":this.entry_count=t.entry_count,this.entries=t.entries;break;case"tfhd":this.base_data_offset=t.base_data_offset,this.sample_description_index=t.sample_description_index,this.default_sample_duration=t.default_sample_duration,this.default_sample_size=t.default_sample_size,this.default_sample_flags=t.default_sample_flags,this.flags=t.flags;break;case"tfdt":this.version=t.version,this.baseMediaDecodeTime=t.baseMediaDecodeTime,this.flags=t.flags;break;case"trun":if(this.sample_count=t.sample_count,this.first_sample_flags=t.first_sample_flags,this.data_offset=t.data_offset,this.flags=t.flags,this.samples=t.samples,t.samples){this.samples=[];for(var n=0,s=t.samples.length;n<s;n++){var o={sample_size:t.samples[n].sample_size,sample_duration:t.samples[n].sample_duration,sample_composition_time_offset:t.samples[n].sample_composition_time_offset};this.samples.push(o)}}}}return i(e,[{key:"getChildBox",value:function(e){for(var t=0;t<this.boxes.length;t++)if(this.boxes[t].type===e)return this.boxes[t]}},{key:"getChildBoxes",value:function(e){for(var t=[],n=0;n<this.boxes.length;n++)this.boxes[n].type===e&&t.push(this.boxes[n]);return t}}]),e}();n.default=s,t.exports=n.default},{}],216:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null};n.default=i,t.exports=n.default},{}],217:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null};n.default=i,t.exports=n.default},{}],218:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]};n.default=i,t.exports=n.default},{}],219:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null};n.default=i,t.exports=n.default},{}],220:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0};n.default=i,t.exports=n.default},{}],221:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(e,t,n){for(var r=!0;r;){var i=e,s=t,o=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,s);if(void 0!==u){if("value"in u)return u.value;var a=u.get;if(void 0===a)return;return a.call(o)}var f=Object.getPrototypeOf(i);if(null===f)return;e=f,t=s,n=o,r=!0,u=f=void 0}},u=e(100),a=r(u),f=e(213),l=r(f),c=function(e){function t(e,n){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.url=e||null,this.type=n||null,this.mediaType=a.default.STREAM,this.responseType=a.default.TEXT}return s(t,e),t}(l.default);n.default=c,t.exports=n.default},{100:100,213:213}],222:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1};n.default=i,t.exports=n.default},{}],223:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null};n.default=i,t.exports=n.default},{}],224:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""};n.default=i,t.exports=n.default},{}],225:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null};n.default=i,t.exports=n.default},{}],226:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.t=null,this.level=null};n.default=i,t.exports=n.default},{}],227:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=e(106),o=r(s),u=function a(){i(this,a),this.target=null,this.state=o.default.BUFFER_EMPTY};n.default=u,t.exports=n.default},{106:106}],228:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.time=null,this.range=null,this.manifestInfo=null};n.default=i,t.exports=n.default},{}],229:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.time=null,this.droppedFrames=null};n.default=i,t.exports=n.default},{}],230:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null},s=function u(){r(this,u),this.s=null,this.d=null,this.b=[]};i.GET="GET",i.HEAD="HEAD",i.MPD_TYPE="MPD",i.XLINK_EXPANSION_TYPE="XLinkExpansion",i.INIT_SEGMENT_TYPE="InitializationSegment",i.INDEX_SEGMENT_TYPE="IndexSegment",i.MEDIA_SEGMENT_TYPE="MediaSegment",i.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",i.OTHER_TYPE="other",n.HTTPRequest=i,n.HTTPRequestTrace=s},{}],231:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function u(){r(this,u),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},s=function a(){r(this,a),this.id=null,this.index=null,this.start=null,this.duration=null},o=function f(){r(this,f),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null};n.ManifestUpdate=i,n.ManifestUpdateStreamInfo=s,n.ManifestUpdateRepresentationInfo=o},{}],232:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};i.INITIAL_PLAYOUT_START_REASON="initial_playout",i.SEEK_START_REASON="seek",i.RESUME_FROM_PAUSE_START_REASON="resume",i.METRICS_COLLECTION_START_REASON="metrics_collection_start";var s=function u(){r(this,u),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};s.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",s.REBUFFERING_REASON="rebuffering",s.USER_REQUEST_STOP_REASON="user_request",s.END_OF_PERIOD_STOP_REASON="end_of_period",s.END_OF_CONTENT_STOP_REASON="end_of_content",s.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",s.FAILURE_STOP_REASON="failure",n.PlayList=i,n.PlayListTrace=s},{}],233:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.t=null,this.mt=null,this.to=null,this.lto=null};n.default=i,t.exports=n.default},{}],234:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.loadingRequests=[],this.executedRequests=[]};n.default=i,t.exports=n.default},{}],235:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null};n.default=i,t.exports=n.default},{}],236:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(){r(this,s),this.tcpid=null,this.dest=null,this.topen=null,this.tclose=null,this.tconnect=null};n.default=i,t.exports=n.default},{}]},{},[5]),function(e){e.videoLifecycleManager={onPageLoad:function(){$(window).on("beforeunload",function(e){this.onBeforePageUnload()}.bind(this)),e.hooks.get("expando-pre-init").register(function(){$(document.body).on("expando:create",function(e){e.expando.$el.on("expando:hide",function(e){var t=e.expando.$expando.find(RedditVideoPlayer.DOM_SELECTOR);if(t.size()==1){var n=$(t).data("video-player-object");this.onVideoExpandoHide(n)}}.bind(this))}.bind(this))}.bind(this))},onBeforePageUnload:function(){$(window).off("beforeunload");var e=location.href,t=document.activeElement.href;$(RedditVideoPlayer.DOM_SELECTOR).each(function(n,r){var i=$(r).data("video-player-object");e!=t&&(this.fireChangePageTypeEvent(i),this.urlIsCommentsPageForVideo(t,i)||this.fireServedVideoEvent(i))}.bind(this))},onVideoExpandoHide:function(e){this.fireServedVideoEvent(e)},fireChangePageTypeEvent:function(e){this.fireVideoLifecycleEvent("change","pagetype",e)},fireServedVideoEvent:function(e){this.fireVideoLifecycleEvent("served","video",e)},fireVideoLifecycleEvent:function(t,n,i){var s="videoplayer",o=i.maxPlayed*1e3,u=i.duration*1e3,a=i.currentTime*1e3,f=$(i.root).closest(".pinnable-content"),l=$(i.root).closest(".thing.link"),c=l.data(),h={maxTimestampServed:parseInt(o),percentServed:o/u,duration:parseInt(u),time:parseInt(a),isNsfw:l.hasClass("over18"),isSpoiler:l.hasClass("spoiler"),isPinned:f.hasClass("pinned"),isVertical:i.orientation===RedditVideoPlayer.Orientations.PORTRAIT,firstFrameTime:i.firstFrameTime,loadStartTime:i.loadStartTime};e.analytics.videoPlayerEvent(s,t,n,c,h)},urlIsCommentsPageForVideo:function(e,t){var n=!1;if(e!=null&&t!=null){var r=e.split("/");if(t.options.id!=null)for(var i=0;i<r.length;i++)if(t.options.id==r[i]){n=!0;break}}return n}},e.videoLifecycleManager.onPageLoad()}(window.r||{});var RedditVideoPlayer=function(e,t,n){this.root=$(e),this.root.empty(),this.root.addClass(RedditVideoPlayer.CLASS_NAME),t=typeof t=="object"?t:{},this.options=_.defaults(t,RedditVideoPlayer.DEFAULT_OPTIONS),this.storageNamespace=n||RedditVideoPlayer.DEFAULT_STORAGE_NAMESPACE,this._paused=!this.options.autoplay;var i=_.pick(this.options,RedditVideoPlayer.VIDEO_ATTRIBUTES);this.video=$("<video>").attr(i),this.options.playsinline&&this.video.attr("webkit-playsinline",!0),r.utils.isMobile()&&this.video.addClass("mobile"),this.poster=this.options.poster!=null?$("<img>").attr("src",this.options.poster):null,this.controls=$("<div>"),this.options.uiControls||this.controls.css("display","none"),this.root.append(this.video,this.poster,this.controls),this.root.on("videoAction",function(e,t){this.doAction(t.action,t.value,t.eventExtras)}.bind(this)),this.options.poster!=null&&this.poster.on("click",function(e){this.play(),e.stopPropagation()}.bind(this)),this.video.on("ended",function(e){this.notifyActionCompleted(RedditVideoPlayer.Actions.PAUSE)}.bind(this)),this.options.controls||this.root.on("click",function(e){switch(this.options.clickAction){case RedditVideoPlayer.ClickActions.PLAY_PAUSE:var t={verb:"click"};this.paused?(t.noun="play",this.play(t)):(t.noun="pause",this.pause(t));break;case RedditVideoPlayer.ClickActions.NONE:this.noAction();break;default:console.warn("Invalid click action:",this.options.clickAction)}e.stopPropagation()}.bind(this)),this.uiControllers=[],this.actionCompletedCallbacks=[],this.isFullscreen=!1,this.options.type===RedditVideoPlayer.Types.MPD?this._initializeDashPlayer():this._initializeNativePlayer(),this._defineProperties(),this._prepareAnalytics(),this._prepareFullscreen(),this.options.enableStorage&&this._prepareLocalStorage()};RedditVideoPlayer.CLASS_NAME="reddit-video-player-root",RedditVideoPlayer.DOM_SELECTOR="."+RedditVideoPlayer.CLASS_NAME,RedditVideoPlayer.DEFAULT_STORAGE_NAMESPACE="default_reddit_video_pool",RedditVideoPlayer.DEFAULT_VOLUME=1,RedditVideoPlayer.DEFAULT_MUTED=!0,RedditVideoPlayer.DEFAULT_CURSOR_TIMEOUT=3e3,RedditVideoPlayer.Orientations={LANDSCAPE:"landscape",PORTRAIT:"portrait"},RedditVideoPlayer.Types={MPD:"mpd",HLS:"hls",NATIVE:"native"},RedditVideoPlayer.ClickActions={PLAY_PAUSE:"play_pause",NONE:"none"},RedditVideoPlayer.DEFAULT_OPTIONS={id:null,linkUrl:null,src:null,poster:null,autoplay:!1,loop:!1,controls:!1,orientation:RedditVideoPlayer.Orientations.PORTRAIT,type:RedditVideoPlayer.Types.MPD,muted:RedditVideoPlayer.DEFAULT_MUTED,volume:RedditVideoPlayer.DEFAULT_VOLUME,clickAction:RedditVideoPlayer.ClickActions.PLAY_PAUSE,playsinline:!0,enableStorage:!0,uiControls:!0},RedditVideoPlayer.VIDEO_ATTRIBUTES=["autoplay","loop","controls","playsinline"],RedditVideoPlayer.Actions={PLAY:"play",PAUSE:"pause",REPLAY:"replay",MUTE:"mute",UNMUTE:"unmute",FULLSCREEN_REQUEST:"fullscreenRequest",FULLSCREEN_CANCEL:"fullscreenCancel",FULLSCREEN_TOGGLE:"fullscreenToggle",SET_VOLUME:"setVolume",SET_CURRENT_TIME:"setCurrentTime",SEEK_JUMP:"seekJump",SET_RESOLUTION:"setResolution",SET_ASPECT_RATIO:"setAspectRatio",SET_LAST_VOLUME:"setLastVolume",NONE:"none"},RedditVideoPlayer.prototype._prepareLocalStorage=function(){if(typeof localStorage!="undefined"){var e=localStorage.getItem(this.storageNamespace+".volume")||this.options.volume,t=localStorage.getItem(this.storageNamespace+".muted")||this.options.muted;this._lastVolume=parseFloat(e),t.toString().toLowerCase()=="true"?this.mute():this.unmute()}},RedditVideoPlayer.prototype._prepareAnalytics=function(){this._maxTime=0,this.video.on("timeupdate",function(){this._maxTime=Math.max(this._maxTime,this.video[0].currentTime)}.bind(this))},RedditVideoPlayer.prototype._prepareFullscreen=function(){function e(){this.root.css("cursor","none")}function t(){this.root.css("cursor","auto")}function r(){n=setTimeout(e.bind(this),RedditVideoPlayer.DEFAULT_CURSOR_TIMEOUT)}function i(){this.root.css("cursor","auto"),n!==null&&clearTimeout(n),r.call(this)}function s(){var e=this.isFullScreen?RedditVideoPlayer.Actions.FULLSCREEN_CANCEL:RedditVideoPlayer.Actions.FULLSCREEN_REQUEST;this.isFullScreen=!this.isFullScreen,this.isFullScreen?(this.root.addClass("is-fullscreen"),r.call(this),this.root.on("mousemove",i.bind(this))):(this.root.removeClass("is-fullscreen"),clearTimeout(n),t.call(this),this.root.off("mousemove",i.bind(this)));var s={};this.isFullScreen&&(s.verb="click",s.noun="fullscreen"),this.notifyActionCompleted(e,null,s)}var n=null;document.addEventListener("fullscreenchange",s.bind(this)),document.addEventListener("webkitfullscreenchange",s.bind(this)),document.addEventListener("mozfullscreenchange",s.bind(this)),document.addEventListener("MSFullscreenChange",s.bind(this))},RedditVideoPlayer.prototype._initializeDashPlayer=function(){"MediaSource"in window?(this.dashPlayer=dashjs.MediaPlayer().create(),this.dashPlayer.getDebug().setLogToBrowserConsole(!1),this.dashPlayer.initialize(this.video[0],this.options.src,this.options.autoplay),this.dashPlayer.setInitialBitrateFor("video",999999999),this.dashPlayer.setFastSwitchEnabled(!0),this.loadStartTime=performance.now(),this.dashPlayer.on(dashjs.MediaPlayer.events.STREAM_INITIALIZED,function(){this.firstFrameTime=performance.now()-this.loadStartTime,this.bitrateOptions=this.dashPlayer.getBitrateInfoListFor("video"),this._onDashStreamInitialized()}.bind(this))):console.warn("Unable to play video: Media Source Extensions are not supported in this browser.")},RedditVideoPlayer.prototype._initializeNativePlayer=function(){this.video.attr("src",this.options.src),this.video[0].load(),this._paused=!this.options.autoplay},RedditVideoPlayer.prototype._onDashStreamInitialized=function(){this.uiControllers.forEach(function(e){e.notifyBitrateOptions(this.bitrateOptions)}.bind(this))},RedditVideoPlayer.prototype._defineProperties=function(){Object.defineProperty(this,"duration",{get:function(){return this.video[0].duration}.bind(this)}),Object.defineProperty(this,"currentTime",{get:function(){return this.video[0].currentTime}.bind(this)}),Object.defineProperty(this,"videoWidth",{get:function(){return this.video[0].videoWidth}.bind(this)}),Object.defineProperty(this,"videoHeight",{get:function(){return this.video[0].videoHeight}.bind(this)}),Object.defineProperty(this,"muted",{get:function(){return this.video[0].muted}.bind(this)}),Object.defineProperty(this,"volume",{get:function(){return this.video[0].volume}.bind(this)}),Object.defineProperty(this,"paused",{get:function(){return this._paused}.bind(this)}),Object.defineProperty(this,"maxPlayed",{get:function(){return this._maxTime}.bind(this)}),Object.defineProperty(this,"lastVolume",{get:function(){return this._lastVolume}.bind(this)}),Object.defineProperty(this,"orientation",{get:function(){return this.videoWidth<this.videoHeight?RedditVideoPlayer.Orientations.PORTRAIT:RedditVideoPlayer.Orientations.LANDSCAPE}.bind(this)}),Object.defineProperty(this,"videoQuality",{get:function(){return this.dashPlayer.getQualityFor("video")}.bind(this)})},RedditVideoPlayer.prototype.setSrc=function(e){return this.options.src=e,this.type===RedditVideoPlayer.Types.MPD?this.dashPlayer.attachSource(e):(this.video.attr("src",e),this.video[0].load()),this._paused=!this.options.autoplay,this},RedditVideoPlayer.prototype.getSrc=function(){return this.options.src},RedditVideoPlayer.prototype.addUiController=function(e){return e.attach(this),this.uiControllers.push(e),this},RedditVideoPlayer.prototype.removeUiController=function(e){var t=this.uiControllers.indexOf(e);return t!=-1?this.uiControllers.splice(t,1):console.warn("Warning: UI Controller not attached."),this},RedditVideoPlayer.prototype.play=function(e){this.poster!=null&&(this.poster.remove(),this.poster=null),this._paused=!1,this.video[0].play(),this.notifyActionCompleted(RedditVideoPlayer.Actions.PLAY,null,e)},RedditVideoPlayer.prototype.pause=function(e){this._paused=!0,this.video[0].pause
(),this.notifyActionCompleted(RedditVideoPlayer.Actions.PAUSE,null,e)},RedditVideoPlayer.prototype.replay=function(e){this.setCurrentTime(0),this.play(),this.notifyActionCompleted(RedditVideoPlayer.Actions.REPLAY,null,e)},RedditVideoPlayer.prototype.setVolume=function(e,t){if(this.volume==e)return;if(this.video[0].muted){this.unmute();return}if(e==0){this.mute();return}this.video[0].volume=e,typeof localStorage!="undefined"&&localStorage.getItem(this.storageNamespace+".volume")!=e&&localStorage.setItem(this.storageNamespace+".volume",e),this.notifyActionCompleted(RedditVideoPlayer.Actions.SET_VOLUME,e,t)},RedditVideoPlayer.prototype.setCurrentTime=function(e,t){this.video[0].currentTime=e,this.notifyActionCompleted(RedditVideoPlayer.Actions.SET_CURRENT_TIME,e,t)},RedditVideoPlayer.prototype.seekJump=function(e,t){e=parseInt(e);var n=this.video[0].currentTime+e;n<0&&(n=0),n>this.video[0].duration&&(n=this.video[0].duration),this.video[0].currentTime=n,this.notifyActionCompleted(RedditVideoPlayer.Actions.SEEK_JUMP,e,t)},RedditVideoPlayer.prototype.mute=function(e){this.video[0].muted=!0,this.video[0].volume=0,typeof localStorage!="undefined"&&localStorage.getItem(this.storageNamespace+".muted")!="true"&&localStorage.setItem(this.storageNamespace+".muted",!0),this.notifyActionCompleted(RedditVideoPlayer.Actions.MUTE,null,e)},RedditVideoPlayer.prototype.unmute=function(e){this.video[0].muted=!1;var t=this.lastVolume;this.video[0].volume=t,typeof localStorage!="undefined"&&localStorage.getItem(this.storageNamespace+".muted")!="false"&&localStorage.setItem(this.storageNamespace+".muted",!1),this.notifyActionCompleted(RedditVideoPlayer.Actions.UNMUTE,null,e)},RedditVideoPlayer.prototype.setLastVolume=function(e){this._lastVolume=e,typeof localStorage!="undefined"&&localStorage.getItem(this.storageNamespace+".volume")!=e&&localStorage.setItem(this.storageNamespace+".volume",e),this.notifyActionCompleted(RedditVideoPlayer.Actions.SET_LAST_VOLUME,e)},RedditVideoPlayer.prototype.toggleFullScreen=function(e){if(r.utils.isIOS())var t=this.video.get(0);else var t=this.root.get(0);var n=t.requestFullscreen||t.webkitRequestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitEnterFullscreen,i=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen;this.isFullScreen?i.call(document):n.call(t)},RedditVideoPlayer.prototype.noAction=function(){this.notifyActionCompleted(RedditVideoPlayer.Actions.NONE)},RedditVideoPlayer.prototype.setClickAction=function(e){this.options.clickAction=e},RedditVideoPlayer.prototype.setResolution=function(e,t){if(this.bitrateOptions!=null){if(!isNaN(e)){e=parseInt(e),this.dashPlayer.setAutoSwitchQualityFor("video",!1),this.dashPlayer.setQualityFor("video",e),this.notifyActionCompleted(RedditVideoPlayer.Actions.SET_RESOLUTION,this.bitrateOptions[e].height,t);return}this.dashPlayer.setAutoSwitchQualityFor("video",!0),this.notifyActionCompleted(RedditVideoPlayer.Actions.SET_RESOLUTION,"auto",t)}},RedditVideoPlayer.prototype.setAspectRatio=function(e){var t=e*100;this.root.append("<style>"+this.root.selector+":after{ padding-top: "+t+"%; }</style>"),this.notifyActionCompleted(RedditVideoPlayer.Actions.SET_ASPECT_RATIO,e)},RedditVideoPlayer.prototype.notifyActionCompleted=function(e,t,n){this.uiControllers.forEach(function(n){n.onActionCompleted(e,t)}),this.actionCompletedCallbacks.forEach(function(r){r.call(this,e,t,n)}.bind(this))},RedditVideoPlayer.prototype.doAction=function(e,t,n){switch(e){case RedditVideoPlayer.Actions.PLAY:this.play(n);break;case RedditVideoPlayer.Actions.PAUSE:this.pause(n);break;case RedditVideoPlayer.Actions.REPLAY:this.replay(n);break;case RedditVideoPlayer.Actions.MUTE:this.mute(n);break;case RedditVideoPlayer.Actions.UNMUTE:this.unmute(n);break;case RedditVideoPlayer.Actions.SEEK_JUMP:this.seekJump(t,n);break;case RedditVideoPlayer.Actions.SET_CURRENT_TIME:this.setCurrentTime(t,n);break;case RedditVideoPlayer.Actions.SET_VOLUME:this.setVolume(t,n);break;case RedditVideoPlayer.Actions.FULLSCREEN_REQUEST:case RedditVideoPlayer.Actions.FULLSCREEN_CANCEL:case RedditVideoPlayer.Actions.FULLSCREEN_TOGGLE:this.toggleFullScreen(n);break;case RedditVideoPlayer.Actions.SET_RESOLUTION:this.setResolution(t,n);break;case RedditVideoPlayer.Actions.SET_LAST_VOLUME:this.setLastVolume(t);break;case RedditVideoPlayer.Actions.SET_ASPECT_RATIO:this.setAspectRatio(t);break;case RedditVideoPlayer.Actions.NONE:this.noAction();default:console.warn("Invalid Action:",e)}},RedditVideoPlayer.prototype.addActionCompletedCallback=function(e){this.actionCompletedCallbacks.push(e)},RedditVideoPlayer.prototype.removeActionCompletedCallback=function(e){var t=this.actionCompletedCallbacks.indexOf(e);t!=-1&&this.actionCompletedCallbacks.splice(t,1)};var RedditVideoController=function(e,t){this.root=typeof e=="string"?$($.parseHTML(e)[0]):$(e),this.root.addClass("reddit-video-controller-root"),t=typeof t=="object"?t:{},this.options=_.defaults(t,RedditVideoController.DEFAULT_OPTIONS)};RedditVideoController.Behaviors={INTERSTITIAL:"interstitial",MOUSE_MOVE:"mousemove",COMPLETED:"completed",BUFFERING:"buffering"},RedditVideoController.DEFAULT_OPTIONS={behavior:RedditVideoController.Behaviors.MOUSE_MOVE,fadeInDuration:0,fadeOutDuration:400,fadeOutDelay:3e3,alwaysVisible:!1,startVisible:!0,opacityMax:1,opacityMin:0},RedditVideoController.secondsToTimeFormat=function(e){e=Math.ceil(e);var t=parseInt(e/3600)%24,n=parseInt(e/60)%60,r=e%60;return t!=0?t+":"+(n<10?"0"+n:n)+":"+(r<10?"0"+r:r):n+":"+(r<10?"0"+r:r)},RedditVideoController.prototype._prepareActions=function(){this._connectClickElements(),this._connectTextElement(),this._connectSeekBarElements(),this._connectVolumeSliderElements(),this._connectSettingsMenuElements(),this._connectTooltipElements()},RedditVideoController.prototype._connectTooltipElements=function(){function e(e,t){t=$(t);var n=new RedditVideoTooltip(this,t,t.attr("tooltip-string"));t.data("tooltip-object",n);if(t.hasClass("settings-container")){var r=t.find("input:first");r.change(function(){r.is(":checked")?t.addClass("disable-tooltip"):t.removeClass("disable-tooltip")})}}var t="[tooltip-string]",n=this.root.find(t);n.each(e.bind(this));var r=this.redditVideoPlayer.paused?"[tooltip-string=Pause][tooltip-string-toggle=Play]":"[tooltip-string=Play][tooltip-string-toggle=Pause]";n.filter(r).each(function(e,t){t=$(t);var n=t.attr("tooltip-string"),r=t.attr("tooltip-string-toggle");t.attr("tooltip-string",r),t.attr("tooltip-string-toggle",n),t.data("tooltip-object").string=r})},RedditVideoController.prototype._connectClickElements=function(){function e(e,t){var t=$(t);t.click(function(e){var n=t.attr("data-action");if(n){var r=t.attr("data-value"),i={verb:"click",noun:n};this.fireEvent(n,r,i)}e.stopPropagation()}.bind(this))}var t="[data-control-type=click]",n=this.root.find(t);n.each(e.bind(this));var r=this.redditVideoPlayer.muted?"[data-action=mute][data-toggle-action=unmute]":"[data-action=unmute][data-toggle-action=mute]";r+=this.redditVideoPlayer.paused?", [data-action=pause][data-toggle-action=play]":", [data-action=play][data-toggle-action=pause]",n.filter(r).each(function(e,t){t=$(t);var n=t.attr("data-action"),r=t.attr("data-toggle-action");t.attr("data-action",r),t.attr("data-toggle-action",n)})},RedditVideoController.prototype._connectTextElement=function(){function t(t,n){n=$(n);var r=n.attr("data-action");r==="totalTime"?(isNaN(e.duration)||(n[0].innerHTML=RedditVideoController.secondsToTimeFormat(e.duration)),$(e).on("durationchange",function(){isNaN(e.duration)||(n[0].innerHTML=RedditVideoController.secondsToTimeFormat(e.duration))})):r==="elapsedTime"&&(isNaN(e.currentTime)||(n[0].innerHTML=RedditVideoController.secondsToTimeFormat(e.currentTime)),$(e).on("timeupdate",function(){isNaN(e.currentTime)||(n[0].innerHTML=RedditVideoController.secondsToTimeFormat(e.currentTime))}))}var e=this.redditVideoPlayer.video[0],n="[data-control-type=text]";this.root.find(n).each(t.bind(this))},RedditVideoController.prototype._connectSeekBarElements=function(){function t(t,n){n=$(n);var r=new RedditVideoSeekBar(this,n,n.attr("data-preview-video-src"));n.data("seek-bar-object",r),n.on("progress",function(t){var n=r.getProgress()/100,i={verb:"click",noun:"seek"};this.fireEvent(RedditVideoPlayer.Actions.SET_CURRENT_TIME,e.duration*n,i)}.bind(this));var i=this.redditVideoPlayer.options.clickAction;n.on("press",function(t){$(e).trigger("setting:seekbar"),i=this.redditVideoPlayer.options.clickAction,this._setClickAction(RedditVideoPlayer.ClickActions.NONE)}.bind(this)),n.on("release",function(e){this._setClickAction(i)}.bind(this)),$(e).on("timeupdate",function(t){var n=e.currentTime/e.duration*100;r.setProgress(n)}),$(e).on("progress",function(t){var n=[];for(var i=0;i<e.buffered.length;i++){var s={start:e.buffered.start(i)/e.duration*100,end:e.buffered.end(i)/e.duration*100};n.push(s)}r.setBuffered(n)})}var e=this.redditVideoPlayer.video[0],n="[data-control-type=seekBar]";this.root.find(n).each(t.bind(this))},RedditVideoController.prototype._connectVolumeSliderElements=function(){function t(t,n){n=$(n);var r=new RedditVideoVolumeSlider(this,n);n.data("volume-slider-object",r),n.on("change",function(e){var t={verb:"click",noun:"volume"};this.fireEvent(RedditVideoPlayer.Actions.SET_VOLUME,r.value,t)}.bind(this));var i=this.redditVideoPlayer.options.clickAction;n.on("press",function(e){r.value!=0&&this.fireEvent(RedditVideoPlayer.Actions.SET_LAST_VOLUME,r.value),i=this.redditVideoPlayer.options.clickAction,this._setClickAction(RedditVideoPlayer.ClickActions.NONE)}.bind(this)),n.on("release",function(e){r.value!=0&&this.fireEvent(RedditVideoPlayer.Actions.SET_LAST_VOLUME,r.value),this._setClickAction(i)}.bind(this)),$(e).on("volumechange",function(t){r.value=e.volume})}var e=this.redditVideoPlayer.video[0],n="[data-control-type=volumeSlider]";this.root.find(n).each(t.bind(this))},RedditVideoController.prototype._connectSettingsMenuElements=function(){function e(e,t){t=$(t);var n=new RedditVideoSettings(this,t);t.data("settings-menu-object",n),t.on("resolution",function(e,t){var n={verb:"click",noun:t.resolution>0?t.resolution:"auto"};this.fireEvent(RedditVideoPlayer.Actions.SET_RESOLUTION,t.index,n)}.bind(this))}var t="[data-control-type=settingsMenu]";this.root.find(t).each(e.bind(this))},RedditVideoController.prototype._prepareBehavior=function(){var e=this.options.behavior.split(" ");e.indexOf(RedditVideoController.Behaviors.INTERSTITIAL)!=-1&&this._setupInterstitialBehavior(),e.indexOf(RedditVideoController.Behaviors.MOUSE_MOVE)!=-1&&this._setupMouseMoveBehavior(),e.indexOf(RedditVideoController.Behaviors.COMPLETED)!=-1&&this._setupCompletedBehavior(),e.indexOf(RedditVideoController.Behaviors.BUFFERING)!=-1&&this._setupBufferingBehavior()},RedditVideoController.prototype._setupInterstitialBehavior=function(){this.root[0].style.visibility="visible";var e=[];for(var t=0;t<this.redditVideoPlayer.uiControllers.length;t++)controller=this.redditVideoPlayer.uiControllers[t],e.push(controller.root[0].style.visibility),controller!=this&&(controller.root[0].style.visibility="hidden");this.redditVideoPlayer.video[0].addEventListener("play",function(t){this.root[0].style.visibility="hidden";for(var n=0;n<this.redditVideoPlayer.uiControllers.length;n++)controller=this.redditVideoPlayer.uiControllers[n],controller==this?controller.root[0].style.visibility="hidden":controller.root[0].style.visibility=e[n];for(var n=0;n<this.redditVideoPlayer.uiControllers.length;n++){controller=this.redditVideoPlayer.uiControllers[n];if(controller==this){this.redditVideoPlayer.uiControllers.splice(n,1);break}}}.bind(this))},RedditVideoController.prototype._setupMouseMoveBehavior=function(){var e,t=!1,n=!1;this.isFadedIn=!0,this.isMouseDown=!1,this.root[0].style.opacity=this.options.startVisible?this.options.opacityMax:this.options.opacityMin,this.options.startVisible&&this.fadeOut();if(!this.options.alwaysVisible){function r(){this.fadeOut();var e=this.root.find("input.settings");e.prop("checked")&&e.prop("checked",!1)}function i(i){clearTimeout(e);if(t||n)return;r.call(this)}function s(i){this.fadeIn(),clearTimeout(e);if(t||n)return;e=setTimeout(r.bind(this),this.options.fadeOutDelay)}function o(e){n&&(n=!1,r.call(this))}this.redditVideoPlayer.root.on("mouseleave",i.bind(this)),this.redditVideoPlayer.root.on("mouseenter",s.bind(this)),this.redditVideoPlayer.root.on("mousemove",s.bind(this)),this.redditVideoPlayer.root.on("mouseup",function(e){n=!1,s.call(this)}.bind(this)),this.root.on("mouseenter",function(e){t=!0}),this.root.on("mouseleave",function(e){t=!1}),this.root.on("mousedown",function(e){n=!0}),$(document).on("mouseup",o.bind(this))}},RedditVideoController.prototype._setupCompletedBehavior=function(){function t(){this.root[0].style.visibility="hidden"}var e=!1;this.root[0].style.opacity=this.options.startVisible?this.options.opacityMax:this.options.opacityMin,this.options.startVisible?this.fadeOut(t):t.call(this),this.redditVideoPlayer.video[0].addEventListener("ended",function(t){e=!0,this.root[0].style.visibility="visible",this.redditVideoPlayer.pause(),this._setClickAction(RedditVideoPlayer.ClickActions.NONE),this.fadeIn()}.bind(this));var n=this.redditVideoPlayer.options.clickAction;this.redditVideoPlayer.video[0].addEventListener("play",function(r){e&&(this._setClickAction(n),this.fadeOut(t),e=!1)}.bind(this)),this.redditVideoPlayer.video.on("setting:seekbar",function(n){e&&(this.fadeOut(t),e=!1)}.bind(this))},RedditVideoController.prototype._setupBufferingBehavior=function(){function e(){this.root[0].style.visibility="hidden"}var t=this.redditVideoPlayer.video;t[0].readyState<3?(this.root[0].style.visibility="visible",this.fadeIn()):this.fadeOut(e),t.on("waiting",function(e){t[0].currentTime!==0&&(this.root[0].style.visibility="visible",this.fadeIn())}.bind(this)),t.on("playing canplay seeked",function(t){this.fadeOut(e)}.bind(this))},RedditVideoController.prototype._setClickAction=function(e){setTimeout(function(){this.redditVideoPlayer.setClickAction(e)}.bind(this),0)},RedditVideoController.prototype.attach=function(e){this.redditVideoPlayer=e,this._prepareActions(),this._prepareBehavior(),this.redditVideoPlayer.controls.append(this.root)},RedditVideoController.prototype.notifyBitrateOptions=function(e){var t="[data-control-type=settingsMenu]";this.root.find(t).each(function(t,n){var r=$(n).data("settings-menu-object");r&&r.updateBitrateOptions(e)})},RedditVideoController.prototype.fadeOut=function(e){this.isFadedIn&&(this.fadeTo(this.options.opacityMin,this.options.fadeOutDuration,e),this.isFadedIn=!1)},RedditVideoController.prototype.fadeIn=function(e){this.isFadedIn||(this.fadeTo(this.options.opacityMax,this.options.fadeInDuration,e),this.isFadedIn=!0)},RedditVideoController.prototype.fadeTo=function(e,t,n){function r(e,t){var n=new Date;clearInterval(this.fadeInterval),this.fadeInterval=setInterval(function(){var r=new Date-n,i=r/e.duration;i>1&&(i=1);var s=e.delta.call(this,i);e.step.call(this,s),i==1&&(clearInterval(this.fadeInterval),t&&t.call(this))}.bind(this),1e3/60)}function i(e,t,n,r,i){return(i-r)*(e-t)/(n-t)+r}var s=this.root[0].style.opacity,o=!1;s>e&&(o=!0),r.call(this,{duration:t,delta:function(e){return e},step:function(e){var t;o&&(e=1-e),this.root[0].style.opacity=i(e,RedditVideoController.DEFAULT_OPTIONS.opacityMin,RedditVideoController.DEFAULT_OPTIONS.opacityMax,this.options.opacityMin,this.options.opacityMax)}},n)},RedditVideoController.prototype.fireEvent=function(e,t,n){var r={action:e,value:t,eventExtras:n};this.redditVideoPlayer.root.trigger("videoAction",r)},RedditVideoController.prototype.onActionCompleted=function(e,t){function n(t,n){n=$(n);var r=n.attr("data-toggle-action");r&&(n.attr("data-action",r),n.attr("data-toggle-action",e))}function i(e,t){t=$(t);var n=t.attr("tooltip-string"),r=t.attr("tooltip-string-toggle");t.attr("tooltip-string",r),t.attr("tooltip-string-toggle",n),t.data("tooltip-object").string=r}function o(t){e==RedditVideoPlayer.Actions.MUTE?t.value=0:t.value=this.redditVideoPlayer.video[0].volume}var r="[data-action='"+e+"']";this.root.find(r).each(n.bind(this));if(e===RedditVideoPlayer.Actions.PLAY||e===RedditVideoPlayer.Actions.PAUSE){var s=".play-pause[tooltip-string][tooltip-string-toggle]";this.root.find(s).each(i.bind(this))}if(e===RedditVideoPlayer.Actions.FULLSCREEN_REQUEST||e===RedditVideoPlayer.Actions.FULLSCREEN_CANCEL){var s=".fullscreen[tooltip-string][tooltip-string-toggle]";this.root.find(s).each(i.bind(this))}if(e===RedditVideoPlayer.Actions.MUTE||e===RedditVideoPlayer.Actions.UNMUTE){var u=".reddit-video-volume-slider";this.root.find(u).each(o.bind(this))}};var RedditVideoSeekBar=function(e,t,n){this.parentController=e,this.root=$(t).addClass("reddit-video-seek-bar-root"),this.previewVideoUrl=n,this.backgroundBar=$("<div>").addClass("seek-bar-bar seek-bar-background"),this.lookaheadBar=$("<div>").addClass("seek-bar-bar seek-bar-lookahead"),this.progressBar=$("<div>").addClass("seek-bar-bar seek-bar-progress"),this.progressThumb=$("<div>").addClass("seek-bar-thumb seek-bar-progress"),this.previewContainer=$("<div>").addClass("seek-bar-floating"),this.previewVideo=$("<video muted preload>").attr("src",n),this.previewTime=$("<span>").addClass("seek-bar-time"),this.previewContainer.append(this.previewVideo,this.previewTime),this.root.append(this.backgroundBar,this.lookaheadBar,this.progressBar,this.progressThumb,this.previewContainer),this.isMouseDown=!1,this.progressPercent=0,this.previewVideo[0].load(),this.previewVideo[0].addEventListener("loadedmetadata",function(){this._setPreviewVideoOrientation()}.bind(this)),this._prepareMouseEvents()};RedditVideoSeekBar.prototype._setPreviewVideoOrientation=function(){this.previewVideo[0].videoWidth>this.previewVideo[0].videoHeight?this.previewVideo.addClass("landscape"):this.previewVideo.addClass("portrait")},RedditVideoSeekBar.prototype._prepareMouseEvents=function(){this.root.on("mouseleave",function(e){this.isMouseDown||(this.previewContainer[0].style.visibility="hidden",this.setLookahead(0))}.bind(this)),this.root.on("mouseenter",function(e){var t=this.root[0].getBoundingClientRect(),n=e.clientX-t.left,r=n/t.width*100;this.setLookahead(r),this.previewContainer[0].style.visibility="visible"}.bind(this)),this.root.on("mousedown",function(e){if(!this.isMouseDown&&e.which==1){this.root.trigger("press"),this.isMouseDown=!0;var t=this.root[0].getBoundingClientRect(),n=e.clientX-t.left,r=n/t.width*100;this.setProgress(r,!0)}}.bind(this)),$(document).on("mousemove",function(e){var t=this.root[0].getBoundingClientRect(),n=(e.pageX-t.left)/t.width*100;n=Math.min(Math.max(n,0),100),this.isMouseDown&&this.setProgress(n,!0),this.previewContainer.css("visibility")=="visible"&&this.setLookahead(n)}.bind(this)),$(document).on("mouseup",function(e){this.isMouseDown&&(this.isMouseDown=!1,this.root.trigger("release"),this.root.trigger("progress"),this.previewContainer[0].style.visibility="hidden",this.setLookahead(0))}.bind(this)),this.root.on("click",function(e){e.stopPropagation()})},RedditVideoSeekBar.prototype.setProgress=function(e,t){t=t||!1,e=Math.min(Math.max(e,0),100);if(!this.isMouseDown||t){this.progressPercent=e,this.progressBar[0].style.width=e+"%";var n=this.progressThumb[0].getBoundingClientRect().width/2;this.progressThumb[0].style.marginLeft="calc("+e+"% - "+n+"px)"}},RedditVideoSeekBar.prototype.getProgress=function(){return this.progressPercent},RedditVideoSeekBar.prototype.setLookahead=function(e){this.lookaheadBar[0].style.width=e+"%";var t=this.previewVideo[0].duration*(e/100);isNaN(t)||(this.previewVideo[0].currentTime=Math.min(Math.max(t,0),this.previewVideo[0].duration),this.previewTime.html(RedditVideoController.secondsToTimeFormat(t)));var n=this.parentController.root[0].getBoundingClientRect(),r=this.root[0].getBoundingClientRect(),i=this.previewContainer[0].getBoundingClientRect(),s=n.left-r.left,o=n.right-r.left-i.width,u=e/100*r.width-i.width/2;this.previewContainer[0].style.left=Math.max(s,Math.min(u,o))+"px"},RedditVideoSeekBar.prototype.setBuffered=function(e){var t=this.root.find(".seek-bar-bar.seek-bar-buffered"),n=t.length,r=e.length;for(var i=n;i<r;i++){var s=$("<div>").addClass("seek-bar-bar seek-bar-buffered");s.insertBefore(this.progressBar)}var t=this.root.find(".seek-bar-bar.seek-bar-buffered");for(var i=0;i<e.length;i++){var o=e[i].end-e[i].start;t[i].style.width=o+"%",t[i].style.left=e[i].start+"%"}for(var i=r;i<n;i++)$(t[i]).remove()};var RedditVideoVolumeSlider=function(e,t){this.parentController=e,this.root=$(t).addClass("reddit-video-volume-slider-root"),this.container=$("<div>").addClass("volume-slider-container"),this.trackBar=$("<div>").addClass("volume-slider-bar volume-slider-track"),this.progressBar=$("<div>").addClass("volume-slider-bar volume-slider-progress"),this.thumb=$("<div>").addClass("volume-slider-thumb"),this.root.append(this.container.append(this.trackBar.append(this.progressBar.append(this.thumb)))),Object.defineProperty(this,"value",{get:function(){return this._value}.bind(this),set:function(e){this._value=Math.max(Math.min(e,this.max),this.min);var t=(this._value-this.min)/(this.max-this.min)*100;this.progressBar[0].style.height=t+"%"}.bind(this)});var n=this.root.attr("step");n&&(this.step=n),this.isMouseDown=!1,this.value=this.parentController.redditVideoPlayer.volume,this._prepareMouseEvents()};Object.defineProperties(RedditVideoVolumeSlider.prototype,{min:{value:0,writable:!1},max:{value:1,writable:!1},step:{value:.1,writable:!0}}),RedditVideoVolumeSlider.prototype._prepareMouseEvents=function(){var e=this.redditVideoPlayer;this.container.on("mousedown",function(e){if(!this.isMouseDown&&e.which==1){this.isMouseDown=!0;var t=this.trackBar[0].getBoundingClientRect(),n=e.clientY-t.top,r=100-n/t.height*100;this.value=(this.max-this.min)*(r/100),this.root.trigger("press"),this.root.trigger("change")}}.bind(this)),$(document).on("mousemove",function(e){if(this.isMouseDown){var t=this.trackBar[0].getBoundingClientRect(),n=e.clientY-t.top,r=100-n/t.height*100;this.value=(this.max-this.min)*(r/100),this.root.trigger("change")}}.bind(this)),$(document).on("mouseup",function(e){this.isMouseDown&&(this.isMouseDown=!1,this.root.trigger("release"))}.bind(this)),this.root.on("click",function(e){e.stopPropagation()})},RedditVideoVolumeSlider.prototype.stepUp=function(){this.value+=this.step,this.root.trigger("change")},RedditVideoVolumeSlider.prototype.stepDown=function(){this.value-=this.step,this.root.trigger("change")};var RedditVideoSettings=function(e,t){this.parentController=e,this.root=$(t).addClass("reddit-video-settings-root");var n=$("<div>").addClass("video-settings-container");this.name="quality-"+RedditVideoSettings.count++;var r=$("<label>").append($("<input>").attr({type:"radio",value:"1080",name:this.name}),$("<img>").attr({src:"/static/checkmark.svg"}),$("<span>").html("1080p"),"&nbsp;",$("<span>").addClass("hd").html("HD")),i=$("<label>").append($("<input>").attr({type:"radio",value:"720",name:this.name}),$("<img>").attr({src:"/static/checkmark.svg"}),$("<span>").html("720p"),"&nbsp;",$("<span>").addClass("hd").html("HD")),s=$("<label>").append($("<input>").attr({type:"radio",value:"480",name:this.name}),$("<img>").attr({src:"/static/checkmark.svg"}),$("<span>").html("480p")),o=$("<label>").append($("<input>").attr({type:"radio",value:"360",name:this.name}),$("<img>").attr({src:"/static/checkmark.svg"}),$("<span>").html("360p")),u=$("<label>").append($("<input>").attr({type:"radio",value:"240",name:this.name}),$("<img>").attr({src:"/static/checkmark.svg"}),$("<span>").html("240p")),a=$("<label>").append($("<input>").attr({type:"radio",value:"0",checked:!0,name:this.name}),$("<img>").attr({src:"/static/checkmark.svg"}),$("<span>").html("Auto"));n.append(r,i,s,o,u,a),this.root.append(n),this.qualityRadioButtons=n.find("input[type=radio]"),this.qualityRadioButtons.on("change",function(e,t,n,r){var i={resolution:e.target.value,index:$(e.target).attr("data-index")};this.root.trigger("resolution",[i])}.bind(this)),this.root.on("click",function(e){e.stopPropagation()}),Object.defineProperty(this,"quality",{get:function(){return this._quality}.bind(this),set:function(e){this._quality=e}.bind(this)})};RedditVideoSettings.count=0,RedditVideoSettings.prototype.updateBitrateOptions=function(e){this.qualityRadioButtons.each(function(e,t){t.value==="0"?(t.disabled=!1,t.checked=!0):(t.disabled=!0,$(t).parent().css("display","none"))});var t=e.map(function(e){return e.height}),n=e.map(function(e){return e.qualityIndex});for(var r=0;r<t.length;r++){var i=t[r],s=RedditVideoSettings.Resolutions.reduce(function(e,t){return Math.abs(t-i)<Math.abs(e-i)?t:e}),o=this.root.find('input[name="'+this.name+'"][value="'+s+'"]');o.attr({disabled:!1,"data-index":n[r]}),o.parent().css("display","inherit")}},RedditVideoSettings.Resolutions=[240,360,480,720,1080];var RedditVideoTooltip=function(e,t,n){this.parentController=e,this.root=$(t).addClass("has-tooltip"),this._tooltip=$("<span>").addClass("tooltip"),this.root.append(this._tooltip),this._defineProperties(),this.string=n,setTimeout(function(){this._setPosition()}.bind(this),0)};RedditVideoTooltip.prototype._defineProperties=function(){Object.defineProperty(this,"string",{set:function(e){this._tooltip.html(e),this._setPosition()}.bind(this)}),Object.defineProperty(this,"edgeMargin",{get:function(){return 5}})},RedditVideoTooltip.prototype._setPosition=function(){var e=this.parentController.root[0].getBoundingClientRect(),t=this.root[0].getBoundingClientRect(),n=this._tooltip[0].getBoundingClientRect(),r=t.width/2-n.width/2,i=e.left-t.left+this.edgeMargin,s=e.right-t.left-n.width-this.edgeMargin;this._tooltip[0].style.left=Math.max(i,Math.min(r,s))+"px"};