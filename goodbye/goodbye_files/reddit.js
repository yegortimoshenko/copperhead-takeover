try{(function(e,t){function a(e,t){var n=decodeURI(e),i=s[t||!1?"strict":"loose"].exec(n),a={attr:{},param:{},seg:{}},f=14;while(f--)a.attr[r[f]]=i[f]||"";return a.param.query={},a.param.fragment={},a.attr.query.replace(o,function(e,t,n){t&&(a.param.query[t]=n)}),a.attr.fragment.replace(u,function(e,t,n){t&&(a.param.fragment[t]=n)}),a.seg.path=a.attr.path.replace(/^\/+|\/+$/g,"").split("/"),a.seg.fragment=a.attr.fragment.replace(/^\/+|\/+$/g,"").split("/"),a.attr.base=a.attr.host?a.attr.protocol+"://"+a.attr.host+(a.attr.port?":"+a.attr.port:""):"",a}function f(e){var r=e.tagName;return r!==t?n[r.toLowerCase()]:r}var n={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"},r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],i={anchor:"fragment"},s={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},o=/(?:^|&|;)([^&=;]*)=?([^&;]*)/g,u=/(?:^|&|;)([^&=;]*)=?([^&;]*)/g;e.fn.url=function(t){var n="";return this.length&&(n=e(this).attr(f(this[0]))||""),e.url(n,t)},e.url=function(e,n){return arguments.length===1&&e===!0&&(n=!0,e=t),n=n||!1,e=e||window.location.toString(),{data:a(e,n),attr:function(e){return e=i[e]||e,e!==t?this.data.attr[e]:this.data.attr},param:function(e){return e!==t?this.data.param.query[e]:this.data.param.query},fparam:function(e){return e!==t?this.data.param.fragment[e]:this.data.param.fragment},segment:function(e){return e===t?this.data.seg.path:(e=e<0?this.data.seg.path.length+e:e-1,this.data.seg.path[e])},fsegment:function(e){return e===t?this.data.seg.fragment:(e=e<0?this.data.seg.fragment.length+e:e-1,this.data.seg.fragment[e])}}}})(jQuery),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="1.0.0";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;typeof t=="object"&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=u.uniqueId("l"));return i[s]=t,typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},u.extend(this,u.pick(t,d)),t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t;if(r&&(!n||!n.wait)&&!this.set(r,n))return!1;n=u.extend({validate:!0},n);if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},j(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;j(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||B();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t||{},{validationError:n})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];u.each(v,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var m=o.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};u.extend(m.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.defaults(t||{},y))},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},set:function(e,t){t=u.defaults(t||{},g),t.parse&&(e=this.parse(e,t)),u.isArray(e)||(e=e?[e]:[]);var n,i,o,a,f,l,c=t.at,h=this.comparator&&c==null&&t.sort!==!1,p=u.isString(this.comparator)?this.comparator:null,d=[],v=[],m={};for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(e[n],t)))continue;(f=this.get(o))?(t.remove&&(m[f.cid]=!0),t.merge&&(f.set(o.attributes,t),h&&!l&&f.hasChanged(p)&&(l=!0))):t.add&&(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o))}if(t.remove){for(n=0,i=this.length;n<i;++n)m[(o=this.models[n]).cid]||v.push(o);v.length&&this.remove(v,t)}d.length&&(h&&(l=!0),this.length+=d.length,c!=null?s.apply(this.models,[c,0].concat(d)):r.apply(this.models,d)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=d.length;n<i;n++)(o=d[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(b,function(e){m.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var w=["groupBy","countBy","sortBy"];u.each(w,function(e){m.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var E=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];u.extend(E.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(S),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,x)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||B()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var H=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=m.extend=N.extend=E.extend=O.extend=H;var B=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),function(e,t){function n(e,n){n=n||{bubbles:!1,cancelable:!1,detail:t};var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),r}if(e.CustomEvent)return;n.prototype=e.Event.prototype,e.CustomEvent=n}(this),function(e,t,n){"use strict";function h(n){if(n.origin!==location.origin&&!u.test(n.origin)&&n.origin!=="null")return;try{var r=JSON.parse(n.data),i=r.type;if(!f.test(i))return;var s=i.split(".",2)[1];if(l[s]){var o=l[s];for(var a=0;a<o.targets.length;a++)e.frames.postMessage(o.targets[a],i,r.data,r.options)}var c=new CustomEvent(i,{detail:r.data});c.source=n.source,c.options=r.options,t.dispatchEvent(c);var h=new CustomEvent("*."+s,{detail:r.data});h.source=n.source,h.options=r.options,h.originalType=i,t.dispatchEvent(h)}catch(p){}}function p(e,n,r){"addEventListener"in t?t.addEventListener(e,n,r):"attachEvent"in t&&t.attachEvent("on"+e,n)}function d(e,n,r){"removeEventListener"in t?t.removeEventListener(e,n):"detachEvent"in t&&t.attachEvent("on"+e,n)}function v(e){return new RegExp("^http(s)?:\\/\\/"+e.join("|")+"$","i")}function m(e){return new RegExp("\\.(?:"+e.join("|")+")$")}function g(e){return/\*/.test(e)}var r=".*",i=".postMessage",s={targetOrigin:"*"},o=[r],u=v(o),a=[i],f=m(a),l={},c=!1,y=e.frames={postMessage:function(e,t,n,r){/\..+$/.test(t)||(t+=i),r=r||{};for(var o in s)r.hasOwnProperty(o)||(r[o]=s[o]);e.postMessage(JSON.stringify({type:t,data:n,options:r}),r.targetOrigin)},receiveMessage:function(e,t,n,r){typeof e=="string"&&(r=n,n=t,t=e,e=null),r=r||this;var i=function(t){if(e&&e!==t.source&&e.contentWindow!==t.source)return;n.apply(r,arguments)};return p(t,i),{off:function(){d(t,i)}}},proxy:function(e,t){this.listen(e),Object.prototype.toString.call(t)!=="[object Array]"&&(t=[t]);var n=l[e];n?n.targets=[].concat(n.targets,target):n={targets:t},l[e]=n},receiveMessageOnce:function(e,t,n,r){var i=y.receiveMessage(e,t,function(){n&&n.apply(this,arguments),i.off()},r);return i},addPostMessageOrigin:function(e){g(e)?o=[r]:o.indexOf(e)===-1&&(y.removePostMessageOrigin(r),o.push(e),u=v(o))},removePostMessageOrigin:function(e){var t=o.indexOf(e);t!==-1&&(o.splice(t,1),u=v(o))},listen:function(e){a.indexOf(e)===-1&&(a.push(e),f=m(a)),c||(p("message",h),c=!0)},stopListening:function(e){var t=a.indexOf(e);t!==-1&&(a.splice(t,1),a.length?f=m(a):(d("message",h),c=!1))}}}(this.r=this.r||{},this),function(e,t,n,r){var i=Object.prototype.hasOwnProperty;e.utils=e.utils||{},e.utils.uuid=t.uuid,e.utils.serialize=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}}(window.rembeddit=window.rembeddit||{},r,this),!function(e,t,n){var r=e.PixelTracker=function(e){this._pixelTrackingUrl=e.url,this._anonymousPixelTrackingUrl=e.anonymousUrl};r.prototype.send=function(t,n,r){typeof n=="function"&&(r=n,n={}),n=n||{},r=r||function(){};var i=n.anonymous?this._anonymousPixelTrackingUrl:this._pixelTrackingUrl;if(!t||!i){r();return}t.uuid=t.uuid||e.utils.uuid();var s=new Image,o=Math.round(Math.random()*2147483647);s.onload=r,s.src=i+"?r="+o+"&data="+encodeURIComponent(JSON.stringify(t))}}(window.rembeddit=window.rembeddit||{},this),function(e,t,n){function o(e,t,n){for(var r=0;r<e.length;r++)t.call(n,r,e[r])}function u(e){return i.test(e.href)&&s.test(e.pathname)}function a(e){return u(e)&&e.pathname.replace(/^\//,"")}function f(e){return e.endsWith("/")||(e+="/"),e}function l(e,t){var n;for(var r=0,i=e.length;r<i;r++)if(n=a(e[r]))break;var s="https://"+t+"/"+n;return f(s)}function c(e,t){var n=0,r=t.getAttribute("data-embed-live");t.getAttribute("data-embed-parent")==="true"&&n++;var i="embed=true&context="+n+"&depth="+ ++n+"&showedits="+(r==="true")+"&created="+t.getAttribute("data-embed-created")+"&uuid="+t.getAttribute("data-embed-uuid")+"&showmore=false";return e+"?"+i}var i=/^https?:\/\//i,s=/\/?r\/[\w_]+\/comments\/(?:\S+\/){2,}[\w_]+\/?/i;e.init=function(e,t){e=e||{},t=t||function(){};var n=document.querySelectorAll(".reddit-embed");o(n,function(n,i){if(i.getAttribute("data-initialized"))return;i.setAttribute("data-initialized",!0);var s=document.createElement("iframe"),o=i.getElementsByTagName("a"),u=l(o,i.getAttribute("data-embed-media"));if(!u)return;r.frames.addPostMessageOrigin(i.getAttribute("data-embed-media")),r.frames.listen("embed"),s.height=s.style.height=0,s.width=s.style.width="100%",s.scrolling="no",s.frameBorder=0,s.allowTransparency=!0,s.style.display="none",s.style.maxWidth="800px",s.style.minWidth="220px",s.style.margin="10px 0",s.style.boxShadow="0 0 5px 0.5px rgba(0, 0, 0, 0.05)",s.style.boxSizing="border-box",s.src=c(u,i),r.frames.receiveMessageOnce(s,"ping.embed",function(n){i.parentNode.removeChild(i),s.style.display="block",t(n),r.frames.postMessage(s.contentWindow,"pong.embed",{type:i.getAttribute("data-embed-parent")==="true"?"comment_and_parent":"comment",location:location,options:e})});var a=r.frames.receiveMessage(s,"resize.embed",function(e){if(!s.parentNode){a.off();return}s.height=s.style.height=e.detail+"px"});i.parentNode.insertBefore(s,i)})};if(e.preview)return;e.init()}(window.rembeddit=window.rembeddit||{},window.r,this),function(e,t,n){var r=document.getElementById("gtm-jail"),i=!1,s=[];e.gtm={_isReady:function(e,t){return i?!0:(s.push({method:e,args:t}),!1)},trigger:function(t,n){if(!this._isReady("trigger",arguments))return;n&&this.set(n),e.frames.postMessage(r.contentWindow,"event.gtm",{event:t})},set:function(t){if(!this._isReady("set",arguments))return;e.frames.postMessage(r.contentWindow,"data.gtm",t)}},e.frames.listen("gtm"),e.frames.receiveMessageOnce("loaded.gtm",function(){i=!0,s.forEach(function(t){var n=t.method,r=t.args;e.gtm[n].apply(e.gtm,r)})}),e.frames.receiveMessage("pixelError.gtm",function(t){e.analytics.thirdPartyPixelFailureEvent(t.detail)}),e.frames.receiveMessage("pixelSuccess.gtm",function(t){e.analytics.thirdPartyPixelSuccessEvent(t.detail)})}(this.r=this.r||{},this),!function(e,t){e.sync=function(t,n,i){var s=i.dataFilter;return i.dataFilter=function(t,n){var i;return n==="json"?i=e.utils.unescapeJson(t):i=t,s?s(i):i},e.backboneSync.call(Backbone,t,n,i)},e.setupBackbone=function(){Backbone.emulateJSON=!0,Backbone.ajax=e.ajax,e.backboneSync||(e.backboneSync=Backbone.sync,Backbone.sync=e.sync)}}(r),!function(e,t,n){"use strict";var r=window.performance||window.webkitPerformance||window.msPerformance||window.mozPerformance,i=t.Model.extend({duration:function(){return this.get("end")-this.get("start")},isValid:function(){return this.get("end")!==0}}),s=t.Collection.extend({model:i,comparator:"start",initialize:function(){this.on("reset",this.calculate,this)},calculate:function(){this.startTime=this.min(function(e){return e.get("start")}).get("start"),this.endTime=this.max(function(e){return e.get("end")}).get("end"),this.duration=this.endTime-this.startTime}}),o=s.extend({fetch:function(){function i(n,r,i){if(!e[r]||!e[i])return;t.push({key:n,start:e[r]/1e3,end:e[i]/1e3})}if(!r||!r.timing)return;var e=r.timing,t=[];i("redirect","redirectStart","redirectEnd"),i("start","fetchStart","domainLookupStart"),i("dns","domainLookupStart","domainLookupEnd"),i("tcp","connectStart","connectEnd"),i("https","secureConnectionStart","connectEnd"),i("request","requestStart","responseStart"),i("response","responseStart","responseEnd"),i("domLoading","domLoading","domInteractive"),i("domInteractive","domInteractive","domContentLoadedEventStart"),i("domContentLoaded","domContentLoadedEventStart","domContentLoadedEventEnd"),this.reset(n.values(t))}});e.NavigationTimings=o,e.Timing=i,e.Timings=s}(r,Backbone,_),r.templating={},r.templating.TemplateSet=function(){this.index={}},r.templating.TemplateSet.prototype={_templateSettings:{variable:"thing"},_key:function(e,t){return e+"."+t},_create:function(e){return _.template(e,null,this._templateSettings)},set:function(e){_.each(e,function(e){r.config.uncompressedJS&&(e=r.utils.unescapeJson(e));var t=this._key(e.name,e.style);this.index[t]=e.template},this)},_defaultStyle:function(e){return _.isArray(e)||(e=[e,r.config.renderstyle]),e},get:function(e){e=this._defaultStyle(e);var t=this._key(e[0],e[1]);if(!this.index[t])throw'"'+e[0]+"."+e[1]+'"'+" template not found.";return template=this.index[t],_.isFunction(template)||(template=this.index[t]=this._create(template)),template},make:function(e,t,n){return html=this.get(e)(t),n&&$(n).append(html),html}},r.templates=new r.templating.TemplateSet,!function(e,t){e.ScrollUpdater=Backbone.View.extend({selector:null,startUpdate:function(){},update:function(e){},endUpdate:function(e){},start:function(){return this._resetScrollState(),this._listen(),this},restart:function(){return this._resetScrollState(),this},_resetScrollState:function(){this._elements=this.$el.find(this.selector),_.sortBy(this._elements,function(e){return t(e).offset().top}),this._curIndex=0,this._lastScroll=null,this._toUpdate=[],this._totalTime=0,_.defer(t.proxy(this,"_updateThings"))},_listen:function(){var e=_.throttle(t.proxy(this,"_updateThings"),20);t(window).on("scroll",e)},_updateThings:function(e){if(!this._elements.length)return;var n=new Date,r=t(window),i=r.height(),s=r.scrollTop(),o=s,u=s+i;s<this._lastScroll?o=Math.max(o-Math.floor(i/2),0):u+=Math.ceil(i/2);var a=this._curIndex,f=t(this._elements[a]);if(f.offset().top<o)while(a<this._elements.length-1&&f.offset().top<o)f=t(this._elements[a]),a++;else while(a>0&&f.offset().top>o)f=t(this._elements[a]),a--;var l=0;do f=t(this._elements[a]),this._toUpdate.push(f),a++,l++;while(a<=this._elements.length-1&&f.offset().top<=u);this._curIndex=a-1,this._lastScroll=s;var c=new Date;this._totalTime+=c-n,this._doUpdates()},cutoff:1e3/60,_doUpdates:function(){this.startUpdate();var e=new Date,n=e,r=0,i=[];while(n-e<this.cutoff){if(!this._toUpdate.length)break;var s=this._toUpdate.shift();i.push(s),this.update(s),r++,n=new Date}this._totalTime+=n-e,this._toUpdate.length&&_.defer(t.proxy(this,"_doUpdates")),this.endUpdate(t(i))}})}(r,jQuery),!function(e,t){function o(e){this.opts=_.defaults(e||{},s),this.elCache=t([]),this.refresh=_.throttle(this._refresh,1e3),setInterval(t.proxy(this.refresh,this),2e4),this.refresh()}Date.now||(Date.now=function(){return(new Date).getTime()});var n=Date.now(),r=[[31536e3,e.NP_("a year ago","%(num)s years ago")],[2592e3,e.NP_("a month ago","%(num)s months ago")],[86400,e.NP_("a day ago","%(num)s days ago")],[3600,e.NP_("an hour ago","%(num)s hours ago")],[60,e.NP_("a minute ago","%(num)s minutes ago")]],i=[[31536e3,e.NP_("year ago","years ago")],[2592e3,e.NP_("month ago","months ago")],[86400,e.NP_("day ago","days ago")],[3600,e.NP_("hour ago","hours ago")],[60,e.NP_("minute ago","minutes ago")]],s={maxage:86400};o.prototype._refresh=function(){var e=o.now();this.elCache.each(t.proxy(function(t,n){this.refreshOne(n,e)},this))},o.prototype.updateCache=function(e){this.elCache=e,this.refresh()},o.prototype.refreshOne=function(n,r){r||(r=o.now());var i=t(n),s=e.utils.parseTimestamp(i),u,a;a=(r-s)/1e3;if(this.opts.maxage!==!1&&a>this.opts.maxage){i.removeClass("live-timestamp");return}u=this.formatTime(i,a,s,r),i.text(u)},o.prototype.formatTime=function(n,i,s,o){var u=e._("just now");return t.each(r,function(t,n){var r=Math.floor(i/n[0]),s;if(r>0)return s=n[1],u=e.P_(s[0],s[1],r).format({num:r}),!1}),u},o.formatBirthday=function(n){var r=e._("just now"),s=0;return t.each(i,function(t,i){s=Math.floor(n/i[0]);var o;if(s>0)return o=i[1],r=e.P_(o[0],o[1],s).format(),!1}),{count:s,description:r}},o.formatDate=function(e){var t=(new Date(e)).toDateString().split(" ").slice(1);return t[1]+=",",t.join(" ")},o.clientOffset=0,o.now=function(){return Date.now()-o.clientOffset},o.init=function(){var t=e.config.server_time*1e3,r=n-t,i=36e5,s=Math.round(r/i);this.clientOffset=s*i},e.TimeText=o}(r,jQuery),r.ui.init=function(){r.cookies.get("reddit_first")?(r.cookies.expire("reddit_first"),store.safeSet("ui.shown.welcome",!0)):store.safeGet("ui.shown.welcome")!=1&&($(".infobar.welcome").show(),store.safeSet("ui.shown.welcome"
,!0)),r.ui.initMWebBanner(),r.ui.initFooterMwebBtn(),$(".help-bubble").each(function(e,t){$(t).data("HelpBubble",new r.ui.Bubble({el:t}))}),$(".submit_text").each(function(e,t){$(t).data("SubredditSubmitText",new r.ui.SubredditSubmitText({el:t}))}),$(document.body).on("click","a.expand-media",function(e){if(!e.metaKey)return e.preventDefault(),!1});var e=r.config.new_window&&(r.config.logged||!r.ui.isSmallScreen());e&&$(document.body).on("click","a.may-blank, .may-blank-within a",function(t){if(!e)return;if(!this.target){var n=_.contains(["http:","https:"],this.protocol);if(this.href&&n&&r.utils.onTrident()){var i=window.open(this.href,"_blank");if(i!==null)return i.opener=null,t.preventDefault(),!1}this.target="_blank",this.rel="noreferrer"}return!0}),r.ui.PermissionEditor.init(),r.ui.initLiveTimestamps(),r.ui.initNewCommentHighlighting(),r.ui.initReadNext(),r.ui.initTimings()},r.ui.inMobileWebBlacklist=function(){return _.any(r.config.mweb_blacklist_expressions,function(e){return(new RegExp(e)).test(window.location.pathname)})},r.ui.isSmallScreen=function(){return window.matchMedia?matchMedia("(max-device-width: 736px)").matches:$(window).width()<736},r.ui.TimeTextScrollListener=r.ScrollUpdater.extend({initialize:function(e){this.timeText=e.timeText,this.timeText.updateCache($(this.selector))},selector:".live-timestamp:visible",endUpdate:function(e){this.timeText.updateCache(e)}});function createMwebRedirectUrl(e){var t=document.createElement("a");return t.href=window.location,t.host="m."+r.config.cur_domain,t.search+=(t.search?"&":"?")+e,r.ui.inMobileWebBlacklist()&&(t.pathname="/"),t.href}r.ui.initFooterMwebBtn=function(){$(".mweb-redirect-btn").on("click",function(e){e.preventDefault(),r.cookies.set("mweb-no-redirect",0),window.location=createMwebRedirectUrl("ref_source=desktop")})},r.ui.initMWebBanner=function(){if(!r.ui.isSmallScreen()||r.config.renderstyle=="compact")return;if($.url().attr("path")!="/")return;if(r.ui.inMobileWebBlacklist())return;var e,t,n,i;r.config.feature_mobile_native_banner?(i="native-banner.closed",t=null,n="https://293679.measurementapi.com/serve?action=click&publisher_id=293679&site_id=122129&site_id_ios=121809",e=r._("get reddit mobile")):(i="mweb-beta-banner.closed",t="__cf_mob_redir",n=createMwebRedirectUrl("ref=mobile_beta_banner&ref_source=desktop"),e=r._("switch to mobile version"));var s=new Date(store.safeGet(i)||0),o=(new Date).getTime();if(o<s)return;var u=$(_.template('<div class="mobile-web-redirect-bar"><a href="<%- url %>" class="mobile-web-redirect"><%- callout %></a><a href="#" class="mobile-web-redirect-optout">&times;</a></div>',{callout:e,url:n}));u.find(".mobile-web-redirect-optout").on("click",function(e){e.preventDefault();var t=(new Date).getTime()+12096e5;store.safeSet(i,t),u.fadeOut()}),u.find(".mobile-web-redirect").on("click",function(){return!t||r.cookies.set(t,"1",{expires:90}),!0}),$("#header").before(u)},r.ui.initLiveTimestamps=function(){if($(".sitetable").length){var e=new r.ui.TimeTextScrollListener({el:".sitetable",timeText:new r.TimeText});e.start(),$(document).on("new_things_inserted",function(){e.restart()})}},r.ui.initNewCommentHighlighting=function(){if(!$("body").hasClass("comments-page"))return;$visitSelector=$("#comment-visits");if($visitSelector.length===0)return;$(document).on("new_things_inserted",r.ui.highlightNewComments),$visitSelector.on("change",r.ui.highlightNewComments),r.ui.highlightNewComments()},r.ui.highlightNewComments=function(){var e=$(".comment"),t=$("#comment-visits").val(),n;t&&(n=Date.parse(t)),e.each(function(){var e=$(this),t=e.find("> .entry .tagline time:first-of-type"),i=r.utils.parseTimestamp(t),s=!!n&&i>n;e.toggleClass("new-comment",s)})},r.ui.initReadNext=function(){var e=12096e5,t=$(".read-next-container"),n=!!store.safeGet("readnext.dismissed"),i=parseInt(store.safeGet("readnext.expiration"),10),s=Date.now();n&&(i?i<s&&(store.safeSet("readnext.dismissed",!1),n=!1):(i=s+e,store.safeSet("readnext.expiration",i)));var o=r.config.cur_link;if(n||!t.length)return;this.readNext=new r.ui.ReadNext({el:t,fixToBottom:!r.ui.isSmallScreen(),currentLinkFullname:o,ttl:e})},r.ui.ReadNext=Backbone.View.extend({events:{"click .read-next-button.next":"next","click .read-next-button.prev":"prev","click .read-next-dismiss":"dismiss"},initialize:function(){this.$readNext=this.$el.find(".read-next"),this.$links=this.$readNext.find(".read-next-link"),this.numLinks=this.$links.length,this.state=new Backbone.Model({fixed:!1,index:-1}),this.state.on("change",this.render.bind(this)),this.options.fixToBottom&&(this.updateScroll=this.updateScroll.bind(this),window.addEventListener("scroll",this.updateScroll),this.updateScroll());var e="#read-next-link-"+this.options.currentLinkFullname,t=this.$links.index($(e))+1;this.state.set({index:t}),this.resetRefIndicies(t),this.$readNext.addClass("active")},resetRefIndicies:function(e){var t=document.createElement("a");this.$links.toArray().forEach(function(n,r){var i=$.url(n.href),s=i.param();if(!s.ref)return;var o=this.moduloIndex(r-e);s.ref=s.ref.split("_")[0]+"_"+o,t.href=n.href,t.search=$.param(s),n.href=t.href},this)},moduloIndex:function(e){var t=this.numLinks;return(e+t)%t},next:function(){var e=this.state.get("index");this.state.set({index:this.moduloIndex(e+1)}),r.analytics.fireGAEvent("readnext","nav-next")},prev:function(){var e=this.state.get("index"),t=this.numLinks;this.state.set({index:this.moduloIndex(e-1)}),r.analytics.fireGAEvent("readnext","nav-prev")},dismiss:function(){this.$el.fadeOut(),window.removeEventListener("scroll",this.updateScroll),r.analytics.fireGAEvent("readnext","dismiss"),store.safeSet("readnext.dismissed",!0);var e=Date.now()+this.options.ttl;store.safeSet("readnext.expiration",e)},updateScroll:function(){var e=window.scrollY,t=this.$el.position().top,n=window.innerHeight,r=this.$readNext.height();e+=n,t+=r,this.state.set({fixed:e>=t})},render:function(){var e=this.state.get("index"),t=this.state.get("fixed");this.$links.removeClass("active"),this.$links.eq(e).addClass("active"),t?this.$readNext.addClass("fixed"):this.$readNext.removeClass("fixed")}}),r.ui.initTimings=function(){if(!r.config.pageInfo.statsName||!r.config.stats_domain)return;if(Math.random()>r.config.stats_sample_rate/100)return;var e=new r.NavigationTimings;$(function(){_.defer(function(){e.fetch();var t=e.filter(function(e){return e.get("key")!=="start"}).reduce(function(e,t){if(!t.isValid())return e;var n=t.duration();if(n>0){var r=t.get("key")+"Timing";e[r]=n}return e},{});t.actionName=r.config.pageInfo.statsName,t.verification=r.config.pageInfo.statsVerification,$.ajax({type:"POST",url:r.config.stats_domain,data:JSON.stringify({rum:t}),contentType:"application/json; charset=utf-8",dataType:"json"})})})},r.ui.showWorkingDeferred=function(e,t){if(!t)return;var n=200,r="_workingCount",i=$(e);i.data(r,(i.data(r)||0)+1);var s=setTimeout(function(){i.addClass("working")},n);return t.always(function(){clearTimeout(s);var e=Math.max(0,i.data(r)-1);i.data(r,e),e==0&&i.removeClass("working")}),t},r.ui.refreshListing=function(){var e=$.url(),t=e.param();return t.bare="y",$.ajax({type:"GET",url:e.attr("base")+e.attr("path"),data:t}).done(function(e){$("body > .content").html(e).find(".promotedlink:visible").trigger("onshow")})},r.ui.Form=function(e){r.ui.Base.call(this,e),this.$el.submit($.proxy(function(e){return e.preventDefault(),this.submit(e),!1},this)),this.$el.find("[data-validate-url]").validator({https:!!r.config.https_endpoint}).on("initialize.validator",function(e){var t=$(this);t.hasClass("c-has-error")&&t.stateify("showError")}).on("valid.validator",function(e){$(this).stateify("set","success")}).on("invalid.validator",function(e,t){if(t){var n=r.utils.parseError(t.errors[0]);$(this).stateify("set","error",n.message)}}).on("loading.validator",function(e){$(this).stateify("set","loading")}).on("cleared.validator",function(e){$(this).stateify("clear")})},r.ui.Form.prototype=$.extend(new r.ui.Base,{captchaLoaded:!1,captchaChecked:!1,showStatus:function(e,t){this.$el.find(".status, .c-alert").show().toggleClass("error",!!t).text(e)},showErrors:function(e){var t=[];$.each(e,$.proxy(function(e,n){var i=r.utils.parseError(n),s=this.$el.find(".error."+i.name+(i.field?".field-"+i.field:"")),o=this.$el.filter(".form-v2").find('[name="'+i.field+'"]');s.length?s.show().text(i.message):o.length?o.stateify("set","error",i.message):t.push(i.message)},this)),t.length&&this.showStatus(t.join(", "),!0)},resetErrors:function(){this.$el.find(".error").hide()},serialize:function(){return this.$el.serializeArray()},submit:function(){this.resetErrors(),r.ui.showWorkingDeferred(this.$el,this._submit()).done($.proxy(this,"handleResult")).fail($.proxy(this,"_handleNetError"))},_submit:function(){},handleResult:function(e,t,n){this._handleResult(e,t,n)},_handleResult:function(e){this.showErrors(e.json.errors)},_handleNetError:function(e){var t=r._("an error occurred (status: %(status)s)").format({status:e.status});this.showStatus(t,!0)},loadCaptcha:function(e){var t="/api/requires_captcha";e&&(t+="/"+e);var n=this.$el;this.captchaChecked?this.captchaLoaded&&n.recaptcha():(this.captchaChecked=!0,$.getJSON(t+".json",function(e){e.required&&(n.recaptcha(),this.captchaLoaded=!0)}.bind(this)))}}),r.ui.Bubble=Backbone.View.extend({showDelay:150,hideDelay:750,animateDuration:150,initialize:function(){this.$parent=this.options.parent||this.$el.parent(),this.options.trackHover!=0&&(this.$el.hover($.proxy(this,"queueShow"),$.proxy(this,"queueHide")),this.$parent.hover($.proxy(this,"queueShow"),$.proxy(this,"queueHide")),this.$parent.click($.proxy(this,"queueShow")))},position:function(){var e=this.$parent.offset(),t=$("body").offset(),n,i;if(this.$el.is(".anchor-top")||this.$el.is(".anchor-top-centered"))n=this.$parent.outerWidth(!0)-this.$el.outerWidth(!0),i=this.$parent.outerHeight(!0)+5,this.$el.css({left:Math.max(e.left+n,0),top:e.top+i-t.top});else if(this.$el.is(".anchor-bottom-centered"))n=(this.$parent.outerWidth(!0)-this.$el.outerWidth(!0))/2,i=-this.$el.outerHeight(!0)-5,this.$el.css({left:Math.max(e.left+n,0),top:e.top+i-t.top});else if(this.$el.is(".anchor-bottom-left")){n=0,i=-this.$el.outerHeight(!0)-5;var s=e.top+i-t.top;if(s<0){this.$el.toggleClass("anchor-bottom-left",!1).toggleClass("anchor-top-left",!0),this.position();return}this.$el.css({left:Math.max(e.left+n,0),top:e.top+i-t.top})}else this.$el.is(".anchor-top-left")?(i=this.$parent.outerHeight(!0)+5,this.$el.css({left:e.left,top:e.top+i-t.top})):this.$el.is(".anchor-right-fixed")?(n=32,i=0,e.top-=$(document).scrollTop(),e.left-=$(document).scrollLeft(),this.$el.css({top:r.utils.clamp(e.top-i,0,$(window).height()-this.$el.outerHeight()),left:r.utils.clamp(e.left-n-this.$el.width(),0,$(window).width())})):this.$el.is(".anchor-left")?(n=this.$parent.outerWidth(!0)+16,i=0,this.$el.css({left:e.left+n,top:e.top+i-t.top})):(n=16,i=0,e.right=$(window).width()-e.left,this.$el.css({right:e.right+n,top:e.top+i-t.top}))},show:function(){this.cancelTimeout();if(this.$el.is(":visible"))return;this.trigger("show"),$("body").append(this.$el),this.$el.css("visibility","hidden").show(),this.render(),this.position(),this.$el.css({opacity:1,visibility:"visible"});var e=this.options.group&&this.options.group.current&&this.options.group.current!=this;e?this.options.group.current.hideNow():this._animate("show"),this.options.group&&(this.options.group.current=this)},hideNow:function(){this.cancelTimeout(),this.options.group&&this.options.group.current==this&&(this.options.group.current=null),this.$el.hide()},hide:function(e){if(!this.$el.is(":visible")){e&&e();return}this._animate("hide",$.proxy(function(){this.hideNow(),e&&e()},this))},_animate:function(e,t){if(!this.animateDuration){t&&t();return}var n,r;this.$el.is(".anchor-top")||this.$el.is(".anchor-top-centered")||this.$el.is(".anchor-top-left")?(n="top",r="-=5"):this.$el.is(".anchor-right-fixed")?(n="right",r="-=5"):this.$el.is(".anchor-left")?(n="left",r="+=5"):(n="right",r="-=5");var i=this.$el.css(n);hideProps={opacity:0},hideProps[n]=r,showProps={opacity:1},showProps[n]=i;var s,o;e=="show"?(s=hideProps,o=showProps):e=="hide"&&(s=showProps,o=hideProps),this.$el.css(s).animate(o,this.animateDuration,t)},cancelTimeout:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},queueShow:function(){this.cancelTimeout(),this.timeout=setTimeout($.proxy(this,"show"),this.showDelay)},queueHide:function(){this.cancelTimeout(),this.timeout=setTimeout($.proxy(this,"hide"),this.hideDelay)}}),r.ui.PermissionEditor=function(e){r.ui.Base.call(this,e);var t={};this.$el.find('input[type="hidden"]').each(function(e,n){t[n.name]=n.value});var n=t.type,i=t.name;this.form_id=n+"-permissions-"+i,this.permission_info=r.permissions[n],this.sorted_perm_keys=$.map(this.permission_info,function(e,t){return t}),this.sorted_perm_keys.sort(),this.original_perms=this._parsePerms(t.permissions),this.embedded=this.$el.find("form").length==0,this.$menu=null,this.embedded?(this.$permissions_field=this.$el.find('input[name="permissions"]'),this.$menu_controller=this.$el.siblings(".permissions-edit")):this.$menu_controller=this.$el.closest("tr").find(".permissions-edit"),this.$menu_controller.find("a").click($.proxy(this,"show")),this.updateSummary()},r.ui.PermissionEditor.init=function(){function e(e){$(e).find(".permissions").each(function(e,t){$(t).data("PermissionEditor",new r.ui.PermissionEditor(t))})}e("body");for(var t in r.permissions)$("."+t+"-table").on("insert-row","tr",function(t){e(this)})},r.ui.PermissionEditor.prototype=$.extend(new r.ui.Base,{_parsePerms:function(e){var t={};return e.split(",").forEach(function(e){t[e.substring(1)]=e[0]=="+"}),t.all?{all:!0}:t},_serializePerms:function(e){if(e.all)return"+all";var t=[];for(var n in e)t.push((e[n]?"+":"-")+n);return t.join(",")},_getNewPerms:function(){if(!this.$menu)return null;var e={};return this.$menu.find('input[type="checkbox"]').each(function(t,n){e[$(n).attr("name")]=$(n).prop("checked")}),e},_makeMenuLabel:function(e){var t=$.proxy(this,"updateSummary"),n=this.permission_info[e],i=$('<input type="checkbox">').attr("name",e).prop("checked",this.original_perms[e]),s=$("<label>").append(i).click(function(e){e.stopPropagation()});return e=="all"?(i.change(function(){var e=i.is(":checked");s.siblings().toggleClass("disabled",e).find('input[type="checkbox"]').prop("disabled",e),t()}),s.append(document.createTextNode(r._("full permissions")))):n&&(i.change(t),s.append(document.createTextNode(r._(n.title))),s.attr("title",r._(n.description))),s},show:function(e){if(r.access.isLinkRestricted(e.target))return;close_menus(e),this.$menu=$('<div class="permission-selector drop-choices">'),this.$menu.append(this._makeMenuLabel("all"));for(var t in this.sorted_perm_keys)this.$menu.append(this._makeMenuLabel(this.sorted_perm_keys[t]));this.$menu.on("close_menu",$.proxy(this,"hide")).find("input").first().change().end();if(!this.embedded){var n=this.$el.find("form").clone();n.attr("id",this.form_id),n.click(function(e){e.stopPropagation()}),this.$menu.append("<hr>",n),this.$permissions_field=this.$menu.find('input[name="permissions"]')}return this.$menu_controller.parent().append(this.$menu),open_menu(this.$menu_controller[0]),!1},hide:function(){this.$menu&&(this.embedded&&(this.original_perms=this._getNewPerms(),this.$permissions_field.val(this._serializePerms(this.original_perms))),this.$menu.remove(),this.$menu=null,this.updateSummary())},_renderBit:function(e){var t=this.permission_info[e],n;e=="all"?n=r._("full permissions"):t?n=r._(t.title):n=e;var i=$('<span class="permission-bit"/>').text(n);return t&&i.attr("title",r._(t.description)),i},updateSummary:function(){var e=this._getNewPerms(),t=[];if(e&&e.all)t.push(this._renderBit("all").toggleClass("added",this.original_perms.all!=1));else{if(this.original_perms.all&&!e)t.push(this._renderBit("all"));else if(!this.original_perms.all)for(var n in this.original_perms)this.original_perms[n]&&(this.embedded&&(!e||!!e[n])&&t.push(this._renderBit(n)),this.embedded||t.push(this._renderBit(n).toggleClass("removed",e!=null&&!e[n])));if(e)for(var n in e)this.permission_info[n]&&e[n]&&!this.original_perms[n]&&t.push(this._renderBit(n).toggleClass("added",!this.embedded))}t.length||t.push($('<span class="permission-bit">').text(r._("no permissions")).addClass("none"));var i=$('<div class="permission-summary">');for(var s=0;s<t.length;s++)s>0&&i.append(", "),i.append(t[s]);i.toggleClass("edited",this.$menu!=null),this.$el.find(".permission-summary").replaceWith(i),e&&this.$permissions_field&&this.$permissions_field.val(this._serializePerms(e))},onCommit:function(e){this.$el.find('input[name="permissions"]').val(e),this.original_perms=this._parsePerms(e),this.hide()}}),r.ui.scrollFixed=function(e){this.$el=$(e),this.$standin=null,this.onScroll(),$(window).bind("scroll resize",_.bind(_.throttle(this.onScroll,20),this))},r.ui.scrollFixed.prototype={onScroll:function(){if(!this.$el.is(".scroll-fixed")){var e=this.$el.outerHeight(!0)-this.$el.outerHeight(!1);this.origTop=this.$el.offset().top-e}var t=this.$el.height()<$(window).height();t&&$(window).scrollTop()>this.origTop?this.$standin||(this.$standin=$("<"+this.$el.prop("nodeName")+">").css({width:this.$el.width(),height:this.$el.height()}).attr("class",this.$el.attr("class")).addClass("scroll-fixed-standin"),this.$el.addClass("scroll-fixed").css({position:"fixed",top:0}),this.$el.before(this.$standin)):this.$standin&&(this.$el.removeClass("scroll-fixed").css({position:"",top:""}),this.$standin.remove(),this.$standin=null)}},r.ui.ConfirmButton=Backbone.View.extend({confirmTemplate:_.template('<span class="confirmation"><span class="prompt"><%- are_you_sure %></span><button class="yes"><%- yes %></button> / <button class="no"><%- no %></button></div>'),events:{click:"click"},initialize:function(){this.$target=this.$el,this.$target.wrap("<span>"),this.setElement(this.$target.parent()),this.$el.attr("class",this.$target.attr("class")).addClass("confirm-button"),this.$target.attr("class",null)},click:function(e){var t=$(e.target);this.$target.is(t)?(this.$target.hide(),this.$el.append(this.confirmTemplate({are_you_sure:r._("are you sure?"),yes:r._("yes"),no:r._("no")}))):t.is(".no")?(this.$(".confirmation").remove(),this.$target.show()):t.is(".yes")&&this.$target.trigger("confirm")}}),r.ui.SubredditSubmitText=Backbone.View.extend({initialize:function(){this.lookup=_.throttle(this._lookup,500),this.cache=new r.utils.LRUCache,this.$input=$("#sr-autocomplete"),this.$input.on("sr-changed change input",_.bind(this.lookup,this)),this.$sr=this.$el.find(".sr").first(),this.$content=this.$el.find(".content").first(),this.$content.text().trim()&&(this.$sr.text(r.config.post_site),this.show())},_lookup:function(){this.$content.empty();var e=this.$input.val();this.$sr.text(e),this.$el.addClass("working"),this.req&&this.req.abort&&this.req.abort(),this.req=this.cache.ajax(e,{url:"/r/"+e+"/api/submit_text/.json",dataType:"json"}).done(_.bind(this.settext,this,e)).fail(_.bind(this.error,this))},show:function(){this.$el.addClass("enabled")},hide:function(){this.$el.removeClass("enabled")},error:function(){delete this.req,this.hide()},settext:function(e,t){delete this.req,!t.submit_text||!t.submit_text.trim()?this.hide():(this.$sr.text(e),this.$content.html($.unsafe(t.submit_text_html)),this.$el.removeClass("working"),this.show())}}),r.ui.TextCounter=Backbone.View.extend({events:{"input input":"onInput","input textarea":"onInput"},initialize:function(e){this.error=!1,this.maxLength=e.maxLength,this.$counterDisplay=this.$el.find(".text-counter-display"),this.$counterParent=this.$counterDisplay.parent(),this.$input=this.$el.find(".text-counter-input"),this.update(e.initialText||"")},onInput:function(e){this.update(e.target.value)},update:function(e){var t=this.maxLength-e.length;this.$counterDisplay.text(t),t<0&&!this.error?(this.$counterParent.addClass("has-error"),this.error=!0,this.trigger("invalid")):t>=0&&this.error&&(this.$counterParent.removeClass("has-error"),this.error=!1,this.trigger("valid"))}}),r.ui.Recaptcha=Backbone.View.extend({initialize:function(){this.captchaLoaded=!1,this.captchaChecked=!1},loadCaptcha:function(){var e="/api/requires_captcha";this.options.location&&(e+="/"+this.options.location),this.captchaChecked?this.captchaLoaded&&this.$el.recaptcha():(this.captchaChecked=!0,$.getJSON(e+".json",function(e){e.required&&(this.$el.recaptcha(),this.captchaLoaded=!0)}.bind(this)))}}),function(e,t,n,i,s){var o={large:"modal-dialog-lg",medium:"",small:"modal-dialog-sm"},u={template:a,animate:!0,close:!0,modal:!0,shortcuts:!0,footer:!1,content:"",className:"",title:!1,size:"medium",closingButtonText:r._("close this window")},a=n.template('<div class="modal <% if (animate) { %> fade <% } %> <%- className %>"><div class="modal-dialog <% if (size) { %><%- SIZE_CLASS_LOOKUP[size] %><% } %>"><div class="modal-content"><% if (title || close) { %><div class="modal-header"><div class="modal-header-close"><% if (close) { %><a href="javascript: void 0;" class="c-close c-hide-text" data-dismiss="modal"><%= closingButtonText %></a><% } %></div><div class="modal-header-title"><% if (title) { %><%= title %><% } %></div></div><% } %><div class="modal-body"><%= content %></div><% if (footer) { %><div class="modal-footer"><%= footer %></div><% } %></div></div></div>'),f=e.Popup=function(e){e=n.extend({},u,e,{SIZE_CLASS_LOOKUP:o});var r=a(e),i=this.listener=t({}),s=this.$=t(r);s.modal({show:!1,backdrop:e.backdrop||!!e.modal,keyboard:e.shortcuts}),[["show.bs.modal","show.r.popup"],["shown.bs.modal","opened.r.popup"],["hide.bs.modal","hide.r.popup"],["hidden.bs.modal","closed.r.popup"]].forEach(function(e){s.on(e[0],function(t,n){i.trigger(e[1],[n])})}),s.attr("tabindex",s.attr("tabindex")||0)};["show","hide","toggle"].forEach(function(e){f.prototype[e]=function(){this.$.modal(e)}}),[["on","on"],["once","one"],["off","off"]].forEach(function(e){f.prototype[e[0]]=function(){this.listener[e[1]].apply(this.listener,arguments)}})}((this.r=this.r||{})&&(r.ui=r.ui||{}),this.jQuery,this._,this),!function(e,t){var n="dskonb_dismiss";e.desktopOnboardingBar={init:function(){t(".desktoponboardingbar__close").on("click",function(i){i.preventDefault(),t(".desktoponboardingbar").hide(),e.cookies.set(n,"1",{expires:365})})}}}(r,jQuery),$(function(){r.desktopOnboardingBar.init()}),r.ui.EmailForm=function(){r.ui.Form.apply(this,arguments),this.$submit=this.$el.find(".submit button")},r.ui.EmailForm.prototype=$.extend(new r.ui.Form,{submit:function(){},focus:function(){}}),r.ui.DesktopOnboarding=function(e,t){r.ui.Base.apply(this,arguments),this.onboardingID=r.uuid(),this.selectedGeneratedUsername=!1,this.startTimestamp=0,this.validEmailSubmitted=!1,this.categoriesAlreadyPreselected=!1,this.categories={},this.usernames=[],this.usernameAfter=0,this.similarSubredditsCount=0,this.personalizedSubredditsCount=0,this.topSubredditsList=[],this.personalizedSubredditsList=[],this.similarSubredditsList=[],this.geoList=[],this.viewedSimilarSubreddits=!1,this.registerForm=t,this.onboardingVersion="r2_desktop_onboarding_2017q3",this.isGeoVariant=r.config.feature_geopopular_onboarding,this.isGeo=r.config.feature_geopopular_onboarding==="treatment_1",this.hasVisitedSubreddits=!0,this.noSubscriptionStepVariant=r.config.feature_no_subscription_step,this.isNoSubscriptionStep=this.noSubscriptionStepVariant==="treatment",this.categoryData={subcategories:{similar:[],visited:[],top:[],geo:[]}},this.subscribeTextOptions={"default":{subscribe:r._("Subscribe"),unsubscribe:r._("Subscribed")},treatment_1:{subscribe:r._("Follow"),unsubscribe:r._("Followed")},treatment_2:{subscribe:r._("Join"),unsubscribe:r._("Joined")}},this.subscribeText=this.subscribeTextOptions[r.config.feature_subscribe_join_follow_test]||this.subscribeTextOptions.default,this.selectedSubreddits={},this.orderedSelectedSubreddits=[],this.currentSubredditCategory,this.currentSubredditName,this.currentCategory=this.hasVisitedSubreddits?"justForYou":"recommended",this.email=new r.ui.EmailForm(this.$el.find("#desktop-onboarding-sign-up-form")),this.$formContainer=this.$el.find(".desktop-onboarding-sign-up__form-container"),this.$formContainer.find(".desktop-onboarding-sign-up__form-toggler").on("click",function(e){this.toggleLoginScreen(e,null,null)}.bind(this)),this.$el.find("#desktop-onboarding-sign-up-form").submit(function(e){var t=this.email.$el.find("[data-validate-url]"),n=t.val().trim();this.validEmailSubmitted=!!n&&!!r.utils.isEmail(n),!n||this.validEmailSubmitted?($("#desktop-onboarding-register-email").val(n),this.nextStep(),$.isEmptyObject(this.categories)?this.getCategories():this.populateSubredditDetails(this.currentCategory)):(t.stateify("set","error","that email is invalid"),r.onboardingEvents.failedEmailValidation(this.onboardingID,this.onboardingVersion,"that email is invalid"))}.bind(this)),this.$el.find("#passwd_reg").one("focus",function(){t.loadCaptcha("register")});var n=this.$el.find("#register-form");n.on("submit",function(){r.cookies.set("dskonb","1",{expires:7}),window.grecaptcha&&window.grecaptcha.reset(),this.orderedSelectedSubreddits.length||n.append('<input type="hidden" name="dest" value="/r/popular" />')}.bind(this)),this.$el.find(".username-generator__suggestions").on("click",".username-generator__item",function(e){e.preventDefault(),this.selectedGeneratedUsername=!0,this.populateUsernameField($(e.currentTarget).data("username"))}.bind(this)),this.$el.find(".username-generator__refresh-button").on("click",_.throttle(this.getUsernameSuggestions.bind(this),500,{leading:!0})),this.$el.find("#user_reg").on("keyup",function(){this.selectedGeneratedUsername=!1}.bind(this)),this.$el.find(".desktop-onboarding-step_subreddit-picker .desktop-onboarding__back-button").on("click",function(){this.previousStep()}.bind(this)),this.$el.find(".desktop-onboarding-step_subreddit-picker .desktop-onboarding__next-button").on("click",function(){var e=Object.keys(this.selectedSubreddits);this.$el.find("#desktop-onboarding-subreddits").val(e),this.isLastStep()&&(this.registerForm.errorCallback=function(e){var t={USERNAME_TAKEN:"That username is already taken.<br>Go back and create a new username.",BAD_CAPTCHA:"Please go back and complete the captcha.",BAD_USERNAME:"That username is invalid.<br>Go back and create a new username.",RATELIMIT:"You're creating too many accounts.<br>Go back a step and wait a few minutes.",DEFAULT:"An error has occurred.<br>Go back and try again."},n=t[e]||t.DEFAULT;this.$el.find(".registration-error").html(n).addClass("active"),e==="USERNAME_TAKEN"&&r.onboardingEvents.failedUsernameValidation(this.onboardingID,this.onboardingVersion,"That username is not available")}.bind(this)),this.nextStep(),r.onboardingEvents.submittedSubscription(this.onboardingID,this.onboardingVersion,this.orderedSelectedSubreddits.length,this.orderedSelectedSubreddits)}.bind(this)),this.$el.find(".desktop-onboarding-step_username .desktop-onboarding__next-button").on("click",function(){var e=this.$el.find("#passwd_reg").val();this.$el.find("#passwd2_reg").val(e);var t=this.$el.find("#register-form").find("#user_reg"),n=this.$el.find("#register-form").find("#passwd_reg");r.onboardingEvents.submittedUsername(this.onboardingID,this.onboardingVersion,t.val(),this.selectedGeneratedUsername);if(t.stateify("getCurrentState")==="error"){var i=t.stateify("getMessage");r.onboardingEvents.failedUsernameValidation(this.onboardingID,this.onboardingVersion,i)}this.nextStep()}.bind(this)),this.$el.find(".desktop-onboarding-step_username .desktop-onboarding__back-button").on("click",function(){this.previousStep()}.bind(this)),this.$picker=this.$el.find(".subreddit-picker"),this.$pickerCategories=this.$picker.find(".subreddit-picker__categories"),this.$pickerSubreddits=this.$picker.find(".subreddit-picker__subreddits"),this.$pickerCategories.on("click","a.subreddit-picker__category",function(e){e.preventDefault();var t=$(e.currentTarget);this.populateSubredditDetails(t.data("category"));var n=t.data("index"),i=t.data("category-name");r.onboardingEvents.clickedCategory(this.onboardingID,this.onboardingVersion,n,i)}.bind(this)),this.$pickerSubreddits.on("click","button.subreddit-picker__subreddit-button",function(e,t){t=t===!1?!1:!0,this.handleSubredditClick($(e.currentTarget),t)}.bind(this)),this.$el.find(".subreddit-picker__fail>a").on("click",function(e){e.preventDefault(),this.hidePickerTryAgain(),this.renderDummyPicker(),this.getCategories()}.bind(this)),this.$el.find(".subreddit-picker__category-fail>a").on("click",function(e){e.preventDefault(),this.hidePickerTryAgain(),this.renderDummySubreddits(),this.populateSubredditDetails(this.currentCategory)}.bind(this)),this.renderDummyPicker(),this.gotoStep("sign-up");var i=this.$el.find(".google-button__error");this.googleSignUpVariant=r.config.feature_google_sign_up,this.isGoogleSignUp=this.googleSignUpVariant==="treatment",this.googleSignUpClicked=!1,this.isGoogleSignUp&&this.$el.find(".google-experiment").addClass("visible").on("click",function(e){this.googleSignUpClicked||(this.googleSignUpClicked=!0,i.addClass("visible"),r.onboardingEvents.pressedGoogleButton())})},r.ui.DesktopOnboarding.prototype=$.extend(new r.ui.Base,{MAX_SUGGESTIONS:5,MAX_SUBREDDIT_DESCRIPTION_LENGTH:90,suggestionsTemplate:_.template('<% if(usernames && usernames.length) { %><ul><% _.each(usernames, function(username) { %><li><a href="." data-username="<%- username %>" class="username-generator__item"><%- username %></a></li><% }); %></ul><% } %>'),categoryTemplate:_.template('<li><a class="subreddit-picker__category" href="." data-category="<%= id %>"data-category-name="<%= name %>"data-index="<%= idx %>"><span class="subreddit-picker__label"><%= displayName %></span><span class="subreddit-picker__selected-count"></span></a></li>'),categoryDummyTemplate:_.template('<li><span class="subreddit-picker__category subreddit-picker__category_dummy"><span>xxxxxxxxxxxxxxx</span></span></li>'),subredditTemplate:_.template('<li class="subreddit-picker__subreddit"><% if (icon_img) { %><div class="subreddit-picker__subreddit-icon"><img src="<%= icon_img %>" /></div><% } else { %><div class="subreddit-picker__subreddit-icon subreddit-picker__subreddit-icon_noimg"></div><% } %><div class="subreddit-picker__subreddit-content"><span class="subreddit-picker__subreddit-name"><%= prefix %><strong><%= display_name_prefixed %></strong></span><% if (subscribers) { %><span><%= subscribers %> subscribers</span><% } %><p <% if (tooltipDescription) { %> title="<%= tooltipDescription %>"<% } %>><%= description %></p></div><button data-fullname="<%= name %>" data-display-name="<%= display_name %>" data-subreddit-position="<%= subreddit_position %>" data-category="<%= category %>"class="c-btn c-btn-primary subreddit-picker__subreddit-button<% if (isSubscribed) { %> subreddit-picker__subreddit-button_subscribed<% } %>"<% if (isSubscribed) { %>data-action="unsubscribe"><%= unsubscribeText %><% } else { %>data-action="subscribe"><%= subscribeText %><% } %></button></li>'),subredditDummyTemplate:_.template('<li class="subreddit-picker__subreddit subreddit-picker__subreddit_dummy"><div class="subreddit-picker__subreddit-icon"></div><div class="subreddit-picker__subreddit-content"><span>xxxxxxxxxxxxxxx</span><p>xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</p></div><div class="c-btn c-btn-primary subreddit-picker__subreddit-button">XXXXXXXXXX</div></li>'),recommendedTemplate:_.template('<% if ((!this.hasVisitedSubreddits) && similar && similar.length) { %><h3 class="subreddit-picker__subreddits-header similar-header">Recommended Communities</h3><% _.each(similar, function(subredditHTML) { %><%= subredditHTML %><% }); %><% } %><h3 class="subreddit-picker__subreddits-header">Top Popular Communities</h3><% _.each(top, function(subredditHTML) { %><%= subredditHTML %><% }); %>'),justForYouTemplate:_.template("<% if (visited && visited.length) { %><h3 class='subreddit-picker__subreddits-header'>What we think you might like...</h3><% _.each(visited, function(subredditHTML) { %><%= subredditHTML %><% }); %><% } %><% if (similar && similar.length) { %><h3 class=\"subreddit-picker__subreddits-header similar-header\">You might also like...</h3><% _.each(similar, function(subredditHTML) { %><%= subredditHTML %><% }); %><% } %>"),geoTemplate:_.template("<% if (geo && geo.length) { %><h3 class='subreddit-picker__subreddits-header'>Communities in <%= region %></h3><% _.each(geo, function(subredditHTML) { %><%= subredditHTML %><% }); %><% } %>"),toggleLoginScreen:function(e,t,n){var i=t?"login":"create";e&&(e.preventDefault(),i=$(e.currentTarget).data("form")),this.$formContainer.toggleClass
("c-is-create",!1).toggleClass("c-is-login",!1).toggleClass("c-is-"+i,!0),this.$formContainer.find("input[autofocus]:visible").focus(),n!==!1&&(i==="login"?r.onboardingEvents.viewedLoginScreen(this.onboardingID,this.onboardingVersion):i==="create"&&r.onboardingEvents.viewedCreateAccountScreen(n?n.eventName:null,this.onboardingID,this.onboardingVersion))},renderDummyPicker:function(){this.renderDummyCategories(),this.renderDummySubreddits()},renderDummyCategories:function(){var e=[];$.each(Array(28),function(){e.push(this.categoryDummyTemplate())}.bind(this)),this.$pickerCategories.html(e.join(""))},renderDummySubreddits:function(){var e=[];$.each(Array(16),function(){e.push(this.subredditDummyTemplate())}.bind(this)),this.$pickerSubreddits.html(e.join(""))},onShowOnboarding:function(e,t){this.toggleLoginScreen(null,e,t),this.maybePreloadUsernames(!0);var n=r.cookies.get("_recent_srs"),i=this;n?$.when(this.getVisitedSubreddits(n),this.getSimilarSubreddits(n)).then(function(){if(arguments&&arguments.length&&arguments[0][0]&&arguments[0][0].data){var e=arguments[0][0].data.children,t=arguments[1][0].data.children;e.forEach(function(e){var t=e.data;if(i.isBlacklisted(t))return;i.categoryData.subcategories.visited[t.name]={category:"visited",subreddit:t}}),t.forEach(function(e){var t=e.data;i.categoryData.subcategories.similar[t.name]={category:"similar",subreddit:t}}),$.isEmptyObject(i.categoryData.subcategories.visited)&&(i.hasVisitedSubreddits=!1)}else i.hasVisitedSubreddits=!1}).fail(function(){i.hasVisitedSubreddits=!1}):i.hasVisitedSubreddits=!1,this.isGeo&&$.when(this.getGeoSubreddits()).then(function(){try{i.region=arguments[0].region;var e=arguments[0].data.children;topSubreddit=_.max(e,function(e){return e.data.subscribers}),i.categoryData.subcategories.top[topSubreddit.data.name]={category:"geo",subreddit:topSubreddit.data},e.length>=5?e.forEach(function(e){var t=e.data;i.categoryData.subcategories.geo[t.name]={category:"geo",subreddit:t}}):i.isGeo=!1}catch(t){i.isGeo=!1}}).fail(function(){i.isGeo=!1})},hasViewedSimilarSubreddits:function(){if(this.viewedSimilarSubreddits)return!0;var e=this.$el.find(".subreddit-picker"),t=this.$el.find(".similar-header"),n=e&&e.height()+e.offset().top,i=t.length&&t.offset().top;return i&&i<n&&(this.viewedSimilarSubreddits=!0,r.onboardingEvents.viewedSimilarSubreddits(this.onboardingID,this.onboardingVersion,this.similarSubredditsCount),this.$el.find(".subreddit-picker__subreddits").unbind("scroll")),this.viewedSimilarSubreddits},getCategories:function(){return $.getJSON(this.assembleApiUrl("/api/available_subreddit_categories.json")).then(function(e){var t=[],n=0;if(this.hasVisitedSubreddits){var i=this.categoryTemplate({id:"justForYou",name:"Just for you",displayName:"Just for you",idx:n++});t.push(i)}var s=this.categoryTemplate({id:"recommended",name:this.hasVisitedSubreddits?"Popular with Redditors":"Recommended",displayName:this.hasVisitedSubreddits?"Popular with Redditors":"Recommended",idx:n++});t.push(s),this.isGeoVariant&&this.isGeoVariant.indexOf("control")>-1&&r.experimentEvents.exposeVariant(1020,"geopopular_onboarding","growth",this.isGeoVariant);if(this.isGeo){r.experimentEvents.exposeVariant(1020,"geopopular_onboarding","growth",this.isGeoVariant);var o=this.categoryTemplate({id:"geo",name:"Near you",displayName:"Near you",idx:n++});t.push(o)}var u=[];$.each(e,function(e,r){var i={id:r.category_id,name:r.category_name,displayName:r.category_name,idx:n++},s=this.categoryTemplate(i);this.categories[r.category_id]=r.category_name,t.push(s),u.push(this.getCategoryData(r.category_id))}.bind(this)),this.$pickerCategories.html(t.join("")),$.when.apply($,u).always(function(){var e=this;Object.keys(this.categoryData.subcategories.similar).forEach(function(t,n){t in e.categoryData.subcategories.visited&&delete e.categoryData.subcategories.similar[t]}),this.hasVisitedSubreddits&&(this.personalizedSubredditsList=Object.values(this.categoryData.subcategories.visited).slice(0,5),this.personalizedSubredditsCount=this.personalizedSubredditsList?this.personalizedSubredditsList.length:0),this.similarSubredditsList=Object.values(this.categoryData.subcategories.similar).slice(0,5),this.similarSubredditsCount=this.similarSubredditsList?this.similarSubredditsList.length:0,this.topSubredditsList=Object.values(this.categoryData.subcategories.top),this.topSubredditsList.sort(function(){return.5-Math.random()}),this.isGeo&&(this.geoList=Object.values(this.categoryData.subcategories.geo)),this.hasVisitedSubreddits?this.populateSubredditDetails("justForYou"):this.populateSubredditDetails("recommended")}.bind(this))}.bind(this)).fail(function(){r.onboardingEvents.failedInterestLoading(this.onboardingID,this.onboardingVersion),this.showPickerTryAgain()}.bind(this))},getCategoryData:function(e){var t={category:e,max_recs:20};return $.getJSON(this.assembleApiUrl("/api/subreddits_in_category.json",t)).then(function(t){var n=t.data.children;this.categoryData[e]=n,topSubreddit=_.max(n,function(e){return e.data.subscribers}),this.categoryData.subcategories.top[topSubreddit.data.name]={category:e,subreddit:topSubreddit.data}}.bind(this)).fail(function(){r.onboardingEvents.failedSubredditLoading(this.onboardingID,this.onboardingVersion)}.bind(this))},showPickerCategoryTryAgain:function(){this.$picker.toggleClass("c-picker-category-fail",!0)},showPickerTryAgain:function(){this.$picker.toggleClass("c-picker-fail",!0)},hidePickerTryAgain:function(){this.$picker.toggleClass("c-picker-category-fail",!1).toggleClass("c-picker-fail",!1)},renderSubredditItem:function(e,t,n){var i=r.utils.clearMarkdown(t.public_description),s="";return i.length>this.MAX_SUBREDDIT_DESCRIPTION_LENGTH&&(s=i.replace(/"/g,"&quot;"),i=i.substring(0,this.MAX_SUBREDDIT_DESCRIPTION_LENGTH)+"..."),this.subredditTemplate({icon_img:t.icon_img,name:t.name,display_name:t.display_name,display_name_prefixed:t.display_name_prefixed.slice(2),prefix:t.display_name_prefixed.slice(0,2),subscribers:r.utils.prettyRoundNumber(t.subscribers),description:i,tooltipDescription:s,category:e,isSubscribed:t.name in this.selectedSubreddits,subreddit_position:n,subscribeText:this.subscribeText.subscribe,unsubscribeText:this.subscribeText.unsubscribe})},renderSubredditsByCategory:function(e){var t=this.categoryData[e];if(t&&t.length){var n=[];$.each(t,function(t,r){n.push(this.renderSubredditItem(e,r.data,t))}.bind(this)),this.$pickerSubreddits.html(n.join(""))}},populateCustomCategories:function(e){if(e==="geo"){var t=this.geoList.map(function(e,t){return this.renderSubredditItem(e.category,e.subreddit,t)}.bind(this));this.$pickerSubreddits.html(this.geoTemplate({geo:t,region:this.region}))}else{var n=this.personalizedSubredditsList.map(function(e,t){var n=t;return this.renderSubredditItem(e.category,e.subreddit,n)}.bind(this)),r=[],i=this.similarSubredditsList.map(function(e,t){r.push(e.subreddit.display_name);var n=t+this.personalizedSubredditsCount;return this.renderSubredditItem(e.category,e.subreddit,n)}.bind(this)),s=this.topSubredditsList.map(function(e,t){var n=this.hasVisitedSubreddits?0:t+this.similarSubredditsCount+this.personalizedSubredditsCount;return this.renderSubredditItem(e.category,e.subreddit,n)}.bind(this));e==="justForYou"?(this.$pickerSubreddits.html(this.justForYouTemplate({similar:i,visited:n,subredditName:this.currentSubredditName,top:s})),this.categoriesAlreadyPreselected||this.$el.find("button[data-category='visited']").trigger("click",[!1])):e==="recommended"&&this.$pickerSubreddits.html(this.recommendedTemplate({similar:i,visited:n,subredditName:this.currentSubredditName,top:s})),this.hasViewedSimilarSubreddits()||this.$el.find(".subreddit-picker__subreddits").on("scroll",_.throttle(function(){this.hasViewedSimilarSubreddits()}.bind(this),1e3)),this.categoriesAlreadyPreselected=!0}},isBlacklisted:function(e){return!e.over18&&!e.quarantine&&e.subreddit_type!=="private"&&e.subreddit_type!=="gold_only"&&(e.whitelist_status==="all_ads"||e.subreddit_type==="user")&&e.allow_discovery?!1:!0},getVisitedSubreddits:function(e){var t={id:e};return $.getJSON(this.assembleApiUrl("/api/info.json",t))},getSimilarSubreddits:function(e){var t={sr_fullnames:e,max_rec:5};return $.getJSON(this.assembleApiUrl("/api/similar_subreddits.json",t))},getGeoSubreddits:function(){var e={max_recs:20};return $.getJSON(this.assembleApiUrl("/api/subreddits_for_ip.json",e))},populateSubredditDetails:function(e){this.currentCategory=e,this.$el.find(".subreddit-picker__category").toggleClass("subreddit-picker__category_selected",!1).filter("[data-category="+e+"]").toggleClass("subreddit-picker__category_selected",!0),this.$pickerSubreddits.scrollTop(0);if(e==="recommended"||e==="justForYou"||e==="geo")this.populateCustomCategories(e);else{var t=this.categoryData[e];t&&t.length?this.renderSubredditsByCategory(e):(this.renderDummySubreddits(),this.getCategoryData(e).then(function(){this.renderSubredditsByCategory(e)}.bind(this)).fail(function(){this.showPickerCategoryTryAgain()}.bind(this)))}},updateSubredditPickerProgressBar:function(e){var t=5,n=Math.min(100,e/t*100);this.$el.find(".subreddit-picker-progress__bar").width(n+"%"),this.$el.find(".subreddit-picker-progress__num").text(e),this.$el.find(".subreddit-picker-progress__denom").text(t)},handleSubredditClick:function(e,t){var n=e.data("fullname"),i=e.data("display-name"),s=e.data("subreddit-position"),o=e.data("category"),u=this.orderedSelectedSubreddits.length,a=this.currentCategory==="recommended"||this.currentCategory==="justForYou"||this.currentCategory==="geo"?this.currentCategory:this.categories[this.currentCategory],f=!0;if(n in this.selectedSubreddits){f=!1,delete this.selectedSubreddits[n];var l=this.orderedSelectedSubreddits.indexOf(i);this.orderedSelectedSubreddits.splice(l,1)}else this.selectedSubreddits[n]=o,this.orderedSelectedSubreddits.push(i);e.toggleClass("subreddit-picker__subreddit-button_subscribed",f).text(f?this.subscribeText.unsubscribe:this.subscribeText.subscribe);var c=n in this.categoryData.subcategories.similar,h=n in this.categoryData.subcategories.top,p=n in this.categoryData.subcategories.visited,d=n in this.categoryData.subcategories.geo;this.hasVisitedSubreddits?((c||p)&&this.updateSelectedCount("justForYou",f),h&&this.updateSelectedCount("recommended",f)):(c||h||p)&&this.updateSelectedCount("recommended",f);var v=p&&this.hasVisitedSubreddits;this.updateSelectedCount(o,f),t&&r.onboardingEvents.clickedSubreddit(this.onboardingID,this.onboardingVersion,i,a,f,s,u,v,c),this.subredditCount=Object.keys(this.selectedSubreddits).length,this.updateSubredditPickerProgressBar(this.subredditCount)},updateSelectedCount:function(e,t){var n=this.$el.find(".subreddit-picker__category[data-category="+e+"]"),r=n.find(".subreddit-picker__label"),i=n.find(".subreddit-picker__selected-count"),s=i.data("count")||0;if(t)s++;else{s--;if(s<=0){i.data("count",0).text(""),r.removeClass("label-truncate");return}}r.addClass("label-truncate"),i.data("count",s).text(s+" selected")},getUsernameSuggestions:function(){if(this.usernames.length>0&&this.usernameAfter<this.usernames.length-1){var e=this.usernameAfter,t=this.usernameAfter+this.MAX_SUGGESTIONS;return this.usernameAfter=t,this.$el.find(".username-generator__suggestions").html(this.suggestionsTemplate({usernames:(this.usernames||[]).slice(e,t)})),null}return $.getJSON(this.assembleApiUrl("/api/v1/generate_username.json"),function(e){this.usernames=e.usernames,this.usernameAfter=this.MAX_SUGGESTIONS,this.$el.find(".username-generator__suggestions").html(this.suggestionsTemplate({usernames:(e.usernames||[]).slice(0,this.MAX_SUGGESTIONS)}))}.bind(this)).fail(function(){r.onboardingEvents.failedUsernameLoading(this.onboardingID,this.onboardingVersion)}.bind(this))},populateUsernameField:function(e){this.$el.find("#user_reg").val(e).change()},maybePreloadUsernames:function(e){var t=this.getSteps(),n=t.indexOf(this.currentStep);if(n===0&&!e)return;var r=n+1,i=t[r];if(i==="username"){var s=this.getUsernameSuggestions();s&&s.done(function(){this.$el.find(".desktop-onboarding-step_username").addClass("c-username-picker-shown")}.bind(this))}},getNextButtonText:function(e){var t=this.getSteps(),n=t.indexOf(e)+1,i=r.config.feature_swap_steps_two_and_three_recalibration;if(n===1)return"Next";if(n===3)return"Submit";switch(i){case"treatment_4":case"treatment_5":case"treatment_6":case"treatment_7":return"Submit";default:return"Next"}},shouldShowStepNumber:function(){var e=r.config.feature_swap_steps_two_and_three_recalibration;switch(e){case"treatment_1":case"treatment_2":case"treatment_4":case"treatment_6":return!1;default:return!0}},getSteps:function(){var e=r.config.feature_swap_steps_two_and_three_recalibration;switch(e){case"treatment_2":case"treatment_3":case"treatment_4":case"treatment_5":return["sign-up","username","subreddit-picker"];case"treatment_6":case"treatment_7":return["sign-up","username"];default:return["sign-up","subreddit-picker","username"]}},isLastStep:function(){var e=this.getSteps(),t=e.indexOf(this.currentStep);return t===e.length-1},didExposeExperiment:!1,maybeExposeExperiment:function(){var e=this.getSteps().indexOf(this.currentStep),t=r.config.feature_swap_steps_two_and_three_recalibration;t&&e===1&&!this.didExposeExperiment&&(r.experimentEvents.exposeVariant(324,"swap_steps_two_and_three_recalibration","growth",t),this.didExposeExperiment=!0)},gotoStep:function(e){this.currentStep=e,this.$el.removeAttr("class").toggleClass("c-step-"+e,!0);var t=490;if(e==="subreddit-picker"){var n=Math.round(.7*$(window).height());n>t+50&&(t=n);var i=r.config.feature_subscribe_join_follow_test;i&&r.experimentEvents.exposeVariant(1026,"subscribe_join_follow_test","growth",i)}this.$el.height(t),this.$el.find("input[autofocus]:visible").focus();var s=this.getSteps(),o=s.indexOf(e),u=o+1,a=s.length;this.shouldShowStepNumber()?this.$el.find(".desktop-onboarding__step-number").text("Step "+u+" of "+a).css("visibility","visible"):this.$el.find(".desktop-onboarding__step-number").css("visibility","hidden"),this.$el.find(".desktop-onboarding__next-button").text(this.getNextButtonText(e)),this.maybePreloadUsernames(),this.maybeExposeExperiment()},_moveOneStep:function(e){var t=this.getSteps(),n=t.indexOf(this.currentStep);if(n===-1)throw"Onboarding step not found";if(e===-1&&n<=0)throw"No onboarding step to move back to";if(e===1&&n>=t.length-1)return this.$el.find("#register-form").submit();var i=t[n+e];this.gotoStep(i),i==="sign-up"?r.onboardingEvents.viewedCreateAccountScreen(null,this.onboardingID,this.onboardingVersion):i==="subreddit-picker"?r.onboardingEvents.viewedSubscriptionScreen(this.onboardingID,this.onboardingVersion,this.validEmailSubmitted):i==="username"&&r.onboardingEvents.viewedUsernameScreen(this.onboardingID,this.onboardingVersion)},canMoveToNextStep:function(){var e=this.getSteps(),t=e.indexOf(this.currentStep);if(this.currentStep==="username"&&t<e.length-1){var n=this.$el.find("#register-form").find("#user_reg"),i=this.$el.find("#register-form").find("#passwd_reg");n.val()||n.stateify("set","error",r._("username must have between 3 and 20 characters")),i.val()||i.stateify("set","error",r._("the password must be at least 6 characters"));var s=n.stateify("getCurrentState")==="error"||i.stateify("getCurrentState")==="error";if(s)return!1}return!0},nextStep:function(){this.canMoveToNextStep()&&this._moveOneStep(1)},previousStep:function(){this._moveOneStep(-1),r.onboardingEvents.clickedBack(this.onboardingID,this.onboardingVersion,this.orderedSelectedSubreddits.length)},focus:function(){this.$el.find("input#desktop-onboarding-email").focus()},close:function(){this.gotoStep("sign-up")},assembleApiUrl:function(e,t){var n=window.location.search,r=t||{};if(!n&&!r)return e;if(n&&r)return e+n+"&"+$.param(r);var i=e+"?";return i+=n.substring(1)+$.param(r),i}}),!function(e,t){e.commentsignupbar={$el:null,init:function(){this.$el=t(".commentsignupbar");if(!this.$el.length)return;e.signupCTAEvents&&e.signupCTAEvents.viewCTA()}}}(r,jQuery),$(function(){r.commentsignupbar.init()}),!function(e,t){var n="listingsignupbar_dismiss";e.listingSignupBar={$el:null,init:function(){this.$el=t(".listingsignupbar");if(!this.$el.length)return;var i={version_2:"Come for the cats, stay for the empathy.",version_3:"Where a community about your favorite things is waiting for you."},s={version_2:"and start exploring.",version_3:"and subscribe to one of thousands of communities."};if(e.config.feature_net_neutrality)this.$el.find(".listingsignupbar__title").text("Welcome to Reddit."),this.$el.find(".listingsignupbar__desc").text("Upvote net neutrality for a free and open internet."),this.$el.find(".listingsignupbar__cta-desc").text("and make your voice heard.");else{var o=Math.random();if(o>.33){var u="version_2";o>.66&&(u="version_3"),this.$el.find(".listingsignupbar__title").text("Welcome to Reddit."),this.$el.find(".listingsignupbar__desc").text(i[u]),this.$el.find(".listingsignupbar__cta-desc").text(s[u])}}this.$el.find(".listingsignupbar__close").on("click",function(t){t.preventDefault(),this.$el.hide(),e.signupCTAEvents&&e.signupCTAEvents.clickHide(),e.cookies.set(n,"1",{expires:365})}.bind(this)),e.signupCTAEvents&&e.signupCTAEvents.viewCTA()}}}(r,jQuery),$(function(){r.listingSignupBar.init()}),r.login={post:function(e,t,n){typeof n=="undefined"&&(n=!0);var r=$('input[name="user"]',e.$el).val(),i="/api/"+t+(n?"/"+r:""),s=e.serialize();return s.push({name:"api_type",value:"json"}),$.ajax({url:i,type:"POST",dataType:"json",data:s})}},r.login.ui={init:function(){r.config.logged||($(".content .login-form, .content #login-form, .side .login-form").each(function(e,t){new r.ui.LoginForm(t)}),$(".content .register-form, .content #register-form").each(function(e,t){new r.ui.RegisterForm(t)}),this.popup=new r.ui.LoginPopup,$(document).delegate(".login-required","click",$.proxy(this,"loginRequiredAction")))},_getActionDetails:function(e){var t=$(e);return t.hasClass("up")?{eventName:"upvote",description:r._("Vote on Reddit content by signing up!")}:t.hasClass("down")?{eventName:"downvote",description:r._("Vote on Reddit content by signing up!")}:t.hasClass("arrow")?{eventName:"arrow",description:r._("Vote on Reddit content by signing up!")}:t.hasClass("give-gold")?{eventName:"give-gold",description:r._("You need to be logged in to give gold.")}:t.parents("#header").length&&t.attr("href").indexOf("login")!==-1?{eventName:"login-or-register"}:t.parents(".subscribe-button").length?{eventName:"subscribe-button",description:r._("You need to be logged in to subscribe to subreddits.")}:t.parents(".submit-link").length?{eventName:"submit-link",description:r._("You need to be logged in to submit things.")}:t.parents(".submit-text").length?{eventName:"submit-text",description:r._("You need to be logged in to submit things.")}:t.hasClass("listingsignupbar__container")||t.parents(".listingsignupbar__container").length?{eventName:"cta-banner"}:t.parents(".commentsignupbar__container").length?{eventName:"comment-signup-bar",description:r._("Comment on Reddit content by signing up!")}:t.parents(".comment-save-button").length?{eventName:"comment-save-button",description:r._("Comment on Reddit content by signing up!")}:t.parents(".link-save-button").length?{eventName:"link-save-button",description:r._("You need to be logged in to save a post.")}:t.parents(".reply-button").length?{eventName:"reply-button",description:r._("Comment on Reddit content by signing up!")}:{eventName:t.attr("class"),description:r._("You need to be logged in to do that.")}},_logEvent:function(e){var t=$(e.target),n=t.thing(),i=t.data("type")||n.data("type"),s=t.data("fullname")||n.data("fullname"),o=t.data("event-action"),u=t.data("event-detail");o||(o="modal",u=null),!s&&i=="subreddit"?s=r.config.cur_site:!s&&i=="link"&&(s=r.config.cur_link),r.analytics.loginRequiredEvent(o,u,i,s),r.loginEvents.viewedCreateAccountScreen(this._getActionDetails(t).eventName,this.popup.register.id,this.popup.register.version)},loginRequiredAction:function(e){if(r.config.logged)return!0;var t=$(e.target),n=t.attr("href"),i=this._getActionDetails(t),s;n=="javascript:void(0)"&&(n=undefined);if(n&&n!="#"&&!/\/login\/?$/.test(n))s=n;else{var o=t.thing();o.length&&(s=o.find(".comments").attr("href"))}var u=t.hasClass("login-link");return this.popup.showOnboarding(i.description,s&&$.proxy(function(e){window.location=s},this),r.config.cur_site,r.config.cur_listing,u,i),r.analytics.fireGAEvent("login-required-popup","opened",i.eventName),!1}},r.ui.LoginForm=function(){r.ui.Form.apply(this,arguments);var e=this.$el.find('[name="passwd"]');e.one("focus",$.proxy(this,"loadCaptcha","login"))},r.ui.LoginForm.prototype=$.extend(new r.ui.Form,{showErrors:function(e){r.ui.Form.prototype.showErrors.call(this,e),e.length&&this.$el.find(".recover-password").addClass("attention")},showStatus:function(){this.$el.find(".error").css("opacity",1),r.ui.Form.prototype.showStatus.apply(this,arguments)},resetErrors:function(){if(this.$el.hasClass("login-form-side")){var e=this.$el.find(".error");e.is(":visible")&&e.fadeTo(100,.35)}else r.ui.Form.prototype.resetErrors.apply(this,arguments)},_submit:function(){return r.analytics.fireGAEvent("login-form","submit"),r.login.post(this,"login")},_handleResult:function(e,t,n,i){var s="unknown",o=!1,u=null,a=e.json.errors;this.$el.hasClass("onboarding-login")?s="desktop_onboarding":this.$el.hasClass("login-form-side")&&(s="sidebar_login_widget");if(!a.length){o=!0;var f=r.config.extension?"/."+r.config.extension:"/",l=/\/login\/?$/.test($.url().attr("path"))?f:window.location.href,i=i?i:this.$el,c=i.find('input[name="dest"]').val(),h=c||l;n!=null&&n.status==202?this._continueLogin(e.json,h,this.successCallback):this.successCallback?this.successCallback(e):(this.$el.addClass("working"),window.location===h?window.location.reload():window.location=h)}else{var p=a&&a[0]&&a[0][0];u=p==="BAD_USERNAME"?"invalid_username":"invalid_username_or_password",this.errorCallback&&this.errorCallback(p),r.ui.Form.prototype._handleResult.call(this,e)}r.loginEvents.clickedLogin(s,o,u)},_handleNetError:function(e){r.ui.Form.prototype._handleNetError.apply(this,arguments),e.status==0&&r.config.currentOrigin!=r.config.https_endpoint&&$("<p>").append($("<a>").text(r._("try using our secure login form.")).attr("href",r.config.https_endpoint+"/login")).appendTo(this.$el.find(".status"))},_continueLogin:function(e,t,n){var i=this.$el.find('input[name="user"]').val(),s=this.$el.find('input[name="passwd"]').val(),o=this.$el.find('input[name="rem"]:checked').val(),u=!!this.$el.find('input[name="form_is_compact"]').length;r.ui.LoginPopup.prototype.showLoginOtp(e,t,i,s,o,u,n,this.$el)},focus:function(){this.$el.find('input[name="user"]').focus()}}),r.ui.RegisterForm=function(){r.ui.Form.apply(this,arguments),this.id=r.uuid(),this.version="r2_desktop_onboarding_2017q3_control",this.$user=this.$el.find('[name="user"]'),this.$user.is("[data-validate-url]")||(this.checkUsernameDebounced=_.debounce($.proxy(this,"checkUsername"),500),this.$user.on("keyup",$.proxy(this,"usernameChanged"))),this.$passwd2=this.$el.find('[name="passwd2"]'),this.$passwd2.one("focus",$.proxy(this,"loadCaptcha","register")),this.$passwd2.on("keyup",$.proxy(this,"checkPasswordMatch")),this.$el.find('[name="passwd"][data-validate-url]').strengthMeter({related:["#user_reg","#email_reg"],delay:0,trigger:"loaded.validator"}).on("score.strengthMeter",function(e,t){var n=$(this);if(n.stateify("getCurrentState")==="error")return;var i;t>90?i=r._("Password is strong"):t>70?i=r._("Password is good"):t>30?i=r._("Password is fair"):i=r._("Password is weak"),n.stateify("showMessage",i)}),this.$submit=this.$el.find(".submit button")},r.ui.RegisterForm.prototype=$.extend(new r.ui.Form,{maxName:0,usernameChanged:function(){var e=this.$user.val();if(e==this._priorName)return;this._priorName=e,this.$el.find(".error.field-user").hide(),this.$el.removeClass("name-checking name-available name-taken"),this.maxName=Math.max(this.maxName,e.length),e&&this.maxName>=3&&(this.$el.addClass("name-checking"),this.checkUsernameDebounced()),this.$submit.attr("disabled",!1)},checkPasswordMatch:_.debounce(function(){var e=this.$el.find('[name="passwd2"]'),t=this.$el.find('[name="passwd"]'),n=e.val(),i=t.val();if(!n||t.stateify("getCurrentState")!=="success"){e.stateify("clear");return}n===i?e.stateify("set","success"):e.stateify("set","error",r._("passwords do not match"))},$.fn.validator.Constructor.DEFAULTS.delay),checkUsername:function(){var e=this.$user.val();e?$.ajax({url:"/api/username_available.json",data:{user:e},success:$.proxy(this,"displayUsernameStatus"),complete:$.proxy(function(){this.$el.removeClass("name-checking")},this)}):this.$el.removeClass("name-available name-taken")},displayUsernameStatus:function(e){e.json&&e.json.errors?(this.showErrors(e.json.errors),this.$submit.attr("disabled",!0)):(this.$el.addClass(e?"name-available":"name-taken"),this.$submit.attr("disabled",e==0))},_submit:function(){return r.analytics.fireGAEvent("register-form","submit"),r.login.post(this,"register")},_handleResult:function(e,t,n){$(window).off("beforeunload");var i=!e.json.errors.length,s=i?!0:e.json.errors[0]==="BAD_CAPTCHA"?!1:null,o=typeof onboarding!="undefined"?onboarding:r.login.ui.popup.onboarding;r.onboardingEvents.clickedSubmit(o.onboardingID,o.onboardingVersion,i,o.startTimestamp,Date.now(),o.orderedSelectedSubreddits.length,o.orderedSelectedSubreddits,r.analyticsV2.selectPageType(),s),r.ui.LoginForm.prototype._handleResult.call(this,e,t,n,this.$el)},focus:r.ui.LoginForm.prototype.focus}),r.ui.LoginPopup=function(){var e=$("#login-popup").prop("innerHTML");r.ui.Popup.call(this,{size:"large",content:e,className:"login-modal"}),this.login=new r.ui.LoginForm(this.$.find("#login-form")),this.register=new r.ui.RegisterForm(this.$.find("#register-form")),this.onboarding=new r.ui.DesktopOnboarding(this.$.find("#desktop-onboarding-browse"),this.register)},r.ui.LoginOtpPopup=function(e,t){r.ui.Popup.call(this,{size:"small",content:e,className:"tfa-login-modal",title:r._("Enter the 6 Digit Code From Your Authenticator App"),closingButtonText:t?r._("back to the previous form"):r._("close this window")}),this.$.find(".tfa-switch-type-of-code").on("click",function(e){var t=$(this),n=t.closest(".tfa-login-inputs").find("#otpfield"),i=t.closest(".tfa-login-inputs").find("#otpbackupfield"),s=t.closest("#login_otp").find(".error"),o=t.closest("#login_otp").find(".tfa-login-having-trouble"),u=t.attr("data-type"),a=$(".tfa-login-modal .modal-header-title");u==="app-code"?(a.html(r._("Enter the 6 Digit Backup Code")),t.attr("data-type","backup-code"),t.html(r._("Or use a code from an authenticator app")),n.hide(),n.prop("required",!1),n.val(""),i.show(),i.focus(),i.prop("required",!0),s.hide(),o.show()):u==="backup-code"&&(a.html(r._("Enter the 6 Digit Code From Your Authenticator App")),t.attr("data-type","app-code"),t.html(r._("Or use a backup code")),n.show(),n.focus(),n.prop("required",!0),i.hide(),i.prop("required",!1),i.val(""),s.hide(),o.hide())})},r.ui.LoginOtpPopup.prototype=_.extend({},r.ui.Popup.prototype,{show:function(e,t){return r.ui.Popup.prototype.show.call(this),!1}}),r.ui.LoginPopup.prototype=_.extend({},r.ui.Popup.prototype,{show:function(e,t){return this.login.successCallback=t,this.register.successCallback=t,this.$.find("#cover-msg").text(e).toggle(!!e),r.ui.Popup.prototype.show.call(this),!1},showLogin:function(){var e=this.login,t=this.register.id,n=this.register.version,i="exited page";this.show.apply(this,arguments),this.once("opened.r.popup",function(){e.focus(),$(window).on("beforeunload",s)}),this.once("hide.r.popup",function(e,t){i=t?"X":"clicked outside of modal",s()}),this.once("closed.r.popup",function(){$(window).off("beforeunload",s)});var s=function(){r.loginEvents.clickedExit(t,n,i)}},showOnboarding:function(e,t,n,i,s,o){var u=this.onboarding,a="exited page";u.startTimestamp=Date.now(),this.show.apply(this,[e,t]),this.once("opened.r.popup",function(){u.focus(),u.onShowOnboarding(s,o),$(window).on("beforeunload",f)}),this.once("hide.r.popup",function(e,t){a=t?"X":"clicked outside of modal",f()}),this.once("closed.r.popup",function(){$(".desktop-onboarding-sign-up__form-container").removeClass("c-is-login"),$(".desktop-onboarding-sign-up__form-container").addClass("c-is-create"),$(window).off("beforeunload",f),u.close()});var f=function(){r.onboardingEvents.clickedExit(u.onboardingID,u.onboardingVersion,a,u.startTimestamp,Date.now(),u.orderedSelectedSubreddits.length,u.orderedSelectedSubreddits)}},showRegister:function(){var e=this.register;this.show.apply(this,arguments),this.once("opened.r.popup",function(){e.focus()})},showLoginOtp:function(e,t,n,i,s,o,u,a){$.ajax({url:o?"/loginotp.compact":"/loginotp",method:"POST",data:{dest:t,user:n,passwd:i},success:function(e){this.popup=new r.ui.LoginOtpPopup($(e).find("div.interstitial").prop("outerHTML"),o),r.ui.loginOtp.init(n,i,s,t,this.popup,u),this.popup.once("closed.r.popup",function(e){r.ui.loginOtp.close(),a.show()}),a.hide(),this.popup.show(),this.popup.on("opened.r.popup",function(){$(".tfa-login-modal .tfa-login-inputs #otpfield").focus()}),$(".modal-backdrop").addClass("tfa-login-modal-backdrop")}})}}),r.ui.loginOtp={init:function(e,t,n,i,s,o){this.otp=new r.ui.LoginOtpForm(s.$.find("#login_otp")),this.user=e,this.otp.$el.find('input[name="user"]').val(e),this.otp.$el.find('input[name="passwd"]').val(t),this.otp.$el.find('input[name="dest"]').val(i),this.otp.$el.find('input[name="rem"]').val(n),this.otp.successCallback=o,this.LoginOtpPopup=s},close:function(){this.LoginOtpPopup.$.remove()},showQrCode:function(){var e=$("input[name=secret]").val(),t=$("body").generate_otp_qrcode(this.user,e),n=$("#otp-secret");n.append(t)}},r.ui.LoginOtpForm=function(){r.ui.Form.apply(this,arguments),this.$submit=this.$el.find(".submit button")},r.ui.LoginOtpForm.prototype=$.extend(new r.ui.Form,{submit:function(){if(!this.$el.find('[name="otp"]').val()&&!this.$el.find('[name="otp_backup_code"]').val()){var e=[["WRONG_OTP",r._("The verification code you entered is not valid."),"otp"]];return this.showErrors(e),!1}this.resetErrors(),r.ui.showWorkingDeferred(this.$el,this._submit()).done($.proxy(this,"handleResult")).fail($.proxy(this,"_handleNetError"))},_submit:function(){return action=this.$el.attr("name"),this.$el.find(".error").not(".status").hide(),this.$el.find(".status").text(linkstatus(this.$el)).show(),r.login.post(this,action,!1)},showErrors:function(e){this.$el.find(".status").hide(),r.ui.Form.prototype.showErrors.call(this,e)},_handleResult:function(e,t,n){e.json.errors.length?r.ui.Form.prototype._handleResult.call(this,e):r.ui.LoginForm.prototype._handleResult.call(this,e,t,n,this.$el)},_handleNetError:function(e){r.ui.Form.prototype._handleNetError.apply(this,arguments)}}),!function(e){e.pref={post:function(t){var n=$('input[name="email"]',t.$el).val(),i=t.$el.attr("action"),s=t.serialize();return s.push({name:"api_type",value:"json"}),e.ajax({url:i,type:"POST",dataType:"json",data:s,xhrFields:{withCredentials:!0}})}},e.pref.ui={init:function(){$(".pref-form").each(function(t,n){new e.pref.ui.PrefUpdateForm(n)}),$(".emailverification-edit").on("click",function(){e.analyticsV2.sendEvent("preferences","click","edit")}),$(".emailverification-resend").on("click",function(){e.analyticsV2.sendEvent("preferences","click","resend")}),$(".open-tfa-verify-email-popup").on("click",function(t){var n=new e.ui.TfaVerifyEmailPopup($(".tfa-verify-email-section").prop("innerHTML"));n.once("closed.r.popup",function(e){n.$.remove()}),n.show(),$(".modal-backdrop").addClass("tfa-verify-email-modal-backdrop")}),$(".open-enable-tfa-popup").on("click",function(t){var n=new e.ui.EnableTfaPopup($(".enable-tfa-section").prop("innerHTML"));n.once("closed.r.popup",function(e){n.$.remove()}),n.show(),$(".modal-backdrop").addClass("enable-tfa-modal-backdrop"),n.$.find(".enable-tfa-verify-email").attr("id","enable-tfa-verify-email"),n.$.find(".pref-otp-enable").attr("id","pref-otp-enable"),n.$.find(".pref-otp-qr").attr("id","pref-otp-qr"),n.$.find(".enable-tfa-success").attr("id","enable-tfa-success"),n.$.find(".switch-barcode-and-code").on("click",function(e){$this=$(e.target),$this.attr("data-code-type")=="barcode"?($this.attr("data-code-type","code"),$this.parent(".otp-secret-info").find("canvas").hide(),$this.parent(".otp-secret-info").find(".secret").show()):($this.attr("data-code-type","barcode"),$this.parent(".otp-secret-info").find("canvas").show(),$this.parent(".otp-secret-info").find(".secret").hide())}),n.$.find(".enable-tfa-email-is-correct").on("click",function(e){n.$.find("#enable-tfa-verify-email").hide(),n.$.find("#pref-otp-enable").show()})}),$(".open-disable-tfa-popup").on("click"
,function(t){var n=new e.ui.DisableTfaPopup($(".disable-tfa-section").prop("innerHTML"));n.once("closed.r.popup",function(e){n.$.remove()}),n.show(),$(".modal-backdrop").addClass("disable-tfa-modal-backdrop"),n.$.find(".pref-otp-disable").attr("id","pref-otp-disable"),n.$.find(".disable-tfa-success").attr("id","disable-tfa-success")}),$(".open-backup-codes-popup").on("click",function(t){var n=new e.ui.BackupCodesPopup($(".backup-codes-section").prop("innerHTML"));n.once("closed.r.popup",function(e){n.$.remove()}),n.show(),$(".modal-backdrop").addClass("backup-codes-modal-backdrop"),n.$.find(".pref-otp-backup").attr("id","pref-otp-login-backup"),n.$.find(".pref-otp-backup-code-display").attr("id","pref-otp-login-backup-code-display")})}},e.pref.ui.PrefUpdateForm=function(){e.ui.Form.apply(this,arguments),this.$email=this.$el.find('input[name="email"]'),this.$email.one("focus",this.loadCaptcha.bind(this,"prefupdate"))},e.pref.ui.PrefUpdateForm.prototype=$.extend(new e.ui.Form,{_handleResult:function(t){if(t.json.errors.length)return e.ui.Form.prototype._handleResult.call(this,t);$("#pref-update-pwreset-email").find(".status").html("An email will be sent to the email address shortly").show()},_submit:function(){return e.pref.post(this)}}),e.ui.TfaVerifyEmailPopup=function(t){e.ui.Popup.call(this,{size:"small",content:t,className:"tfa-verify-email-modal",title:e._("Enable Two-Factor Authentication")})},e.ui.TfaVerifyEmailPopup.prototype=_.extend({},e.ui.Popup.prototype,{show:function(t,n){return e.ui.Popup.prototype.show.call(this),!1}}),e.ui.EnableTfaPopup=function(t){e.ui.Popup.call(this,{size:"small",content:t,className:"enable-tfa-modal",title:e._("Enable Two-Factor Authentication")})},e.ui.EnableTfaPopup.prototype=_.extend({},e.ui.Popup.prototype,{show:function(t,n){return e.ui.Popup.prototype.show.call(this),!1}}),e.ui.DisableTfaPopup=function(t){e.ui.Popup.call(this,{size:"small",content:t,className:"disable-tfa-modal",title:e._("Disable Two-Factor Authentication")})},e.ui.DisableTfaPopup.prototype=_.extend({},e.ui.Popup.prototype,{show:function(t,n){return e.ui.Popup.prototype.show.call(this),!1}}),e.ui.BackupCodesPopup=function(t){e.ui.Popup.call(this,{size:"small",content:t,className:"backup-codes-modal",title:e._("Generate Backup Codes")})},e.ui.BackupCodesPopup.prototype=_.extend({},e.ui.Popup.prototype,{show:function(t,n){return e.ui.Popup.prototype.show.call(this),!1}})}(r),!function(e){function n(){}function r(e){var t=e.stack;return t&&t.split("\n").slice(1).join("\n")}function i(e,t,n,s){if(!(this instanceof i))return new i(e,t,n,s);var o=Error.call(this);if("stack"in o)if("captureStackTrace"in Error)Error.captureStackTrace(this,i);else try{Object.defineProperty(this,"stack",{configurable:!0,get:function(){var e=r(o);return this.stack=e}})}catch(u){this.stack=r(o)}var a=e+" | "+t;this.name="ApiError",this.message=a,this.displayName=e,this.displayMessage=t,this.field=n||"",this.source=s||"api"}var t={UNKNOWN_ERROR:e._("unknown error %(message)s"),NO_TEXT:e._("we need something here"),TOO_LONG:e._("this is too long (max: %(max_length)s)"),TOO_SHORT:e._("this is too short (min: %(min_length)s)"),SR_RULE_EXISTS:e._("A subreddit rule by that name already exists."),SR_RULE_TOO_MANY:e._("This subreddit already has the maximum number of rules.")};n.prototype=Error.prototype,i.prototype=new n,e.errors={create:function(e,t,n,r){return new i(e,t,n,r)},formatAPIError:function(e){var t=e[0],n=e[1],r=e[2];return new i(t,n,r)},getAPIErrorsFromResponse:function(t){if(t&&t.json&&t.json.errors&&t.json.errors.length)return t.json.errors.map(e.errors.formatAPIError);if(!t||t.error&&typeof t.error=="string"){var n=t?t.error:"unknown";return[e.errors.createAPIError("","UNKNOWN_ERROR",{message:n})]}},createAPIError:function(e,n,r){var s=t[n]||"unknown";return r&&(s=s.format(r)),new i(n,s,e,"client")},_getErrorFieldSelector:function(e){var t=".error."+e.displayName;return e.field&&(t+=".field-"+e.field),t},showAPIError:function(e,t){var n=this._getErrorFieldSelector(t);$(e).find(n).text(t.displayMessage).css("display","inline")},showAPIErrors:function(t,n){n.forEach(function(n){e.errors.showAPIError(t,n)})},clearAPIErrors:function(e,t){var n;t?n=t.map(this._getErrorFieldSelector).join(", "):n=".error",$(e).find(n).text("").css("display","none")}}}(r),!function(e,t){function r(t){function s(){var s=t.content||$("#"+t.templateId).html();r=new e.ui.Popup({size:"large",content:s,className:t.className}),r.$.on("click",".interstitial .c-btn",function(e){return r.hide(),!1}),r.on("closed.r.popup",function(){n===i&&(n=null)})}var r,i={show:function(){r||s();if(n===this)return;n&&n.hide(),n=this,r.show()},hide:function(){this===n&&(n=null),r.hide()}};return i}e.ui=e.ui||{};var n=null;e.ui.createGatePopup=function(t){if(!t)throw e.errors.createError("GATE_POPUP_JS_ERROR","no options given");if(!t.templateId&&!t.content)throw e.errors.createError("GATE_POPUP_JS_ERROR","missing templateId or content option");return new r(t)}}(r),!function(e){e.locked={},_.extend(e.locked,{init:function(){$("body").on("click",".locked-error",this._handleClick),this._popup=e.ui.createGatePopup({templateId:"locked-popup",className:"locked-error-modal"})},_handleClick:function(n){if(e.access.isLinkRestricted(n.target))return;return this._popup.show(),!1}.bind(e.locked)})}(r),!function(e){e.timeouts={},_.extend(e.timeouts,{init:function(){$("body").on("click",".access-required",this._handleClick),$(".access-required").removeAttr("onclick"),$("body.comments-page").on("focus",".usertext.cloneable textarea",function(t){$(this).blur(),e.timeouts._handleClick(t)}),$("body.comments-page").on("submit","form.usertext.cloneable",this._handleClick),$("body.comments-page form.usertext.cloneable").removeAttr("onsubmit");var t=e.access.isLinkRestricted;e.access.isLinkRestricted=function(n){return e.timeouts.isLinkRestricted(n)||t(n)},this._popup=e.ui.createGatePopup({templateId:"access-popup",className:"access-denied-modal"})},_logEvent:function(t){var n=$(t.target),i=n.thing(),s=n.data("type")||i.data("type"),o=n.data("fullname")||i.data("fullname"),u=n.data("event-action"),a=n.data("event-detail");u||(u="modal",a=null),!o&&s=="subreddit"?o=e.config.cur_site:!o&&s=="link"&&(o=e.config.cur_link),e.analytics.timeoutForbiddenEvent(u,a,s,o)},_handleClick:function(t){return this._popup.show(),this._logEvent(t),!1}.bind(e.timeouts),isLinkRestricted:function(t){return $(t).hasClass("access-required")&&e.config.user_in_timeout}}),e.access.initHook(function(){if(!e.config.user_in_timeout)return;e.timeouts.init()})}(r),!function(e){e.archived={init:function(){this._popup=e.ui.createGatePopup({templateId:"archived-popup",className:"archived-error-modal"}),$("body").on("click",".archived",this._handleClick.bind(this))},_handleClick:function(t){return e.config.feature_archived_signup_cta?e.login.ui.popup.show():this._popup.show(),!1}},e.hooks.get("reddit").register(function(){e.archived.init()})}(r),r.newsletter={post:function(e){var t=$('input[name="email"]',e.$el).val(),n=e.$el.attr("action"),i=e.serialize();return i.push({name:"api_type",value:"json"}),r.ajax({url:n,type:"POST",dataType:"json",data:i,xhrFields:{withCredentials:!0}})}},r.newsletter.ui={_setupNewsletter:function(){if(!$("body").hasClass("newsletter"))return;$(".faq-toggle").click(function(e){e.preventDefault(),$(this).toggleClass("active"),$(".faq").slideToggle(),r.analytics.fireGAEvent("newsletter-form","faq-toggle")})},init:function(){$(".newsletter-signup").each(function(e,t){new r.newsletter.ui.NewsletterForm(t)}),$(".c-form-control").one("focus",function(){$(".newsletter-signup").recaptcha()}),this._setupNewsletter()}},r.newsletter.ui.NewsletterForm=function(){r.ui.Form.apply(this,arguments)},r.newsletter.ui.NewsletterForm.prototype=$.extend(new r.ui.Form,{showStatus:function(){this.$el.find(".error").css("opacity",1),r.ui.Form.prototype.showStatus.apply(this,arguments)},_submit:function(){return r.analytics.fireGAEvent("newsletter-form","submit"),r.newsletter.post(this)},_showSuccess:function(){var e=this.$el.parents(".newsletter-container");e.find(".result-message").text(r._("check your inbox to confirm your subscription")),e.addClass("success"),e.find("header").fadeTo(250,1)},_handleResult:function(e){if(e.json.errors.length)return r.ui.Form.prototype._handleResult.call(this,e);var t=this.$el.parents(".newsletter-container");t.find("header, form").fadeTo(250,0,function(){this._showSuccess()}.bind(this))}}),!function(e,t,n){var r=2592e6,i=-1,s="profilebetabar_hidden_until";e.profileBetaBar={init:function(){var t=store.safeGet(s,i);if(t===i)return;(!t||t<Date.now())&&n(".profilebetabar").show(),n(".profilebetabar-close").on("click",function(){n(".profilebetabar").hide(),store.safeSet(s,Date.now()+r),e.profileBetaBar.sendDismissalEvent()})},sendDismissalEvent:function(){var t="user_preference_events",n="save_preference_cookie",r={user_preferences:{dismiss_join_profiles_beta:!0}};e.analytics.sendEvent(t,n,undefined,r)}}}(r,_,jQuery),$(function(){r.profileBetaBar.init()}),!function(e){var t="onboarding:",n=e.config.cur_listing==="popular";e.onboardingBar={seen:function(e){return e&&parseInt(store.safeGet(e+".seen"),10)||0},setSeen:function(n){var i=this.seen(n.name);store.safeSet(n.name+".seen",i+1);var s=t+n.barType+"View";e.actions.trigger(s)},dismissed:function(e){return!!e&&!!store.safeGet(e+".dismissed")},setDismissed:function(n,i){store.safeSet(n.name+".dismissed",1);if(i)return;var s=t+n.barType+"Close";e.actions.trigger(s)}},e.onboardingBar.ui={_bars:[],_canShow:function(t){return!(e.ui.isSmallScreen()||t.canDismiss&&e.onboardingBar.dismissed(t.name)||t.maxViews&&e.onboardingBar.seen(t.name)>=t.maxViews)},_setup:function(t){t=$(t).first();if(!t.length)return;var i=t.data();if(!this._canShow(i))return;if(!n){var s=$("#onboarding-popular-link, #noresults.tutorial .c-btn");s.on("click",function(t){t.preventDefault(),e.actions.trigger("onboarding:homeTutorialClick",{done:function(){window.location=t.target.href}})})}return t.on("click",".infobar-close",function(n){e.onboardingBar.setDismissed(i),t.slideUp()}),t.removeAttr("hidden"),e.onboardingBar.setSeen(i),t},init:function(){var e=$(".onboardingbar");for(var t=0;t<e.length;t++){var n=this._setup(e[t]);if(n){this._bars.push(n);return}}},override:function(){this._bars.forEach(function(e){e.hide()}),this.spotlight().show()},isActive:function(){return this._bars.length>0},spotlight:function(){var e=$("#siteTable_organic"),t=e.closest(".spacer");return t.length?t:e}}}(window.r),!function(e){function o(t){var n=e.config.user_subscription_size,i="1";n>1&&n<=8?i="2-8":n>8&&(i="9+");var s=i=="1"?"":"s";return r+t+i+"subscription"+s}function u(r,i){e.analytics.sendEvent(t,r,n,{},i)}function a(t,n,r){e.analyticsV2&&e.analyticsV2.sendEvent(t,n,r,["subreddit","action_info"])}function f(){a("redesignbanner","click","r2banner_dismiss")}function l(){a("redesignbanner","view","r2banner")}function c(){a("redesignbanner","click","r2banner_opt_in")}function h(e){u(o("view_"))}function p(e){u(r+"click_9+subscriptionsclose")}function d(e){u(o("click_"),e.done)}function v(e){u(i+"view_banner")}function m(e){u(i+"click_bannerclose")}function g(e){u(s+"view_banner")}function y(e){u(s+"click_bannerclose")}var t="onboarding_events",n=["user_id","user_age","user_subscription_size"],r="hometutorialbanner__",i="populartutorialbanner__",s="geopopulartutorialbanner__";e.onboardingEvent={init:function(){e.actions.on("onboarding:homeTutorialView",h),e.actions.on("onboarding:homeTutorialClose",p),e.actions.on("onboarding:homeTutorialClick",d),e.actions.on("onboarding:popularTutorialView",v),e.actions.on("onboarding:popularTutorialClose",m),e.actions.on("onboarding:geopopularTutorialView",g),e.actions.on("onboarding:geopopularTutorialClose",y),e.actions.on("onboarding:redesignbetabarClose",f),e.actions.on("onboarding:redesignbetabarClickOptIn",c),e.actions.on("onboarding:redesignbetabarView",l)}}}(window.r),!function(e){function t(t,n,i){e.ajax({type:"POST",url:"/api/subscribe",data:{sr:t,action:"sub",source:"tagline-subreddit-button"},success:n,error:i})}if(!e.config.logged)return;e.subscribeInline={subscribedButtonClass:"subreddit-subscribed",init:function(){$(".linklisting").on("click",".subreddit-subscribe",function(n){var i=$(n.target);if(i.attr("disabled"))return;var s=i.thing().data(),o=s.subredditFullname;if(!o){console.error("Could not subscribe to subreddit",n.target);return}var u=$(n.delegateTarget).find(".subreddit-subscribe").filter(function(e,t){return $(t).thing().data("subredditFullname")===o}),a=i.data("successTitle"),f=i.attr("title");u.attr("title",a),u.attr("disabled",!0),t(o,function(){var t="onboarding_events",n="inlinesubscription__click_button",i=["user_id","user_age","user_subscription_size"],o={post_rank:s.rank,post_cosmetic_score:s.score,referrer_domain:s.domain,comments_count:s.commentsCount};e.analytics.sendEvent(t,n,i,o)},function(e){u.attr("title",f),u.removeAttr("disabled"),console.error("Could not subscribe to subreddit",o,e)})})}},$(function(){e.subscribeInline.init()})}(r),$(function(){function e(e){$(e).parent().parent().addClass("edited"),$(e).parent().parent().find(".status").empty()}function t(){$(this).data("saved")!=$(this).val()&&e(this)}function n(e){return e.preventDefault(),post_form(this.parentNode,e.data.action)}function i(){e(this)}function s(e){return e.preventDefault(),$(this).removeClass("edited"),post_form(this,e.data.action)}function o(){return open_menu(this),$(this).addClass("active"),!1}function u(e){return e.data("name")?{name:e.data("name")}:{link:e.thing_id()}}function a(e){$(".flairselector li").removeClass("selected"),$(this).addClass("selected");var t=$(this).parent().parent().siblings("form")[0];$(t).children('input[name="flair_template_id"]').val(this.id);var n=$(t).children(".customizer"),r=n.children("input");$(this).hasClass("texteditable")?(n.addClass("texteditable"),r.removeAttr("disabled"),r.css("display","block"),r.val($.trim($(this).find(".flair, .linkflairlabel").text())).select(),r.keyup(function(){$(".flairselection .flair, .flairselection .linkflairlabel").text($(r).val()).attr("title",$(r).val())})):(n.removeClass("texteditable"),r.attr("disabled","disabled").hide());var i=$(".flairselector .flairremove").detach();return $(".flairselection").html($(this).first().children().clone()).append(i),$(".flairselector .flairremove").css("display","inline-block"),!1}function f(e){var t=$(this).parent().parent();$(t).children('input[name="flair_template_id"]').val(""),$(t).children(".customizer").hide();var n=$(".flairselector .flairremove").detach();$(n).hide(),$(".flairselector li").removeClass("selected"),$(".flairselection").empty().append(n)}function l(e){$(this).find(".status").html(r.config.status_msg.submitting).show();var t=$(this.parentNode.parentNode).find(".flairselectbtn");return simple_post_form(this,"selectflair",u(t)),!1}function c(e){function i(e){var t=1,n=3,r=150,i=10,s=$(e).children().length,o=Math.max(t,Math.min(n,Math.ceil(s/i))),u=Math.ceil(s/o),a=Math.max(r,$(e).width());$(e).width(a);if(o>1){$(e).css("float","left");var f=o*u-s;for(var l=1;l<o;l++){var c=u;l<=f&&c--;var h=s-c;s-=c;var p=$(e).children().slice(h).remove();$(p).width(a),$(e).after($("<ul>").css("float","left").append(p))}}return o*(a+5)+50}function s(e){$(n).html(e);var r=$(".flairselector ul"),s=Math.max(200,r.length?i(r):$(".error").width()+20),o=Math.max(100,$(t).position().left+$(t).width()-s);$(n).height("auto").width(s).css("left",o+"px").click(!1).find(".flairselection").click(!1).end().find("form").click(function(e){e.stopPropagation()}).submit(l).end().find(".customizer input").attr("disabled","disabled").end().find("li.selected").each(a).end().find("li:not(.error)").click(a).end().find(".flairremove").click(f).end()}if(r.access.isLinkRestricted(e.target))return!1;close_menus(e);var t=e.target,n=$(t).siblings(".flairselector")[0];$(n).html('<img class="flairthrobber" src="'+r.utils.staticURL("throbber.gif")+'" />').addClass("active").height(18).width(18).css("padding-left",4).css("padding-top",4).css("padding-bottom",4).css("padding-right",4).css("left",$(t).position().left+$(t).width()-18+"px").css("top",$(t).position().top+"px");var o=u($(e.target));return $.request("flairselector",o,s,!0,"html"),!1}$("#tabbedpane-grant").on("submit",".flair-entry",{action:"flair"},s),$("#tabbedpane-grant").on("click",".flairdeletebtn",{action:"deleteflair"},n),$("#tabbedpane-templates, #tabbedpane-link_templates").on("submit",".flair-entry",{action:"flairtemplate"},s),$("form.clearflairtemplates").on("submit",{action:"clearflairtemplates"},s),$(".flairlist").on("focus",".flaircell input",i).on("keyup",".flaircell input",t).on("change",".flaircell input",t).on("click",".flairtemplate .flairdeletebtn",{action:"deleteflairtemplate"},n),$(".flairtoggle").submit(function(){return post_form(this,"setflairenabled")}),$(".flairtoggle input").change(function(){$(this).parent().submit()}),$(document).on("click",".tagline .flairselectbtn, .thing .flairselectbtn",function(e){var t=$(e.target).data("event-action"),n=$(e.target).data("event-detail");return r.actions.trigger("flair",{target:e.target,eventAction:t,eventDetail:n}),!1}),r.actions.on("flair",function(e){r.access.isLinkRestricted(e.target)&&e.preventDefault()}),r.actions.on("flair:success",c),$(".flairselector .dropdown").click(o)}),$(function(){function m(e){var t=document.getElementById(e);return _.template(t.innerHTML)}function g(){o=r._("We're sorry something's wrong. How can we help?"),h=[{reasonText:"This is spam",reasonTextToShow:r._("This is spam")},{reasonText:"I don't like it",reasonTextToShow:r._("I don't like it")},{reasonText:"It's harassing me",reasonTextToShow:r._("It's harassing me")},{reasonText:"They're showing me sexual content I don't want",reasonTextToShow:r._("They're showing me sexual content I don't want")},{reasonText:"They're being rude or vulgar",reasonTextToShow:r._("They're being rude or vulgar")}],c=[{reasonText:"This is spam",reasonTextToShow:r._("This is spam")},{reasonText:"This is abusive or harassing",reasonTextToShow:r._("This is abusive or harassing"),nextStepHeader:r._("In what way?"),nextStepReasons:[{reasonText:"It's targeted harassment",reasonTextToShow:r._("It's targeted harassment"),nextStepHeader:r._("Who is the harassment targeted at?"),nextStepReasons:[{reasonText:"It's targeted harassment at me",reasonTextToShow:r._("At me")},{reasonText:"It's targeted harassment at someone else",reasonTextToShow:r._("At someone else")}]},{reasonText:"It threatens violence or physical harm",reasonTextToShow:r._("It threatens violence or physical harm"),nextStepHeader:r._("Who is the threat directed at?"),nextStepReasons:[{reasonText:"It threatens violence or physical harm at me",reasonTextToShow:r._("At me")},{reasonText:"It threatens violence or physical harm at someone else",reasonTextToShow:r._("At someone else")}]},{reasonText:"It's rude, vulgar or offensive",reasonTextToShow:r._("It's rude, vulgar or offensive")}]},{reasonText:r._("Other issues"),nextStepHeader:r._("What issue?"),nextStepReasons:[{reasonText:"It infringes my copyright",reasonTextToShow:r._("It infringes my copyright"),fileComplaint:!0},{reasonText:"It infringes my trademark rights",reasonTextToShow:r._("It infringes my trademark rights"),fileComplaint:!0},{reasonText:"It's personal and confidential information",reasonTextToShow:r._("It's personal and confidential information")},{reasonText:"It's sexual or suggestive content involving minors",reasonTextToShow:r._("It's sexual or suggestive content involving minors")},{reasonText:"It's involuntary pornography",reasonTextToShow:r._("It's involuntary pornography")},{reasonText:"It's a transaction for prohibited goods or services",reasonTextToShow:r._("It's a transaction for prohibited goods or services")}]}]}function y(){var n=m("message-report-template"),s=m("subreddit-report-template"),o=m("report-system-reason-template"),u=m("report-custom-reason-template"),a=m("report-other-reason-template");i={subredditReport:function(e){var t=s(e),n=$.parseHTML(t);return n},messageReport:function(e){var t=n(e),r=$.parseHTML(t);return r},systemReasons:function(e){e=e.map(function(e,t){return e.reasonNumber=t,e.reasonTextToShow||(e.reasonTextToShow=e.reasonText),e});var t=e.map(o).join("\n"),n=$.parseHTML(t);return n},customReasons:function(e){e=e.map(function(e,t){return e.reasonNumber=t,e});var t=e.map(function(e){return e.isOtherReason?a(e):u(e)}).join("\n"),n=$.parseHTML(t);return n}};var f=(new Date).getTime(),l=f+1e3,c=window.sessionStorage.getItem(t),h=w(e);c&&c!=r.config.logged&&(h={});if(!h.expirationTime||f>h.expirationTime)h={expirationTime:l},b(e,h);window.sessionStorage.setItem(t,r.config.logged),r.rulesSessionStorageKey=e,r.hooks.get("new-report-form").call()}function b(e,t){var n=JSON.stringify(t);window.sessionStorage.setItem(e,n)}function w(e){var t;try{var n=window.sessionStorage.getItem(e);t=JSON.parse(n)}finally{return t||(t={}),t}}function E(e){var t=u=="message"?i.messageReport:i.subredditReport;return t(e)}function S(e){var t=$(e).prop("outerHTML");s?$(".modal-body").html(t):s=new r.ui.Popup({className:"report-modal",content:t,animate:!1,backdrop:"static"}),s.show(),$(".modal-backdrop").addClass("report-modal-backdrop")}function x(){a.length==1&&($(".btn.report-cancel").show(),$(".btn.report-back").hide()),a.pop();var e=M(a),t=P(a),n=i.systemReasons(e);$(".modal-header-title").html(t),$(".report-flow-form").find(".report-reason-list").html(""),$(".report-flow-form").find(".report-reason-list").prepend(n),$(".report-flow-form").find(".report-submit").prop("disabled",!0),$(".btn.report-submit").html("next")}function T(){return s?(s.hide(),a.length=0,$(".btn.report-submit").show(),$(".btn.report-cancel").show(),$(".btn.report-back").hide(),$(".btn.report-close").hide(),$(".status-panel").hide(),$(".btn.report-submit").html("next"),$(".modal-header-title").html(o),!1):!1}function N(e){var t=$(e.target).closest("li"),n=t.find('input[name="site_reason"]');n.prop("checked",!0);var r=t.data("reason-number");a.push(r);var i=D();a.pop();var s=$(this).closest(".report-flow-form"),o=s.find(".report-submit");return o.removeAttr("disabled"),!i.nextStepReasons&&!i.fileComplaint?o.html("submit"):o.html("next"),i.isOtherReason?s.find(".other-reason-text").prop("disabled",!1):s.find(".other-reason-text").prop("disabled",!0),!1}function C(){$(".report-form-block-user").hide(),$(".report-form-blocked-user").show()}function k(){$(".report-form-unsubscribe").hide(),$(".report-form-unsubscribed").show(),$(".subscribe-button a.remove").click()}function L(e){return{thing:e.thing_id()}}function A(t){if(!r.config.logged)return;if(r.access.isLinkRestricted(t.target))return;var n=$(t.target).closest(".thing");p=n.data("subreddit-fullname");var s=n.data("subreddit");u=n.data("type");var a=n.data("author");v=!a,f=u=="message"?h:c;var m=L($(t.target)),g=w(e);d=!1,p&&r.ajax({type:"GET",url:"/api/is_current_user_subscribed.json",data:{sr_name:s}}).then(function(e){d=e.is_subscribed});if(u=="message"||!p){var y={fullname:m.thing};y.userName=a;var x=E(y,u);reasonsEls=i.systemReasons(f),$(x).find(".report-reason-list").prepend(reasonsEls),S(x)}else if(p in g){var y=g[p];l=y.show_other_reason,f=f.filter(function(e){return!e.isCustomReason});if(y.rules&&y.rules.length){filteredRules=y.rules.filter(function(e){return!e.kind||e.kind===u}),filteredRules.forEach(function(e,t){e.reasonText||(e.reasonText=e.violation_reason)},this);var T={reasonText:r._("It breaks r/%(subrName)s's rules").format({subrName:s}),nextStepHeader:r._("Which rule does it break?"),nextStepReasons:filteredRules,isCustomReason:!0};if(r.config.cur_listing==s)f.unshift(T);else{var N=f.pop();f.push(T),f.push(N)}}y.fullname=m.thing,y.userName=a,y.srName=s,y.srFullname=p;var x=E(y);reasonsEls=i.systemReasons(f),$(x).find(".report-reason-list").prepend(reasonsEls),S(x),O(s)}else f=f.filter(function(e){return!e.isCustomReason}),m.api_type="json",$.request("report_form",m,function(t){var n=t.json.data,c;l=n.show_other_reason,n.rules&&(c=n.rules.map(function(e,t){return{reasonText:e.violation_reason?e.violation_reason:e.short_name,violationReason:e.violation_reason?e.violation_reason:e.short_name,isCustomReason:!0,kind:e.kind}}),l&&c.push({isOtherReason:!0,isCustomReason:!0}),n.rules=c),g[p]=n,n.fullname=m.thing,n.userName=a,n.srName=s,n.srFullname=p;try{b(e,g)}finally{var h=E(n,u);if(c&&c.length){c=c.filter(function(e){return!e.kind||e.kind===u});var d={reasonText:r._("It breaks r/%(subrName)s's rules").format({subrName:s}),nextStepHeader:r._("Which rule does it break?"),nextStepReasons:c,isCustomReason:!0};if(r.config.cur_listing==s)f.unshift(d);else{var v=f.pop();f.push(d),f.push(v)}}reasonsEls=i.systemReasons(f),$(h).find(".report-reason-list").prepend(reasonsEls),S(h),O(s),$(".modal-header-title").html(o)}},!0,"json",!0);return $(".modal-header-title").html(o),!1}function O(e){$(".subreddit-rules-link a").html(r._("r/%(subrName)s's rules").format({subrName:e}));var t="https://www.reddit.com/r/%(subrName)s/about/rules".format({subrName:e});$(".subreddit-rules-link a").attr("href",t),$(".subreddit-rules-link").show()}function M(){var e=f;for(var t=0;t<a.length;t++)e=e[a[t]].nextStepReasons;return e}function D(){var e=f;for(var t=0;t<a.length-1;t++)e=e[a[t]].nextStepReasons;var n=e[a[a.length-1]];return n}function P(){var e=f;for(var t=0;t<a.length-1;t++)e=e[a[t]].nextStepReasons;var n=a.length<1?o:e[a[a.length-1]].nextStepHeader;return n}var e="subreddit-rules",t="current-user",n=!1,i,s,o,u,a=[],f,l=!1,c=[],h=[],p,d=!1,v=!1;r.hooks.get("setup").register(function(){try{g(),y()}catch(e){}$("body").on("click",".report-submit",function(e){var t=$(".report-flow-form"),n=t.find(".report-reason-list"),s=$(".modal-header-title"),o=t.find("[name=reason]:checked").closest("li"),f=o.data("reason-number");a.push(f);var l=D(a);if(!l.nextStepReasons){n.hide(),a.length=0,$(".btn.report-submit").hide(),$(".btn.report-cancel").hide(),$(".btn.report-back").hide(),$(".report-form-blocked-user").hide(),$(".status-panel").show(),$(".btn.report-close").show();if(l.fileComplaint){var p=l.reasonNumber==0?"https://www.reddithelp.com/en/submit-request/copyright-dmca":"https://www.reddithelp.com/en/submit-request/trademark-violation-report-form";$(".report-form-last-step-text").html(r._("If you think content on Reddit                                                violates your intellectual property,                                                you can file a complaint. Use the button below:")),$(".report-form-last-step-text").show(),$(".btn.report-file-complaint").attr("href",p),$(".btn.report-file-complaint").show(),s.html(r._("File a complaint?"));return}l.isCustomReason?$(".report-form-last-step-text-custom-rules").show():l.lastStepText?($(".report-form-last-step-text").html(l.lastStepText),$(".report-form-last-step-text").show()):$(".report-form-big-content-policy").show();var m=!1;return v||($(".report-form-block-user").show(),m=!0),u!="message"&&d&&($(".report-form-unsubscribe").show(),m=!0),$(".report-form-big-content-policy").html(m?r._("We've received your report. Here are some things you can do:"):r._("We've received your report.")),l.nextStepHeader?s.html(l.nextStepHeader):s.html(r._("Thanks for letting us know!")),post_pseudo_form(t,"report")}var c,h=M(a);h[0].isCustomReason?c=i.customReasons(h):c=i.systemReasons(h),n.html(""),n.prepend(c),s.html(P(a)),t.find(".report-submit").prop("disabled",!0),$(".btn.report-cancel").hide(),$(".btn.report-back").show()}),$("body").on("click",".tagline .reportbtn, .thing .reportbtn",function(e){r.actions.trigger("report",{target:e.target})}),r.actions.on("report:success",A),$("body").on("submit",".report-flow-form",function(e){return $(".report-submit").click(),!1}),$("body").on("click",".report-form-block-user a",C),$("body").on("click",".report-form-unsubscribe a",k),$("body").on("click",".btn.report-back",x),$("body").on("click",".btn.report-cancel",T),$("body").on("click",".btn.report-close",T),$("body").on("click",".modal-header-close a",T),$("body").on("change","input[name='reason']",N),$("body").keyup(function(e){$(".report-modal").length&&e.keyCode==27&&T()})})}),!function(e){var t,n,r,i;r=function(e){this.page_type=null,this.pane_name=null,this.position=null,this.success=null,this.count=null,this.retried=null,this.reason=null,this.setting_value=null,this.type=null,e&&(e.page_type!==undefined&&(this.page_type=e.page_type),e.pane_name!==undefined&&(this.pane_name=e.pane_name),e.position!==undefined&&(this.position=e.position),e.success!==undefined&&(this.success=e.success),e.count!==undefined&&(this.count=e.count),e.retried!==undefined&&(this.retried=e.retried),e.reason!==undefined&&(this.reason=e.reason),e.setting_value!==undefined&&(this.setting_value=e.setting_value),e.type!==undefined&&(this.type=e.type))},r.prototype={},r.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.page_type=e.readString().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.pane_name=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.I64?this.position=e.readI64().value:e.skip(r);break;case 4:r==Thrift.Type.BOOL?this.success=e.readBool().value:e.skip(r);break;case 5:r==Thrift.Type.I64?this.count=e.readI64().value:e.skip(r);break;case 6:r==Thrift.Type.BOOL?this.retried=e.readBool().value:e.skip(r);break;case 7:r==Thrift.Type.STRING?this.reason=e.readString().value:e.skip(r);break;case 8:r==Thrift.Type.STRING?this.setting_value=e.readString().value:e.skip(r);break;case 9:r==Thrift.Type.STRING?this.type=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},r.prototype.write=function(e){e.writeStructBegin("ActionInfo"),this.page_type!==null&&this.page_type!==undefined&&(e.writeFieldBegin("page_type",Thrift.Type.STRING,1),e.writeString(this.page_type),e.writeFieldEnd()),this.pane_name!==null&&this.pane_name!==undefined&&(e.writeFieldBegin("pane_name",Thrift.Type.STRING,2),e.writeString(this.pane_name),e.writeFieldEnd()),this.position!==null&&this.position!==undefined&&(e.writeFieldBegin("position",Thrift.Type.I64,3),e.writeI64(this.position),e.writeFieldEnd()),this.success!==null&&this.success!==undefined&&(e.writeFieldBegin("success",Thrift.Type.BOOL,4),e.writeBool(this.success),e.writeFieldEnd()),this.count!==null&&this.count!==undefined&&(e.writeFieldBegin("count",Thrift.Type.I64,5),e.writeI64(this.count),e.writeFieldEnd()),this.retried!==null&&this.retried!==undefined&&(e.writeFieldBegin("retried",Thrift.Type.BOOL,6),e.writeBool(this.retried),e.writeFieldEnd()),this.reason!==null&&this.reason!==undefined&&(e.writeFieldBegin("reason",Thrift.Type.STRING,7),e.writeString(this.reason),e.writeFieldEnd()),this.setting_value!==null&&this.setting_value!==undefined&&(e.writeFieldBegin("setting_value",Thrift.Type.STRING,8),e.writeString(this.setting_value),e.writeFieldEnd()),this.type!==null&&this.type!==undefined&&(e.writeFieldBegin("type",Thrift.Type.STRING,9),e.writeString(this.type),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},i=function(e){this.provider=null,e&&e.provider!==undefined&&(this.provider=e.provider)},i.prototype={},i.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.provider=e.readString().value:e.skip(r);break;case 0:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},i.prototype.write=function(e){e.writeStructBegin("Expand"),this.provider!==null&&this.provider!==undefined&&(e.writeFieldBegin("provider",Thrift.Type.STRING,1),e.writeString(this.provider),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},n=function(e){this.target_subreddit_name=null,this.target_subreddit_id=null,this.type=null,e&&(e.target_subreddit_name!==undefined&&(this.target_subreddit_name=e.target_subreddit_name),e.target_subreddit_id!==undefined&&(this.target_subreddit_id=e.target_subreddit_id),e.type!==undefined&&(this.type=e.type))},n.prototype={},n.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.target_subreddit_name=e.readString().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.target_subreddit_id=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.STRING?this.type=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},n.prototype.write=function(e){e.writeStructBegin("Widget"),this.target_subreddit_name!==
null&&this.target_subreddit_name!==undefined&&(e.writeFieldBegin("target_subreddit_name",Thrift.Type.STRING,1),e.writeString(this.target_subreddit_name),e.writeFieldEnd()),this.target_subreddit_id!==null&&this.target_subreddit_id!==undefined&&(e.writeFieldBegin("target_subreddit_id",Thrift.Type.STRING,2),e.writeString(this.target_subreddit_id),e.writeFieldEnd()),this.type!==null&&this.type!==undefined&&(e.writeFieldBegin("type",Thrift.Type.STRING,3),e.writeString(this.type),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},t=function(e){this.target=null,e&&e.target!==undefined&&(this.target=e.target)},t.prototype={},t.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.target=e.readString().value:e.skip(r);break;case 0:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},t.prototype.write=function(e){e.writeStructBegin("Share"),this.target!==null&&this.target!==undefined&&(e.writeFieldBegin("target",Thrift.Type.STRING,1),e.writeString(this.target),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},e.Share=t,e.Widget=n,e.ActionInfo=r,e.Expand=i}(window.Thrift=window.Thrift||{}),!function(e){var t;t=function(e){this.blocked_user_id=null,this.id=null,this.type=null,this.existing_channel=null,this.image_upload_method=null,this.user_added_method=null,this.invitation_id=null,this.invitation_type=null,this.members=null,this.invitation_preview_type=null,this.message_type=null,this.number_channels=null,this.number_pending_invites=null,this.number_members=null,this.number_unreads=null,this.reported_user_id=null,this.sender_user_id=null,this.invitation_timestamp=null,this.message_length=null,this.recipient_user_id=null,this.number_blocked_users=null,this.request_name=null,e&&(e.blocked_user_id!==undefined&&(this.blocked_user_id=e.blocked_user_id),e.id!==undefined&&(this.id=e.id),e.type!==undefined&&(this.type=e.type),e.existing_channel!==undefined&&(this.existing_channel=e.existing_channel),e.image_upload_method!==undefined&&(this.image_upload_method=e.image_upload_method),e.user_added_method!==undefined&&(this.user_added_method=e.user_added_method),e.invitation_id!==undefined&&(this.invitation_id=e.invitation_id),e.invitation_type!==undefined&&(this.invitation_type=e.invitation_type),e.members!==undefined&&(this.members=e.members),e.invitation_preview_type!==undefined&&(this.invitation_preview_type=e.invitation_preview_type),e.message_type!==undefined&&(this.message_type=e.message_type),e.number_channels!==undefined&&(this.number_channels=e.number_channels),e.number_pending_invites!==undefined&&(this.number_pending_invites=e.number_pending_invites),e.number_members!==undefined&&(this.number_members=e.number_members),e.number_unreads!==undefined&&(this.number_unreads=e.number_unreads),e.reported_user_id!==undefined&&(this.reported_user_id=e.reported_user_id),e.sender_user_id!==undefined&&(this.sender_user_id=e.sender_user_id),e.invitation_timestamp!==undefined&&(this.invitation_timestamp=e.invitation_timestamp),e.message_length!==undefined&&(this.message_length=e.message_length),e.recipient_user_id!==undefined&&(this.recipient_user_id=e.recipient_user_id),e.number_blocked_users!==undefined&&(this.number_blocked_users=e.number_blocked_users),e.request_name!==undefined&&(this.request_name=e.request_name))},t.prototype={},t.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.blocked_user_id=e.readString().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.id=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.STRING?this.type=e.readString().value:e.skip(r);break;case 4:r==Thrift.Type.BOOL?this.existing_channel=e.readBool().value:e.skip(r);break;case 5:r==Thrift.Type.STRING?this.image_upload_method=e.readString().value:e.skip(r);break;case 6:r==Thrift.Type.STRING?this.user_added_method=e.readString().value:e.skip(r);break;case 7:r==Thrift.Type.STRING?this.invitation_id=e.readString().value:e.skip(r);break;case 8:r==Thrift.Type.STRING?this.invitation_type=e.readString().value:e.skip(r);break;case 9:if(r==Thrift.Type.LIST){var s=0,o;this.members=[];var u=0;o=e.readListBegin(),u=o.etype,s=o.size;for(var a=0;a<s;++a){var f=null;f=e.readString().value,this.members.push(f)}e.readListEnd()}else e.skip(r);break;case 10:r==Thrift.Type.STRING?this.invitation_preview_type=e.readString().value:e.skip(r);break;case 11:r==Thrift.Type.STRING?this.message_type=e.readString().value:e.skip(r);break;case 12:r==Thrift.Type.I64?this.number_channels=e.readI64().value:e.skip(r);break;case 13:r==Thrift.Type.I64?this.number_pending_invites=e.readI64().value:e.skip(r);break;case 14:r==Thrift.Type.I64?this.number_members=e.readI64().value:e.skip(r);break;case 15:r==Thrift.Type.I64?this.number_unreads=e.readI64().value:e.skip(r);break;case 16:r==Thrift.Type.STRING?this.reported_user_id=e.readString().value:e.skip(r);break;case 17:r==Thrift.Type.STRING?this.sender_user_id=e.readString().value:e.skip(r);break;case 18:r==Thrift.Type.I64?this.invitation_timestamp=e.readI64().value:e.skip(r);break;case 19:r==Thrift.Type.I64?this.message_length=e.readI64().value:e.skip(r);break;case 20:r==Thrift.Type.STRING?this.recipient_user_id=e.readString().value:e.skip(r);break;case 21:r==Thrift.Type.I64?this.number_blocked_users=e.readI64().value:e.skip(r);break;case 22:r==Thrift.Type.STRING?this.request_name=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},t.prototype.write=function(e){e.writeStructBegin("Chat"),this.blocked_user_id!==null&&this.blocked_user_id!==undefined&&(e.writeFieldBegin("blocked_user_id",Thrift.Type.STRING,1),e.writeString(this.blocked_user_id),e.writeFieldEnd()),this.id!==null&&this.id!==undefined&&(e.writeFieldBegin("id",Thrift.Type.STRING,2),e.writeString(this.id),e.writeFieldEnd()),this.type!==null&&this.type!==undefined&&(e.writeFieldBegin("type",Thrift.Type.STRING,3),e.writeString(this.type),e.writeFieldEnd()),this.existing_channel!==null&&this.existing_channel!==undefined&&(e.writeFieldBegin("existing_channel",Thrift.Type.BOOL,4),e.writeBool(this.existing_channel),e.writeFieldEnd()),this.image_upload_method!==null&&this.image_upload_method!==undefined&&(e.writeFieldBegin("image_upload_method",Thrift.Type.STRING,5),e.writeString(this.image_upload_method),e.writeFieldEnd()),this.user_added_method!==null&&this.user_added_method!==undefined&&(e.writeFieldBegin("user_added_method",Thrift.Type.STRING,6),e.writeString(this.user_added_method),e.writeFieldEnd()),this.invitation_id!==null&&this.invitation_id!==undefined&&(e.writeFieldBegin("invitation_id",Thrift.Type.STRING,7),e.writeString(this.invitation_id),e.writeFieldEnd()),this.invitation_type!==null&&this.invitation_type!==undefined&&(e.writeFieldBegin("invitation_type",Thrift.Type.STRING,8),e.writeString(this.invitation_type),e.writeFieldEnd());if(this.members!==null&&this.members!==undefined){e.writeFieldBegin("members",Thrift.Type.LIST,9),e.writeListBegin(Thrift.Type.STRING,this.members.length);for(var t in this.members)this.members.hasOwnProperty(t)&&(t=this.members[t],e.writeString(t));e.writeListEnd(),e.writeFieldEnd()}this.invitation_preview_type!==null&&this.invitation_preview_type!==undefined&&(e.writeFieldBegin("invitation_preview_type",Thrift.Type.STRING,10),e.writeString(this.invitation_preview_type),e.writeFieldEnd()),this.message_type!==null&&this.message_type!==undefined&&(e.writeFieldBegin("message_type",Thrift.Type.STRING,11),e.writeString(this.message_type),e.writeFieldEnd()),this.number_channels!==null&&this.number_channels!==undefined&&(e.writeFieldBegin("number_channels",Thrift.Type.I64,12),e.writeI64(this.number_channels),e.writeFieldEnd()),this.number_pending_invites!==null&&this.number_pending_invites!==undefined&&(e.writeFieldBegin("number_pending_invites",Thrift.Type.I64,13),e.writeI64(this.number_pending_invites),e.writeFieldEnd()),this.number_members!==null&&this.number_members!==undefined&&(e.writeFieldBegin("number_members",Thrift.Type.I64,14),e.writeI64(this.number_members),e.writeFieldEnd()),this.number_unreads!==null&&this.number_unreads!==undefined&&(e.writeFieldBegin("number_unreads",Thrift.Type.I64,15),e.writeI64(this.number_unreads),e.writeFieldEnd()),this.reported_user_id!==null&&this.reported_user_id!==undefined&&(e.writeFieldBegin("reported_user_id",Thrift.Type.STRING,16),e.writeString(this.reported_user_id),e.writeFieldEnd()),this.sender_user_id!==null&&this.sender_user_id!==undefined&&(e.writeFieldBegin("sender_user_id",Thrift.Type.STRING,17),e.writeString(this.sender_user_id),e.writeFieldEnd()),this.invitation_timestamp!==null&&this.invitation_timestamp!==undefined&&(e.writeFieldBegin("invitation_timestamp",Thrift.Type.I64,18),e.writeI64(this.invitation_timestamp),e.writeFieldEnd()),this.message_length!==null&&this.message_length!==undefined&&(e.writeFieldBegin("message_length",Thrift.Type.I64,19),e.writeI64(this.message_length),e.writeFieldEnd()),this.recipient_user_id!==null&&this.recipient_user_id!==undefined&&(e.writeFieldBegin("recipient_user_id",Thrift.Type.STRING,20),e.writeString(this.recipient_user_id),e.writeFieldEnd()),this.number_blocked_users!==null&&this.number_blocked_users!==undefined&&(e.writeFieldBegin("number_blocked_users",Thrift.Type.I64,21),e.writeI64(this.number_blocked_users),e.writeFieldEnd()),this.request_name!==null&&this.request_name!==undefined&&(e.writeFieldBegin("request_name",Thrift.Type.STRING,22),e.writeString(this.request_name),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},e.Chat=t}(window.Thrift=window.Thrift||{}),!function(e){var t,n,r,i,s,o,u,a,f,l,c;f=function(e){this.id=null,this.type=null,this.title=null,this.nsfw=null,this.spoiler=null,this.url=null,this.domain=null,this.body_text=null,this.created_timestamp=null,this.promoted=null,this.author_id=null,this.content_duration=null,this.archived=null,this.crosspost_root_id=null,this.number_gildings=null,this.original_content=null,this.flair=null,e&&(e.id!==undefined&&(this.id=e.id),e.type!==undefined&&(this.type=e.type),e.title!==undefined&&(this.title=e.title),e.nsfw!==undefined&&(this.nsfw=e.nsfw),e.spoiler!==undefined&&(this.spoiler=e.spoiler),e.url!==undefined&&(this.url=e.url),e.domain!==undefined&&(this.domain=e.domain),e.body_text!==undefined&&(this.body_text=e.body_text),e.created_timestamp!==undefined&&(this.created_timestamp=e.created_timestamp),e.promoted!==undefined&&(this.promoted=e.promoted),e.author_id!==undefined&&(this.author_id=e.author_id),e.content_duration!==undefined&&(this.content_duration=e.content_duration),e.archived!==undefined&&(this.archived=e.archived),e.crosspost_root_id!==undefined&&(this.crosspost_root_id=e.crosspost_root_id),e.number_gildings!==undefined&&(this.number_gildings=e.number_gildings),e.original_content!==undefined&&(this.original_content=e.original_content),e.flair!==undefined&&(this.flair=e.flair))},f.prototype={},f.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.id=e.readString().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.type=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.STRING?this.title=e.readString().value:e.skip(r);break;case 4:r==Thrift.Type.BOOL?this.nsfw=e.readBool().value:e.skip(r);break;case 5:r==Thrift.Type.BOOL?this.spoiler=e.readBool().value:e.skip(r);break;case 6:r==Thrift.Type.STRING?this.url=e.readString().value:e.skip(r);break;case 7:r==Thrift.Type.STRING?this.domain=e.readString().value:e.skip(r);break;case 8:r==Thrift.Type.STRING?this.body_text=e.readString().value:e.skip(r);break;case 9:r==Thrift.Type.I64?this.created_timestamp=e.readI64().value:e.skip(r);break;case 10:r==Thrift.Type.BOOL?this.promoted=e.readBool().value:e.skip(r);break;case 11:r==Thrift.Type.STRING?this.author_id=e.readString().value:e.skip(r);break;case 12:r==Thrift.Type.I64?this.content_duration=e.readI64().value:e.skip(r);break;case 13:r==Thrift.Type.BOOL?this.archived=e.readBool().value:e.skip(r);break;case 14:r==Thrift.Type.STRING?this.crosspost_root_id=e.readString().value:e.skip(r);break;case 15:r==Thrift.Type.I64?this.number_gildings=e.readI64().value:e.skip(r);break;case 16:r==Thrift.Type.BOOL?this.original_content=e.readBool().value:e.skip(r);break;case 17:r==Thrift.Type.STRING?this.flair=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},f.prototype.write=function(e){e.writeStructBegin("Post"),this.id!==null&&this.id!==undefined&&(e.writeFieldBegin("id",Thrift.Type.STRING,1),e.writeString(this.id),e.writeFieldEnd()),this.type!==null&&this.type!==undefined&&(e.writeFieldBegin("type",Thrift.Type.STRING,2),e.writeString(this.type),e.writeFieldEnd()),this.title!==null&&this.title!==undefined&&(e.writeFieldBegin("title",Thrift.Type.STRING,3),e.writeString(this.title),e.writeFieldEnd()),this.nsfw!==null&&this.nsfw!==undefined&&(e.writeFieldBegin("nsfw",Thrift.Type.BOOL,4),e.writeBool(this.nsfw),e.writeFieldEnd()),this.spoiler!==null&&this.spoiler!==undefined&&(e.writeFieldBegin("spoiler",Thrift.Type.BOOL,5),e.writeBool(this.spoiler),e.writeFieldEnd()),this.url!==null&&this.url!==undefined&&(e.writeFieldBegin("url",Thrift.Type.STRING,6),e.writeString(this.url),e.writeFieldEnd()),this.domain!==null&&this.domain!==undefined&&(e.writeFieldBegin("domain",Thrift.Type.STRING,7),e.writeString(this.domain),e.writeFieldEnd()),this.body_text!==null&&this.body_text!==undefined&&(e.writeFieldBegin("body_text",Thrift.Type.STRING,8),e.writeString(this.body_text),e.writeFieldEnd()),this.created_timestamp!==null&&this.created_timestamp!==undefined&&(e.writeFieldBegin("created_timestamp",Thrift.Type.I64,9),e.writeI64(this.created_timestamp),e.writeFieldEnd()),this.promoted!==null&&this.promoted!==undefined&&(e.writeFieldBegin("promoted",Thrift.Type.BOOL,10),e.writeBool(this.promoted),e.writeFieldEnd()),this.author_id!==null&&this.author_id!==undefined&&(e.writeFieldBegin("author_id",Thrift.Type.STRING,11),e.writeString(this.author_id),e.writeFieldEnd()),this.content_duration!==null&&this.content_duration!==undefined&&(e.writeFieldBegin("content_duration",Thrift.Type.I64,12),e.writeI64(this.content_duration),e.writeFieldEnd()),this.archived!==null&&this.archived!==undefined&&(e.writeFieldBegin("archived",Thrift.Type.BOOL,13),e.writeBool(this.archived),e.writeFieldEnd()),this.crosspost_root_id!==null&&this.crosspost_root_id!==undefined&&(e.writeFieldBegin("crosspost_root_id",Thrift.Type.STRING,14),e.writeString(this.crosspost_root_id),e.writeFieldEnd()),this.number_gildings!==null&&this.number_gildings!==undefined&&(e.writeFieldBegin("number_gildings",Thrift.Type.I64,15),e.writeI64(this.number_gildings),e.writeFieldEnd()),this.original_content!==null&&this.original_content!==undefined&&(e.writeFieldBegin("original_content",Thrift.Type.BOOL,16),e.writeBool(this.original_content),e.writeFieldEnd()),this.flair!==null&&this.flair!==undefined&&(e.writeFieldBegin("flair",Thrift.Type.STRING,17),e.writeString(this.flair),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},i=function(e){this.length=null,this.links=null,this.sort=null,this.sort_time_filter=null,this.min_rank=null,this.max_rank=null,this.geo_filter=null,this.source=null,e&&(e.length!==undefined&&(this.length=e.length),e.links!==undefined&&(this.links=e.links),e.sort!==undefined&&(this.sort=e.sort),e.sort_time_filter!==undefined&&(this.sort_time_filter=e.sort_time_filter),e.min_rank!==undefined&&(this.min_rank=e.min_rank),e.max_rank!==undefined&&(this.max_rank=e.max_rank),e.geo_filter!==undefined&&(this.geo_filter=e.geo_filter),e.source!==undefined&&(this.source=e.source))},i.prototype={},i.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.I64?this.length=e.readI64().value:e.skip(r);break;case 2:if(r==Thrift.Type.LIST){var s=0,o;this.links=[];var u=0;o=e.readListBegin(),u=o.etype,s=o.size;for(var a=0;a<s;++a){var f=null;f=e.readString().value,this.links.push(f)}e.readListEnd()}else e.skip(r);break;case 3:r==Thrift.Type.STRING?this.sort=e.readString().value:e.skip(r);break;case 4:r==Thrift.Type.STRING?this.sort_time_filter=e.readString().value:e.skip(r);break;case 5:r==Thrift.Type.I64?this.min_rank=e.readI64().value:e.skip(r);break;case 6:r==Thrift.Type.I64?this.max_rank=e.readI64().value:e.skip(r);break;case 7:r==Thrift.Type.STRING?this.geo_filter=e.readString().value:e.skip(r);break;case 8:r==Thrift.Type.STRING?this.source=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},i.prototype.write=function(e){e.writeStructBegin("Listing"),this.length!==null&&this.length!==undefined&&(e.writeFieldBegin("length",Thrift.Type.I64,1),e.writeI64(this.length),e.writeFieldEnd());if(this.links!==null&&this.links!==undefined){e.writeFieldBegin("links",Thrift.Type.LIST,2),e.writeListBegin(Thrift.Type.STRING,this.links.length);for(var t in this.links)this.links.hasOwnProperty(t)&&(t=this.links[t],e.writeString(t));e.writeListEnd(),e.writeFieldEnd()}this.sort!==null&&this.sort!==undefined&&(e.writeFieldBegin("sort",Thrift.Type.STRING,3),e.writeString(this.sort),e.writeFieldEnd()),this.sort_time_filter!==null&&this.sort_time_filter!==undefined&&(e.writeFieldBegin("sort_time_filter",Thrift.Type.STRING,4),e.writeString(this.sort_time_filter),e.writeFieldEnd()),this.min_rank!==null&&this.min_rank!==undefined&&(e.writeFieldBegin("min_rank",Thrift.Type.I64,5),e.writeI64(this.min_rank),e.writeFieldEnd()),this.max_rank!==null&&this.max_rank!==undefined&&(e.writeFieldBegin("max_rank",Thrift.Type.I64,6),e.writeI64(this.max_rank),e.writeFieldEnd()),this.geo_filter!==null&&this.geo_filter!==undefined&&(e.writeFieldBegin("geo_filter",Thrift.Type.STRING,7),e.writeString(this.geo_filter),e.writeFieldEnd()),this.source!==null&&this.source!==undefined&&(e.writeFieldBegin("source",Thrift.Type.STRING,8),e.writeString(this.source),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},t=function(e){this.id=null,this.post_id=null,this.parent_id=null,this.body_text=null,this.author_id=null,this.number_gildings=null,e&&(e.id!==undefined&&(this.id=e.id),e.post_id!==undefined&&(this.post_id=e.post_id),e.parent_id!==undefined&&(this.parent_id=e.parent_id),e.body_text!==undefined&&(this.body_text=e.body_text),e.author_id!==undefined&&(this.author_id=e.author_id),e.number_gildings!==undefined&&(this.number_gildings=e.number_gildings))},t.prototype={},t.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.id=e.readString().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.post_id=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.STRING?this.parent_id=e.readString().value:e.skip(r);break;case 4:r==Thrift.Type.STRING?this.body_text=e.readString().value:e.skip(r);break;case 5:r==Thrift.Type.STRING?this.author_id=e.readString().value:e.skip(r);break;case 6:r==Thrift.Type.I64?this.number_gildings=e.readI64().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},t.prototype.write=function(e){e.writeStructBegin("Comment"),this.id!==null&&this.id!==undefined&&(e.writeFieldBegin("id",Thrift.Type.STRING,1),e.writeString(this.id),e.writeFieldEnd()),this.post_id!==null&&this.post_id!==undefined&&(e.writeFieldBegin("post_id",Thrift.Type.STRING,2),e.writeString(this.post_id),e.writeFieldEnd()),this.parent_id!==null&&this.parent_id!==undefined&&(e.writeFieldBegin("parent_id",Thrift.Type.STRING,3),e.writeString(this.parent_id),e.writeFieldEnd()),this.body_text!==null&&this.body_text!==undefined&&(e.writeFieldBegin("body_text",Thrift.Type.STRING,4),e.writeString(this.body_text),e.writeFieldEnd()),this.author_id!==null&&this.author_id!==undefined&&(e.writeFieldBegin("author_id",Thrift.Type.STRING,5),e.writeString(this.author_id),e.writeFieldEnd()),this.number_gildings!==null&&this.number_gildings!==undefined&&(e.writeFieldBegin("number_gildings",Thrift.Type.I64,6),e.writeI64(this.number_gildings),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},s=function(e){this.editor_mode=null,e&&e.editor_mode!==undefined&&(this.editor_mode=e.editor_mode)},s.prototype={},s.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.editor_mode=e.readString().value:e.skip(r);break;case 0:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},s.prototype.write=function(e){e.writeStructBegin("CommentComposer"),this.editor_mode!==null&&this.editor_mode!==undefined&&(e.writeFieldBegin("editor_mode",Thrift.Type.STRING,1),e.writeString(this.editor_mode),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},r=function(e){this.id=null,this.process_notes=null,this.dropped=null,e&&(e.id!==undefined&&(this.id=e.id),e.process_notes!==undefined&&(this.process_notes=e.process_notes),e.dropped!==undefined&&(this.dropped=e.dropped))},r.prototype={},r.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.id=e.readString().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.process_notes=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.BOOL?this.dropped=e.readBool().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},r.prototype.write=function(e){e.writeStructBegin("Notification"),this.id!==null&&this.id!==undefined&&(e.writeFieldBegin("id",Thrift.Type.STRING,1),e.writeString(this.id),e.writeFieldEnd()),this.process_notes!==null&&this.process_notes!==undefined&&(e.writeFieldBegin("process_notes",Thrift.Type.STRING,2),e.writeString(this.process_notes),e.writeFieldEnd()),this.dropped!==null&&this.dropped!==undefined&&(e.writeFieldBegin("dropped",Thrift.Type.BOOL,3),e.writeBool(this.dropped),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},u=function(e){this.width=null,this.height=null,this.load_time=null,this.id=null,this.orientation=null,this.duration=null,this.time=null,this.pinned=null,this.max_time_served=null,this.mimetype=null,this.size=null,this.url=null,this.source=null,this.upload_duration=null,this.file_name=null,this.type=null,this.thumbnail_url=null,e&&(e.width!==undefined&&(this.width=e.width),e.height!==undefined&&(this.height=e.height),e.load_time!==undefined&&(this.load_time=e.load_time),e.id!==undefined&&(this.id=e.id),e.orientation!==undefined&&(this.orientation=e.orientation),e.duration!==undefined&&(this.duration=e.duration),e.time!==undefined&&(this.time=e.time),e.pinned!==undefined&&(this.pinned=e.pinned),e.max_time_served!==undefined&&(this.max_time_served=e.max_time_served),e.mimetype!==undefined&&(this.mimetype=e.mimetype),e.size!==undefined&&(this.size=e.size),e.url!==undefined&&(this.url=e.url),e.source!==undefined&&(this.source=e.source),e.upload_duration!==undefined&&(this.upload_duration=e.upload_duration),e.file_name!==undefined&&(this.file_name=e.file_name),e.type!==undefined&&(this.type=e.type),e.thumbnail_url!==undefined&&(this.thumbnail_url=e.thumbnail_url))},u.prototype={},u.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.I64?this.width=e.readI64().value:e.skip(r);break;case 2:r==Thrift.Type.I64?this.height=e.readI64().value:e.skip(r);break;case 3:r==Thrift.Type.I64?this.load_time=e.readI64().value:e.skip(r);break;case 4:r==Thrift.Type.STRING?this.id=e.readString().value:e.skip(r);break;case 5:r==Thrift.Type.STRING?this.orientation=e.readString().value:e.skip(r);break;case 6:r==Thrift.Type.I64?this.duration=e.readI64().value:e.skip(r);break;case 7:r==Thrift.Type.I64?this.time=e.readI64().value:e.skip(r);break;case 8:r==Thrift.Type.BOOL?this.pinned=e.readBool().value:e.skip(r);break;case 9:r==Thrift.Type.I64?this.max_time_served=e.readI64().value:e.skip(r);break;case 10:r==Thrift.Type.STRING?this.mimetype=e.readString().value:e.skip(r);break;case 11:r==Thrift.Type.I64?this.size=e.readI64().value:e.skip(r);break;case 12:r==Thrift.Type.STRING?this.url=e.readString().value:e.skip(r);break;case 13:r==Thrift.Type.STRING?this.source=e.readString().value:e.skip(r);break;case 14:r==Thrift.Type.I64?this.upload_duration=e.readI64().value:e.skip(r);break;case 15:r==Thrift.Type.STRING?this.file_name=e.readString().value:e.skip(r);break;case 16:r==Thrift.Type.STRING?this.type=e.readString().value:e.skip(r);break;case 17:r==Thrift.Type.STRING?this.thumbnail_url=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},u.prototype.write=function(e){e.writeStructBegin("Media"),this.width!==null&&this.width!==undefined&&(e.writeFieldBegin("width",Thrift.Type.I64,1),e.writeI64(this.width),e.writeFieldEnd()),this.height!==null&&this.height!==undefined&&(e.writeFieldBegin("height",Thrift.Type.I64,2),e.writeI64(this.height),e.writeFieldEnd()),this.load_time!==null&&this.load_time!==undefined&&(e.writeFieldBegin("load_time",Thrift.Type.I64,3),e.writeI64(this.load_time),e.writeFieldEnd()),this.id!==null&&this.id!==undefined&&(e.writeFieldBegin("id",Thrift.Type.STRING,4),e.writeString(this.id),e.writeFieldEnd()),this.orientation!==null&&this.orientation!==undefined&&(e.writeFieldBegin("orientation",Thrift.Type.STRING,5),e.writeString(this.orientation),e.writeFieldEnd()),this.duration!==null&&this.duration!==undefined&&(e.writeFieldBegin("duration",Thrift.Type.I64,6),e.writeI64(this.duration),e.writeFieldEnd()),this.time!==null&&this.time!==undefined&&(e.writeFieldBegin("time",Thrift.Type.I64,7),e.writeI64(this.time),e.writeFieldEnd()),this.pinned!==null&&this.pinned!==undefined&&(e.writeFieldBegin("pinned",Thrift.Type.BOOL,8),e.writeBool(this.pinned),e.writeFieldEnd()),this.max_time_served!==null&&this.max_time_served!==undefined&&(e.writeFieldBegin("max_time_served",Thrift.Type.I64,9),e.writeI64(this.max_time_served),e.writeFieldEnd()),this.mimetype!==null&&this.mimetype!==undefined&&(e.writeFieldBegin("mimetype",Thrift.Type.STRING,10),e.writeString(this.mimetype),e.writeFieldEnd()),this.size!==null&&this.size!==undefined&&(e.writeFieldBegin("size",Thrift.Type.I64,11),e.writeI64(this.size),e.writeFieldEnd()),this.url!==null&&this.url!==undefined&&(e.writeFieldBegin("url",Thrift.Type.STRING,12),e.writeString(this.url),e.writeFieldEnd()),this.source!==null&&this.source!==undefined&&(e.writeFieldBegin("source",Thrift.Type.STRING,13),e.writeString(this.source),e.writeFieldEnd()),this.upload_duration!==null&&this.upload_duration!==undefined&&(e.writeFieldBegin("upload_duration",Thrift.Type.I64,14),e.writeI64(this.upload_duration),e.writeFieldEnd()),this.file_name!==null&&this.file_name!==undefined&&(e.writeFieldBegin("file_name",Thrift.Type.STRING,15),e.writeString(this.file_name),e.writeFieldEnd()),this.type!==null&&this.type!==undefined&&(e.writeFieldBegin("type",Thrift.Type.STRING,16),e.writeString(this.type),e.writeFieldEnd()),this.thumbnail_url!==null&&this.thumbnail_url!==undefined&&(e.writeFieldBegin("thumbnail_url",Thrift.Type.STRING,17),e.writeString(this.thumbnail_url),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},l=function(e){this.type=null,this.input_type=null,this.text_type=null,this.final_status=null,this.editor_mode=null,e&&(e.type!==undefined&&(this.type=e.type),e.input_type!==undefined&&(this.input_type=e.input_type),e.text_type!==undefined&&(this.text_type=e.text_type),e.final_status!==undefined&&(this.final_status=e.final_status),e.editor_mode!==undefined&&(this.editor_mode=e.editor_mode))},l.prototype={},l.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.type=e.readString().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.input_type=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.STRING?this.text_type=e.readString().value:e.skip(r);break;case 4:r==Thrift.Type.STRING?this.final_status=e.readString().value:e.skip(r);break;case 5:r==Thrift.Type.STRING?this.editor_mode=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},l.prototype.write=function(e){e.writeStructBegin("PostComposer"),this.type!==null&&this.type!==undefined&&(e.writeFieldBegin("type",Thrift.Type.STRING,1),e.writeString(this.type),e.writeFieldEnd()),this.input_type!==null&&this.input_type!==undefined&&(e.writeFieldBegin("input_type",Thrift.Type.STRING,2),e.writeString(this.input_type),e.writeFieldEnd()),this.text_type!==null&&this.text_type!==undefined&&(e.writeFieldBegin("text_type",Thrift.Type.STRING,3),e.writeString(this.text_type),e.writeFieldEnd()),this.final_status!==null&&this.final_status!==undefined&&(e.writeFieldBegin("final_status",Thrift.Type.STRING,4),e.writeString(this.final_status),e.writeFieldEnd()),this.editor_mode!==null&&this.editor_mode!==undefined&&(e.writeFieldBegin("editor_mode",Thrift.Type.STRING,5),e.writeString(this.editor_mode),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},o=function(e){this.id=null,this.action_source=null,this.process_notes=null,this.number_subreddits_selected=null,this.subreddits_selected=null,this.user_name=null,this.recommended_user_name=null,this.start_timestamp=null,this.end_timestamp=null,this.category_position=null,this.category_name=null,this.subreddit_name=null,this.subreddit_position=null,this.subreddit_is_selected=null,this.subreddits_already_selected=null,this.successful=null,this.semantic_version=null,this.landing_page=null,this.valid_email_submitted=null,this.pre_selected=null,this.passed_captcha=null,this.captcha_num_screens=null,this.personalized_subreddits=null,this.similar_subreddits=null,this.number_subreddits=null,this.is_similar_subreddit=null,e&&(e.id!==undefined&&(this.id=e.id),e.action_source!==undefined&&(this.action_source=e.action_source),e.process_notes!==undefined&&(this.process_notes=e.process_notes),e.number_subreddits_selected!==undefined&&(this.number_subreddits_selected=e.number_subreddits_selected),e.subreddits_selected!==undefined&&(this.subreddits_selected=e.subreddits_selected),e.user_name!==undefined&&(this.user_name=e.user_name),e.recommended_user_name!==undefined&&(this.recommended_user_name=e.recommended_user_name),e.start_timestamp!==undefined&&(this.start_timestamp=e.start_timestamp),e.end_timestamp!==undefined&&(this.end_timestamp=e.end_timestamp),e.category_position!==undefined&&(this.category_position=e.category_position),e.category_name!==undefined&&(this.category_name=e.category_name),e.subreddit_name!==undefined&&(this.subreddit_name=e.subreddit_name),e.subreddit_position!==undefined&&(this.subreddit_position=e.subreddit_position),e.subreddit_is_selected!==undefined&&(this.subreddit_is_selected=e.subreddit_is_selected),e.subreddits_already_selected!==undefined&&(this.subreddits_already_selected=e.subreddits_already_selected),e.successful!==undefined&&(this.successful=e.successful),e.semantic_version!==undefined&&(this.semantic_version=e.semantic_version),e.landing_page!==undefined&&(this.landing_page=e.landing_page),e.valid_email_submitted!==undefined&&(this.valid_email_submitted=e.valid_email_submitted),e.pre_selected!==undefined&&(this.pre_selected=e.pre_selected),e.passed_captcha!==undefined&&(this.passed_captcha=e.passed_captcha),e.captcha_num_screens!==undefined&&(this.captcha_num_screens=e.captcha_num_screens),e.personalized_subreddits!==undefined&&(this.personalized_subreddits=e.personalized_subreddits),e.similar_subreddits!==undefined&&(this.similar_subreddits=e.similar_subreddits),e.number_subreddits!==undefined&&(this.number_subreddits=e.number_subreddits),e.is_similar_subreddit!==undefined&&(this.is_similar_subreddit=e.is_similar_subreddit))},o.prototype={},o.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.id=e.readString().value:e.skip(r);break;case 6:r==Thrift.Type.STRING?this.action_source=e.readString().value:e.skip(r);break;case 7:r==Thrift.Type.STRING?this.process_notes=e.readString().value:e.skip(r);break;case 8:r==Thrift.Type.I64?this.number_subreddits_selected=e.readI64().value:e.skip(r);break;case 9
:if(r==Thrift.Type.LIST){var s=0,o;this.subreddits_selected=[];var u=0;o=e.readListBegin(),u=o.etype,s=o.size;for(var a=0;a<s;++a){var f=null;f=e.readString().value,this.subreddits_selected.push(f)}e.readListEnd()}else e.skip(r);break;case 10:r==Thrift.Type.STRING?this.user_name=e.readString().value:e.skip(r);break;case 11:r==Thrift.Type.BOOL?this.recommended_user_name=e.readBool().value:e.skip(r);break;case 12:r==Thrift.Type.I64?this.start_timestamp=e.readI64().value:e.skip(r);break;case 13:r==Thrift.Type.I64?this.end_timestamp=e.readI64().value:e.skip(r);break;case 14:r==Thrift.Type.I64?this.category_position=e.readI64().value:e.skip(r);break;case 15:r==Thrift.Type.STRING?this.category_name=e.readString().value:e.skip(r);break;case 16:r==Thrift.Type.STRING?this.subreddit_name=e.readString().value:e.skip(r);break;case 17:r==Thrift.Type.I64?this.subreddit_position=e.readI64().value:e.skip(r);break;case 18:r==Thrift.Type.BOOL?this.subreddit_is_selected=e.readBool().value:e.skip(r);break;case 19:r==Thrift.Type.I64?this.subreddits_already_selected=e.readI64().value:e.skip(r);break;case 20:r==Thrift.Type.BOOL?this.successful=e.readBool().value:e.skip(r);break;case 21:r==Thrift.Type.STRING?this.semantic_version=e.readString().value:e.skip(r);break;case 22:r==Thrift.Type.STRING?this.landing_page=e.readString().value:e.skip(r);break;case 23:r==Thrift.Type.BOOL?this.valid_email_submitted=e.readBool().value:e.skip(r);break;case 24:r==Thrift.Type.BOOL?this.pre_selected=e.readBool().value:e.skip(r);break;case 25:r==Thrift.Type.BOOL?this.passed_captcha=e.readBool().value:e.skip(r);break;case 26:r==Thrift.Type.I64?this.captcha_num_screens=e.readI64().value:e.skip(r);break;case 27:r==Thrift.Type.I64?this.personalized_subreddits=e.readI64().value:e.skip(r);break;case 28:if(r==Thrift.Type.LIST){var l=0,c;this.similar_subreddits=[];var h=0;c=e.readListBegin(),h=c.etype,l=c.size;for(var p=0;p<l;++p){var d=null;d=e.readString().value,this.similar_subreddits.push(d)}e.readListEnd()}else e.skip(r);break;case 29:r==Thrift.Type.I64?this.number_subreddits=e.readI64().value:e.skip(r);break;case 30:r==Thrift.Type.BOOL?this.is_similar_subreddit=e.readBool().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},o.prototype.write=function(e){e.writeStructBegin("Onboarding"),this.id!==null&&this.id!==undefined&&(e.writeFieldBegin("id",Thrift.Type.STRING,1),e.writeString(this.id),e.writeFieldEnd()),this.action_source!==null&&this.action_source!==undefined&&(e.writeFieldBegin("action_source",Thrift.Type.STRING,6),e.writeString(this.action_source),e.writeFieldEnd()),this.process_notes!==null&&this.process_notes!==undefined&&(e.writeFieldBegin("process_notes",Thrift.Type.STRING,7),e.writeString(this.process_notes),e.writeFieldEnd()),this.number_subreddits_selected!==null&&this.number_subreddits_selected!==undefined&&(e.writeFieldBegin("number_subreddits_selected",Thrift.Type.I64,8),e.writeI64(this.number_subreddits_selected),e.writeFieldEnd());if(this.subreddits_selected!==null&&this.subreddits_selected!==undefined){e.writeFieldBegin("subreddits_selected",Thrift.Type.LIST,9),e.writeListBegin(Thrift.Type.STRING,this.subreddits_selected.length);for(var t in this.subreddits_selected)this.subreddits_selected.hasOwnProperty(t)&&(t=this.subreddits_selected[t],e.writeString(t));e.writeListEnd(),e.writeFieldEnd()}this.user_name!==null&&this.user_name!==undefined&&(e.writeFieldBegin("user_name",Thrift.Type.STRING,10),e.writeString(this.user_name),e.writeFieldEnd()),this.recommended_user_name!==null&&this.recommended_user_name!==undefined&&(e.writeFieldBegin("recommended_user_name",Thrift.Type.BOOL,11),e.writeBool(this.recommended_user_name),e.writeFieldEnd()),this.start_timestamp!==null&&this.start_timestamp!==undefined&&(e.writeFieldBegin("start_timestamp",Thrift.Type.I64,12),e.writeI64(this.start_timestamp),e.writeFieldEnd()),this.end_timestamp!==null&&this.end_timestamp!==undefined&&(e.writeFieldBegin("end_timestamp",Thrift.Type.I64,13),e.writeI64(this.end_timestamp),e.writeFieldEnd()),this.category_position!==null&&this.category_position!==undefined&&(e.writeFieldBegin("category_position",Thrift.Type.I64,14),e.writeI64(this.category_position),e.writeFieldEnd()),this.category_name!==null&&this.category_name!==undefined&&(e.writeFieldBegin("category_name",Thrift.Type.STRING,15),e.writeString(this.category_name),e.writeFieldEnd()),this.subreddit_name!==null&&this.subreddit_name!==undefined&&(e.writeFieldBegin("subreddit_name",Thrift.Type.STRING,16),e.writeString(this.subreddit_name),e.writeFieldEnd()),this.subreddit_position!==null&&this.subreddit_position!==undefined&&(e.writeFieldBegin("subreddit_position",Thrift.Type.I64,17),e.writeI64(this.subreddit_position),e.writeFieldEnd()),this.subreddit_is_selected!==null&&this.subreddit_is_selected!==undefined&&(e.writeFieldBegin("subreddit_is_selected",Thrift.Type.BOOL,18),e.writeBool(this.subreddit_is_selected),e.writeFieldEnd()),this.subreddits_already_selected!==null&&this.subreddits_already_selected!==undefined&&(e.writeFieldBegin("subreddits_already_selected",Thrift.Type.I64,19),e.writeI64(this.subreddits_already_selected),e.writeFieldEnd()),this.successful!==null&&this.successful!==undefined&&(e.writeFieldBegin("successful",Thrift.Type.BOOL,20),e.writeBool(this.successful),e.writeFieldEnd()),this.semantic_version!==null&&this.semantic_version!==undefined&&(e.writeFieldBegin("semantic_version",Thrift.Type.STRING,21),e.writeString(this.semantic_version),e.writeFieldEnd()),this.landing_page!==null&&this.landing_page!==undefined&&(e.writeFieldBegin("landing_page",Thrift.Type.STRING,22),e.writeString(this.landing_page),e.writeFieldEnd()),this.valid_email_submitted!==null&&this.valid_email_submitted!==undefined&&(e.writeFieldBegin("valid_email_submitted",Thrift.Type.BOOL,23),e.writeBool(this.valid_email_submitted),e.writeFieldEnd()),this.pre_selected!==null&&this.pre_selected!==undefined&&(e.writeFieldBegin("pre_selected",Thrift.Type.BOOL,24),e.writeBool(this.pre_selected),e.writeFieldEnd()),this.passed_captcha!==null&&this.passed_captcha!==undefined&&(e.writeFieldBegin("passed_captcha",Thrift.Type.BOOL,25),e.writeBool(this.passed_captcha),e.writeFieldEnd()),this.captcha_num_screens!==null&&this.captcha_num_screens!==undefined&&(e.writeFieldBegin("captcha_num_screens",Thrift.Type.I64,26),e.writeI64(this.captcha_num_screens),e.writeFieldEnd()),this.personalized_subreddits!==null&&this.personalized_subreddits!==undefined&&(e.writeFieldBegin("personalized_subreddits",Thrift.Type.I64,27),e.writeI64(this.personalized_subreddits),e.writeFieldEnd());if(this.similar_subreddits!==null&&this.similar_subreddits!==undefined){e.writeFieldBegin("similar_subreddits",Thrift.Type.LIST,28),e.writeListBegin(Thrift.Type.STRING,this.similar_subreddits.length);for(var n in this.similar_subreddits)this.similar_subreddits.hasOwnProperty(n)&&(n=this.similar_subreddits[n],e.writeString(n));e.writeListEnd(),e.writeFieldEnd()}this.number_subreddits!==null&&this.number_subreddits!==undefined&&(e.writeFieldBegin("number_subreddits",Thrift.Type.I64,29),e.writeI64(this.number_subreddits),e.writeFieldEnd()),this.is_similar_subreddit!==null&&this.is_similar_subreddit!==undefined&&(e.writeFieldBegin("is_similar_subreddit",Thrift.Type.BOOL,30),e.writeBool(this.is_similar_subreddit),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},n=function(e){this.semantic_version=null,this.type=null,this.number_posts=null,this.posts_shown=null,this.post_position=null,this.post_type=null,this.post_subreddit=null,e&&(e.semantic_version!==undefined&&(this.semantic_version=e.semantic_version),e.type!==undefined&&(this.type=e.type),e.number_posts!==undefined&&(this.number_posts=e.number_posts),e.posts_shown!==undefined&&(this.posts_shown=e.posts_shown),e.post_position!==undefined&&(this.post_position=e.post_position),e.post_type!==undefined&&(this.post_type=e.post_type),e.post_subreddit!==undefined&&(this.post_subreddit=e.post_subreddit))},n.prototype={},n.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.semantic_version=e.readString().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.type=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.I64?this.number_posts=e.readI64().value:e.skip(r);break;case 4:if(r==Thrift.Type.LIST){var s=0,o;this.posts_shown=[];var u=0;o=e.readListBegin(),u=o.etype,s=o.size;for(var a=0;a<s;++a){var f=null;f=e.readString().value,this.posts_shown.push(f)}e.readListEnd()}else e.skip(r);break;case 6:r==Thrift.Type.I64?this.post_position=e.readI64().value:e.skip(r);break;case 7:r==Thrift.Type.STRING?this.post_type=e.readString().value:e.skip(r);break;case 8:r==Thrift.Type.STRING?this.post_subreddit=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},n.prototype.write=function(e){e.writeStructBegin("DiscoveryUnit"),this.semantic_version!==null&&this.semantic_version!==undefined&&(e.writeFieldBegin("semantic_version",Thrift.Type.STRING,1),e.writeString(this.semantic_version),e.writeFieldEnd()),this.type!==null&&this.type!==undefined&&(e.writeFieldBegin("type",Thrift.Type.STRING,2),e.writeString(this.type),e.writeFieldEnd()),this.number_posts!==null&&this.number_posts!==undefined&&(e.writeFieldBegin("number_posts",Thrift.Type.I64,3),e.writeI64(this.number_posts),e.writeFieldEnd());if(this.posts_shown!==null&&this.posts_shown!==undefined){e.writeFieldBegin("posts_shown",Thrift.Type.LIST,4),e.writeListBegin(Thrift.Type.STRING,this.posts_shown.length);for(var t in this.posts_shown)this.posts_shown.hasOwnProperty(t)&&(t=this.posts_shown[t],e.writeString(t));e.writeListEnd(),e.writeFieldEnd()}this.post_position!==null&&this.post_position!==undefined&&(e.writeFieldBegin("post_position",Thrift.Type.I64,6),e.writeI64(this.post_position),e.writeFieldEnd()),this.post_type!==null&&this.post_type!==undefined&&(e.writeFieldBegin("post_type",Thrift.Type.STRING,7),e.writeString(this.post_type),e.writeFieldEnd()),this.post_subreddit!==null&&this.post_subreddit!==undefined&&(e.writeFieldBegin("post_subreddit",Thrift.Type.STRING,8),e.writeString(this.post_subreddit),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},c=function(e){this.id=null,e&&e.id!==undefined&&(this.id=e.id)},c.prototype={},c.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.id=e.readString().value:e.skip(r);break;case 0:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},c.prototype.write=function(e){e.writeStructBegin("Message"),this.id!==null&&this.id!==undefined&&(e.writeFieldBegin("id",Thrift.Type.STRING,1),e.writeString(this.id),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},a=function(e){this.topic_id=null,this.topic_name=null,this.subtopic_id=null,this.subtopic_name=null,e&&(e.topic_id!==undefined&&(this.topic_id=e.topic_id),e.topic_name!==undefined&&(this.topic_name=e.topic_name),e.subtopic_id!==undefined&&(this.subtopic_id=e.subtopic_id),e.subtopic_name!==undefined&&(this.subtopic_name=e.subtopic_name))},a.prototype={},a.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.topic_id=e.readString().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.topic_name=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.STRING?this.subtopic_id=e.readString().value:e.skip(r);break;case 4:r==Thrift.Type.STRING?this.subtopic_name=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},a.prototype.write=function(e){e.writeStructBegin("News"),this.topic_id!==null&&this.topic_id!==undefined&&(e.writeFieldBegin("topic_id",Thrift.Type.STRING,1),e.writeString(this.topic_id),e.writeFieldEnd()),this.topic_name!==null&&this.topic_name!==undefined&&(e.writeFieldBegin("topic_name",Thrift.Type.STRING,2),e.writeString(this.topic_name),e.writeFieldEnd()),this.subtopic_id!==null&&this.subtopic_id!==undefined&&(e.writeFieldBegin("subtopic_id",Thrift.Type.STRING,3),e.writeString(this.subtopic_id),e.writeFieldEnd()),this.subtopic_name!==null&&this.subtopic_name!==undefined&&(e.writeFieldBegin("subtopic_name",Thrift.Type.STRING,4),e.writeString(this.subtopic_name),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},e.Comment=t,e.DiscoveryUnit=n,e.Notification=r,e.Listing=i,e.CommentComposer=s,e.Onboarding=o,e.Media=u,e.News=a,e.Post=f,e.PostComposer=l,e.Message=c}(window.Thrift=window.Thrift||{}),!function(e){var t,n,r;n=function(e){this.width=null,this.height=null,this.viewport_width=null,this.viewport_height=null,this.view_type=null,this.theme=null,this.in_focus=null,this.browser_tab_id=null,e&&(e.width!==undefined&&(this.width=e.width),e.height!==undefined&&(this.height=e.height),e.viewport_width!==undefined&&(this.viewport_width=e.viewport_width),e.viewport_height!==undefined&&(this.viewport_height=e.viewport_height),e.view_type!==undefined&&(this.view_type=e.view_type),e.theme!==undefined&&(this.theme=e.theme),e.in_focus!==undefined&&(this.in_focus=e.in_focus),e.browser_tab_id!==undefined&&(this.browser_tab_id=e.browser_tab_id))},n.prototype={},n.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.I32?this.width=e.readI32().value:e.skip(r);break;case 2:r==Thrift.Type.I32?this.height=e.readI32().value:e.skip(r);break;case 3:r==Thrift.Type.I32?this.viewport_width=e.readI32().value:e.skip(r);break;case 4:r==Thrift.Type.I32?this.viewport_height=e.readI32().value:e.skip(r);break;case 5:r==Thrift.Type.STRING?this.view_type=e.readString().value:e.skip(r);break;case 6:r==Thrift.Type.STRING?this.theme=e.readString().value:e.skip(r);break;case 7:r==Thrift.Type.BOOL?this.in_focus=e.readBool().value:e.skip(r);break;case 8:r==Thrift.Type.STRING?this.browser_tab_id=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},n.prototype.write=function(e){e.writeStructBegin("Screen"),this.width!==null&&this.width!==undefined&&(e.writeFieldBegin("width",Thrift.Type.I32,1),e.writeI32(this.width),e.writeFieldEnd()),this.height!==null&&this.height!==undefined&&(e.writeFieldBegin("height",Thrift.Type.I32,2),e.writeI32(this.height),e.writeFieldEnd()),this.viewport_width!==null&&this.viewport_width!==undefined&&(e.writeFieldBegin("viewport_width",Thrift.Type.I32,3),e.writeI32(this.viewport_width),e.writeFieldEnd()),this.viewport_height!==null&&this.viewport_height!==undefined&&(e.writeFieldBegin("viewport_height",Thrift.Type.I32,4),e.writeI32(this.viewport_height),e.writeFieldEnd()),this.view_type!==null&&this.view_type!==undefined&&(e.writeFieldBegin("view_type",Thrift.Type.STRING,5),e.writeString(this.view_type),e.writeFieldEnd()),this.theme!==null&&this.theme!==undefined&&(e.writeFieldBegin("theme",Thrift.Type.STRING,6),e.writeString(this.theme),e.writeFieldEnd()),this.in_focus!==null&&this.in_focus!==undefined&&(e.writeFieldBegin("in_focus",Thrift.Type.BOOL,7),e.writeBool(this.in_focus),e.writeFieldEnd()),this.browser_tab_id!==null&&this.browser_tab_id!==undefined&&(e.writeFieldBegin("browser_tab_id",Thrift.Type.STRING,8),e.writeString(this.browser_tab_id),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},t=function(e){this.name=null,this.device_id=null,this.device_name=null,this.os_name=null,this.os_version=null,this.browser_name=null,this.browser_version=null,this.fingerprint=null,this.fingerprint_created_timestamp=null,e&&(e.name!==undefined&&(this.name=e.name),e.device_id!==undefined&&(this.device_id=e.device_id),e.device_name!==undefined&&(this.device_name=e.device_name),e.os_name!==undefined&&(this.os_name=e.os_name),e.os_version!==undefined&&(this.os_version=e.os_version),e.browser_name!==undefined&&(this.browser_name=e.browser_name),e.browser_version!==undefined&&(this.browser_version=e.browser_version),e.fingerprint!==undefined&&(this.fingerprint=e.fingerprint),e.fingerprint_created_timestamp!==undefined&&(this.fingerprint_created_timestamp=e.fingerprint_created_timestamp))},t.prototype={},t.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.name=e.readString().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.device_id=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.STRING?this.device_name=e.readString().value:e.skip(r);break;case 4:r==Thrift.Type.STRING?this.os_name=e.readString().value:e.skip(r);break;case 5:r==Thrift.Type.STRING?this.os_version=e.readString().value:e.skip(r);break;case 6:r==Thrift.Type.STRING?this.browser_name=e.readString().value:e.skip(r);break;case 7:r==Thrift.Type.STRING?this.browser_version=e.readString().value:e.skip(r);break;case 8:r==Thrift.Type.STRING?this.fingerprint=e.readString().value:e.skip(r);break;case 9:r==Thrift.Type.I64?this.fingerprint_created_timestamp=e.readI64().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},t.prototype.write=function(e){e.writeStructBegin("Platform"),this.name!==null&&this.name!==undefined&&(e.writeFieldBegin("name",Thrift.Type.STRING,1),e.writeString(this.name),e.writeFieldEnd()),this.device_id!==null&&this.device_id!==undefined&&(e.writeFieldBegin("device_id",Thrift.Type.STRING,2),e.writeString(this.device_id),e.writeFieldEnd()),this.device_name!==null&&this.device_name!==undefined&&(e.writeFieldBegin("device_name",Thrift.Type.STRING,3),e.writeString(this.device_name),e.writeFieldEnd()),this.os_name!==null&&this.os_name!==undefined&&(e.writeFieldBegin("os_name",Thrift.Type.STRING,4),e.writeString(this.os_name),e.writeFieldEnd()),this.os_version!==null&&this.os_version!==undefined&&(e.writeFieldBegin("os_version",Thrift.Type.STRING,5),e.writeString(this.os_version),e.writeFieldEnd()),this.browser_name!==null&&this.browser_name!==undefined&&(e.writeFieldBegin("browser_name",Thrift.Type.STRING,6),e.writeString(this.browser_name),e.writeFieldEnd()),this.browser_version!==null&&this.browser_version!==undefined&&(e.writeFieldBegin("browser_version",Thrift.Type.STRING,7),e.writeString(this.browser_version),e.writeFieldEnd()),this.fingerprint!==null&&this.fingerprint!==undefined&&(e.writeFieldBegin("fingerprint",Thrift.Type.STRING,8),e.writeString(this.fingerprint),e.writeFieldEnd()),this.fingerprint_created_timestamp!==null&&this.fingerprint_created_timestamp!==undefined&&(e.writeFieldBegin("fingerprint_created_timestamp",Thrift.Type.I64,9),e.writeI64(this.fingerprint_created_timestamp),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},r=function(e){this.version=null,this.name=null,this.install_timestamp=null,e&&(e.version!==undefined&&(this.version=e.version),e.name!==undefined&&(this.name=e.name),e.install_timestamp!==undefined&&(this.install_timestamp=e.install_timestamp))},r.prototype={},r.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.version=e.readString().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.name=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.I64?this.install_timestamp=e.readI64().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},r.prototype.write=function(e){e.writeStructBegin("App"),this.version!==null&&this.version!==undefined&&(e.writeFieldBegin("version",Thrift.Type.STRING,1),e.writeString(this.version),e.writeFieldEnd()),this.name!==null&&this.name!==undefined&&(e.writeFieldBegin("name",Thrift.Type.STRING,2),e.writeString(this.name),e.writeFieldEnd()),this.install_timestamp!==null&&this.install_timestamp!==undefined&&(e.writeFieldBegin("install_timestamp",Thrift.Type.I64,3),e.writeI64(this.install_timestamp),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},e.Platform=t,e.Screen=n,e.App=r}(window.Thrift=window.Thrift||{}),!function(e){var t;t=function(e){this.id=null,this.name=null,this.owner=null,this.variant=null,this.start_timestamp=null,this.end_timestamp=null,this.bucketing_key=null,this.version=null,e&&(e.id!==undefined&&(this.id=e.id),e.name!==undefined&&(this.name=e.name),e.owner!==undefined&&(this.owner=e.owner),e.variant!==undefined&&(this.variant=e.variant),e.start_timestamp!==undefined&&(this.start_timestamp=e.start_timestamp),e.end_timestamp!==undefined&&(this.end_timestamp=e.end_timestamp),e.bucketing_key!==undefined&&(this.bucketing_key=e.bucketing_key),e.version!==undefined&&(this.version=e.version))},t.prototype={},t.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.I64?this.id=e.readI64().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.name=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.STRING?this.owner=e.readString().value:e.skip(r);break;case 4:r==Thrift.Type.STRING?this.variant=e.readString().value:e.skip(r);break;case 5:r==Thrift.Type.I64?this.start_timestamp=e.readI64().value:e.skip(r);break;case 6:r==Thrift.Type.I64?this.end_timestamp=e.readI64().value:e.skip(r);break;case 7:r==Thrift.Type.STRING?this.bucketing_key=e.readString().value:e.skip(r);break;case 8:r==Thrift.Type.STRING?this.version=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},t.prototype.write=function(e){e.writeStructBegin("Experiment"),this.id!==null&&this.id!==undefined&&(e.writeFieldBegin("id",Thrift.Type.I64,1),e.writeI64(this.id),e.writeFieldEnd()),this.name!==null&&this.name!==undefined&&(e.writeFieldBegin("name",Thrift.Type.STRING,2),e.writeString(this.name),e.writeFieldEnd()),this.owner!==null&&this.owner!==undefined&&(e.writeFieldBegin("owner",Thrift.Type.STRING,3),e.writeString(this.owner),e.writeFieldEnd()),this.variant!==null&&this.variant!==undefined&&(e.writeFieldBegin("variant",Thrift.Type.STRING,4),e.writeString(this.variant),e.writeFieldEnd()),this.start_timestamp!==null&&this.start_timestamp!==undefined&&(e.writeFieldBegin("start_timestamp",Thrift.Type.I64,5),e.writeI64(this.start_timestamp),e.writeFieldEnd()),this.end_timestamp!==null&&this.end_timestamp!==undefined&&(e.writeFieldBegin("end_timestamp",Thrift.Type.I64,6),e.writeI64(this.end_timestamp),e.writeFieldEnd()),this.bucketing_key!==null&&this.bucketing_key!==undefined&&(e.writeFieldBegin("bucketing_key",Thrift.Type.STRING,7),e.writeString(this.bucketing_key),e.writeFieldEnd()),this.version!==null&&this.version!==undefined&&(e.writeFieldBegin("version",Thrift.Type.STRING,8),e.writeString(this.version),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},e.Experiment=t}(window.Thrift=window.Thrift||{}),!function(e){var t;t=function(e){this.type=null,this.number_months=null,this.one_time_type=null,this.gift_user_id=null,this.gift_anonymous=null,this.gift_message=null,this.gift_message_length=null,this.number_creddits=null,this.subscription_type=null,this.gilded_content=null,this.source=null,e&&(e.type!==undefined&&(this.type=e.type),e.number_months!==undefined&&(this.number_months=e.number_months),e.one_time_type!==undefined&&(this.one_time_type=e.one_time_type),e.gift_user_id!==undefined&&(this.gift_user_id=e.gift_user_id),e.gift_anonymous!==undefined&&(this.gift_anonymous=e.gift_anonymous),e.gift_message!==undefined&&(this.gift_message=e.gift_message),e.gift_message_length!==undefined&&(this.gift_message_length=e.gift_message_length),e.number_creddits!==undefined&&(this.number_creddits=e.number_creddits),e.subscription_type!==undefined&&(this.subscription_type=e.subscription_type),e.gilded_content!==undefined&&(this.gilded_content=e.gilded_content),e.source!==undefined&&(this.source=e.source))},t.prototype={},t.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.type=e.readString().value:e.skip(r);break;case 2:r==Thrift.Type.I32?this.number_months=e.readI32().value:e.skip(r);break;case 3:r==Thrift.Type.STRING?this.one_time_type=e.readString().value:e.skip(r);break;case 4:r==Thrift.Type.STRING?this.gift_user_id=e.readString().value:e.skip(r);break;case 5:r==Thrift.Type.BOOL?this.gift_anonymous=e.readBool().value:e.skip(r);break;case 6:r==Thrift.Type.BOOL?this.gift_message=e.readBool().value:e.skip(r);break;case 7:r==Thrift.Type.I32?this.gift_message_length=e.readI32().value:e.skip(r);break;case 8:r==Thrift.Type.I32?this.number_creddits=e.readI32().value:e.skip(r);break;case 9:r==Thrift.Type.STRING?this.subscription_type=e.readString().value:e.skip(r);break;case 10:r==Thrift.Type.BOOL?this.gilded_content=e.readBool().value:e.skip(r);break;case 11:r==Thrift.Type.STRING?this.source=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},t.prototype.write=function(e){e.writeStructBegin("GoldPurchase"),this.type!==null&&this.type!==undefined&&(e.writeFieldBegin("type",Thrift.Type.STRING,1),e.writeString(this.type),e.writeFieldEnd()),this.number_months!==null&&this.number_months!==undefined&&(e.writeFieldBegin("number_months",Thrift.Type.I32,2),e.writeI32(this.number_months),e.writeFieldEnd()),this.one_time_type!==null&&this.one_time_type!==undefined&&(e.writeFieldBegin("one_time_type",Thrift.Type.STRING,3),e.writeString(this.one_time_type),e.writeFieldEnd()),this.gift_user_id!==null&&this.gift_user_id!==undefined&&(e.writeFieldBegin("gift_user_id",Thrift.Type.STRING,4),e.writeString(this.gift_user_id),e.writeFieldEnd()),this.gift_anonymous!==null&&this.gift_anonymous!==undefined&&(e.writeFieldBegin("gift_anonymous",Thrift.Type.BOOL,5),e.writeBool(this.gift_anonymous),e.writeFieldEnd()),this.gift_message!==null&&this.gift_message!==undefined&&(e.writeFieldBegin("gift_message",Thrift.Type.BOOL,6),e.writeBool(this.gift_message),e.writeFieldEnd()),this.gift_message_length!==null&&this.gift_message_length!==undefined&&(e.writeFieldBegin("gift_message_length",Thrift.Type.I32,7),e.writeI32(this.gift_message_length),e.writeFieldEnd()),this.number_creddits!==null&&this.number_creddits!==undefined&&(e.writeFieldBegin("number_creddits",Thrift.Type.I32,8),e.writeI32(this.number_creddits),e.writeFieldEnd()),this.subscription_type!==null&&this.subscription_type!==undefined&&(e.writeFieldBegin("subscription_type",Thrift.Type.STRING,9),e.writeString(this.subscription_type),e.writeFieldEnd()),this.gilded_content!==null&&this.gilded_content!==undefined&&(e.writeFieldBegin("gilded_content",Thrift.Type.BOOL,10),e.writeBool(this.gilded_content),e.writeFieldEnd()),this.source!==null&&this.source!==undefined&&(e.writeFieldBegin("source",Thrift.Type.STRING,11),e.writeString(this.source),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},e.GoldPurchase=t}(window.Thrift=window.Thrift||{}),!function(e){var t,n,r,i;i=function(e){this.is_quarantined=null,this.is_nsfw=null,this.categories=null,e&&(e.is_quarantined!==undefined&&(this.is_quarantined=e.is_quarantined),e.is_nsfw!==undefined&&(this.is_nsfw=e.is_nsfw),e.categories!==undefined&&(this.categories=e.categories))},i.prototype={},i.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.BOOL?this.is_quarantined=e.readBool().value:e.skip(r);break;case 2:r==Thrift.Type.BOOL?this.is_nsfw=e.readBool().value:e.skip(r);break;case 3:if(r==Thrift.Type.LIST){var s=0,o;this.categories=[];var u=0;o=e.readListBegin(),u=o.etype,s=o.size;for(var a=0;a<s;++a){var f=null;f=e.readString().value,this.categories.push(f)}e.readListEnd()}else e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},i.prototype.write=function(e){e.writeStructBegin("ContentMetadata"),this.is_quarantined!==null&&this.is_quarantined!==undefined&&(e.writeFieldBegin("is_quarantined",Thrift.Type.BOOL,1),e.writeBool(this.is_quarantined),e.writeFieldEnd()),this.is_nsfw!==null&&this.is_nsfw!==undefined&&(e.writeFieldBegin("is_nsfw",Thrift.Type.BOOL,2),e.writeBool(this.is_nsfw),e.writeFieldEnd());if(this.categories!==null&&this.categories!==undefined){e.writeFieldBegin("categories",Thrift.Type.LIST,3),e.writeListBegin(Thrift.Type.STRING,this.categories.length);for(var t in this.categories)this.categories.hasOwnProperty(t)&&(t=this.categories[t],e.writeString(t));e.writeListEnd(),e.writeFieldEnd()}e.writeFieldStop(),e.writeStructEnd();return},n=function(e){this.country_code=null,this.region=null,this.city=null,this.time_zone=null,this.anonymous=null,this.anonymous_vpn=null,this.hosting_provider=null,this.public_proxy=null,this.tor_exit_node=null,e&&(e.country_code!==undefined&&(this.country_code=e.country_code),e.region!==undefined&&(this.region=e.region),e.city!==undefined&&(this.city=e.city),e.time_zone!==undefined&&(this.time_zone=e.time_zone),e.anonymous!==undefined&&(this.anonymous=e.anonymous),e.anonymous_vpn!==undefined&&(this.anonymous_vpn=e.anonymous_vpn),e.hosting_provider!==undefined&&(this.hosting_provider=e.hosting_provider),e.public_proxy!==undefined&&(this.public_proxy=e.public_proxy),e.tor_exit_node!==undefined&&(this.tor_exit_node=e.tor_exit_node))},n.prototype={},n.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.country_code=e.readString().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.region=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.STRING?this.city=e.readString().value:e.skip(r);break;case 4:r==Thrift.Type.STRING?this.time_zone=e.readString().value:e.skip(r);break;case 5:r==Thrift.Type.BOOL?this.anonymous=e.readBool().value:e.skip(r);break;case 6:r==Thrift.Type.BOOL?this.anonymous_vpn=e.readBool().value:e.skip(r);break;case 7:r==Thrift.Type.BOOL?this.hosting_provider=e.readBool().value:e.skip(r);break;case 8:r==Thrift.Type.BOOL?this.public_proxy=e.readBool().value:e.skip(r);break;case 9:r==Thrift.Type.BOOL?this.tor_exit_node=e.readBool().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},n.prototype.write=function(e){e.writeStructBegin("Geo"),this.country_code!==null&&this.country_code!==undefined&&(e.writeFieldBegin("country_code",Thrift.Type.STRING,1),e.writeString(this.country_code),e.writeFieldEnd()),this.region!==null&&this.region!==undefined&&(e.writeFieldBegin("region",Thrift.Type.STRING,2),e.writeString(this.region),e.writeFieldEnd()),this.city!==null&&this.city!==undefined&&(e.writeFieldBegin("city",Thrift.Type.STRING,3),e.writeString(this.city),e.writeFieldEnd()),this.time_zone!==null&&this.time_zone!==undefined&&(e.writeFieldBegin("time_zone",Thrift.Type.STRING,4),e.writeString(this.time_zone),e.writeFieldEnd()),this.anonymous!==null&&this.anonymous!==undefined&&(e.writeFieldBegin("anonymous",Thrift.Type.BOOL,5),e.writeBool(this.anonymous),e.writeFieldEnd()),this.anonymous_vpn!==null&&this.anonymous_vpn!==undefined&&(e.writeFieldBegin("anonymous_vpn",Thrift.Type.BOOL,6),e.writeBool(this.anonymous_vpn),e.writeFieldEnd()),this.hosting_provider!==null&&this.hosting_provider!==undefined&&(e.writeFieldBegin("hosting_provider",Thrift.Type.BOOL,7),e.writeBool(this.hosting_provider),e.writeFieldEnd()),this.public_proxy!==null&&this.public_proxy!==undefined&&(e.writeFieldBegin("public_proxy",Thrift.Type.BOOL,8),e.writeBool(this.public_proxy),e.writeFieldEnd()),this.tor_exit_node!==null&&this.tor_exit_node!==undefined&&(e.writeFieldBegin("tor_exit_node",Thrift.Type.BOOL,9),e.writeBool(this.tor_exit_node),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},r=function(e){this.shared_timestamp=null,this.utm_source=null,this.utm_name=null,this.shared_hash=null,e&&(e.shared_timestamp!==undefined&&(this.shared_timestamp=e.shared_timestamp),e.utm_source!==undefined&&(this.utm_source=e.utm_source),e.utm_name!==undefined&&(this.utm_name=e.utm_name),e.shared_hash!==undefined&&(this.shared_hash=e.shared_hash))},r.prototype={},r.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.I64?this.shared_timestamp=e.readI64().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.utm_source=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.STRING?this.utm_name=e.readString().value:e.skip(r);break;case 4:r==Thrift.Type.STRING?
this.shared_hash=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},r.prototype.write=function(e){e.writeStructBegin("UrlParsed"),this.shared_timestamp!==null&&this.shared_timestamp!==undefined&&(e.writeFieldBegin("shared_timestamp",Thrift.Type.I64,1),e.writeI64(this.shared_timestamp),e.writeFieldEnd()),this.utm_source!==null&&this.utm_source!==undefined&&(e.writeFieldBegin("utm_source",Thrift.Type.STRING,2),e.writeString(this.utm_source),e.writeFieldEnd()),this.utm_name!==null&&this.utm_name!==undefined&&(e.writeFieldBegin("utm_name",Thrift.Type.STRING,3),e.writeString(this.utm_name),e.writeFieldEnd()),this.shared_hash!==null&&this.shared_hash!==undefined&&(e.writeFieldBegin("shared_hash",Thrift.Type.STRING,4),e.writeString(this.shared_hash),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},t=function(e){this.shared_at_timestamp=null,e&&e.shared_at_timestamp!==undefined&&(this.shared_at_timestamp=e.shared_at_timestamp)},t.prototype={},t.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.I64?this.shared_at_timestamp=e.readI64().value:e.skip(r);break;case 0:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},t.prototype.write=function(e){e.writeStructBegin("LinkSharing"),this.shared_at_timestamp!==null&&this.shared_at_timestamp!==undefined&&(e.writeFieldBegin("shared_at_timestamp",Thrift.Type.I64,1),e.writeI64(this.shared_at_timestamp),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},e.LinkSharing=t,e.Geo=n,e.UrlParsed=r,e.ContentMetadata=i}(window.Thrift=window.Thrift||{}),!function(e){var t;t=function(e){this.method=null,this.currency=null,this.amount_in_smallest_denom=null,e&&(e.method!==undefined&&(this.method=e.method),e.currency!==undefined&&(this.currency=e.currency),e.amount_in_smallest_denom!==undefined&&(this.amount_in_smallest_denom=e.amount_in_smallest_denom))},t.prototype={},t.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.method=e.readString().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.currency=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.I64?this.amount_in_smallest_denom=e.readI64().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},t.prototype.write=function(e){e.writeStructBegin("Payment"),this.method!==null&&this.method!==undefined&&(e.writeFieldBegin("method",Thrift.Type.STRING,1),e.writeString(this.method),e.writeFieldEnd()),this.currency!==null&&this.currency!==undefined&&(e.writeFieldBegin("currency",Thrift.Type.STRING,2),e.writeString(this.currency),e.writeFieldEnd()),this.amount_in_smallest_denom!==null&&this.amount_in_smallest_denom!==undefined&&(e.writeFieldBegin("amount_in_smallest_denom",Thrift.Type.I64,3),e.writeI64(this.amount_in_smallest_denom),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},e.Payment=t}(window.Thrift=window.Thrift||{}),!function(e){var t,n,r,i,s;i=function(e){this.user_agent=null,this.domain=null,this.base_url=null,this.client_ip=null,this.known_bot=null,this.header_signature=null,this.cookies_present=null,this.accept_encoding=null,this.accept_language=null,this.reddaid=null,e&&(e.user_agent!==undefined&&(this.user_agent=e.user_agent),e.domain!==undefined&&(this.domain=e.domain),e.base_url!==undefined&&(this.base_url=e.base_url),e.client_ip!==undefined&&(this.client_ip=e.client_ip),e.known_bot!==undefined&&(this.known_bot=e.known_bot),e.header_signature!==undefined&&(this.header_signature=e.header_signature),e.cookies_present!==undefined&&(this.cookies_present=e.cookies_present),e.accept_encoding!==undefined&&(this.accept_encoding=e.accept_encoding),e.accept_language!==undefined&&(this.accept_language=e.accept_language),e.reddaid!==undefined&&(this.reddaid=e.reddaid))},i.prototype={},i.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.user_agent=e.readString().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.domain=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.STRING?this.base_url=e.readString().value:e.skip(r);break;case 4:r==Thrift.Type.STRING?this.client_ip=e.readString().value:e.skip(r);break;case 5:r==Thrift.Type.STRING?this.known_bot=e.readString().value:e.skip(r);break;case 6:r==Thrift.Type.STRING?this.header_signature=e.readString().value:e.skip(r);break;case 7:r==Thrift.Type.BOOL?this.cookies_present=e.readBool().value:e.skip(r);break;case 8:r==Thrift.Type.BOOL?this.accept_encoding=e.readBool().value:e.skip(r);break;case 9:r==Thrift.Type.BOOL?this.accept_language=e.readBool().value:e.skip(r);break;case 10:r==Thrift.Type.STRING?this.reddaid=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},i.prototype.write=function(e){e.writeStructBegin("Request"),this.user_agent!==null&&this.user_agent!==undefined&&(e.writeFieldBegin("user_agent",Thrift.Type.STRING,1),e.writeString(this.user_agent),e.writeFieldEnd()),this.domain!==null&&this.domain!==undefined&&(e.writeFieldBegin("domain",Thrift.Type.STRING,2),e.writeString(this.domain),e.writeFieldEnd()),this.base_url!==null&&this.base_url!==undefined&&(e.writeFieldBegin("base_url",Thrift.Type.STRING,3),e.writeString(this.base_url),e.writeFieldEnd()),this.client_ip!==null&&this.client_ip!==undefined&&(e.writeFieldBegin("client_ip",Thrift.Type.STRING,4),e.writeString(this.client_ip),e.writeFieldEnd()),this.known_bot!==null&&this.known_bot!==undefined&&(e.writeFieldBegin("known_bot",Thrift.Type.STRING,5),e.writeString(this.known_bot),e.writeFieldEnd()),this.header_signature!==null&&this.header_signature!==undefined&&(e.writeFieldBegin("header_signature",Thrift.Type.STRING,6),e.writeString(this.header_signature),e.writeFieldEnd()),this.cookies_present!==null&&this.cookies_present!==undefined&&(e.writeFieldBegin("cookies_present",Thrift.Type.BOOL,7),e.writeBool(this.cookies_present),e.writeFieldEnd()),this.accept_encoding!==null&&this.accept_encoding!==undefined&&(e.writeFieldBegin("accept_encoding",Thrift.Type.BOOL,8),e.writeBool(this.accept_encoding),e.writeFieldEnd()),this.accept_language!==null&&this.accept_language!==undefined&&(e.writeFieldBegin("accept_language",Thrift.Type.BOOL,9),e.writeBool(this.accept_language),e.writeFieldEnd()),this.reddaid!==null&&this.reddaid!==undefined&&(e.writeFieldBegin("reddaid",Thrift.Type.STRING,10),e.writeString(this.reddaid),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},n=function(e){this.domain=null,this.url=null,this.element=null,e&&(e.domain!==undefined&&(this.domain=e.domain),e.url!==undefined&&(this.url=e.url),e.element!==undefined&&(this.element=e.element))},n.prototype={},n.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.domain=e.readString().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.url=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.STRING?this.element=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},n.prototype.write=function(e){e.writeStructBegin("Referrer"),this.domain!==null&&this.domain!==undefined&&(e.writeFieldBegin("domain",Thrift.Type.STRING,1),e.writeString(this.domain),e.writeFieldEnd()),this.url!==null&&this.url!==undefined&&(e.writeFieldBegin("url",Thrift.Type.STRING,2),e.writeString(this.url),e.writeFieldEnd()),this.element!==null&&this.element!==undefined&&(e.writeFieldBegin("element",Thrift.Type.STRING,3),e.writeString(this.element),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},t=function(e){this.client_app_type=null,this.client_name=null,this.client_id=null,e&&(e.client_app_type!==undefined&&(this.client_app_type=e.client_app_type),e.client_name!==undefined&&(this.client_name=e.client_name),e.client_id!==undefined&&(this.client_id=e.client_id))},t.prototype={},t.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.client_app_type=e.readString().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.client_name=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.STRING?this.client_id=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},t.prototype.write=function(e){e.writeStructBegin("Oauth"),this.client_app_type!==null&&this.client_app_type!==undefined&&(e.writeFieldBegin("client_app_type",Thrift.Type.STRING,1),e.writeString(this.client_app_type),e.writeFieldEnd()),this.client_name!==null&&this.client_name!==undefined&&(e.writeFieldBegin("client_name",Thrift.Type.STRING,2),e.writeString(this.client_name),e.writeFieldEnd()),this.client_id!==null&&this.client_id!==undefined&&(e.writeFieldBegin("client_id",Thrift.Type.STRING,3),e.writeString(this.client_id),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},r=function(e){this.name=null,this.address=null,this.endpoint=null,e&&(e.name!==undefined&&(this.name=e.name),e.address!==undefined&&(this.address=e.address),e.endpoint!==undefined&&(this.endpoint=e.endpoint))},r.prototype={},r.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.name=e.readString().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.address=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.STRING?this.endpoint=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},r.prototype.write=function(e){e.writeStructBegin("Api"),this.name!==null&&this.name!==undefined&&(e.writeFieldBegin("name",Thrift.Type.STRING,1),e.writeString(this.name),e.writeFieldEnd()),this.address!==null&&this.address!==undefined&&(e.writeFieldBegin("address",Thrift.Type.STRING,2),e.writeString(this.address),e.writeFieldEnd()),this.endpoint!==null&&this.endpoint!==undefined&&(e.writeFieldBegin("endpoint",Thrift.Type.STRING,3),e.writeString(this.endpoint),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},s=function(e){this.response_code=null,this.error_name=null,this.error=null,this.content=null,e&&(e.response_code!==undefined&&(this.response_code=e.response_code),e.error_name!==undefined&&(this.error_name=e.error_name),e.error!==undefined&&(this.error=e.error),e.content!==undefined&&(this.content=e.content))},s.prototype={},s.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.I32?this.response_code=e.readI32().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.error_name=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.STRING?this.error=e.readString().value:e.skip(r);break;case 4:r==Thrift.Type.STRING?this.content=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},s.prototype.write=function(e){e.writeStructBegin("ApiResponse"),this.response_code!==null&&this.response_code!==undefined&&(e.writeFieldBegin("response_code",Thrift.Type.I32,1),e.writeI32(this.response_code),e.writeFieldEnd()),this.error_name!==null&&this.error_name!==undefined&&(e.writeFieldBegin("error_name",Thrift.Type.STRING,2),e.writeString(this.error_name),e.writeFieldEnd()),this.error!==null&&this.error!==undefined&&(e.writeFieldBegin("error",Thrift.Type.STRING,3),e.writeString(this.error),e.writeFieldEnd()),this.content!==null&&this.content!==undefined&&(e.writeFieldBegin("content",Thrift.Type.STRING,4),e.writeString(this.content),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},e.Oauth=t,e.Referrer=n,e.Api=r,e.Request=i,e.ApiResponse=s}(window.Thrift=window.Thrift||{}),!function(e){var t;t=function(e){this.device_previous_remaining_backup_codes=null,this.device_name=null,this.device_exists=null,this.device_algorithm=null,this.device_backup_codes_remaining=null,this.backup_code_used=null,this.otp_embedded_in_password=null,e&&(e.device_previous_remaining_backup_codes!==undefined&&(this.device_previous_remaining_backup_codes=e.device_previous_remaining_backup_codes),e.device_name!==undefined&&(this.device_name=e.device_name),e.device_exists!==undefined&&(this.device_exists=e.device_exists),e.device_algorithm!==undefined&&(this.device_algorithm=e.device_algorithm),e.device_backup_codes_remaining!==undefined&&(this.device_backup_codes_remaining=e.device_backup_codes_remaining),e.backup_code_used!==undefined&&(this.backup_code_used=e.backup_code_used),e.otp_embedded_in_password!==undefined&&(this.otp_embedded_in_password=e.otp_embedded_in_password))},t.prototype={},t.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.I64?this.device_previous_remaining_backup_codes=e.readI64().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.device_name=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.BOOL?this.device_exists=e.readBool().value:e.skip(r);break;case 4:r==Thrift.Type.STRING?this.device_algorithm=e.readString().value:e.skip(r);break;case 5:r==Thrift.Type.I32?this.device_backup_codes_remaining=e.readI32().value:e.skip(r);break;case 6:r==Thrift.Type.BOOL?this.backup_code_used=e.readBool().value:e.skip(r);break;case 7:r==Thrift.Type.BOOL?this.otp_embedded_in_password=e.readBool().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},t.prototype.write=function(e){e.writeStructBegin("TwoFactorAuth"),this.device_previous_remaining_backup_codes!==null&&this.device_previous_remaining_backup_codes!==undefined&&(e.writeFieldBegin("device_previous_remaining_backup_codes",Thrift.Type.I64,1),e.writeI64(this.device_previous_remaining_backup_codes),e.writeFieldEnd()),this.device_name!==null&&this.device_name!==undefined&&(e.writeFieldBegin("device_name",Thrift.Type.STRING,2),e.writeString(this.device_name),e.writeFieldEnd()),this.device_exists!==null&&this.device_exists!==undefined&&(e.writeFieldBegin("device_exists",Thrift.Type.BOOL,3),e.writeBool(this.device_exists),e.writeFieldEnd()),this.device_algorithm!==null&&this.device_algorithm!==undefined&&(e.writeFieldBegin("device_algorithm",Thrift.Type.STRING,4),e.writeString(this.device_algorithm),e.writeFieldEnd()),this.device_backup_codes_remaining!==null&&this.device_backup_codes_remaining!==undefined&&(e.writeFieldBegin("device_backup_codes_remaining",Thrift.Type.I32,5),e.writeI32(this.device_backup_codes_remaining),e.writeFieldEnd()),this.backup_code_used!==null&&this.backup_code_used!==undefined&&(e.writeFieldBegin("backup_code_used",Thrift.Type.BOOL,6),e.writeBool(this.backup_code_used),e.writeFieldEnd()),this.otp_embedded_in_password!==null&&this.otp_embedded_in_password!==undefined&&(e.writeFieldBegin("otp_embedded_in_password",Thrift.Type.BOOL,7),e.writeBool(this.otp_embedded_in_password),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},e.TwoFactorAuth=t}(window.Thrift=window.Thrift||{}),!function(e){var t;t=function(e){this.id=null,this.referrer_url=null,this.referrer_domain=null,this.version=null,this.type=null,this.created_timestamp=null,e&&(e.id!==undefined&&(this.id=e.id),e.referrer_url!==undefined&&(this.referrer_url=e.referrer_url),e.referrer_domain!==undefined&&(this.referrer_domain=e.referrer_domain),e.version!==undefined&&(this.version=e.version),e.type!==undefined&&(this.type=e.type),e.created_timestamp!==undefined&&(this.created_timestamp=e.created_timestamp))},t.prototype={},t.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.id=e.readString().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.referrer_url=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.STRING?this.referrer_domain=e.readString().value:e.skip(r);break;case 4:r==Thrift.Type.STRING?this.version=e.readString().value:e.skip(r);break;case 5:r==Thrift.Type.STRING?this.type=e.readString().value:e.skip(r);break;case 6:r==Thrift.Type.I64?this.created_timestamp=e.readI64().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},t.prototype.write=function(e){e.writeStructBegin("Session"),this.id!==null&&this.id!==undefined&&(e.writeFieldBegin("id",Thrift.Type.STRING,1),e.writeString(this.id),e.writeFieldEnd()),this.referrer_url!==null&&this.referrer_url!==undefined&&(e.writeFieldBegin("referrer_url",Thrift.Type.STRING,2),e.writeString(this.referrer_url),e.writeFieldEnd()),this.referrer_domain!==null&&this.referrer_domain!==undefined&&(e.writeFieldBegin("referrer_domain",Thrift.Type.STRING,3),e.writeString(this.referrer_domain),e.writeFieldEnd()),this.version!==null&&this.version!==undefined&&(e.writeFieldBegin("version",Thrift.Type.STRING,4),e.writeString(this.version),e.writeFieldEnd()),this.type!==null&&this.type!==undefined&&(e.writeFieldBegin("type",Thrift.Type.STRING,5),e.writeString(this.type),e.writeFieldEnd()),this.created_timestamp!==null&&this.created_timestamp!==undefined&&(e.writeFieldBegin("created_timestamp",Thrift.Type.I64,6),e.writeI64(this.created_timestamp),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},e.Session=t}(window.Thrift=window.Thrift||{}),!function(e){var t,n;n=function(e){this.id=null,this.name=null,this.category_name=null,this.whitelist_status=null,e&&(e.id!==undefined&&(this.id=e.id),e.name!==undefined&&(this.name=e.name),e.category_name!==undefined&&(this.category_name=e.category_name),e.whitelist_status!==undefined&&(this.whitelist_status=e.whitelist_status))},n.prototype={},n.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.id=e.readString().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.name=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.STRING?this.category_name=e.readString().value:e.skip(r);break;case 4:r==Thrift.Type.STRING?this.whitelist_status=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},n.prototype.write=function(e){e.writeStructBegin("Subreddit"),this.id!==null&&this.id!==undefined&&(e.writeFieldBegin("id",Thrift.Type.STRING,1),e.writeString(this.id),e.writeFieldEnd()),this.name!==null&&this.name!==undefined&&(e.writeFieldBegin("name",Thrift.Type.STRING,2),e.writeString(this.name),e.writeFieldEnd()),this.category_name!==null&&this.category_name!==undefined&&(e.writeFieldBegin("category_name",Thrift.Type.STRING,3),e.writeString(this.category_name),e.writeFieldEnd()),this.whitelist_status!==null&&this.whitelist_status!==undefined&&(e.writeFieldBegin("whitelist_status",Thrift.Type.STRING,4),e.writeString(this.whitelist_status),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},t=function(e){this.id=null,this.name=null,this.type=null,this.display_name=null,this.about=null,this.avatar_url=null,this.cover_url=null,this.nsfw=null,this.content_visible=null,this.communities_visible=null,e&&(e.id!==undefined&&(this.id=e.id),e.name!==undefined&&(this.name=e.name),e.type!==undefined&&(this.type=e.type),e.display_name!==undefined&&(this.display_name=e.display_name),e.about!==undefined&&(this.about=e.about),e.avatar_url!==undefined&&(this.avatar_url=e.avatar_url),e.cover_url!==undefined&&(this.cover_url=e.cover_url),e.nsfw!==undefined&&(this.nsfw=e.nsfw),e.content_visible!==undefined&&(this.content_visible=e.content_visible),e.communities_visible!==undefined&&(this.communities_visible=e.communities_visible))},t.prototype={},t.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.id=e.readString().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.name=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.STRING?this.type=e.readString().value:e.skip(r);break;case 4:r==Thrift.Type.STRING?this.display_name=e.readString().value:e.skip(r);break;case 5:r==Thrift.Type.STRING?this.about=e.readString().value:e.skip(r);break;case 6:r==Thrift.Type.STRING?this.avatar_url=e.readString().value:e.skip(r);break;case 7:r==Thrift.Type.STRING?this.cover_url=e.readString().value:e.skip(r);break;case 8:r==Thrift.Type.BOOL?this.nsfw=e.readBool().value:e.skip(r);break;case 9:r==Thrift.Type.BOOL?this.content_visible=e.readBool().value:e.skip(r);break;case 11:r==Thrift.Type.BOOL?this.communities_visible=e.readBool().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},t.prototype.write=function(e){e.writeStructBegin("Profile"),this.id!==null&&this.id!==undefined&&(e.writeFieldBegin("id",Thrift.Type.STRING,1),e.writeString(this.id),e.writeFieldEnd()),this.name!==null&&this.name!==undefined&&(e.writeFieldBegin("name",Thrift.Type.STRING,2),e.writeString(this.name),e.writeFieldEnd()),this.type!==null&&this.type!==undefined&&(e.writeFieldBegin("type",Thrift.Type.STRING,3),e.writeString(this.type),e.writeFieldEnd()),this.display_name!==null&&this.display_name!==undefined&&(e.writeFieldBegin("display_name",Thrift.Type.STRING,4),e.writeString(this.display_name),e.writeFieldEnd()),this.about!==null&&this.about!==undefined&&(e.writeFieldBegin("about",Thrift.Type.STRING,5),e.writeString(this.about),e.writeFieldEnd()),this.avatar_url!==null&&this.avatar_url!==undefined&&(e.writeFieldBegin("avatar_url",Thrift.Type.STRING,6),e.writeString(this.avatar_url),e.writeFieldEnd()),this.cover_url!==null&&this.cover_url!==undefined&&(e.writeFieldBegin("cover_url",Thrift.Type.STRING,7),e.writeString(this.cover_url),e.writeFieldEnd()),this.nsfw!==null&&this.nsfw!==undefined&&(e.writeFieldBegin("nsfw",Thrift.Type.BOOL,8),e.writeBool(this.nsfw),e.writeFieldEnd()),this.content_visible!==null&&this.content_visible!==undefined&&(e.writeFieldBegin("content_visible",Thrift.Type.BOOL,9),e.writeBool(this.content_visible),e.writeFieldEnd()),this.communities_visible!==null&&this.communities_visible!==undefined&&(e.writeFieldBegin("communities_visible",Thrift.Type.BOOL,11),e.writeBool(this.communities_visible),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},e.Profile=t,e.Subreddit=n}(window.Thrift=window.Thrift||{}),!function(e){var t,n;n=function(e){this.request=null,this.loading=null,this.loaded=null,e&&(e.request!==undefined&&(this.request=e.request),e.loading!==undefined&&(this.loading=e.loading),e.loaded!==undefined&&(this.loaded=e.loaded))},n.prototype={},n.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.I64?this.request=e.readI64().value:e.skip(r);break;case 2:r==Thrift.Type.I64?this.loading=e.readI64().value:e.skip(r);break;case 3:r==Thrift.Type.I64?this.loaded=e.readI64().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},n.prototype.write=function(e){e.writeStructBegin("DOMTimers"),this.request!==null&&this.request!==undefined&&(e.writeFieldBegin("request",Thrift.Type.I64,1),e.writeI64(this.request),e.writeFieldEnd()),this.loading!==null&&this.loading!==undefined&&(e.writeFieldBegin("loading",Thrift.Type.I64,2),e.writeI64(this.loading),e.writeFieldEnd()),this.loaded!==null&&this.loaded!==undefined&&(e.writeFieldBegin("loaded",Thrift.Type.I64,3),e.writeI64(this.loaded),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},t=function(e){this.type=null,this.millis=null,e&&(e.type!==undefined&&(this.type=e.type),e.millis!==undefined&&(this.millis=e.millis))},t.prototype={},t.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.type=e.readString().value:e.skip(r);break;case 2:r==Thrift.Type.I64?this.millis=e.readI64().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},t.prototype.write=function(e){e.writeStructBegin("Timer"),this.type!==null&&this.type!==undefined&&(e.writeFieldBegin("type",Thrift.Type.STRING,1),e.writeString(this.type),e.writeFieldEnd()),this.millis!==null&&this.millis!==undefined&&(e.writeFieldBegin("millis",Thrift.Type.I64,2),e.writeI64(this.millis),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},e.Timer=t,e.DOMTimers=n}(window.Thrift=window.Thrift||{}),!function(e){var t,n,r;r=function(e){this.id=null,this.created_timestamp=null,this.logged_in=null,this.cookie_created_timestamp=null,this.has_gold=null,this.number_creddits=null,this.is_admin=null,e&&(e.id!==undefined&&(this.id=e.id),e.created_timestamp!==undefined&&(this.created_timestamp=e.created_timestamp),e.logged_in!==undefined&&(this.logged_in=e.logged_in),e.cookie_created_timestamp!==undefined&&(this.cookie_created_timestamp=e.cookie_created_timestamp),e.has_gold!==undefined&&(this.has_gold=e.has_gold),e.number_creddits!==undefined&&(this.number_creddits=e.number_creddits),e.is_admin!==undefined&&(this.is_admin=e.is_admin))},r.prototype={},r.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.id=e.readString().value:e.skip(r);break;case 2:r==Thrift.Type.I64?this.created_timestamp=e.readI64().value:e.skip(r);break;case 3:r==Thrift.Type.BOOL?this.logged_in=e.readBool().value:e.skip(r);break;case 4:r==Thrift.Type.I64?this.cookie_created_timestamp=e.readI64().value:e.skip(r);break;case 5:r==Thrift.Type.BOOL?this.has_gold=e.readBool().value:e.skip(r);break;case 11:r==Thrift.Type.I64?this.number_creddits=e.readI64().value:e.skip(r);break;case 12:r==Thrift.Type.BOOL?this.is_admin=e.readBool().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},r.prototype.write=function(e){e.writeStructBegin("User"),this.id!==null&&this.id!==undefined&&(e.writeFieldBegin("id",Thrift.Type.STRING,1),e.writeString(this.id),e.writeFieldEnd()),this.created_timestamp!==null&&this.created_timestamp!==undefined&&(e.writeFieldBegin("created_timestamp",Thrift.Type.I64,2),e.writeI64(this.created_timestamp),e.writeFieldEnd()),this.logged_in!==null&&this.logged_in!==undefined&&(e.writeFieldBegin("logged_in",Thrift.Type.BOOL,3),e.writeBool(this.logged_in),e.writeFieldEnd()),this.cookie_created_timestamp!==null&&this.cookie_created_timestamp!==undefined&&(e.writeFieldBegin("cookie_created_timestamp",Thrift.Type.I64,4),e.writeI64(this.cookie_created_timestamp),e.writeFieldEnd()),this.has_gold!==null&&this.has_gold!==undefined&&(e.writeFieldBegin("has_gold",Thrift.Type.BOOL,5),e.writeBool(this.has_gold),e.writeFieldEnd()),this.number_creddits!==null&&this.number_creddits!==undefined&&(e.writeFieldBegin("number_creddits",Thrift.Type.I64,11),e.writeI64(this.number_creddits),e.writeFieldEnd()),this.is_admin!==null&&this.is_admin!==undefined&&(e.writeFieldBegin("is_admin",Thrift.Type.BOOL,12),e.writeBool(this.is_admin),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},t=function(e){this.in_beta=null,this.language=null,this.hide_nsfw=null,this.expando=null,this.hide_previously_seen_posts=null,e&&(e.in_beta!==undefined&&(this.in_beta=e.in_beta),e.language!==undefined&&(this.language=e.language),e.hide_nsfw!==undefined&&(this.hide_nsfw=e.hide_nsfw),e.expando!==undefined&&(this.expando=e.expando),e.hide_previously_seen_posts!==undefined&&(this.hide_previously_seen_posts=e.hide_previously_seen_posts))},t.prototype={},t.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.BOOL?this.in_beta=e.readBool().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.language=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.BOOL?this.hide_nsfw=e.readBool().value:e.skip(r);break;case 4:r==Thrift.Type.STRING?this.expando=e.readString().value:e.skip(r);break;case 5:r==Thrift.Type.BOOL?this.hide_previously_seen_posts=e.readBool().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},t.prototype.write=function(e){e.writeStructBegin("UserPreferences"),this.in_beta!==null&&this.in_beta!==undefined&&(e.writeFieldBegin("in_beta",Thrift.Type.BOOL,1),e.writeBool(this.in_beta),e.writeFieldEnd()),this.language!==null&&this.language!==undefined&&(e.writeFieldBegin("language",Thrift.Type.STRING,2),e.writeString(this.language),e.writeFieldEnd()),this.hide_nsfw!==null&&this.hide_nsfw!==undefined&&(e.writeFieldBegin("hide_nsfw",Thrift.Type.BOOL,3),e.writeBool(this.hide_nsfw),e.writeFieldEnd()),this.expando!==null&&this.expando!==undefined&&(e.writeFieldBegin("expando",Thrift.Type.STRING,4),e.writeString(this.expando),e.writeFieldEnd()),this.hide_previously_seen_posts!==null&&this.hide_previously_seen_posts!==undefined&&(e.writeFieldBegin("hide_previously_seen_posts",Thrift.Type.BOOL,5),e.writeBool(this.hide_previously_seen_posts),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},n=function(e){this.is_mod=null,this.mod_full=null,this.mod_access=null,this.mod_config=null,this.mod_flair=null,this.mod_mail=null,this.mod_post=null,this.mod_wiki=null,this.mod_none=null,e&&(e.is_mod!==undefined&&(this.is_mod=e.is_mod),e.mod_full!==undefined&&(this.mod_full=e.mod_full),e.mod_access!==undefined&&(this.mod_access=e.mod_access),e.mod_config!==undefined&&(this.mod_config=e.mod_config),e.mod_flair!==undefined&&(this.mod_flair=e.mod_flair),e.mod_mail!==undefined&&(this.mod_mail=e.mod_mail),e.mod_post!==undefined&&(this.mod_post=e.mod_post),e.mod_wiki!==undefined&&(this.mod_wiki=e.mod_wiki),e.mod_none!==undefined&&(this.mod_none=e.mod_none))},n.prototype={},n.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.BOOL?this.is_mod=e.readBool().value:e.skip(r);break;case 2:r==Thrift.Type.BOOL?this.mod_full=e.readBool().value:e.skip(r);break;case 3:r==Thrift.Type.BOOL?this.mod_access=e.readBool().value:e.skip(r);break;case 4:r==Thrift.Type.BOOL?this.mod_config=e.readBool().value:e.skip(r);break;case 5:r==Thrift.Type.BOOL?this.mod_flair=e.readBool().value:e.skip(r);break;case 6:r==Thrift.Type.BOOL?this.mod_mail=e.readBool().value:e.skip(r);break;case 7:r==Thrift.Type.BOOL?this.mod_post=e.readBool().value:e.skip(r);break;case 8:r==Thrift.Type.BOOL?this.mod_wiki=e.readBool().value:e.skip(r);break;case 9:r==Thrift.Type.BOOL?this.mod_none=e.readBool().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},n.prototype.write=function(e){e.writeStructBegin("UserSubreddit"),this.is_mod!==null&&this.is_mod!==undefined&&(e.writeFieldBegin("is_mod",Thrift.Type.BOOL,1),e.writeBool(this.is_mod),e.writeFieldEnd()),this.mod_full!==null&&this.mod_full!==undefined&&(e.writeFieldBegin("mod_full",Thrift.Type.BOOL,2),e.writeBool(this.mod_full),e.writeFieldEnd()),this.mod_access!==null&&this.mod_access!==undefined&&(e.writeFieldBegin("mod_access",Thrift.Type.BOOL,3),e.writeBool(this.mod_access),e.writeFieldEnd()),this.mod_config!==null&&this.mod_config!==undefined&&(e.writeFieldBegin("mod_config",Thrift.Type.BOOL,4),e.writeBool(this.mod_config),e.writeFieldEnd()),this.mod_flair!==null&&this.mod_flair!==undefined&&(e.writeFieldBegin("mod_flair",Thrift.Type.BOOL,5),e.writeBool(this.mod_flair),e.writeFieldEnd()),this.mod_mail!==null&&this.mod_mail!==undefined&&(e.writeFieldBegin("mod_mail",Thrift.Type.BOOL,6),e.writeBool(this.mod_mail),e.writeFieldEnd()),this.mod_post!==null&&this.mod_post!==undefined&&(e.writeFieldBegin("mod_post",Thrift.Type.BOOL,7),e.writeBool(this.mod_post),e.writeFieldEnd()),this.mod_wiki!==null&&this.mod_wiki!==undefined&&(e.writeFieldBegin("mod_wiki",Thrift.Type.BOOL,8),e.writeBool(this.mod_wiki),e.writeFieldEnd()),this.mod_none!==null&&this.mod_none!==undefined&&(e.writeFieldBegin("mod_none",Thrift.Type.BOOL,9),e.writeBool(this.mod_none),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},e.UserPreferences=t,e.UserSubreddit=n,e.User=r}(window.Thrift=window.Thrift||{}),!function(e){var t,n;n=function(e){this.source=null,this.action=null,this.noun=null,this.endpoint_timestamp=null,this.client_timestamp=null,this.uuid=null,this.utc_offset=null,this.correlation_id=
null,this.post=null,this.listing=null,this.comment=null,this.notification=null,this.oauth=null,this.screen=null,this.app=null,this.platform=null,this.request=null,this.referrer=null,this.dom_timer=null,this.user=null,this.user_preferences=null,this.subreddit=null,this.session=null,this.action_info=null,this.expand=null,this.media=null,this.chat=null,this.post_composer=null,this.widget=null,this.profile=null,this.onboarding=null,this.timer=null,this.tfa=null,this.api_response=null,this.api=null,this.discovery_unit=null,this.experiment=null,this.share=null,this.user_subreddit=null,this.notification_request=null,this.search=null,this.message=null,this.admin=null,this.ticket=null,this.mailroom_request=null,this.comment_composer=null,this.gold_purchase=null,this.payment=null,this.post_draft=null,this.geo=null,this.user_legacy_id=null,this.content_metadata=null,this.url_parsed=null,this.link_sharing=null,this.create_request_timestamp=null,e&&(e.source!==undefined&&(this.source=e.source),e.action!==undefined&&(this.action=e.action),e.noun!==undefined&&(this.noun=e.noun),e.endpoint_timestamp!==undefined&&(this.endpoint_timestamp=e.endpoint_timestamp),e.client_timestamp!==undefined&&(this.client_timestamp=e.client_timestamp),e.uuid!==undefined&&(this.uuid=e.uuid),e.utc_offset!==undefined&&(this.utc_offset=e.utc_offset),e.correlation_id!==undefined&&(this.correlation_id=e.correlation_id),e.post!==undefined&&(this.post=e.post),e.listing!==undefined&&(this.listing=e.listing),e.comment!==undefined&&(this.comment=e.comment),e.notification!==undefined&&(this.notification=e.notification),e.oauth!==undefined&&(this.oauth=e.oauth),e.screen!==undefined&&(this.screen=e.screen),e.app!==undefined&&(this.app=e.app),e.platform!==undefined&&(this.platform=e.platform),e.request!==undefined&&(this.request=e.request),e.referrer!==undefined&&(this.referrer=e.referrer),e.dom_timer!==undefined&&(this.dom_timer=e.dom_timer),e.user!==undefined&&(this.user=e.user),e.user_preferences!==undefined&&(this.user_preferences=e.user_preferences),e.subreddit!==undefined&&(this.subreddit=e.subreddit),e.session!==undefined&&(this.session=e.session),e.action_info!==undefined&&(this.action_info=e.action_info),e.expand!==undefined&&(this.expand=e.expand),e.media!==undefined&&(this.media=e.media),e.chat!==undefined&&(this.chat=e.chat),e.post_composer!==undefined&&(this.post_composer=e.post_composer),e.widget!==undefined&&(this.widget=e.widget),e.profile!==undefined&&(this.profile=e.profile),e.onboarding!==undefined&&(this.onboarding=e.onboarding),e.timer!==undefined&&(this.timer=e.timer),e.tfa!==undefined&&(this.tfa=e.tfa),e.api_response!==undefined&&(this.api_response=e.api_response),e.api!==undefined&&(this.api=e.api),e.discovery_unit!==undefined&&(this.discovery_unit=e.discovery_unit),e.experiment!==undefined&&(this.experiment=e.experiment),e.share!==undefined&&(this.share=e.share),e.user_subreddit!==undefined&&(this.user_subreddit=e.user_subreddit),e.notification_request!==undefined&&(this.notification_request=e.notification_request),e.search!==undefined&&(this.search=e.search),e.message!==undefined&&(this.message=e.message),e.admin!==undefined&&(this.admin=e.admin),e.ticket!==undefined&&(this.ticket=e.ticket),e.mailroom_request!==undefined&&(this.mailroom_request=e.mailroom_request),e.comment_composer!==undefined&&(this.comment_composer=e.comment_composer),e.gold_purchase!==undefined&&(this.gold_purchase=e.gold_purchase),e.payment!==undefined&&(this.payment=e.payment),e.post_draft!==undefined&&(this.post_draft=e.post_draft),e.geo!==undefined&&(this.geo=e.geo),e.user_legacy_id!==undefined&&(this.user_legacy_id=e.user_legacy_id),e.content_metadata!==undefined&&(this.content_metadata=e.content_metadata),e.url_parsed!==undefined&&(this.url_parsed=e.url_parsed),e.link_sharing!==undefined&&(this.link_sharing=e.link_sharing),e.create_request_timestamp!==undefined&&(this.create_request_timestamp=e.create_request_timestamp))},n.prototype={},n.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),n=t.fname,r=t.ftype,i=t.fid;if(r==Thrift.Type.STOP)break;switch(i){case 1:r==Thrift.Type.STRING?this.source=e.readString().value:e.skip(r);break;case 2:r==Thrift.Type.STRING?this.action=e.readString().value:e.skip(r);break;case 3:r==Thrift.Type.STRING?this.noun=e.readString().value:e.skip(r);break;case 4:r==Thrift.Type.I64?this.endpoint_timestamp=e.readI64().value:e.skip(r);break;case 5:r==Thrift.Type.I64?this.client_timestamp=e.readI64().value:e.skip(r);break;case 6:r==Thrift.Type.STRING?this.uuid=e.readString().value:e.skip(r);break;case 7:r==Thrift.Type.DOUBLE?this.utc_offset=e.readDouble().value:e.skip(r);break;case 8:r==Thrift.Type.STRING?this.correlation_id=e.readString().value:e.skip(r);break;case 100:r==Thrift.Type.STRUCT?(this.post=new Post,this.post.read(e)):e.skip(r);break;case 101:r==Thrift.Type.STRUCT?(this.listing=new Listing,this.listing.read(e)):e.skip(r);break;case 102:r==Thrift.Type.STRUCT?(this.comment=new Comment,this.comment.read(e)):e.skip(r);break;case 103:r==Thrift.Type.STRUCT?(this.notification=new Notification,this.notification.read(e)):e.skip(r);break;case 104:r==Thrift.Type.STRUCT?(this.oauth=new Oauth,this.oauth.read(e)):e.skip(r);break;case 106:r==Thrift.Type.STRUCT?(this.screen=new Screen,this.screen.read(e)):e.skip(r);break;case 107:r==Thrift.Type.STRUCT?(this.app=new App,this.app.read(e)):e.skip(r);break;case 108:r==Thrift.Type.STRUCT?(this.platform=new Platform,this.platform.read(e)):e.skip(r);break;case 109:r==Thrift.Type.STRUCT?(this.request=new Request,this.request.read(e)):e.skip(r);break;case 110:r==Thrift.Type.STRUCT?(this.referrer=new Referrer,this.referrer.read(e)):e.skip(r);break;case 111:r==Thrift.Type.STRUCT?(this.dom_timer=new DOMTimers,this.dom_timer.read(e)):e.skip(r);break;case 112:r==Thrift.Type.STRUCT?(this.user=new User,this.user.read(e)):e.skip(r);break;case 113:r==Thrift.Type.STRUCT?(this.user_preferences=new UserPreferences,this.user_preferences.read(e)):e.skip(r);break;case 114:r==Thrift.Type.STRUCT?(this.subreddit=new Subreddit,this.subreddit.read(e)):e.skip(r);break;case 115:r==Thrift.Type.STRUCT?(this.session=new Session,this.session.read(e)):e.skip(r);break;case 116:r==Thrift.Type.STRUCT?(this.action_info=new ActionInfo,this.action_info.read(e)):e.skip(r);break;case 117:r==Thrift.Type.STRUCT?(this.expand=new Expand,this.expand.read(e)):e.skip(r);break;case 118:r==Thrift.Type.STRUCT?(this.media=new Media,this.media.read(e)):e.skip(r);break;case 119:r==Thrift.Type.STRUCT?(this.chat=new Chat,this.chat.read(e)):e.skip(r);break;case 120:r==Thrift.Type.STRUCT?(this.post_composer=new PostComposer,this.post_composer.read(e)):e.skip(r);break;case 121:r==Thrift.Type.STRUCT?(this.widget=new Widget,this.widget.read(e)):e.skip(r);break;case 122:r==Thrift.Type.STRUCT?(this.profile=new Profile,this.profile.read(e)):e.skip(r);break;case 123:r==Thrift.Type.STRUCT?(this.onboarding=new Onboarding,this.onboarding.read(e)):e.skip(r);break;case 124:r==Thrift.Type.STRUCT?(this.timer=new Timer,this.timer.read(e)):e.skip(r);break;case 125:r==Thrift.Type.STRUCT?(this.tfa=new TwoFactorAuth,this.tfa.read(e)):e.skip(r);break;case 126:r==Thrift.Type.STRUCT?(this.api_response=new ApiResponse,this.api_response.read(e)):e.skip(r);break;case 127:r==Thrift.Type.STRUCT?(this.api=new Api,this.api.read(e)):e.skip(r);break;case 128:r==Thrift.Type.STRUCT?(this.discovery_unit=new DiscoveryUnit,this.discovery_unit.read(e)):e.skip(r);break;case 129:r==Thrift.Type.STRUCT?(this.experiment=new Experiment,this.experiment.read(e)):e.skip(r);break;case 130:r==Thrift.Type.STRUCT?(this.share=new Share,this.share.read(e)):e.skip(r);break;case 131:r==Thrift.Type.STRUCT?(this.user_subreddit=new UserSubreddit,this.user_subreddit.read(e)):e.skip(r);break;case 132:r==Thrift.Type.STRUCT?(this.notification_request=new NotificationRequest,this.notification_request.read(e)):e.skip(r);break;case 133:r==Thrift.Type.STRUCT?(this.search=new Search,this.search.read(e)):e.skip(r);break;case 134:r==Thrift.Type.STRUCT?(this.message=new Message,this.message.read(e)):e.skip(r);break;case 135:r==Thrift.Type.STRUCT?(this.admin=new Admin,this.admin.read(e)):e.skip(r);break;case 136:r==Thrift.Type.STRUCT?(this.ticket=new Ticket,this.ticket.read(e)):e.skip(r);break;case 137:r==Thrift.Type.STRUCT?(this.mailroom_request=new MailroomRequest,this.mailroom_request.read(e)):e.skip(r);break;case 138:r==Thrift.Type.STRUCT?(this.comment_composer=new CommentComposer,this.comment_composer.read(e)):e.skip(r);break;case 139:r==Thrift.Type.STRUCT?(this.gold_purchase=new GoldPurchase,this.gold_purchase.read(e)):e.skip(r);break;case 140:r==Thrift.Type.STRUCT?(this.payment=new Payment,this.payment.read(e)):e.skip(r);break;case 148:r==Thrift.Type.STRUCT?(this.post_draft=new PostDraft,this.post_draft.read(e)):e.skip(r);break;case 500:r==Thrift.Type.STRUCT?(this.geo=new Geo,this.geo.read(e)):e.skip(r);break;case 502:r==Thrift.Type.STRING?this.user_legacy_id=e.readString().value:e.skip(r);break;case 503:r==Thrift.Type.STRUCT?(this.content_metadata=new ContentMetadata,this.content_metadata.read(e)):e.skip(r);break;case 504:r==Thrift.Type.STRUCT?(this.url_parsed=new UrlParsed,this.url_parsed.read(e)):e.skip(r);break;case 505:r==Thrift.Type.STRUCT?(this.link_sharing=new LinkSharing,this.link_sharing.read(e)):e.skip(r);break;case 506:r==Thrift.Type.I64?this.create_request_timestamp=e.readI64().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd();return},n.prototype.write=function(e){e.writeStructBegin("Event"),this.source!==null&&this.source!==undefined&&(e.writeFieldBegin("source",Thrift.Type.STRING,1),e.writeString(this.source),e.writeFieldEnd()),this.action!==null&&this.action!==undefined&&(e.writeFieldBegin("action",Thrift.Type.STRING,2),e.writeString(this.action),e.writeFieldEnd()),this.noun!==null&&this.noun!==undefined&&(e.writeFieldBegin("noun",Thrift.Type.STRING,3),e.writeString(this.noun),e.writeFieldEnd()),this.endpoint_timestamp!==null&&this.endpoint_timestamp!==undefined&&(e.writeFieldBegin("endpoint_timestamp",Thrift.Type.I64,4),e.writeI64(this.endpoint_timestamp),e.writeFieldEnd()),this.client_timestamp!==null&&this.client_timestamp!==undefined&&(e.writeFieldBegin("client_timestamp",Thrift.Type.I64,5),e.writeI64(this.client_timestamp),e.writeFieldEnd()),this.uuid!==null&&this.uuid!==undefined&&(e.writeFieldBegin("uuid",Thrift.Type.STRING,6),e.writeString(this.uuid),e.writeFieldEnd()),this.utc_offset!==null&&this.utc_offset!==undefined&&(e.writeFieldBegin("utc_offset",Thrift.Type.DOUBLE,7),e.writeDouble(this.utc_offset),e.writeFieldEnd()),this.correlation_id!==null&&this.correlation_id!==undefined&&(e.writeFieldBegin("correlation_id",Thrift.Type.STRING,8),e.writeString(this.correlation_id),e.writeFieldEnd()),this.post!==null&&this.post!==undefined&&(e.writeFieldBegin("post",Thrift.Type.STRUCT,100),this.post.write(e),e.writeFieldEnd()),this.listing!==null&&this.listing!==undefined&&(e.writeFieldBegin("listing",Thrift.Type.STRUCT,101),this.listing.write(e),e.writeFieldEnd()),this.comment!==null&&this.comment!==undefined&&(e.writeFieldBegin("comment",Thrift.Type.STRUCT,102),this.comment.write(e),e.writeFieldEnd()),this.notification!==null&&this.notification!==undefined&&(e.writeFieldBegin("notification",Thrift.Type.STRUCT,103),this.notification.write(e),e.writeFieldEnd()),this.oauth!==null&&this.oauth!==undefined&&(e.writeFieldBegin("oauth",Thrift.Type.STRUCT,104),this.oauth.write(e),e.writeFieldEnd()),this.screen!==null&&this.screen!==undefined&&(e.writeFieldBegin("screen",Thrift.Type.STRUCT,106),this.screen.write(e),e.writeFieldEnd()),this.app!==null&&this.app!==undefined&&(e.writeFieldBegin("app",Thrift.Type.STRUCT,107),this.app.write(e),e.writeFieldEnd()),this.platform!==null&&this.platform!==undefined&&(e.writeFieldBegin("platform",Thrift.Type.STRUCT,108),this.platform.write(e),e.writeFieldEnd()),this.request!==null&&this.request!==undefined&&(e.writeFieldBegin("request",Thrift.Type.STRUCT,109),this.request.write(e),e.writeFieldEnd()),this.referrer!==null&&this.referrer!==undefined&&(e.writeFieldBegin("referrer",Thrift.Type.STRUCT,110),this.referrer.write(e),e.writeFieldEnd()),this.dom_timer!==null&&this.dom_timer!==undefined&&(e.writeFieldBegin("dom_timer",Thrift.Type.STRUCT,111),this.dom_timer.write(e),e.writeFieldEnd()),this.user!==null&&this.user!==undefined&&(e.writeFieldBegin("user",Thrift.Type.STRUCT,112),this.user.write(e),e.writeFieldEnd()),this.user_preferences!==null&&this.user_preferences!==undefined&&(e.writeFieldBegin("user_preferences",Thrift.Type.STRUCT,113),this.user_preferences.write(e),e.writeFieldEnd()),this.subreddit!==null&&this.subreddit!==undefined&&(e.writeFieldBegin("subreddit",Thrift.Type.STRUCT,114),this.subreddit.write(e),e.writeFieldEnd()),this.session!==null&&this.session!==undefined&&(e.writeFieldBegin("session",Thrift.Type.STRUCT,115),this.session.write(e),e.writeFieldEnd()),this.action_info!==null&&this.action_info!==undefined&&(e.writeFieldBegin("action_info",Thrift.Type.STRUCT,116),this.action_info.write(e),e.writeFieldEnd()),this.expand!==null&&this.expand!==undefined&&(e.writeFieldBegin("expand",Thrift.Type.STRUCT,117),this.expand.write(e),e.writeFieldEnd()),this.media!==null&&this.media!==undefined&&(e.writeFieldBegin("media",Thrift.Type.STRUCT,118),this.media.write(e),e.writeFieldEnd()),this.chat!==null&&this.chat!==undefined&&(e.writeFieldBegin("chat",Thrift.Type.STRUCT,119),this.chat.write(e),e.writeFieldEnd()),this.post_composer!==null&&this.post_composer!==undefined&&(e.writeFieldBegin("post_composer",Thrift.Type.STRUCT,120),this.post_composer.write(e),e.writeFieldEnd()),this.widget!==null&&this.widget!==undefined&&(e.writeFieldBegin("widget",Thrift.Type.STRUCT,121),this.widget.write(e),e.writeFieldEnd()),this.profile!==null&&this.profile!==undefined&&(e.writeFieldBegin("profile",Thrift.Type.STRUCT,122),this.profile.write(e),e.writeFieldEnd()),this.onboarding!==null&&this.onboarding!==undefined&&(e.writeFieldBegin("onboarding",Thrift.Type.STRUCT,123),this.onboarding.write(e),e.writeFieldEnd()),this.timer!==null&&this.timer!==undefined&&(e.writeFieldBegin("timer",Thrift.Type.STRUCT,124),this.timer.write(e),e.writeFieldEnd()),this.tfa!==null&&this.tfa!==undefined&&(e.writeFieldBegin("tfa",Thrift.Type.STRUCT,125),this.tfa.write(e),e.writeFieldEnd()),this.api_response!==null&&this.api_response!==undefined&&(e.writeFieldBegin("api_response",Thrift.Type.STRUCT,126),this.api_response.write(e),e.writeFieldEnd()),this.api!==null&&this.api!==undefined&&(e.writeFieldBegin("api",Thrift.Type.STRUCT,127),this.api.write(e),e.writeFieldEnd()),this.discovery_unit!==null&&this.discovery_unit!==undefined&&(e.writeFieldBegin("discovery_unit",Thrift.Type.STRUCT,128),this.discovery_unit.write(e),e.writeFieldEnd()),this.experiment!==null&&this.experiment!==undefined&&(e.writeFieldBegin("experiment",Thrift.Type.STRUCT,129),this.experiment.write(e),e.writeFieldEnd()),this.share!==null&&this.share!==undefined&&(e.writeFieldBegin("share",Thrift.Type.STRUCT,130),this.share.write(e),e.writeFieldEnd()),this.user_subreddit!==null&&this.user_subreddit!==undefined&&(e.writeFieldBegin("user_subreddit",Thrift.Type.STRUCT,131),this.user_subreddit.write(e),e.writeFieldEnd()),this.notification_request!==null&&this.notification_request!==undefined&&(e.writeFieldBegin("notification_request",Thrift.Type.STRUCT,132),this.notification_request.write(e),e.writeFieldEnd()),this.search!==null&&this.search!==undefined&&(e.writeFieldBegin("search",Thrift.Type.STRUCT,133),this.search.write(e),e.writeFieldEnd()),this.message!==null&&this.message!==undefined&&(e.writeFieldBegin("message",Thrift.Type.STRUCT,134),this.message.write(e),e.writeFieldEnd()),this.admin!==null&&this.admin!==undefined&&(e.writeFieldBegin("admin",Thrift.Type.STRUCT,135),this.admin.write(e),e.writeFieldEnd()),this.ticket!==null&&this.ticket!==undefined&&(e.writeFieldBegin("ticket",Thrift.Type.STRUCT,136),this.ticket.write(e),e.writeFieldEnd()),this.mailroom_request!==null&&this.mailroom_request!==undefined&&(e.writeFieldBegin("mailroom_request",Thrift.Type.STRUCT,137),this.mailroom_request.write(e),e.writeFieldEnd()),this.comment_composer!==null&&this.comment_composer!==undefined&&(e.writeFieldBegin("comment_composer",Thrift.Type.STRUCT,138),this.comment_composer.write(e),e.writeFieldEnd()),this.gold_purchase!==null&&this.gold_purchase!==undefined&&(e.writeFieldBegin("gold_purchase",Thrift.Type.STRUCT,139),this.gold_purchase.write(e),e.writeFieldEnd()),this.payment!==null&&this.payment!==undefined&&(e.writeFieldBegin("payment",Thrift.Type.STRUCT,140),this.payment.write(e),e.writeFieldEnd()),this.post_draft!==null&&this.post_draft!==undefined&&(e.writeFieldBegin("post_draft",Thrift.Type.STRUCT,148),this.post_draft.write(e),e.writeFieldEnd()),this.geo!==null&&this.geo!==undefined&&(e.writeFieldBegin("geo",Thrift.Type.STRUCT,500),this.geo.write(e),e.writeFieldEnd()),this.user_legacy_id!==null&&this.user_legacy_id!==undefined&&(e.writeFieldBegin("user_legacy_id",Thrift.Type.STRING,502),e.writeString(this.user_legacy_id),e.writeFieldEnd()),this.content_metadata!==null&&this.content_metadata!==undefined&&(e.writeFieldBegin("content_metadata",Thrift.Type.STRUCT,503),this.content_metadata.write(e),e.writeFieldEnd()),this.url_parsed!==null&&this.url_parsed!==undefined&&(e.writeFieldBegin("url_parsed",Thrift.Type.STRUCT,504),this.url_parsed.write(e),e.writeFieldEnd()),this.link_sharing!==null&&this.link_sharing!==undefined&&(e.writeFieldBegin("link_sharing",Thrift.Type.STRUCT,505),this.link_sharing.write(e),e.writeFieldEnd()),this.create_request_timestamp!==null&&this.create_request_timestamp!==undefined&&(e.writeFieldBegin("create_request_timestamp",Thrift.Type.I64,506),e.writeI64(this.create_request_timestamp),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd();return},t=function(e){this.events=null,e&&e.events!==undefined&&(this.events=e.events)},t.prototype={},t.prototype.read=function(e){e.readStructBegin();for(;;){var t=e.readFieldBegin(),r=t.fname,i=t.ftype,s=t.fid;if(i==Thrift.Type.STOP)break;switch(s){case 1:if(i==Thrift.Type.LIST){var o=0,u;this.events=[];var a=0;u=e.readListBegin(),a=u.etype,o=u.size;for(var f=0;f<o;++f){var l=null;l=new n,l.read(e),this.events.push(l)}e.readListEnd()}else e.skip(i);break;case 0:e.skip(i);break;default:e.skip(i)}e.readFieldEnd()}e.readStructEnd();return},t.prototype.write=function(e){e.writeStructBegin("EventBatch");if(this.events!==null&&this.events!==undefined){e.writeFieldBegin("events",Thrift.Type.LIST,1),e.writeListBegin(Thrift.Type.STRUCT,this.events.length);for(var t in this.events)this.events.hasOwnProperty(t)&&(t=this.events[t],t.write(e));e.writeListEnd(),e.writeFieldEnd()}e.writeFieldStop(),e.writeStructEnd();return},e.EventBatch=t,e.Event=n}(window.Thrift=window.Thrift||{}),!function(){var e={},t=2147483647,n=2147483648,r=4294967295,i=4294967296,s=[];for(var o=0;o<256;o++)s[o]=(o>15?"":"0")+o.toString(16);var u=e.exports=function(e,t){e instanceof Buffer?(this.buffer=e,this.offset=t||0):Object.prototype.toString.call(e)=="[object Uint8Array]"?(this.buffer=new Buffer(e),this.offset=t||0):(this.buffer=this.buffer||new Buffer(8),this.offset=0,this.setValue.apply(this,arguments))};u.MAX_INT=Math.pow(2,53),u.MIN_INT=-Math.pow(2,53),u.prototype={constructor:u,_2scomp:function(){var e=this.buffer,t=this.offset,n=1;for(var r=t+7;r>=t;r--){var i=(e[r]^255)+n;e[r]=i&255,n=i>>8}},setValue:function(e,t){var n=!1;if(arguments.length==1)if(typeof e=="number"){n=e<0,e=Math.abs(e),t=e%i,e/=i;if(e>i)throw new RangeError(e+" is outside Int64 range");e|=0}else{if(typeof e!="string")throw new Error(e+" must be a Number or String");e=(e+"").replace(/^0x/,""),t=e.substr(-8),e=e.length>8?e.substr(0,e.length-8):"",e=parseInt(e,16),t=parseInt(t,16)}var r=this.buffer,s=this.offset;for(var o=7;o>=0;o--)r[s+o]=t&255,t=o==4?e:t>>>8;n&&this._2scomp()},toNumber:function(e){var t=this.buffer,n=this.offset,r=t[n]&128,i=0,s=1;for(var o=7,a=1;o>=0;o--,a*=256){var f=t[n+o];r&&(f=(f^255)+s,s=f>>8,f&=255),i+=f*a}return!e&&i>=u.MAX_INT?r?-Infinity:Infinity:r?-i:i},valueOf:function(){return this.toNumber(!1)},toString:function(e){return this.valueOf().toString(e||10)},toOctetString:function(e){var t=new Array(8),n=this.buffer,r=this.offset;for(var i=0;i<8;i++)t[i]=s[n[r+i]];return t.join(e||"")},toBuffer:function(e){if(e&&this.offset===0)return this.buffer;var t=new Buffer(8);return this.buffer.copy(t,0,this.offset,this.offset+8),t},copy:function(e,t){this.buffer.copy(e,t||0,this.offset,this.offset+8)},compare:function(e){if((this.buffer[this.offset]&128)!=(e.buffer[e.offset]&128))return e.buffer[e.offset]-this.buffer[this.offset];for(var t=0;t<8;t++)if(this.buffer[this.offset+t]!==e.buffer[e.offset+t])return this.buffer[this.offset+t]-e.buffer[e.offset+t];return 0},equals:function(e){return this.compare(e)===0},inspect:function(){return"[Int64 value:"+this+" octets:"+this.toOctetString(" ")+"]"}},window.Int64=u}(),!function(){var e={},t=function(e){if(e==="node-int64")return window.Int64},n=t("node-int64"),r=e.exports={},i=Math.pow(2,24),s=Math.pow(2,31),o=Math.pow(2,32),u=Math.pow(10,11);r.toDecimalString=function(e){var t=e.buffer,n=e.offset;if(!t[n]&&!(t[n+1]&224)||!~t[n]&&!~(t[n+1]&224))return e.toString();var r=t[n]&128;if(r){var s=!1,a=new Buffer(8);for(var f=7;f>=0;--f)a[f]=~t[n+f]+(s?0:1)&255,s|=t[n+f];t=a}var l=t[n+1]+(t[n]<<8),c=t[n+7]+(t[n+6]<<8)+(t[n+5]<<16)+t[n+4]*i+(t[n+3]+(t[n+2]<<8))*o+l*74976710656,h=Math.floor(c/u)+l*2814;return c=("00000000000"+String(c%u)).slice(-11),(r?"-":"")+String(h)+c},r.fromDecimalString=function(e){var t=e.charAt(0)==="-";if(e.length<(t?17:16))return new n(+e);if(e.length>(t?20:19))throw new RangeError("Too many digits for Int64: "+e);var r=+e.slice(t?1:0,-15),i=+e.slice(-15)+r*2764472320,u=Math.floor(i/o)+r*232830;i%=o;if(u>=s&&(!t||u!=s||i!=0))throw new RangeError("The magnitude is too large for Int64.");return t&&(u=~u,i===0?u=u+1&4294967295:i=~i+1,u=2147483648|u),new n(u,i)}}(),!function(e){e.Type={STOP:0,VOID:1,BOOL:2,BYTE:3,I08:3,DOUBLE:4,I16:6,I32:8,I64:10,STRING:11,UTF7:11,STRUCT:12,MAP:13,SET:14,LIST:15,UTF8:16,UTF16:17}}(window.Thrift=window.Thrift||{}),!function(e,t){var n={};n[Thrift.Type.BOOL]="tf",n[Thrift.Type.BYTE]="i8",n[Thrift.Type.I16]="i16",n[Thrift.Type.I32]="i32",n[Thrift.Type.I64]="i64",n[Thrift.Type.DOUBLE]="dbl",n[Thrift.Type.STRUCT]="rec",n[Thrift.Type.STRING]="str",n[Thrift.Type.MAP]="map",n[Thrift.Type.LIST]="lst",n[Thrift.Type.SET]="set",ThriftSerializer=function(){this.stack=[]},ThriftSerializer.prototype={writeFieldBegin:function(e,t,r){this.stack.push(function(e){var i={};return i[r]={},i[r][n[t]]=e,i})},writeFieldEnd:function(){var e=this.stack.pop(),t=this.stack.pop();this.stack.push(t(e))},writeFieldStop:function(){},writeStructBegin:function(e){this.stack.push("structStart")},writeStructEnd:function(){var e={};for(;;){var t=this.stack.pop();if(t==="structStart")break;_.extend(e,t)}this.stack.push(e)},writeListBegin:function(){this.stack.push("listStart")},writeListEnd:function(){var e=[];for(;;){var t=this.stack.pop();if(t==="listStart")break;e.push(t)}this.stack.push(["rec",e.length].concat(e))},writeSetBegin:function(){this.stack.push("setStart")},writeSetEnd:function(){var e=[];for(;;){var t=this.stack.pop();if(t==="setStart")break;e.push(t)}this.stack.push(["rec",e.length].concat(e))},writeMapStart:function(){throw new Error("Maps not implemented. Contact Niranjan Ramadas")},writeMapEnd:function(){throw new Error("Maps not implemented. Contact Niranjan Ramadas")},writeBool:function(e){this.stack.push(e?1:0)},writeByte:function(e){this.stack.push(e)},writeI16:function(e){this.stack.push(e)},writeI32:function(e){this.stack.push(e)},writeI64:function(e){e instanceof Int64?this.stack.push(Int64Util.toDecimalString(e)):this.stack.push(e)},writeDouble:function(e){this.stack.push(e)},writeString:function(e){e===null?this.stack.push(null):this.stack.push(JSON.stringify(e).slice(1,-1))},writeBinary:function(e){var t;if(typeof e=="string")t=new Buffer(e,"binary");else{if(!(typeof Buffer!="undefined"&&e instanceof Buffer||Object.prototype.toString.call(e)==="[object Uint8Array]"))throw new Error("writeBinary called without a string/Buffer argument: "+e);t=e}this.stack.push(t.toString("base64"))},getString:function(){if(this.stack.length>1)throw new Error("Did not correctly serialize Thrift Event");return JSON.stringify(this.stack.pop())}},e.ThriftSerializer=ThriftSerializer}(window.Thrift=window.Thrift||{}),!function(e,t,n,r){"use strict";var i=[],s=!1,o=function(e){i=i.concat(e),s||u()},u=function(){var e=i.slice(),t=new Thrift.EventBatch({events:e}),r=new Thrift.ThriftSerializer,o=n.config.events_collector_key,f=n.config.events_collector_secret,l=n.config.events_collector_v2_url;i=[],s=!0,t.write(r);var c=r.getString(),h=CryptoJS.HmacSHA256(c,f).toString(CryptoJS.enc.Hex),p=n.config.signature_header_v2,d={};d[p]="key=%(key)s, mac=%(signature)s".format({key:o,signature:h}),l&&n.config.events_collector_secret?n.ajax({data:c,type:"POST",url:l,headers:d}).done(function(t){a(e),i.length?u():s=!1}):(a(e),i.length?u():s=!1)},a=function(e){n.config.debug&&console.groupCollapsed&&e.forEach(function(e){console.groupCollapsed("Event sent - %c%(source)s %c%(action)s %c%(noun)s".format(e),"color: #FFB000","color: #94E044","color: #24A0ED"),console.log(e),console.groupEnd()})};e.sendEvent=o}(r.eventsV2=r.eventsV2||{},this,r),!function(e,t,n){var i=["app","client_timestamp","platform","referrer","request","screen","session","user","user_preferences","uuid"];e.sendEvent=function(e,t,o,u,a){var f={source:e,action:t,noun:o};u=i.concat(u||[]),u.forEach(function(e){if(!s[e])throw new Error("Field not yet implemented: "+e);var t=s[e]();t!==n&&t!==null&&(f[e]=t)}),a=a||{};for(var l in a)f[l]?_.extend(f[l],a[l]):f[l]=a[l];r.eventsV2.sendEvent(new Thrift.Event(f))};var s=e.createStruct={action_info:function(t){var n={},r=e.selectPageType();return r&&(n={page_type:r}),t&&(n=_.extend(n,t)),new Thrift.ActionInfo(n)},app:function(e){return new Thrift.App({name:e||"web"})},client_timestamp:function(){return Date.now()},comment:function(){throw new Error("Field not yet implemented: comment")},platform:function(){return new Thrift.Platform({fingerprint:r.utils.getFingerprint().fp,fingerprint_created_timestamp:r.utils.getFingerprint().timestamp})},listing:function(){throw new Error("Field not yet implemented: listing")},notification:function(){throw new Error("Field not yet implemented: notification")},post:function(){throw new Error("Field not yet implemented: post")},referrer:function(){var e=document.referrer;if(e)return new Thrift.Referrer({url:e,domain:r.utils.getDomain(e)})},request:function(){return new Thrift.Request({base_url:t.location.href,domain:t.location.hostname,reddaid:r.cookies.get("reddaid")||null,user_agent:t.navigator.userAgent})},screen:function(){return new Thrift.Screen({in_focus:document.hasFocus?document.hasFocus():null,width:t.screen.width,height:t.screen.height,viewport_width:t.innerWidth,viewport_height:t.innerHeight})},session:function(){return new Thrift.Session({id:r.tracker.getTrackingData().session_id,created_timestamp:Math.floor(r.tracker.getTrackingData().session_id_created),referrer_domain:r.utils.getDomain(r.cookies.get("initref"))||null})},subreddit:function(){if(r.config.cur_site)return new Thrift.Subreddit({id:r.config.cur_site,name:r.config.cur_listing.toLowerCase()})},user:function(){var e=!!r.config.user_id,t=r.tracker.getTrackingData(),n=e?r.config.user_id:parseInt(t.loid,36),i={logged_in:e,id:r.utils.idToFullname(n,"t2")};return r.config.user_age&&(i.created_timestamp=Math.floor(Date.now()-r.config.user_age)),new Thrift.User(i)},user_preferences:function(){return new Thrift.UserPreferences({language:document.documentElement.lang,in_beta:!!r.config.pref_beta})},uuid:function(){return r.uuid()}};e.selectPageType=_.once(function(){if(r.config.cur_link)return/\/comments\/\w+\/.+\/\w+/.test(document.location.pathname)?"single_comment_thread":"post_detail";if(/^profile\b/.test(r.config.cur_screen_name))return"profile";if(r.config.pageInfo.actionName==="front.GET_submit")return"post_submit";switch(r.config.cur_listing){case"all":case"popular":case"friends":return r.config.cur_listing;case"frontpage":return"home"}if(r.config.cur_site)return"community"})}(r.analyticsV2={},this),!function(e,t,n){"use strict";var r=1e3,i=r*30;if(!e.analyticsV2)return;if(!e.config.feature_heartbeat_events)return;var s=function(){if(document.hasFocus&&!document.hasFocus())return;e.analyticsV2.sendEvent("global","heartbeat","timing",["subreddit","action_info"])};e.hooks.get("setup").register(function(){s(),setInterval(s,i)})}(r,this),!function(e,t,n){"use strict";if(!e.analyticsV2)return;e.onboardingEvents={pressedGoogleButton:function(){e.analyticsV2.sendEvent("desktop_onboarding","clicked","google_sign_up")},viewedCreateAccountScreen:function(t,n,i){e.analyticsV2.sendEvent("desktop_onboarding","viewed","create_account_screen",["action_info","subreddit"],{onboarding:new Thrift.Onboarding({action_source:e.utils.formatAsStringLower(t),id:n,semantic_version:i})})},viewedLoginScreen:function(t,n){e.analyticsV2.sendEvent("desktop_onboarding","viewed","login_screen",["subreddit"],{onboarding:new Thrift.Onboarding({id:t,semantic_version:n})})},viewedSubscriptionScreen:function(t,n,i){e.analyticsV2.sendEvent("desktop_onboarding","viewed","subscription_screen",["subreddit"],{onboarding:new Thrift.Onboarding({id:t,semantic_version:n,valid_email_submitted:i})})},viewedUsernameScreen:function(t,n){e.analyticsV2.sendEvent("desktop_onboarding","viewed","username_screen",["subreddit"],{onboarding:new Thrift.Onboarding({id:t,semantic_version:n})})},clickedCategory:function(t,n,i,s){e.analyticsV2.sendEvent("desktop_onboarding","clicked","category",["subreddit"],{onboarding:new Thrift.Onboarding({id:t,semantic_version:n,category_position:i,category_name:e.utils.formatAsStringLower(s)})})},clickedSubreddit:function(t,n,i,s,o,u,a,f,l){e.analyticsV2.sendEvent("desktop_onboarding","clicked","subreddit",["subreddit"],{onboarding:new Thrift.Onboarding({id:t,semantic_version:n,subreddit_name:e.utils.formatAsStringLower(i),category_name:e.utils.formatAsStringLower(s),subreddit_is_selected:o,subreddit_position:u,subreddits_already_selected:a,pre_selected:f,is_similar_subreddit:l})})},submittedSubscription:function(t,n,i,s){e.analyticsV2.sendEvent("desktop_onboarding","submitted","subscription",["subreddit"],{onboarding:new Thrift.Onboarding({id:t,semantic_version:n,number_subreddits_selected:i,subreddits_selected:s})})},failedEmailValidation:function(t,n,i){e.analyticsV2.sendEvent("desktop_onboarding","failed","email_validation",["subreddit"],{onboarding:new Thrift.Onboarding({id:t,semantic_version:n,process_notes:e.utils.formatAsStringLower(i)})})},submittedUsername:function(t,n,i,s){e.analyticsV2.sendEvent("desktop_onboarding","submitted","username",["subreddit"],{onboarding:new Thrift.Onboarding({id:t,semantic_version:n,user_name:i,recommended_user_name:s})})},failedInterestLoading:function(t,n){e.analyticsV2.sendEvent("desktop_onboarding","failed","interest_loading",["subreddit"],{onboarding:new Thrift.Onboarding({id:t,semantic_version:n})})},failedUsernameLoading:function(t,n){e.analyticsV2.sendEvent("desktop_onboarding","failed","username_loading",["subreddit"],{onboarding:new Thrift.Onboarding({id:t,semantic_version:n})})},failedSubredditLoading:function(t,n){e.analyticsV2.sendEvent("desktop_onboarding","failed","subreddit_loading",["subreddit"],{onboarding:new Thrift.Onboarding({id:t,semantic_version:n})})},failedUsernameValidation:function(t,n,i){e.analyticsV2.sendEvent("desktop_onboarding","failed","username_validation",["subreddit"],{onboarding:new Thrift.Onboarding({id:t,semantic_version:n,process_notes:e.utils.formatAsStringLower(i)})})},clickedBack:function(t,n,i){e.analyticsV2.sendEvent("desktop_onboarding","clicked","back",["subreddit"],{onboarding:new Thrift.Onboarding({id:t,semantic_version:n,number_subreddits_selected:i})})},clickedSubmit:function(t,n,i,s,o,u,a,f,l){e.analyticsV2.sendEvent("desktop_onboarding","clicked","submit",["subreddit"],{onboarding:new Thrift.Onboarding({id:t,semantic_version:n,successful:i,number_subreddits_selected:u,subreddits_selected:a,landing_page:f,passed_captcha:l})})},clickedExit:function(t,n,i,s,o,u,a){e.analyticsV2.sendEvent("desktop_onboarding","clicked","exit",["subreddit"],{onboarding:new Thrift.Onboarding({id:t,semantic_version:n,process_notes:e.utils.formatAsStringLower(i),number_subreddits_selected:u,subreddits_selected:a})})},viewedSimilarSubreddits:function(t,n,i){e.analyticsV2.sendEvent("desktop_onboarding","viewed","similar_subreddits",["subreddit"],{onboarding:new Thrift.Onboarding({id:t,semantic_version
:n,number_subreddits:i})})},viewedLandingPage:function(t){e.analyticsV2.sendEvent("desktop_onboarding","viewed","landing_page",[],{correlation_id:t})},skippedLandingPage:function(t){e.analyticsV2.sendEvent("desktop_onboarding","clicked","skip",[],{correlation_id:t})}}}(r,this),!function(e,t,n){"use strict";if(!e.analyticsV2)return;e.loginEvents={viewedCreateAccountScreen:function(t,n,i){e.analyticsV2.sendEvent("desktop_onboarding","viewed","create_account_screen",["action_info","subreddit"],{onboarding:new Thrift.Onboarding({action_source:e.utils.formatAsStringLower(t),id:n,semantic_version:i})})},clickedSignup:function(t,n,i){e.analyticsV2.sendEvent("desktop_onboarding","clicked","submit",["action_info","subreddit"],{onboarding:new Thrift.Onboarding({id:t,semantic_version:n,successful:i})})},clickedExit:function(t,n,i){e.analyticsV2.sendEvent("desktop_onboarding","clicked","exit",["action_info","subreddit"],{onboarding:new Thrift.Onboarding({id:t,semantic_version:n,process_notes:e.utils.formatAsStringLower(i)})})},clickedLogin:function(t,n,i){e.analyticsV2.sendEvent(t,"clicked","login",["subreddit"],{action_info:e.analyticsV2.createStruct.action_info({success:n,reason:i})})},viewedIncognitoBrowser:function(){e.analyticsV2.sendEvent("client","settings","empty",[],{})}}}(r,this),!function(e,t,n){"use strict";function r(e){var t={},n=$(e.target).thing(),r=n.data("fullname")||"",o=r.slice(0,3);o=="t3_"&&(t.post=i(n));if(o=="t1_"){t.comment=s(n);var u=$("body.comments-page .link.thing");u.length&&(t.post=i(u))}var a=$(e.target).closest("[data-user-creddits]").data();if(a&&Object.keys(a).length){var f=a.userCreddits,l=a.userHasGold;t.user={has_gold:l==="True",number_creddits:f}}return t}function i(e){if(!e)return;var t=e.data();return{id:t.fullname,type:t.type,title:e.find(".title").text()||n,nsfw:t.nsfw,spoiler:t.spoiler,url:t.url,domain:t.domain,body_text:e.find(".usertext-body").text()||n,created_timestamp:t.timestamp,promoted:t.promoted,author_id:t.authorFullname,number_gildings:t.gildings}}function s(e){if(!e)return;var t=e.data();return{id:t.fullname,post_id:$(".link").thing_id(),body_text:e.find(">.entry .usertext-body").text()||n,created_timestamp:t.timestamp,author_id:t.authorFullname,number_gildings:t.gildings}}function o(e){var t={code:"one_time",gift:"one_time",onetime:"one_time",autorenew:"subscription",creddits:"creddits"};return t[e]}if(!e.analyticsV2)return;e.goldEvents={clickGiveGold:function(t){var n=r(t);return this.correlationId=e.uuid(),this._sendGildingEvent("flatlist","click","give_gold",n)},interactWithGoldDialog:function(e,t,n){var i=r(e);return this._sendGildingEvent("gold_dialog",t,n,i)},interactWithCCPurchasePage:function(e,t,n){var i=r(e);return this.correlationId||(this.correlationId=$(e.target).closest("[data-correlation-id]").data("correlation-id")),this._sendGildingEvent("gold_content_cc_purchase",t,n,i)},ccPurchasePageError:function(t){this.successfulCCPurchase=!1;var n={action_info:e.analyticsV2.createStruct.action_info({reason:t})};return this._sendGildingEvent("gold_content_cc_purchase","display","error",n)},ccPurchasePageSuccess:function(e){return this.successfulCCPurchase=!0,this._sendGildingEvent("gold_content_cc_purchase","display","success")},leaveCCPurchasePage:function(e){if(this.successfulCCPurchase)return;var t=r(e);return this._sendGildingEvent("gold_content_cc_purchase","leave","page",t)},interactWithGoldTracker:function(t,n,r){return this.correlationId||(this.correlationId=e.uuid()),this._sendGoldPurchaseEvent("gold_tracker",n,r)},viewGoldPurchasePage:function(n){var r=e.utils.parseQueryString(t.location.search);this.correlationId=r.correlation_id||e.uuid();var i={progressbar:"gold_tracker",about:"about_gold"},s={gold_purchase:new Thrift.GoldPurchase({type:o(r.goldtype),source:i[r.source]||"gilding"})};return this._sendGoldPurchaseEvent("gold_purchase","view","page",s)},changeMonthsAmount:function(e){var t=parseInt(e.target.value),n={gold_purchase:new Thrift.GoldPurchase({type:"one_time",number_months:t})};return this._sendGoldPurchaseEvent("gold_purchase","change","one_time_months",n)},changeCredditsAmount:function(e){var t=parseInt(e.target.value),n={gold_purchase:new Thrift.GoldPurchase({type:"creddits",number_creddits:t})};return this._sendGoldPurchaseEvent("gold_purchase","change","creddits_amount",n)},interactWithGoldPurchasePage:function(e,t,n){return this._sendGoldPurchaseEvent("gold_purchase",t,n)},goldPurchasePageError:function(t){var n={action_info:e.analyticsV2.createStruct.action_info({reason:t})};return this._sendGoldPurchaseEvent("gold_purchase","display","error",n)},viewGoldPaymentPage:function(n){var r=e.utils.parseQueryString(t.location.search);return r.web2x?(this.isRedesign=!0,store.safeSet("is-redesign",!0)):(this.isRedesign=!1,store.safeSet("is-redesign",!1)),this.correlationId=r.correlation_id||e.uuid(),store.safeSet("gold-purchase-correlation-id",this.correlationId),this._sendGoldPaymentEvent("gold_purchase_payment","view","page")},interactWithGoldPaymentPage:function(e,t,n){return this._sendGoldPaymentEvent("gold_purchase_payment",t,n)},ccPaymentPageError:function(t){var n={action_info:e.analyticsV2.createStruct.action_info({reason:t})};return this._sendGoldPaymentEvent("gold_purchase_payment","display","credit_card_error",n)},viewPurchaseConfirmationPage:function(t){this.correlationId=store.safeGet("gold-purchase-correlation-id"),this.isRedesign=store.safeGet("is-redesign");var n=$(".gold-wrap").data("vendor"),r={"spent-creddits":"creddit",stripe:"credit_card",paypal:"paypal"},i={correlation_id:this.correlationId,payment:new Thrift.Payment({method:r[n]})};return this.isRedesign&&(i.app=e.analyticsV2.createStruct.app("web2x")),e.analyticsV2.sendEvent("gold_purchase_confirmation","view","page",null,i)},interactWithPreferencesPage:function(t,n,r){this.correlationId=this.correlationId||e.uuid();var i={correlation_id:this.correlationId};return e.analyticsV2.sendEvent("user_preferences",n,r)},_sendGildingEvent:function(t,n,r,i){i=i||{};var s=i.post,o=i.comment,u=["subreddit"];return i.correlation_id=this.correlationId,o&&(i.comment=new Thrift.Comment(o)),s&&(i.post=new Thrift.Post(s)),e.analyticsV2.sendEvent(t,n,r,u,i)},_sendGoldPurchaseEvent:function(t,n,r,i){return i=i||{},i.correlation_id=this.correlationId,e.analyticsV2.sendEvent(t,n,r,null,i)},_sendGoldPaymentEvent:function(n,r,i,s){var u=e.utils.parseQueryString(t.location.search),a=u.goldtype,f=o(a),l={type:o(a),gilded_content:!!u.thing};if(f==="one_time"){l.number_months=parseInt(u.months);if(a==="gift"){var c=u.giftmessage;l.one_time_type="gift_user",l.gift_user_id=$(".gold-wrap").data("recipient-id"),l.gift_anonymous=u.signed==="false",l.gift_message=!!c,l.gift_message_length=c?c.length:null}else a==="code"?l.one_time_type="gift_code":l.one_time_type="self"}return f==="creddits"&&(l.number_creddits=parseInt(u.num_creddits)),f==="subscription"&&(l.subscription_type=u.period),s=_.extend({},s,{correlation_id:this.correlationId,gold_purchase:new Thrift.GoldPurchase(l)}),this.isRedesign&&(s.app=e.analyticsV2.createStruct.app("web2x")),e.analyticsV2.sendEvent(n,r,i,null,s)}}}(r,this),!function(e,t,n){"use strict";if(!e.analyticsV2)return;e.experimentEvents={exposeVariant:function(t,n,i,s){e.analyticsV2.sendEvent("client","expose","experiment",["action_info","subreddit"],{experiment:new Thrift.Experiment({id:t,name:e.utils.formatAsStringLower(n),owner:e.utils.formatAsStringLower(i),variant:e.utils.formatAsStringLower(s)})})}}}(r,this),!function(e,t,n){"use strict";if(!e.analyticsV2)return;e.signupCTAEvents={viewCTA:function(){e.analyticsV2.sendEvent("signup_cta","view","cta",["action_info","subreddit"])},clickHide:function(){e.analyticsV2.sendEvent("signup_cta","click","hide",["action_info","subreddit"])}}}(r,this),!function(e){function t(e,t){return t&&$.contains(t,e)}e.flatlistevent={sendFlatListEvent:function(n,i,s){var o="flatlist_events",u=$(n.target),a=u.thing(),f=n.target&&t(n.target,a.children(".entry").find(".flat-list")[0])||t(n.target,$(".commentarea > .menuarea")[0]);if(!f){typeof s=="function"&&s();return}var l=n.eventAction||u.data("event-action")||n.action;if(/^legacy:/.test(l))return;var c=u.data("type")||$.getThingType(a),h=u.data("fullname")||a.data("fullname"),p=n.eventDetail||u.data("event-detail");!h&&c==="subreddit"?h=e.config.cur_site:!h&&c==="link"&&(h=e.config.cur_link);var d=a.data(),v=["listing_name","language","dnt","referrer_domain","referrer_url","session_referrer_domain","user_in_beta"];if(!i)var i=c+"_flatlist_click";var m={process_notes:l};p&&(m.details_text=p),h&&(m.target_fullname=h,m.target_id=e.utils.fullnameToId(h),m.target_type=c),c==="link"&&(m.target_url=$.getLinkURL(a),"domain"in d&&(m.target_url_domain=d.domain)),"context"in d&&(m.referrer_page_type=d.context),"timestamp"in d&&(m.target_created_ts=d.timestamp),"author"in d&&(m.target_author_name=d.author,d.author===e.config.logged&&(m.is_target_author=!0)),"subreddit"in d&&(m.sr_name=d.subreddit),"subredditFullname"in d&&(m.sr_id=e.utils.fullnameToId(d.subredditFullname)),"canBan"in d&&(m.is_target_moderator=!0),e.analytics.sendEvent(o,i,v,m,s)}}}(r),!function(e){if(!e.config.feature_flatlist_events)return;$(function(){$(document.body).on("click",".thing > .entry .bylink",function(t){var n=$(t.target).data("event-action");if(!n)return;t.preventDefault(),e.actions.trigger("navigate",{target:t.target,eventAction:n})}),e.actions.on("navigate:success",function(t){e.flatlistevent.sendFlatListEvent(t,null,function(){if(e.config.new_window&&$(t.target).hasClass("may-blank")){var n=window.open(t.target.href,"_blank");n.opener=null}else window.location=t.target.href})})});var t=["share","save","legacy:change-state","report","report_list","legacy:big-mod-action","legacy:big-mod-toggle","reply","comment","edit","embed","give-gold","flair"];t.forEach(function(t){e.actions.on(t+":success",sendFlatListEvent)})}(r),!function(e){function n(n){var i=$(n),s=i.thing(),o=i.data("elementName"),u={process_notes:o,referrer_page_type:s.data("context"),target_fullname:s.thing_id(),target_id:e.utils.fullnameToId(s.thing_id()),target_type:s.getThingType()},a=[];e.analytics.sendEvent(t,"experiment_click",a,u)}var t="internal_click_events";e.actions.on("trackedEventClick",n),$(document.body).on("click","[data-event-action]",function(t){e.actions.trigger("trackedEventClick",t.target)})},r.visited={key:"visited",init:function(){this.sendVisits=_.throttle(this._sendVisits,100),r.config.logged&&r.config.store_visits&&($(".content").on("click mousedown keydown",".link:not(.visited) a.title, .link:not(.visited) a.thumbnail",_.bind(this.onVisit,this)),$(".content").on("visit",".link:not(.visited)",_.bind(this.onVisit,this)),this.sendVisits())},onVisit:function(e){if(e.type==="keydown"&&e.which!==13)return;if(e.type==="mousedown")if(e.which===1||e.which===3)return;if(e.type==="click"&&e.which!==1)return;this.storeVisit($(e.target).closest(".thing").data("fullname")),this.sendVisits()},storeVisit:function(e){var t=store.safeGet(this.key)||[];t.push(e),store.safeSet(this.key,t)},_sendVisits:function(){var e=store.safeGet(this.key)||[];if(!e.length)return;e=_.last(_.uniq(e),100),r.ajax({type:"POST",url:"/api/store_visits",data:{links:e.join(",")}}),store.safeSet(this.key,[]),$.things.apply($,e).addClass("visited")}},r.wiki={request:function(e){r.config.logged&&(e.data.uh=r.config.modhash),e.data.page=r.config.wiki_page,$.ajax(e)},baseApiUrl:function(){return r.wiki.baseUrl(!0)},baseUrl:function(e){var t="";return e&&(t+="/api"),t+="/wiki",r.config.is_fake||(t="/r/"+r.config.post_site+t),t},init:function(){$("body.wiki-page").on("click",".revision_hide",this.toggleHide),$("body.wiki-page").on("click",".revision_delete",this.toggleDelete),$("body.wiki-page").on("click",".toggle-source",this.toggleSource)},toggleSource:function(e){e.preventDefault(),$(".wiki-page .source").toggle("slow")},toggleDelete:function(e){e.preventDefault();var t=$(this),n=r.wiki.baseApiUrl()+"/delete",i=t.parents(".revision"),s=i.hasClass("deleted");i.toggleClass("deleted"),r.wiki.request({url:n,type:"POST",dataType:"json",data:{revision:t.data("revision"),deleted:!s},error:function(){i.toggleClass("deleted")},success:function(e){e.status?i.addClass("deleted"):i.removeClass("deleted")}})},toggleHide:function(e){e.preventDefault();if(r.access.isLinkRestricted(this))return;var t=$(this),n=r.wiki.baseApiUrl()+"/hide",i=t.parents(".revision");i.toggleClass("hidden"),r.wiki.request({url:n,type:"POST",dataType:"json",data:{revision:t.data("revision")},error:function(){i.toggleClass("hidden")},success:function(e){e.status?i.addClass("hidden"):i.removeClass("hidden")}})},addUser:function(e){e.preventDefault(),$("#usereditallowerror").hide();var t=$(e.target),n=r.wiki.baseApiUrl()+"/alloweditor/add";r.wiki.request({url:n,type:"POST",data:{username:t.find('[name="username"]').val()},dataType:"json",error:function(){$("#usereditallowerror").show()},success:function(e){location.reload()}})},submitEdit:function(e){e.preventDefault();var t=$(e.target),n=r.wiki.baseApiUrl()+"/edit",s=$("#wiki_edit_conflict"),o=$("#wiki_special_error");s.hide(),o.hide(),params=r.utils.serializeForm(t),$("#wiki_save_button").attr("disabled",!0),t.addClass("working"),r.wiki.request({url:n,type:"POST",dataType:"json",data:params,error:function(){t.removeClass("working"),$("#wiki_save_button").removeAttr("disabled")},success:function(){window.location=r.wiki.baseUrl()+"/"+r.config.wiki_page},statusCode:{409:function(e){var n=JSON.parse(e.responseText),r=t.children("#wiki_page_content"),i=s.children("#yourdiff");s.children("#youredit").val(r.val()),i.html($.unsafe(n.diffcontent)),t.children("#previous").val(n.newrevision),r.val(n.newcontent),s.fadeIn("slow")},415:function(e){var t=JSON.parse(e.responseText).special_errors,n=o.children("#specials");n.empty();for(i in t)n.append($("<pre>").text($.unsafe(t[i])));o.fadeIn("slow")},429:function(e){var t=JSON.parse(e.responseText).message,n=o.children("#specials");n.empty(),n.text(t),o.fadeIn("slow")}}})},goCompare:function(){v1=$("input:radio[name=v1]:checked").val(),v2=$("input:radio[name=v2]:checked").val(),url=r.wiki.baseUrl()+"/"+r.config.wiki_page+"?v="+v1,v2!=v1&&(url+="&v2="+v2),window.location=url},helpon:function(e){$(e).parents("form").children(".markhelp:first").show()},helpoff:function(e){$(e).parents("form").children(".markhelp:first").hide()}},r.apps={init:function(){$(".authorized-app").delegate(".app-permissions li","mouseover mouseout",function(e){e.type=="mouseover"?$(this).find(".app-scope").show():$(this).find(".app-scope").hide()}),$("#developed-apps").delegate(".edit-app-button","click",function(){$(this).toggleClass("collapsed").closest(".developed-app").removeClass("collapsed").find(".app-developers").remove().end().find(".edit-app").slideToggle().removeClass("collapsed").end()}).delegate(".edit-app-icon-button","click",function(){$(this).toggleClass("collapsed").closest(".developed-app").find(".ajax-upload-form").show()}),$("#create-app-button").click(function(){$(this).hide(),$("#create-app").fadeIn()})},revoked:function(e,t){$(e).closest(".authorized-app").fadeOut()},deleted:function(e,t){$(e).closest(".developed-app").fadeOut()}},r.gold={_inlineGilding:!1,_googleCheckoutAnalyticsLoaded:!1,init:function(){$("div.content").on("click",'[name="message"]',this._toggleGiftMessage.bind(this)),$("div.content").on("click","a.give-gold",function(e){var t=$(e.target).data("event-action");return r.actions.trigger("give-gold",{target:e.target,eventAction:t}),!1}),r.actions.on("give-gold",function(e){r.access.isLinkRestricted(e.target)&&e.preventDefault()}),r.actions.on("give-gold:success",function(e){r.gold._toggleThingGoldForm(e)}),$("div.content").on("click",".gold-payment .close-button",this._toggleThingGoldForm.bind(this)),$("div.content").on("click",".gold-button",this._setGildingProperties.bind(this)),$(".stripe-gold").click(function(){$("#stripe-payment").slideToggle()}),$("#stripe-payment.charge .stripe-submit").on("click",function(){r.goldEvents.interactWithCCPurchasePage(e,"click","submit"),r.gold.tokenThenPost("stripecharge/gold")}),$("#stripe-payment.modify .stripe-submit").on("click",function(){r.gold.tokenThenPost("modify_subscription")}),$("h3.toggle").on("click",function(){$(this).toggleClass("toggled"),$(this).siblings(".details").slideToggle()}),$("dt.toggle").on("click",function(){$(this).toggleClass("toggled"),$(this).next("dd").slideToggle()}),$("body").hasClass("gold-signup")&&r.gold.signupForm.init(),$("form.creddits-gold .remaining").each(r.gold._renderCredditsAmount),$(document.body).on("submit","form.creddits-gold",function(e){return e.preventDefault(),e.stopPropagation(),r.gold._expendCreddits(),$(this).append('<input type="hidden" name="correlation_id" value="'+r.goldEvents.correlationId+'">'),$(this).find(".gold-checkout:not(.creddits-gold)").hide(),post_form(this,"spendcreddits")}),this._initTrackingEvents()},_initTrackingEvents:function(){$(document).ready(function(e){if($(".credit-gild").is(":visible"))r.goldEvents.interactWithCCPurchasePage(e,"view","page");else if($(".gold-purchase").is(":visible"))if($(".error").is(":visible")){var t=$(e.target),n="Unknown error";t.hasClass("NO_USER")&&(n="No username provided"),t.hasClass("USER_DOESNT_EXIST")&&(n="User does not exist"),r.goldEvents.goldPurchasePageError(n)}else r.goldEvents.viewGoldPurchasePage(e);else $(".gold-payment").is(":visible")?r.goldEvents.viewGoldPaymentPage(e):$(".gold-purchased").is(":visible")&&r.goldEvents.viewPurchaseConfirmationPage(e)}),$("div.content").on("click",'.thing .gold-payment input[type="checkbox"]',function(e){var t=$(e.target),n=t.is(":checked")?"check":"uncheck",i=t.prop("name"),s;i==="message"&&(s="message"),i==="signed"&&(s="anonymous"),r.goldEvents.interactWithGoldDialog(e,n,s)}),$("div.content").one("input",".thing .giftmessage",function(e){r.goldEvents.interactWithGoldDialog(e,"type","message_input")}),$("div.content").on("click",".thing .giftmessage",function(e){r.goldEvents.interactWithGoldDialog(e,"click","message_input")}),$("div.content").on("click",".thing .transaction-summary a",function(e){var t=$(e.target).attr("href"),n={"/gold/about":"reddit_gold","/help/useragreement":"user_agreement"},i=n[t];r.goldEvents.interactWithGoldDialog(e,"click",i)}),$("div.content").on("click",".thing .note a",function(e){var t=$(e.target).attr("href"),n={"/creddits":"buy_creddits","/gilding":"learn"},i=n[t];r.goldEvents.interactWithGoldDialog(e,"click",i)}),$("div.content").on("click",".thing .gold-button.purchase-method",function(e){var t=$(e.target).closest("[data-vendor]").data("vendor"),n={creddits:"creddits",paypal:"paypal","credit card":"credit_card"},i=n[t];r.goldEvents.interactWithGoldDialog(e,"click",i)}),window.addEventListener("pagehide",function(e){$(".credit-gild").is(":visible")&&r.goldEvents.leaveCCPurchasePage(e)});var e=$(".goldvertisement");e.mouseenter(function(e){r.goldEvents.interactWithGoldTracker(e,"hover","tracker")}),e.on("click",".support-cta",function(e){e.preventDefault(),r.goldEvents.interactWithGoldTracker(e,"click","help_support");var t=r.utils.replaceUrlParams($(e.target).attr("href"),{correlation_id:r.goldEvents.correlationId});window.open(t,"_blank")});var t=$(".gold-bubble");t.on("click",".extra-features",function(e){r.goldEvents.interactWithGoldTracker(e,"click","extra_features")}),t.on("click",".gold-benefits",function(e){r.goldEvents.interactWithGoldTracker(e,"click","special_benefits")});var n=$(".gold-purchase");n.on("change","#months",function(e){r.goldEvents.changeMonthsAmount(e)}),n.on("click","input.is-gift",function(e){var t=$(e.target).attr("id")==="gift",n=t?"one_time_gift":"one_time_self";r.goldEvents.interactWithGoldPurchasePage(e,"click",n)}),n.on("click","#gifting-details input[name=gifttype]",function(e){var t=$(e.target).attr("value"),n=t==="code"?"one_time_gift_code":"one_time_gift_send";r.goldEvents.interactWithGoldPurchasePage(e,"click",n)}),n.on("click",'.gift-message-details input[type="checkbox"]',function(e){var t=$(e.target),n=t.is(":checked")?"check":"uncheck",i=t.prop("name"),s;i==="message"&&(s="one_time_gift_send_message"),i==="signed"&&(s="one_time_gift_send_anonymous"),r.goldEvents.interactWithGoldPurchasePage(e,n,s)}),n.one("input",".gift-message-details .giftmessage",function(e){r.goldEvents.interactWithGoldPurchasePage(e,"type","one_time_gift_send_message")}),n.on("click",".gift-message-details .giftmessage",function(e){r.goldEvents.interactWithGoldPurchasePage(e,"click","one_time_gift_send_message")}),n.on("click","#autorenew input",function(e){var t=$(e.target).attr("value"),n=t==="monthly"?"subscription_monthly":"subscription_yearly";r.goldEvents.interactWithGoldPurchasePage(e,"click",n)}),n.on("change","#num_creddits",function(e){r.goldEvents.changeCredditsAmount(e)}),n.on("click",".gold-question .toggle",function(e){r.goldEvents.interactWithGoldPurchasePage(e,"click","what_is_gold")}),n.on("click",".gold-question a",function(e){r.goldEvents.interactWithGoldPurchasePage(e,"click","learn_more")}),n.on("click","#payment-options .gold-button",function(e){r.goldEvents.interactWithGoldPurchasePage(e,"click","continue")}),$goldPaymentPage=$("body.gold-payment"),$goldPaymentPage.on("click",".purchase-method",function(e){var t=$(e.target).closest("[data-vendor]").data("vendor"),n={creddits:"creddits",paypal:"paypal","credit card":"credit_card"};return r.goldEvents.interactWithGoldPaymentPage(e,"click",n[t])}),$goldPaymentPage.on("click",".stripe-submit",function(e){r.goldEvents.interactWithGoldPaymentPage(e,"click","credit_card_submit")}),$prefOptions=$("div.content .prefoptions"),$prefOptions.on("click",'.gold-accent input[type="checkbox"]',function(e){var t=$(e.target),n=t.is(":checked")?"select":"deselect",i=t.prop("name"),s={hide_ads:"hide_ads",store_visits:"remember_links",highlight_new_comments:"highlight_comments",show_gold_expiration:"show_expiration",creddit_autorenew:"automatically_renew"},o=s[i];if(!o)return;r.goldEvents.interactWithPreferencesPage(e,n,o)}),$prefOptions.on("click",".save-preferences",function(e){r.goldEvents.interactWithPreferencesPage(e,"click","save")})},_toggleGiftMessage:function(e){var t=e.target,n=t.checked,r=$(e.target).parents(".gold-form").find('[name="giftmessage"]').attr("id"),i=$("#"+r);i.toggleClass("hidden",!n)},_toggleThingGoldForm:function(e){if(r.access.isLinkRestricted(e.target))return;var t=$(e.target),n=t.thing(),i=t.thing_id(),s="gold_wrap_"+i,o=$("#"+s),u;if(o.length)return o.toggle(),o.is(":visible")?(r.goldEvents.clickGiveGold(e),this._scrollToElement(o)):(r.goldEvents.interactWithGoldDialog(e,"click","close"),$("#stripe-payment").is(":visible")&&r.goldEvents.leaveCCPurchasePage(e)),!1;this._inlineGilding=!0,r.analytics.fireFunnelEvent("gold","open-inline-form",{tracker:"goldTracker"}),r.goldEvents.clickGiveGold(e),this._googleCheckoutAnalyticsLoaded||($.getScript("//checkout.google.com/files/digital/ga_post.js"),this._googleCheckoutAnalyticsLoaded=!0),n.hasClass("link")?u="cloneable-link":u="cloneable-comment";var a=$(".gold-wrap."+u+":first").clone(),f=a.find(".gold-form"),l=t.thing().find(".entry .author:first").text(),c=f.find(".passthrough"),h=f.find('[name="cbbaseurl"]').val(),p=!f.find('[name="signed"]').is(":checked");a.removeClass(u).addClass("inline-gold").prop("id",s),f.find("p:first-child em").text(l),f.find("button").attr("disabled",""),c.val(""),t.new_thing_child(a);var d=setTimeout(function(){f.addClass("working"),f.find("button").addClass("disabled")},200);return $.request("generate_payment_blob.json",{thing:i,signed:p,correlation_id:r.goldEvents.correlationId},function(e){clearTimeout(d),f.removeClass("working"),c.val(e),f.find(".stripe-gold").on("click",function(){var t="/gold/creditgild/"+e;r.goldEvents.correlationId&&(t+="?correlation_id="+r.goldEvents.correlationId),window.open(t)}),f.find("button").removeAttr("disabled").removeClass("disabled")}),this._scrollToElement(a),!1},_scrollToElement:function(e){var t=1200,n=250,r=e.offset().top-n;$("body, html").animate({scrollTop:r},t)},_setGildingProperties:function(e){var t=$(".gold-wrap").data("is-redesign")==="True";if(t)return this._setRedesignGildingProperties(e);var n=$(e.target),i=n.thing_id(),s=n.parents("form");if(!i){s.submit();return}var o="gold_wrap_"+i,u=$("#"+o),a=u.find(".passthrough"),f=a.val(),l=!u.find('[name="signed"]').is(":checked"),c=u.find('[name="message"]').is(":checked"),h="";c&&(h=u.find('[name="giftmessage"]').val());if(this._inlineGilding){var p=n.closest("[data-vendor]").data("vendor"),d={label:p,tracker:"goldTracker"};r.analytics.fireFunnelEvent("gold","checkout",d)}$.request("modify_payment_blob.json",{code:f,signed:l,message:h},function(){s.submit()})},_setRedesignGildingProperties:function(e){var t=$(e.target),n=t.parents("form"),r=$(".gold-wrap"),i=r.find(".passthrough"),s=i.val(),o=!r.find('[name="signed"]').is(":checked"),u=r.find('[name="message"]').is(":checked"),a="";u&&(a=r.find('[name="giftmessage"]').val()),$.request("modify_payment_blob.json",{code:s,signed:o,message:a},function(){n.submit()})},_expendCreddits:function(){$(".cloneable-comment, .cloneable-link").find("form.creddits-gold .remaining").each(function(){var e=$(this),t=parseInt(e.data("current"),10),n=parseInt(e.data("total"),10),i=n-t;i<t?e.parents("form.creddits-gold").remove():($(this).data("total",i),r.gold._renderCredditsAmount.apply(this))})},_renderCredditsAmount:function(){var e=$(this),t=e.data("template");e.html(_.template(t,_.omit(e.data(),"template")))},gildThing:function(e,t,n){var r=$(".id-"+e);if(!r.length)return;var i=r.children(".entry").find("p.tagline"),s=i.find(".gilded-icon"),o;n!=null?o=n:(o=s.data("count")||0,o++),r.addClass("gilded user-gilded"),s.length||(s=$("<span>").addClass("gilded-icon"),i.append(s)),s.attr("title",t).data("count",o),o>1&&s.text("x"+o),r.children(".entry").find(".give-gold").parent().remove()},tokenThenPost:function(e){var t=function(t,n){var i=$("#stripe-payment"),s=i.find(".stripe-submit"),o=i.find(".status"),u=i.find('[name="stripeToken"]');n.error?(s.removeAttr("disabled"),o.html(n.error.message),$(".credit-gild").is(":visible")?r.goldEvents.ccPurchasePageError(n.error.message):$(".gold-payment").is(":visible")&&r.goldEvents.ccPaymentPageError(n.error.message)):(u.val(n.id),post_form(i,e),r.goldEvents.ccPurchasePageSuccess())};r.gold.makeStripeToken(t)},makeStripeToken:function(e){var t=$("#stripe-payment"),n=t.find('[name="stripePublicKey"]').val(),i=t.find(".stripe-submit"),s=t.find(".status"),o=t.find('[name="stripeToken"]'),u=t.find(".card-name").val(),a=t.find(".card-number").val(),f=t.find(".card-cvc").val(),l=t.find(".card-expiry-month").val(),c=t.find(".card-expiry-year").val(),h=t.find(".card-address_line1").val(),p=t.find(".card-address_line2").val(),d=t.find(".card-address_city").val(),v=t.find(".card-address_state").val(),m=t.find(".card-address_country").val(),g=t.find(".card-address_zip").val();Stripe.setPublishableKey(n);var y=function(e,n){t.find(".status").addClass("error").text(n),$(e).focus(),$(".credit-gild").is(":visible")?r.goldEvents.ccPurchasePageError("Validation error"):$(".gold-payment").is(":visible")&&r.goldEvents.ccPaymentPageError("Validation error")};return u?Stripe.validateCardNumber(a)?Stripe.validateExpiry(l,c)?Stripe.validateCVC(f)?h?d?m?(s.removeClass("error").text(r.config.status_msg.submitting),i.attr("disabled","disabled"),Stripe.createToken({name:u,number:a,cvc:f,exp_month:l,exp_year:c,address_line1:h,address_line2:p,address_city:d,address_state:v,address_country:m,address_zip:g},e)):y(".card-address_country",r._("missing country")):y(".card-address_city",r._("missing city")):y(".card-address_line1",r._("missing address")):y(".card-cvc",r._("invalid cvc")):y(".card-expiry-month",r._("invalid expiration date")):y(".card-number",r._("invalid credit card number")):y(".card-name",r._("missing name")),!1}},r.gold.signupForm=function(){function e(){var e=$("#goldtype").val(),t=["goldtype","correlation_id"];switch(e){case"autorenew":t.push("period");break;case"onetime":t.push("months");break;case"code":t.push("months","email");break;case"gift":t.push("months","recipient","signed","giftmessage");break;case"creddits":t.push("num_creddits")}return t}function t(e){var t=$(e);if(t.is(":radio")&&!t.is(":checked"))throw"Unchecked radio button has no value";return t.is(":checkbox")?value=t.is(":checked")?t.val():null:t.is("select")?value=t.find("option:selected").val():value=t.val(),value}function n(){var n=$("<a />").get(0),r=e(),i={};if(!("replaceState"in window.history))return;$("form.gold-form").find(":input").each(function(){var e=$(this);if(!_.contains(r,this.name))return;try{i[this.name]=t(this)}catch(n){return}}),i.edit=!0,n.href=window.location.href,n.search=$.param(i),window.history.replaceState({},"",n.href)}function i(){var e=$('input[name="gifttype"]:checked'),t=$(".tab.active"),r=$("#gift").is(":checked"),i;t.prop("id")=="autorenew"?i="autorenew":t.prop("id")=="creddits"?i="creddits":r&&e.length>0?i=e.val():i="onetime",$("#goldtype").val(i),n()}function s(e){$("#form-options, #payment-options").show(),$(".active").removeClass("active"),$("#redeem-a-code, .question").hide(),$(e).addClass("active"),$(e.hash).addClass("active"),i()}function o(t){t.stopPropagation(),t.preventDefault(),$("#giftmessage, #recipient").each(function(){var e=$(this);e.val()===e.attr("placeholder")&&e.val("")});var n=$("form.gold-form").length?$("form.gold-form"):$("form.loggedout-gold-form"),i=n.serializeArray(),s=_.object(_.pluck(i,"name"),_.pluck(i,"value"));r.goldEvents.correlationId&&(s.correlation_id=r.goldEvents.correlationId);var o=_.pick(s,e());window.location="/gold/payment?"+$.param(o)}function u(){var e=$("form.gold-form");$("a.tab-toggle").on("click",function(e){e.stopPropagation(),e.preventDefault(),s(this);var t=$(e.target).attr("href"),n={"#onetime":"one_time","#autorenew":"subscription","#creddits":"creddits"},i=n[t];r.goldEvents.interactWithGoldPurchasePage(e,"click",i)}),$('input[name="gift"]').change(function(){$("#gifting-details").slideToggle($(this).val()),i()}),$(".gold-dropdown").on("change",function(){$(this).find("[selected]").removeAttr("selected"),$(this).find(":selected").get(0).setAttribute("selected","selected")});var t="placeholder"in document.createElement("input");$('input[name="gifttype"]').change(function(){$("#gifttype-details-gift").toggleClass("hidden",this.value!=="gift"),t&&$("#gifttype-details-gift :input:eq(0)").focus(),i()}),$("#giftmessage").on("keyup",function(){$("#message").prop("checked",$(this).val()!=="")}),e.on("submit",o),e.find(":input").on("change",n),$('input[name="code"]').on("focus",function(){$(".redeem-submit").slideDown()})}var a=$("form.loggedout-gold-form");return a.on("submit",o),{init:u}}(),!function(e){e.gild_thing=function(t,n){r.gold.gildThing(t,n),e("#gold_wrap_"+t).fadeOut(400)}}(jQuery),r.multi={init:function(){this.multis=new r.multi.GlobalMultiCache,this.mine=new r.multi.MyMultiCollection,this.mine.fetch=_.throttle(this.mine.fetch,6e4);var e=$(".multi-details");if(e.length){var t=this.multis.touch(e.data("path"));t.fetch();var n=(new r.multi.MultiDetails({model:t,el:e})).render(),i=new r.multi.SubredditList({model:t,el:e});location.hash=="#created"&&n.focusAdd();var s=$("#multi-recs");s.length&&n.initRecommendations(s)}var o={};$(".subscribe-button").each(function(e,t){new r.multi.SubscribeButton({el:t,bubbleGroup:o})}),$(".listing-chooser").each(function(e,t){new r.multi.ListingChooser({el:t})})}},r.multi.MultiRedditList=Backbone.Collection.extend({model:Backbone.Model.extend({initialize:function(){this.id=this.get("name").toString().toLowerCase()}}),comparator:function(e){return e.id},getByName:function(e){return this.get(e.toString().toLowerCase())}}),r.multi.MultiReddit=Backbone.Model.extend({idAttribute:"path",url:function(){return r.utils.joinURLs("/api/multi",this.id)},defaults:{visibility:"private"},initialize:function(e,t){this.uncreated=t&&!!t.isNew,this.subreddits=new r.multi.MultiRedditList(this.get("subreddits"),{url:this.url()+"/r/",parse:!0}),this.on("change:subreddits",function(e,t){this.subreddits.set(t,{parse:!0})},this),this.subreddits.on("request",function(e,t,n){this.trigger("request",e,t,n)},this)},parse:function(e){return e.data},toJSON:function(){return data=Backbone.Model.prototype.toJSON.apply(this),data.subreddits=this.subreddits.toJSON(),data},isNew:function(){return this.uncreated},name:function(){return this.get("path").split("/").pop()},sync:function(e,t,n){var r=Backbone.sync.apply(this,arguments);return e=="create"&&r.done(_.bind(function(){this.uncreated=!1},this)),r},addSubreddit:function(e,t){e=r.utils.tup(e);if(e.length==1)this.subreddits.create({name:e[0]},t);else{var n=this.subreddits,i=n.clone();i.add
(_.map(e,function(e){return{name:e}})),this.subreddits=i,this.save(null,t),this.subreddits=n}},removeSubreddit:function(e,t){this.subreddits.getByName(e).destroy(t)},_copyOp:function(e,t,n){var i=new $.Deferred;return Backbone.ajax({type:"POST",url:"/api/multi/"+e,data:{from:this.get("path"),to:t.pathByName(n)},success:_.bind(function(n){e=="rename"&&this.trigger("destroy",this,this.collection);var s=r.multi.multis.reify(n);t.add(s),i.resolve(s)},this),error:_.bind(i.reject,i)}),i},copyTo:function(e,t){return this._copyOp("copy",e,t)},renameTo:function(e,t){return this._copyOp("rename",e,t)},getSubredditNames:function(){return this.subreddits.pluck("name")}}),r.multi.MyMultiCollection=Backbone.Collection.extend({url:"/api/multi/mine",model:r.multi.MultiReddit,comparator:function(e){return e.get("path").toString().toLowerCase()},parse:function(e){return _.map(e,function(e){return r.multi.multis.reify(e)})},pathByName:function(e){return"/user/"+r.config.logged+"/m/"+e}}),r.multi.GlobalMultiCache=Backbone.Collection.extend({model:r.multi.MultiReddit,touch:function(e){var t=this.get(e);return t||(t=new this.model({path:e}),this.add(t)),t},reify:function(e){var t=this.model.prototype.parse(e),n=this.touch(t.path);return n.set(t),n}}),r.multi.MultiSubredditItem=Backbone.View.extend({tagName:"li",template:_.template('<a href="/r/<%- sr_name %>">/r/<%- sr_name %></a><button class="remove-sr">x</button>'),events:{"click .remove-sr":"removeSubreddit"},render:function(){return this.$el.append(this.template({sr_name:this.model.get("name")})),r.config.logged&&(this.bubble=new r.multi.MultiSubscribeBubble({parent:this.$el,group:this.options.bubbleGroup,srName:this.model.get("name")})),this},remove:function(){this.bubble&&this.bubble.remove(),Backbone.View.prototype.remove.apply(this)},removeSubreddit:function(e){this.options.multi.removeSubreddit(this.model.get("name"))}}),r.multi.SubredditList=Backbone.View.extend({events:{"submit .add-sr":"addSubreddit"},initialize:function(){this.listenTo(this.model.subreddits,"add",this.addOne),this.listenTo(this.model.subreddits,"remove",this.removeOne),this.listenTo(this.model.subreddits,"sort",this.resort),new r.ui.ConfirmButton({el:this.$("button.delete")}),this.listenTo(this.model.subreddits,"add remove",function(){r.ui.showWorkingDeferred(this.$el,r.ui.refreshListing())}),this.model.on("request",function(e,t){r.ui.showWorkingDeferred(this.$el,t)},this),this.itemView=this.options.itemView||r.multi.MultiSubredditItem,this.itemViews={},this.bubbleGroup={},this.$(".subreddits").empty(),this.model.subreddits.each(this.addOne,this),this.options.summarized&&!this.summarized&&(this.summarized=new r.ui.Summarize(this.$(".subreddits"),-1))},addOne:function(e){var t=new this.itemView({model:e,multi:this.model,bubbleGroup:this.bubbleGroup});this.itemViews[e.id]=t,this.$(".subreddits").append(t.render().$el),this.summarized&&this.summarized.refresh()},resort:function(){this.model.subreddits.each(function(e){this.itemViews[e.id].$el.appendTo(this.$(".subreddits"))},this),this.summarized&&this.summarized.refresh()},removeOne:function(e){this.itemViews[e.id].remove(),delete this.itemViews[e.id],this.summarized&&this.summarized.refresh()},addSubreddit:function(e){e.preventDefault();var t=this.$(".add-sr .sr-name"),n=t.val();n=n.split(/[+,\-\s]+/),n=n.map(function(e){return e.replace(/^\/?r\//,"")}),n=_.compact(n);if(!n.length)return;t.val(""),this.$(".add-error").css("visibility","hidden"),this.model.addSubreddit(n,{wait:!0,success:_.bind(function(){this.$(".add-error").hide()},this),error:_.bind(function(e,t){var n=JSON.parse(t.responseText);this.$(".add-error").text(n.explanation).css("visibility","visible").show()},this)})}}),r.multi.MultiDetails=Backbone.View.extend({events:{'change [name="visibility"]':"setVisibility",'change [name="key_color"]':"setKeyColor",'change [name="icon_name"]':"setIconName","click .show-copy":"showCopyMulti","click .show-rename":"showRenameMulti","click .edit-description":"editDescription","click .edit-display-name":"editDisplayName","submit .description":"saveDescription","submit .display-name":"saveDisplayName","confirm .delete":"deleteMulti"},initialize:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model.subreddits,"add remove reset",this.render),this.addBubble=new r.multi.MultiAddNoticeBubble({parent:this.$(".add-sr .sr-name"),trackHover:!1})},initRecommendations:function(e){var t=new r.recommend.RecommendationList;this.recsView=new r.recommend.RecommendationsView({collection:t,el:e}),this.model.subreddits.isEmpty()||t.fetchForSrs(this.model.getSubredditNames()),this.listenTo(this.model.subreddits,"add remove reset",function(){var e=this.model.getSubredditNames();t.fetchForSrs(e)}),this.recsView.bind("recs:select",function(e){this.model.addSubreddit(e.srName)},this)},render:function(){var e=this.model.get("can_edit");return e&&(this.model.subreddits.isEmpty()?this.addBubble.show():this.addBubble.hide()),this.$el.toggleClass("readonly",!e),this.$el.toggleClass("public",this.model.get("visibility")=="public"),this.model.has("description_html")&&this.$(".description .usertext-body").html(this.model.get("description_html")),this.$(".count").text(this.model.subreddits.length),this},setVisibility:function(){this.model.save({visibility:this.$('[name="visibility"]:checked').val()})},setKeyColor:function(){this.model.save({key_color:this.$('[name="key_color"]').val()})},setIconName:function(){this.model.save({icon_name:this.$('[name="icon_name"]').val()})},showCopyMulti:function(){this.$("form.rename-multi").hide();var e=this.$("form.copy-multi");e.show().find(".multi-name").val(this.model.name()).select().focus(),this.copyForm||(this.copyForm=new r.multi.MultiCopyForm({el:e,navOnCreate:!0,sourceMulti:this.model}))},showRenameMulti:function(){this.$("form.copy-multi").hide();var e=this.$("form.rename-multi");e.show().find(".multi-name").val(this.model.name()).select().focus(),this.renameForm||(this.renameForm=new r.multi.MultiRenameForm({el:e,navOnCreate:!0,sourceMulti:this.model}))},deleteMulti:function(){this.model.destroy({success:function(){window.location="/"}})},editDescription:function(){show_edit_usertext($(".description"))},saveDescription:function(e){e.preventDefault(),this.model.save({description_md:this.$(".description textarea").val()},{success:_.bind(function(){hide_edit_usertext($(".description"))},this)})},editDisplayName:function(){show_edit_usertext($(".display-name"))},saveDisplayName:function(e){e.preventDefault(),this.model.save({display_name:this.$(".display-name textarea").val()},{success:_.bind(function(){hide_edit_usertext($(".display-name"))},this)})},focusAdd:function(){this.$(".add-sr .sr-name").focus()}}),r.multi.MultiAddNoticeBubble=r.ui.Bubble.extend({className:"multi-add-notice hover-bubble anchor-right",template:_.template("<h3><%- awesomeness_goes_here %></h3><p><%- add_multi_sr %></p>"),render:function(){this.$el.html(this.template({awesomeness_goes_here:r._("awesomeness goes here"),add_multi_sr:r._("add a subreddit to your multi.")}))}}),r.multi.SubscribeButton=Backbone.View.extend({events:{mouseenter:"createBubble"},createBubble:function(){if(this.bubble)return;this.bubble=new r.multi.MultiSubscribeBubble({parent:this.$el,group:this.options.bubbleGroup,srName:String(this.$el.data("sr_name"))});var e=this.$el.data("bubble_class");e&&(this.bubble.$el.removeClass("anchor-right"),this.bubble.$el.addClass(e)),this.bubble.queueShow()}}),r.multi.MultiSubscribeBubble=r.ui.Bubble.extend({className:"multi-selector hover-bubble anchor-right",template:_.template('<div class="title"><strong><%- title %></strong><a class="sr" href="/r/<%- sr_name %>">/r/<%- sr_name %></a></div><div class="throbber"></div>'),itemTemplate:_.template('<label><input class="add-to-multi" type="checkbox" data-path="<%- path %>" <%- checked %>><%- name %><a href="<%- path %>" target="_blank" title="<%- open_multi %>">&rsaquo;</a></label>'),itemCreateTemplate:_.template('<label><form class="create-multi"><input type="text" class="multi-name" placeholder="<%- create_msg %>"><div class="error create-multi-error"></div></form></label>'),events:{"click .add-to-multi":"toggleSubscribed"},initialize:function(){this.listenTo(this,"show",this.load),this.listenTo(r.multi.mine,"reset add",_.debounce(this.render,100)),r.ui.Bubble.prototype.initialize.apply(this)},load:function(){r.ui.showWorkingDeferred(this.$el,r.multi.mine.fetch())},render:function(){this.$el.html(this.template({title:r._("categorize"),sr_name:this.options.srName}));var e=$('<div class="multi-list">');r.multi.mine.chain().sortBy(function(e){return e.subreddits.getByName(this.options.srName)},this).each(function(t){e.append(this.itemTemplate({name:t.get("name"),path:t.get("path"),checked:t.subreddits.getByName(this.options.srName)?"checked":"",open_multi:r._("open this multi")}))},this),e.append(this.itemCreateTemplate({create_msg:r._("create a new multi")})),this.$el.append(e),this.createForm=new r.multi.MultiCreateForm({el:this.$("form.create-multi")})},toggleSubscribed:function(e){var t=$(e.target),n=r.multi.mine.get(t.data("path"));t.is(":checked")?n.addSubreddit(this.options.srName):n.removeSubreddit(this.options.srName)}}),r.multi.MultiCreateForm=Backbone.View.extend({events:{submit:"createMulti"},createMulti:function(e){e.preventDefault();var t=this.$("input.multi-name").val();t=$.trim(t);if(!t)return;var n=this._createMulti(t);n.done(_.bind(function(e){this.trigger("create",e),this.options.navOnCreate&&(window.location=e.get("path")+"#created")},this)).fail(_.bind(function(e){var t=JSON.parse(e.responseText);this.showError(t.explanation)},this)),r.ui.showWorkingDeferred(this.$el,n)},_createMulti:function(e){var t=new r.multi.MultiReddit({path:r.multi.mine.pathByName(e)},{isNew:!0}),n=new $.Deferred;return r.multi.mine.create(t,{wait:!0,success:_.bind(n.resolve,n),error:function(e,t){n.reject(t)}}),n},showError:function(e){this.$(".error").text(_.unescape(e)).show()},focus:function(){this.$(".multi-name").focus()}}),r.multi.MultiCopyForm=r.multi.MultiCreateForm.extend({_createMulti:function(e){return this.options.sourceMulti.copyTo(r.multi.mine,e)}}),r.multi.MultiRenameForm=r.multi.MultiCopyForm.extend({_createMulti:function(e){return this.options.sourceMulti.renameTo(r.multi.mine,e)}}),r.multi.ListingChooser=Backbone.View.extend({events:{"click .create button":"createClick","click .grippy":"toggleCollapsed"},initialize:function(){this.$el.addClass("initialized"),store.safeGet("ui.collapse.listingchooser")==1&&this.toggleCollapsed(!0),store.safeSet("ui.collapse.listingchooser");var e=this.$(".contents").height(),t=$("body").height();e>t&&$("body").css("padding-bottom",e-t+100)},createClick:function(e){this.$(".create").is(".expanded")||(e.preventDefault(),this.$(".create").addClass("expanded"),this.createForm=new r.multi.MultiCreateForm({el:this.$(".create form"),navOnCreate:!0}),this.createForm.focus())},toggleCollapsed:function(e){$("body").toggleClass("listing-chooser-collapsed",e),Backbone.ajax({type:"POST",url:"/api/set_left_bar_collapsed.json",data:{collapsed:$("body").is(".listing-chooser-collapsed")}})}}),r.filter={},r.filter.init=function(){var e=$(".filtered-details");if(e.length){var t=new r.filter.Filter({path:e.data("path")});e.find(".subreddits a").each(function(e,n){t.subreddits.add({name:$(n).data("name")})});var n=(new r.multi.SubredditList({model:t,summarized:!0,itemView:r.filter.FilteredSubredditItem,el:e})).render()}},r.filter.Filter=r.multi.MultiReddit.extend({url:function(){return r.utils.joinURLs("/api/filter",this.id)}}),r.filter.FilteredSubredditItem=r.multi.MultiSubredditItem.extend({render:function(){return this.$el.append(this.template({sr_name:this.model.get("name")})),this}}),r.recommend={init:function(){$(".explore-item").each(function(e,t){new r.recommend.ExploreItem({el:t})})}},r.recommend.Recommendation=Backbone.Model.extend(),r.recommend.RecommendationList=Backbone.Collection.extend({model:r.recommend.Recommendation,srNames:[],dismissed:[],fetchForSrs:function(e){if(!e.length){this.srNames=[],this.reset([]);return}this.srNames=e,this.fetchRecs()},fetchNewRecs:function(){var e=this.pluck("sr_name");this.dismissed=_.union(this.dismissed,e),this.fetchRecs()},fetchRecs:function(){var e="/api/recommend/sr/"+this.srNames.join(",");this.fetch({url:e,data:{omit:this.dismissed.join(",")},reset:!0,error:_.bind(function(){this.reset([])},this)})},clearHistory:function(){this.dismissed=[]}}),r.recommend.RecommendationsView=Backbone.View.extend({collection:r.recommend.RecommendationList,tagName:"div",itemTemplate:_.template('<li class="rec-item"><a href="/r/<%- sr_name %>" title="<%- sr_name %>" target="_blank">/r/<%- sr_name %></a><button class="add add-rec" data-srname="<%- sr_name %>"></button></li>'),initialize:function(){this.listenTo(this.collection,"add remove reset",this.render)},events:{"click .add-rec":"onAddClick","click .more":"showMore","click .reset":"resetRecommendations"},render:function(){this.$(".recommendations").empty();if(this.collection.models.length>0){this.$(".recs").show(),this.$(".endoflist").hide();var e=this.$el,t=this;this.collection.each(function(e){this.$(".recommendations").append(t.itemTemplate({sr_name:e.get("sr_name")}))},this),this.$el.css({opacity:1})}else this.collection.dismissed.length>0?(this.$(".recs").hide(),this.$(".endoflist").show()):this.$el.css({opacity:0});return this},resetRecommendations:function(){this.collection.clearHistory(),this.collection.fetchRecs()},onAddClick:function(e){var t=$(e.target).data("srname");this.trigger("recs:select",{srName:t})},showMore:function(e){this.collection.fetchNewRecs()}}),r.recommend.ExploreItem=Backbone.View.extend({events:{"click .explore-feedback-dismiss":"dismissSubreddit","click a":"recordClick"},dismissSubreddit:function(e){var t=$(e.target).closest(".explore-item"),n=t.data("sr_name"),i=t.data("src");r.ajax({type:"POST",url:"/api/recommend/feedback",data:{type:"dis",srnames:n,src:i,page:"explore"}}),this.$(".explore-feedback-dismiss").css({"font-weight":"bold"}),$(this.el).fadeOut("fast")},recordClick:function(e){var t=$(e.target).closest(".explore-item"),n=t.data("sr_name"),i=t.data("src");r.ajax({type:"POST",url:"/api/recommend/feedback",data:{type:"clk",srnames:n,src:i,page:"explore"}})}}),r.actionForm={init:function(){$("div.content").on("click",".action-thing, .cancel-action-thing",this.toggleActionForm.bind(this)),$("div.content").on("submit",".action-form",this.submitAction.bind(this))},toggleActionForm:function(e){var t=e.target,n=$(t);if(r.access.isLinkRestricted(t))return;var i=n.thing(),s=i.find("> .entry .action-form"),o=n.data("action-form");e.stopPropagation(),e.preventDefault();if(s.length>0)n.parents(".drop-choices").length?s.show():s.toggle();else{var u=$(o),a=u.clone(),f=i.find("> .entry .buttons"),l=i.thing_id();a.attr("id","action-thing-"+l),a.find('input[name="thing_id"]').val(l),a.insertAfter(f),a.show()}},submitAction:function(e){var t=$(e.target).thing().find(".action-form"),n=t.data("form-action");return post_pseudo_form(t,n)}},r.fraud={init:function(){$("div.content").on("click",".action-thing",this.showReason.bind(this)),$("div.content").on("change",".fraud-action-form input",this.validate.bind(this))},validate:function(e){var t=$(e.target),n=t.parents("form"),r=n.find('[type="submit"]'),i=n.find("input[name=refund]"),s=n.find("input[name=fraud]:checked").val(),o=s==="True";o?i.removeAttr("disabled").focus():i.prop("checked",!1).attr("disabled","disabled"),s?r.removeAttr("disabled"):r.attr("disabled","disabled")},showReason:function(e){var t=$(e.target),n=t.thing(),r=n.find("> .entry .action-form"),i=r.find(".fraud-reason"),s=t.attr("title");i.text(s)}},r.report={init:function(){$("div.content").on("change",".report-action-form input",this.validate.bind(this)),$("div.content").on("click",".reported-stamp.has-reasons",function(e){r.actions.trigger("report_list",{target:e.target})}),r.actions.on("report_list",function(e){r.access.isLinkRestricted(e.target)&&e.stopPropagation()}),r.actions.on("report_list:success",function(e){r.report.toggleReasons(e)})},toggleReasons:function(e){$(e.target).parent().find(".report-reasons").toggle()},validate:function(e){var t=$(e.target).thing(),n=t.find("> .entry .report-action-form"),r=n.find('[type="submit"]'),i=n.find("[name=reason]:checked"),s=n.find('[name="other_reason"]'),o=i.val()==="other";r.removeAttr("disabled"),o?s.removeAttr("disabled").focus():s.attr("disabled","disabled")}},$(function(){r.actionForm.init(),r.fraud.init(),r.report.init()}),function(e,t){function o(e){return/^https?:\/\//.test(e)?e:"https://"+location.host+"/"+e.replace(/^\//,"")}function u(e){var t={live:!1,parent:!1,media:location.host,created:(new Date).toISOString(),uuid:r.uuid()};return e=_.defaults({},e,t),e.comment=o(e.comment),e.link=o(e.link),_.extend({html:n(e)},e)}function a(e){return JSON.stringify(_.pick(e,"live","parent"))}function f(e,t){var n=e.$.find("#embed-preview"),r=typeof t!="string"?a(t):t;window.rembeddit.preview=!0,window.rembeddit.init({track:!1},function(){var e=0,t=setInterval(function(){var i=n.find("iframe:last-child"),s=i.height();e!==s?e=s:(clearInterval(t),n.find("iframe").hide().last().show().attr("data-options",r),n.css("height","auto"))},100)})}var n=_.template(_.unescape(r.config.embed_inject_template),!1,{escape:/%\(([^\n\)]+)\)s/g}),i=_.template('<h4  class="modal-title">'+_.escape(r._("Embed preview:"))+"</h4>"+'<div id="embed-preview">'+"<%= html %>"+"</div>"+"<% if (!root) { %>"+'<div class="c-checkbox">'+'<label class="remember">'+'<input type="checkbox" name="parent" <% if (parent) { %> checked <% } %>>'+_.escape(r._("Include parent comment."))+"</label>"+"</div>"+"<% } %>"+'<div class="c-checkbox">'+'<input type="checkbox" name="live" <% if (!live) { %> checked <% } %> data-rerender="false" id="live-edits">'+'<label for="live-edits">'+_.escape(r._("Do not show comment if edited."))+"&nbsp;"+'<a href="javascript: void 0;" class="c-toggle" data-toggle="#live-help">'+_.escape(r._("Learn more"))+"</a>"+"</label>"+'<div id="live-help" class="c-help-block c-toggle-content">'+"<p>"+_.escape(r._("When checked, if an embedded comment is later edited, the embedded comment text will be replaced by a link back to the current version of the comment on reddit."))+"</p>"+"<p>"+'<a href="https://www.reddit.com/r/reddit.com/wiki/embeds">'+_.escape(r._("This parameter can be changed after embedding."))+"</a>"+"</p>"+"</div>"+"</div>"),s=_.template('<h4 class="modal-title"><label for="embed-code">'+_.escape(r._("Copy this code and paste it into your website:"))+"</label>"+"</h4>"+'<textarea class="c-form-control" id="embed-code" rows="3" readonly>'+"<%- html %>"+"</textarea>"+'<h4 class="modal-title embed-modal-facebook-code" id="facebook-embed">'+'<label for="embed-code">'+_.escape(r._("Show Facebook Instant Article Embed code"))+"</label>"+"</h4>"+'<textarea class="c-form-control" id="facebook-embed-code" rows="3" readonly hidden>'+'<figure class="op-interactive">'+"<iframe>"+"<%- html %>"+"</iframe>"+"</figure>"+"</textarea>"),l=new window.rembeddit.PixelTracker({url:r.config.eventtracker_url});e("body").on("click",".embed-comment",function(e){r.actions.trigger("embed",{target:e.target})}),r.actions.on("embed:success",function(n){function b(t){e(this).select().one("mouseup",function(e){e.preventDefault()});if(!y){var n=o.data(),i=u(n),s=new Date,a=s.getTime();l.send({event_topic:"embed",event_name:"embed_create",event_ts:a,event_ts_utc_offset:s.getTimezoneOffset()/-60,embed_type:i.parent?"comment_and_parent":"comment",user_agent:navigator.userAgent,user_id:r.config.user_id,logged_in_status:!!r.config.logged,sr_id:r.utils.fullnameToId(r.config.cur_site),sr_name:r.config.post_site,embed_id:r.utils.fullnameToId(o.thing_id()),embed_created_ts:a,embed_control:i.live,embed_host_url:location.href,embed_version:window.rembeddit.VERSION}),y=!0}}var o=e(n.target),c=o.data(),h=u(c),p=new r.ui.Popup({className:"embed-modal",content:i(h),footer:s(h)}),d=p.$.find("#embed-code"),v=p.$.find("#facebook-embed-code"),m=p.$.find("#embed-preview"),g=p.$.find("#facebook-embed"),y=!1;p.$.find("[data-toggle]").togglable(),p.$.on("change",'[type="checkbox"]',function(n){var i=n.target.name,s=e(n.target),l=o.data(i);l===t&&(l=h[i]),o.data(n.target.name,!l);var c=o.data(),g=u(c),y=a(g),b=g.html,w=m.height();d.val(b),v.val('<figure class="op-interactive"><iframe>'+b+"</iframe></figure>");if(s.data("rerender")!==!1){var E='[data-options="'+r.utils.escapeSelector(y)+'"]',S=m.find(E);S.length?S.show().siblings().hide():(m.height(w).append(e(b).hide()),f(p,y))}}),v.on("focus",b),d.on("focus",b),g.on("click",function(e){e.preventDefault(),p.$.find("#facebook-embed-code").show()}),p.on("closed.r.popup",function(){p.$.remove()}),p.on("show.r.popup",function(){m.find(".reddit-embed").hide()}),p.on("opened.r.popup",function(){f(p,h)}),p.show()})}(window.jQuery),!function(e){"use strict";var t=_.template('<div class="post-sharing-option post-sharing-option-<%- name %>" data-post-sharing-option="<%- name %>"><div class="c-tooltip" role="tooltip"><div class="tooltip-arrow bottom"></div><div class="tooltip-inner"><%- tooltip %></div></div></div>'),n=_.template('<div class="c-form-control-feedback-wrapper" ref="<%- ref %>"><span class="c-form-control-feedback c-form-control-feedback-throbber"></span><span class="c-form-control-feedback c-form-control-feedback-error"></span><span class="c-form-control-feedback c-form-control-feedback-success"></span></div>'),r=_.template('<a href="javascript: void 0;" class="c-close c-hide-text">'+_.escape(e._("close this window"))+"</a>"+'<div class="post-sharing-main post-sharing-form" ref="$mainForm">'+"<% if (options) { %>"+'<div class="c-form-group">'+'<div class="post-sharing-label">'+_.escape(e._("Share with:"))+"</div>"+'<div class="post-sharing-options">'+"<% options.forEach(function(option) { %>"+"<%= option %>"+"<% }) %>"+"</div>"+"</div>"+"<% } %>"+"<% if (link) { %>"+'<div class="c-form-group">'+'<div class="post-sharing-label">'+_.escape(e._("Link:"))+"</div>"+'<input class="post-sharing-link-input c-form-control" '+'ref="$postSharingLinkInput" '+'name="link" '+'type="text" '+"readonly "+'value="<%- link %>">'+"</div>"+"<% } %> "+"</div>"+'<div class="post-sharing-email-form post-sharing-form" ref="$emailForm">'+'<p class="post-sharing-label">'+'<span ref="$emailFormEmailLabel">'+_.escape(e._("Share via email as %(username)s").format({username:e.config.logged}))+"</span>"+'<span ref="$emailFormPMLabel">'+_.escape(e._("Share via private message on reddit as %(username)s").format({username:e.config.logged}))+"</span>"+"</p>"+'<div class="c-form-group">'+'<input class="post-sharing-recipient-input c-form-control" '+'ref="$shareTo" '+'name="recipient" type="text" '+'placeholder="name@example.com, name@example.com" '+'data-placeholder-email="name@example.com, name@example.com" '+'data-placeholder-reddit-pm="username">'+n({ref:"$shareToFeedback"})+"</div>"+'<div class="c-form-group">'+'<textarea class="post-sharing-message-input c-form-control" '+'ref="$shareMessage" '+'name="message" '+'placeholder="'+_.escape(e._("add optional message"))+'"></textarea>'+n({ref:"$messageFeedback"})+"</div>"+'<div class="c-form-group">'+'<div class="post-sharing-buttons">'+'<button class="post-sharing-submit c-btn c-btn-primary c-pull-right">'+_.escape(e._("send"))+"</button>"+'<button class="post-sharing-cancel c-btn c-btn-secondary c-pull-right">'+_.escape(e._("cancel"))+"</button>"+"</div>"+n({ref:"$requestStateFeedback"})+'<div class="post-sharing-shareplane" ref="$shareplane">'+_.escape(e._("sent!"))+"</div>"+"</div>"+"</div>"),i=Backbone.Model.extend({defaults:function(){return{errors:[],options:null,requestState:"UNSENT",selectedOption:null,link:null}}});e.ui.PostSharing=Backbone.View.extend({animationSpeed:200,_template:r,_model:i,events:{"click .post-sharing-link-input":"selectLinkInputText","copy .post-sharing-link-input":"fireCopyEvent","click .post-sharing-option":"setPostSharingOption","click .post-sharing-cancel":"clearPostSharingOption","click .post-sharing-submit":"shareToEmail","click .c-close":"close"},initialize:function(){var e=this.options.$thing,t=e.data("fullname"),n=t.split("_")[1],r=e.find(".entry a.title").text(),i=e.find(".entry a.comments").attr("href");this.thingData={fullname:t,title:r,link:i};var s=this.options.props||{};s.link=this.getShareLink("link"),this.state=new this._model(s),this.listenTo(this.state,"change",this.render),this.initialRender()},initialRender:function(){var e=this.state.toJSON();e.options&&(e.options=e.options.map(t)),this.$el.html(this._template(e)),this.refs={};var n=this.$el.find("[ref]");n.toArray().forEach(function(e){var t=$(e),n=t.attr("ref");this.refs[n]=t},this),this.refs.$mainForm.css("display","block"),this.render()},show:function(){this.$el.slideDown(this.animationSpeed,"swing",function(){this.trigger("show",this),this.selectLinkInputText()}.bind(this))},hide:function(){this.$el.slideUp(this.animationSpeed,"swing",function(){this.trigger("hide")}.bind(this))},unmount:function(){this.remove(),this.trigger("unmount",this)},close:function(){this.once("hide",this.unmount.bind(this)),this.hide(),this.trigger("close")},setPostSharingOption:function(e){var t=$(e.target).closest(".post-sharing-option"),n=t.data("post-sharing-option");switch(n){case"email":case"reddit-pm":return this.state.set({selectedOption:n});case"facebook":return this.shareToFacebook();case"twitter":return this.shareToTwitter();case"tumblr":return this.shareToTumblr();case"embed":return this.shareEmbed();default:this.close()}},getShareLink:function(t){var n={ref:"share",ref_source:t};return e.utils.replaceUrlParams(this.thingData.link,n)},shareEmbed:function(){var t="https://embed.redditmedia.com/widgets/embed",n=this.getShareLink("embed"),r={url:n},i=e.utils.replaceUrlParams(t,r);this.openWebIntent(i,"embed")},shareToFacebook:function(){var t=this.getShareLink("facebook"),n=e.config.currentOrigin+"/share/close",r={app_id:e.config.facebook_app_id,display:"popup",link:t,description:this.thingData.title,redirect_uri:n},i=e.utils.replaceUrlParams("https://www.facebook.com/dialog/feed",r);this.openWebIntent(i,"facebook")},shareToTwitter:function(){var t=this.getShareLink("twitter"),n="reddit",r=this.thingData.title,i=25,s=[r,"via","@"+n].join(" "),o=s.length+i,u=140,a=10,f=r.length-(o-u)-1;s.length>u&&(r=r.slice(0,Math.max(a,f)),r=r.trim()+"");var l={url:t,text:r,via:n},c=e.utils.replaceUrlParams("https://twitter.com/intent/tweet",l);this.openWebIntent(c,"twitter")},shareToTumblr:function(){var t=this.getShareLink("tumblr"),n=this.thingData.title,r={canonicalUrl:t,posttype:"link",title:n},i=e.utils.replaceUrlParams("https://www.tumblr.com/widgets/share/tool",r);this.openWebIntent(i,"tumblr")},openWebIntent:function(e,t){var n=window.innerWidth,r=window.innerHeight,i=550,s=420,o={height:s,width:i,left:n/2-i/2,top:r/2-s/2},u=Object.keys(o).map(function(e){return e+"="+o[e]}).join(",");window.open(e,t,u),this.trigger("web-intent",t)},shareToEmail:function(){this.state.set({requestState:"LOADING"}),$.request("share",{share_from:"",replyto:"",share_to:this.refs.$shareTo.val(),message:this.refs.$shareMessage.val(),parent:this.thingData.fullname,api_type:"json"},function(e){if(this.state.get("requestState")!=="LOADING")return;var t=e.json;if(!t)throw"share api response error";t.errors.length?this.state.set({errors:t.errors,requestState:"DONE"}):(this.state.set({errors:[],requestState:"DONE"}),setTimeout(function(){this.close()}.bind(this),1500))}.bind(this))},clearPostSharingOption:function(e){this.state.set({requestState:"UNSENT",selectedOption:null})},selectLinkInputText:function(){this.refs.$postSharingLinkInput.focus().select()},fireCopyEvent:function(){this.trigger("link","copy")},getFeedbackRef:function(e){switch(e){case"BAD_EMAIL":case"BAD_EMAILS":case"NO_EMAILS":return this.refs.$shareToFeedback;case"TOO_LONG":return this.refs.$messageFeedback;default:return this.refs.$requestStateFeedback}},onOpenEmailForm:function(){this.refs.$shareTo.focus()},render:function(){var e=this.state.get("requestState"),t=this.state.get("errors"),n=this.state.changed,r=this.state.get("selectedOption");"selectedOption"in n&&(this.refs.$emailFormEmailLabel.toggle(r==="email"),this.refs.$emailFormPMLabel.toggle(r==="reddit-pm"),this.refs.$shareTo.attr("placeholder",this.refs.$shareTo.data("placeholder-"+r)),r==="email"||r==="reddit-pm"?(this.refs.$mainForm.slideUp("fast"),this.refs.$emailForm.slideDown("fast",this.onOpenEmailForm.bind(this))):(this.refs.$mainForm.slideDown("fast"),this.refs.$emailForm.slideUp("fast")));if(r==="email"||r==="reddit-pm")this.refs.$shareToFeedback.stateify("clear"),this.refs.$messageFeedback.stateify("clear"),this.refs.$requestStateFeedback.stateify("clear"),t.length&&t.forEach(function(e){var t=e[0],n=e[1],r=this.getFeedbackRef(t);r.stateify("set","error",n)},this),e==="LOADING"?this.refs.$requestStateFeedback.stateify("set","loading"):e==="DONE"&&!t.length&&(this.refs.$requestStateFeedback.stateify("set","success"),this.refs.$emailForm.addClass("shared"))}}),$(function(){$("body").on("click",".post-sharing-button",function(t){t.preventDefault(),e.actions.trigger("share",{target:t.target})}),e.actions.on("share:success",function(t){var n=$(t.target),r=n.closest(".thing"),i=r.thing_id();if(e.ui.activeShareMenu&&e.ui.activeShareMenu.$el.is(":visible")){var s=e.ui.activeShareMenu.options.$thing[0]===r[0];e.ui.activeShareMenu.close();if(s)return}var o=[{name:"facebook",tooltip:e._("Share to %(name)s").format({name:"Facebook"})},{name:"twitter",tooltip:e._("Share to %(name)s").format({name:"Twitter"})},{name:"tumblr",tooltip:e._("Share to %(name)s").format({name:"Tumblr"})}];e.config.logged&&!e.config.user_in_timeout&&e.config.email_verified&&o.push({name:"email",tooltip:e._("Email to a Friend")}),e.config.logged&&!e.config.user_in_timeout&&o.push({name:"reddit-pm",tooltip:e._("Private Message a Friend on Reddit")}),e.config.feature_post_embed&&o.push({name:"embed",tooltip:e._("Embed Post")});var u=new e.ui.PostSharing({className:"post-sharing",$thing:r,props:{options:o}});r.find(".entry .buttons").after(u.el),e.ui.activeShareMenu=u,u.on("show",function(){e.analytics.fireGAEvent("post-sharing","open",i)}),u.on("unmount",function(){e.ui.activeShareMenu===u&&(e.ui.activeShareMenu=null)}),u.on("close",function(){var t=u.state.get("selectedOption")?"close":"cancel";e.analytics.fireGAEvent("post-sharing",t,i)}),u.on("web-intent",function(t){e.analytics.fireGAEvent("post-sharing","share-to-"+t,i)}),u.on("link",function(t){e.analytics.fireGAEvent("post-sharing","link-"+t,i)}),u.show()})})}(r),!function(e){function r(e){return e.tagName==="A"}function i(e){try{var t=e.$el.find(".entry")[0],n=e.$button[0],r,i,s=new MutationObserver(function(e){e.forEach(function(e){e.addedNodes.length&&$(e.addedNodes[0]).is(".expando-button")&&(r=e.addedNodes[0]),e.removedNodes.length&&e.removedNodes[0]===n&&(i=n),r&&i&&(s.disconnect(),$(r).before(i).remove())})});s.observe(t,{childList:!0}),setTimeout(function(){s.disconnect()},5e3)}catch(o){}}var t=[".linklisting",".organic-listing",".selfserve-subreddit-links"],n=[".expando-button",".expand-media"],s=Backbone.View.extend({buttonSelector:".expando-button",expandoSelector:".expando",expanded:!1,triggeredBy:undefined,events:{"click .expando-button":"toggleExpando","click .expand-media":"toggleExpandoFromLink"},constructor:function(){Backbone.View.prototype.constructor.apply(this,_.toArray(arguments)),this.afterInitialize()},initialize:function(){this.$button=this.$el.find(this.buttonSelector),this.$expando=this.$el.find(this.expandoSelector),this.setTriggeredBy(this.options.triggeredBy)},afterInitialize:function(){if(this.triggeredBy&&$(this.triggeredBy.target).closest(".expando-button").length>0&&!e.utils.isSimpleClickEvent(this.triggeredBy))return;this.expand()},setTriggeredBy:function(e){this.triggeredBy=e},toggleExpando:function(e){if(r(e.target))return;this.setTriggeredBy(e),this.expanded?this.collapse():this.expand()},toggleExpandoFromLink:function(t){var n=this.$el.find(this.buttonSelector);if(r(n))return;if(!e.utils.isSimpleClickEvent(t))return;this.setTriggeredBy(t),this.expanded?this.collapse():this.expand()},expand:function(){this.$button.addClass("expanded").removeClass("collapsed"),this.expanded=!0,this.show()},show:function(){this.$expando.show()},collapse:function(){this.$button.addClass("collapsed").removeClass("expanded"),this.expanded=!1,this.hide()},hide:function(){this.$expando.hide()}}),o=s.extend({events:_.extend({},s.prototype.events,{"click .open-expando":"expand"}),_expandoEventData:{},_timings:{initialize:null,loaded:null},initialize:function(){s.prototype.initialize
.call(this),this._timings.initialize=new Date,this.cachedHTML=this.$expando.data("cachedhtml")||"",this.loaded=!!this.cachedHTML,this.id=this.$el.thing_id(),this.isNSFW=this.$el.hasClass("over18"),this.isSpoiler=this.$el.hasClass("spoiler"),this.linkType=$.getThingType(this.$el),this.autoexpanded=this.options.triggeredBy==="autoexpand",this.author=this.$el.data("author"),this.autoexpanded&&(i(this),this.loaded=!0,this.cachedHTML=this.$expando.html());var e=$.Event("expando:create",{expando:this});$(document.body).trigger(e);if(e.isDefaultPrevented())return;$(document).on("hide_thing_"+this.id,function(){this.setTriggeredBy("hide"),this.collapse()}.bind(this));var t=$.getLinkURL(this.$el),n={linkIsNSFW:this.isNSFW,linkIsSpoiler:this.isSpoiler,linkType:this.linkType,linkURL:t},r=this.$el.data();"fullname"in r&&(n.linkFullname=r.fullname),"timestamp"in r&&(n.linkCreated=r.timestamp),"domain"in r&&(n.linkDomain=r.domain),"authorFullname"in r&&(n.authorFullname=r.authorFullname),"subreddit"in r&&(n.subredditName=r.subreddit),"subredditFullname"in r&&(n.subredditFullname=r.subredditFullname),"context"in r&&(n.linkContext=r.context),"targetCrosspostDepth"in r&&(n.targetCrosspostDepth=r.targetCrosspostDepth,n.targetParentFullname=r.targetParentFullname,n.targetRootFullname=r.targetRootFullname,n.targetRootType=r.targetRootType),$.extend(this._expandoEventData,n)},setTriggeredBy:function(e){o.__super__.setTriggeredBy.call(this,e),delete this._expandoEventData.triggerElement;var t=$(this.triggeredBy&&this.triggeredBy.target).closest(n.join(", "));t.is(".expando-button")?this._expandoEventData.triggeredBy=this.triggeredBy.type+"-expando-button":t.is(".expand-media")?this._expandoEventData.triggeredBy=this.triggeredBy.type+"-thumbnail":typeof this.triggeredBy=="string"&&(this._expandoEventData.triggeredBy=this.triggeredBy)},collapse:function(){o.__super__.collapse.call(this),this.autoexpanded=!1},show:function(){this.loaded&&!this._timings.loaded&&(this._timings.loaded=new Date);if(!this.loaded){var t={link_id:this.id};return $.request("expando",t,function(e){var t=$.unsafe(e);this.cachedHTML+=t,this.loaded=!0,this.show()}.bind(this),!1,"html",!0)}var n=$.Event("expando:show",{expando:this});this.$el.trigger(n);if(n.isDefaultPrevented())return;this.autoexpanded||this.$expando.html(this.cachedHTML);if(!this._expandoEventData.provider){var r=this.$expando.children();r.is("iframe")?this._expandoEventData.provider="embedly":this._expandoEventData.provider="reddit"}this.showExpandoContent(),this.fireExpandEvent(),e.analytics.fireRetargetingPixel(this.$el)},showExpandoContent:function(){this.$expando.removeClass("expando-uninitialized"),this.$expando.show()},fireExpandEvent:function(){this._expandoEventData.timingLoaded||this._timings.loaded&&this._timings.initialize&&(this._expandoEventData.timingLoaded=this._timings.loaded-this._timings.initialize);if(this.options.triggeredBy==="lightbox"){e.analytics.expandoEvent("expand_default",this._expandoEventData);return}this.autoexpanded?(this.autoexpanded=!1,e.analytics.expandoEvent("expand_default",this._expandoEventData)):e.analytics.expandoEvent("expand_user",this._expandoEventData)},hide:function(){var e=$.Event("expando:hide",{expando:this});this.$el.trigger(e);if(e.isDefaultPrevented())return;this.hideExpandoContent(),this.fireCollapseEvent()},hideExpandoContent:function(){this.$expando.hide().empty()},fireCollapseEvent:function(){e.analytics.expandoEvent("collapse_user",this._expandoEventData)}}),u=s.extend({buttonSelector:".search-expando-button",expandoSelector:".search-expando",events:{"click .search-expando-button":"toggleExpando"},afterInitialize:function(){var e=this.$expando.innerHeight(),t=this.$expando.find(".search-result-body").innerHeight();t<=e?(this.$button.remove(),this.$expando.removeClass("collapsed"),this.undelegateEvents()):this.options.expanded&&this.expand()},show:function(){this.$expando.removeClass("collapsed")},hide:function(){this.$expando.addClass("collapsed")}});$(function(){function i(e,t){if(e.data("expando"))return;e.data("expando",!0);var n=new o({el:e[0],triggeredBy:t})}function s(t){var n=$(t.target),i=n.thing(),s=i.find(".expando-button")[0];if(r(s))return;if(!e.utils.isSimpleClickEvent(t))return;e.actions.trigger("expando",{target:i[0],triggeredBy:t}),t.preventDefault()}e.hooks.get("expando-pre-init").call(),e.actions.on("expando:success",function(e){i($(e.target),e.triggeredBy)}),$(t.join(",")).on("click",n.join(","),s),$(".link .expando-button.expanded,.comments-page:not(.comment-permalink-page) .link.self").filter(":not(.seo-comments-recommendations .link)").each(function(){var t=$(this).closest(".thing");e.actions.trigger("expando",{target:t[0],triggeredBy:"autoexpand"})});var a=$(".search-expando-button").closest(".search-result-link");a.each(function(){new u({el:this})})})}(r),r.templates.set([{style:"html",name:"ui/formbar",template:'<form class="form-bar c-clearfix">\n  <div class="md-container-small">\n    <div class="md">\n      <p class="form-bar-text"><%- thing.text %></p>\n    </div>\n    \n    <button type="submit" class="c-btn c-btn-primary"><%- thing.buttonLabel %></button>\n  </div>\n  <input type="hidden" name="<%- thing.key %>" value="<%- thing.value %>">\n</form>\n'}]),!function(e,t){e.ui.FormBar=Backbone.View.extend({templateName:"ui/formbar",defaults:{text:"",buttonLabel:"",key:"",value:""},events:{"submit .form-bar":"onSubmit"},initialize:function(){var e=_.defaults(this.options,this.defaults);this.render(e)},render:function(t){var n=e.templates.make(this.templateName,t);this.$el.html(n)},onSubmit:function(e){e.preventDefault(),this.trigger("submit",get_form_fields(e.target))}})}(r),r.templates.set([{style:"html",name:"expando/gate",template:'<div class="expando-gate\n            expando-gate--<%- thing.reason %>\n            expando-gate--<%- thing.style %>\n            expando-gate--<%- thing.type %>"\n        style="width: <%- thing.width %>; height: <%- thing.height %>">\n    <div class="expando-gate__controls">\n        <button class="expando-gate__show-once"><%- thing.buttonLabel %></button>\n        <% if (thing.text) { %>\n            <p class="expando-gate__text"><%- thing.text %></p>\n        <% } %>\n    </div>\n</div>\n'}]),!function(e,t){var n={over18Listing:!1,noProfanity:!0,nsfwMediaAcknowledged:!1,loggedIn:!1};e.hooks.get("setup").register(function(){n.over18Listing=e.config.listing_over_18,n.noProfanity=e.config.pref_no_profanity,n.nsfwMediaAcknowledged=e.config.nsfw_media_acknowledged,n.loggedIn=!!e.config.logged});var r=e.ui.FormBar.extend({doneString:e._("We will ask before showing NSFW media."),defaults:{text:"",buttonLabel:"",key:"show_nsfw_media",value:""},render:function(e){this._lastRenderProps=e,r.__super__.render.call(this,e)},onSubmit:function(e){r.__super__.onSubmit.call(this,e);var t=_.defaults({text:this.doneString},this._lastRenderProps);this.render(t),this.$el.addClass("expando--interstitial-complete"),this.$el.find("button").remove(),this.$el.find("form").attr("disabled",!0)}}),i=Backbone.View.extend({templateName:"expando/gate",events:{"click .expando-gate":"onClick","click .expando-gate__text":"onTextClick"},defaults:{buttonLabel:"",text:"",type:"normal",style:"interstitial"},initialize:function(){this.render(this.options)},render:function(t){t=_.defaults(t,this.defaults);var n=e.templates.make(this.templateName,t);this.$el.html(n)},onClick:function(e){e.preventDefault(),this.trigger("click:button")},onTextClick:function(e){e.preventDefault(),e.stopPropagation(),this.trigger("click:text")}}),s=Backbone.View.extend({strings:{normal:e._("Always show NSFW media?"),changedToShow:e._("Ok, we changed your preferences to always show NSFW media."),changedToShowLabel:e._("Undo"),warning:e._("Your account is set up to always show this content in the future."),alwaysAsk:e._("Change your preferences to hide NSFW media?"),alwaysAskLabel:e._("Hide NSFW"),nsfwButtonLabel:e._("Click to see NSFW"),spoilerButtonLabel:e._("Click to see spoiler"),comboButtonLabel:e._("Click to see NSFW spoiler")},initialize:function(){console.log(this.options);var e=this.options.width,t=this.options.height,r=this.options.isOverlay,s=this.options.isWarning,o=this.options.isNSFW,u=this.options.isSpoiler,a=this.options.isSelfText;this.isOverlay=r,this.isWarning=s,this.isNSFW=o,this.isSpoiler=u,e=this.isSpoiler&&a?!1:e,t=this.isSpoiler&&a?!1:t;var f;o&&u?f=this.strings.comboButtonLabel:o?f=this.strings.nsfwButtonLabel:u&&(f=this.strings.spoilerButtonLabel);var l={width:e?e+"px":"100%",height:t?t+"px":"100%",style:r?"overlay":"interstitial",type:s?"warning":"normal",reason:o?"nsfw":"spoiler",buttonLabel:f};n.loggedIn&&this.isNSFW&&(this.isWarning?l.text=this.strings.warning:l.text=this.strings.normal),this.interstitial=new i(l),this.$el.append(this.interstitial.el),this.listenTo(this.interstitial,"click:button",this.onShowOnce);if(!n.loggedIn)return;this.isNSFW&&this.isWarning?this.initFormBar():this.listenTo(this.interstitial,"click:text",this.onShowAlways)},initFormBar:function(){var e,t;this.isWarning?(e=this.strings.alwaysAsk,t=this.strings.alwaysAskLabel):(e=this.strings.changedToShow,t=this.strings.changedToShowLabel),this.formBar=new r({text:e,buttonLabel:t,value:"off"}),this.$el.append(this.formBar.el),this.listenTo(this.formBar,"submit",this.updatePref)},onShowOnce:function(){n.nsfwMediaAcknowledged?this.show():(n.nsfwMediaAcknowledged=!0,this._updateNsfwMediaPrefs({},this.show.bind(this)))},onShowAlways:function(){this.updatePref({show_nsfw_media:"on"}),this.initFormBar()},updatePref:function(e){n.noProfanity=e.show_nsfw_media==="off",this._updateNsfwMediaPrefs(e,function(){e.show_nsfw_media==="on"&&this.show()}.bind(this))},_updateNsfwMediaPrefs:function(e,t){$.request("set_nsfw_media_pref",e,function(e){t&&t()},!1,"json",!1)},show:function(){this.trigger("show"),this.isOverlay?this.interstitial.$el.fadeOut():this.interstitial.$el.remove()}});e.hooks.get("expando-pre-init").register(function(){$(document.body).on("expando:create",function(t){function a(e){e.preventDefault(),r.autoexpanded||r.$expando.html(r.cachedHTML);var t=r.$expando,i=!!t.find(".crosspost-preview").length,o=i?t.find(".crosspost-preview-content").children():t.children(),a=o.width(),f=o.height(),c=r.linkType!="self"&&o.hasClass("media-preview"),h=!n.noProfanity;u=new s({width:a,height:f,isOverlay:c,isWarning:h,isNSFW:r.isNSFW,isSpoiler:r.isSpoiler,isSelfText:r.linkType=="self"}),r.$expando.addClass("expando--with-interstitial"),r.listenTo(u,"show",l),u.isOverlay?o.append(u.el):t.html(u.el),r.showExpandoContent()}function f(e){e.preventDefault(),r.hideExpandoContent()}function l(){var e=$.Event("interstitial:destroy",{expando:r});$(document.body).trigger(e),r.stopListening(u,"show",l),r.$expando.removeClass("expando--with-interstitial"),u.isOverlay||r.$expando.prepend(r.cachedHTML),r.fireExpandEvent(),r.$el.off("expando:show",a),r.$el.off("expando:hide",f)}var r=t.expando,i=!n.over18Listing&&(n.noProfanity||!n.nsfwMediaAcknowledged)&&r.isNSFW&&r.linkType=="link",o=r.isSpoiler&&r.author!==e.config.logged;if(!i&&!o)return;var u;r.$el.on("expando:show",a),r.$el.on("expando:hide",f)})})}(r),r.saved={},r.saved.SaveCategories=Backbone.Collection.extend({model:Backbone.Model.extend({idAttribute:"category"}),url:"/api/saved_categories.json",fetchOnce:function(){return this._fetched||(this._fetched=this.fetch()),this._fetched},comparator:function(e){return e.get("category")},parse:function(e){return e.categories}}),r.saved.SaveDialog=r.ui.Bubble.extend({tagName:"form",className:"hover-bubble anchor-left save-selector",confirmTemplate:_.template('<label for="savedcategory"><%- label %></label><span class="throbber"></span><select><option value=""><%- placeholder %></option></select><input maxlength="20" class="savedcategory"  name="savedcategory" placeholder="<%- textplaceholder %>"><input type="submit" value="<%- save %>"><div class="error"></div>'),events:{click:"clicked",submit:"save",mouseout:"mouseout",mouseover:"cancelTimeout",keyup:"keyup","change select":"change"},mouseout:function(){this.$el.find("select, .savedcategory").is(":focus")||this.queueHide()},keyup:function(e){e.which===27&&(e.stopPropagation(),this.hideNow())},clicked:function(e){e.stopPropagation()},initialize:function(e){this.options=e,this.options.trackHover=!1,r.ui.Bubble.prototype.initialize.apply(this),r.saved.categories.fetchOnce().then(_.bind(this.show,this)),$("body").on("click.savedialog",_.bind(this.hideNow,this))},hideNow:function(){r.ui.Bubble.prototype.hideNow.apply(this),$("body").off("click.savedialog"),this.remove()},error:function(){this.$el.find("select, .savedcategory").attr("disabled",!1),this.$el.removeClass("working"),this.$el.find(".error").text(r._("Invalid category name"))},change:function(e){var t=this.$el.find(".savedcategory"),n=this.$el.find("option:selected").val();t.val(n).focus()},success:function(){var e=this.$parent.parents(".thing").find(".save-category");e.length&&this.category?(e.text("category: "+this.category),e.attr("href","/user/"+r.config.logged+"/saved/"+this.category),e.show()):e.hide(),r.saved.SaveButton.setSaved(this.$parent),this.category&&(r.saved.categories.add({category:this.category}),r.saved.categories.sort()),this.hide()},save:function(e){e.preventDefault(),this.category=this.$el.find(".savedcategory").val(),this.$el.find("select, .savedcategory").attr("disabled",!0);if(!this.category)return this.success();this.$el.addClass("working"),r.ajax({type:"POST",url:"/api/save",data:{id:this.$parent.thing_id(),category:this.category},success:this.success,error:this.error,context:this})},addCategory:function(e){var t=e.get("category");this.$el.find("select").append($("<option>").val(t).text(t))},show:function(){r.ui.Bubble.prototype.show.apply(this),this.$el.find(".savedcategory").focus()},render:function(){this.$el.html(this.confirmTemplate({label:r._("save category"),placeholder:r._("no category"),save:r._("save"),textplaceholder:r._("new category")})),r.saved.categories.each(this.addCategory,this),this.$el.find("select").first().prop("selected",!0)}}),r.saved.SaveButton={request:function(e,t,n){r.ajax({type:"POST",url:"/api/"+t,data:{id:e.thing_id()},success:_.bind(n,this,e)})},toggleSaved:function(e){this.isSaved(e)?this.unsave(e):this.save(e)},unsave:function(e){this.request(e,"unsave",this.setUnsaved)},save:function(e){this.request(e,"save",this.setSaved),r.config.gold&&new r.saved.SaveDialog({parent:e,group:r.saved.SaveButton})},isSaved:function(e){return e.thing().hasClass("saved")},setUnsaved:function(e){var t=e.parents(".thing").find(".save-category").hide();e.text(r._("save")),e.thing().removeClass("saved")},setSaved:function(e){e.text(r._("unsave")),e.thing().addClass("saved")}},r.saved.categories=new r.saved.SaveCategories,r.saved.init=function(){if(!r.config.logged)return;$("body").on("click",".save-button a, a.save-button",function(e){e.stopPropagation(),e.preventDefault();var t=e.target,n="save";$(t).text()===r._("unsave")&&(n="unsave"),r.actions.trigger("save",{target:t,eventAction:n})}),r.actions.on("save:success",function(e){r.saved.SaveButton.toggleSaved($(e.target))})},r.resAdvisory={},r.resAdvisory.minResVersion=[4,3,2,1],r.resAdvisory.checkRESClick=function(e){if(e.target.id=="viewImagesButton"||$(e.target).hasClass("expando-button"))r.resAdvisory.isUnsafeResVersion()?(e.preventDefault(),e.stopPropagation(),alert("The version of Reddit Enhancement Suite you are using has a bug which makes expanding posts insecure to use. Please update Reddit Enhancement Suite to continue using post expandos.  Please visit /r/Enhancement for more information.")):document.body.removeEventListener("click",r.resAdvisory.checkRESClick,!0)},r.resAdvisory.isUnsafeResVersion=_.memoize(function(){var e=r.res.getVersion();if(e)return e<r.resAdvisory.minResVersion}),r.resAdvisory.init=function(){document.body.addEventListener&&document.body.addEventListener("click",r.resAdvisory.checkRESClick,!0)},!function(e,t,n){"use strict";function i(){return s(2)}function s(e){var t="",n="abcdefghijklmnopqrstuvwxyz0123456789";for(var r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}var r="pc";n.cachePoisoning={},n.cachePoisoning.updateCanaryCookie=function(){var e=n.cookies.get(r);e||(e=i()),n.cookies.expire(r,{path:document.location.pathname}),n.cookies.set(r,e,{expires:365})},n.cachePoisoning.checkPoisoned=function(){var e=n.cookies.get(r);return e&&n.config.poisoning_canary&&e!==n.config.poisoning_canary?!0:!1},n.cachePoisoning._parseHeaders=function(e){var t=/^(.*?):[ \t]*([^\r\n]*)$/mg,n={},r;while(r=t.exec(e)){var i=r[1].toLowerCase();n[i]===undefined&&(n[i]=[]),n[i].push(r[2])}return n},n.cachePoisoning.logPoisoning=function(){var e={report_mac:n.config.poisoning_report_mac,poisoner_name:n.config.logged,poisoner_id:n.config.user_id,cache_policy:n.config.cache_policy,poisoner_canary:n.config.poisoning_canary,victim_canary:n.cookies.get(r),render_time:n.config.server_time,route_name:n.config.pageInfo.actionName,source:"web",url:window.location.href||"",resp_headers:{}};t.ajax({url:window.location.href,xhr:function(){var e=jQuery.ajaxSettings.xhr(),t=e.setRequestHeader;return e.setRequestHeader=function(e,n){if(e==="X-Requested-With")return;t.call(this,e,n)},e},complete:function(t){if((t.responseText||"").indexOf(n.config.modhash)!==-1){var r=t.getAllResponseHeaders();e.resp_headers=n.cachePoisoning._parseHeaders(r)}e.resp_headers=JSON.stringify(e.resp_headers),n.ajax({type:"POST",url:"/web/poisoning.json",data:e,headers:{"X-Loggit":!0},success:function(){n.log("Sent cache poisoning report to server")},error:function(e,t,r){n.warn("Error sending cache poisoning report to server")}})}})},n.cachePoisoning.init=function(){n.config.logged&&n.cachePoisoning.checkPoisoned()&&n.cachePoisoning.logPoisoning(),n.cachePoisoning.updateCanaryCookie()}}(window,jQuery,r),r.messages={},r.messages.pollUnread=_.debounce(function(e){e=e+1||1;if(e>20){document.location="/message/unread";return}r.ajax({type:"GET",url:"/api/me.json",success:function(t){t.data.has_mail?r.messages.pollUnread(e):document.location="/message/unread"}})},2e3),r.messages.init=function(){$("a.mark-all-read").on("click",function(e){var t=$(this);e.preventDefault(),e.stopPropagation();if(t.hasClass("disabled"))return;t.addClass("disabled"),t.parent().addClass("working"),r.ajax({type:"POST",url:"/api/read_all_messages",data:{},success:function(e){r.messages.pollUnread()},error:function(e){t.parent().removeClass("working")}})})},!function(e){e.hooks.get("reddit").register(function(){try{e.setupBackbone(),e.login.ui.init(),e.TimeText.init(),e.ui.init(),e.visited.init(),e.apps.init(),e.wiki.init(),e.gold.init(),e.multi.init(),e.recommend.init(),e.saved.init(),e.messages.init(),e.resAdvisory.init(),e.filter.init(),e.newsletter.ui.init(),e.onboardingBar.ui.init(),e.cachePoisoning.init(),e.locked.init(),e.pref.ui.init()}catch(t){e.sendError("Error during reddit.js init",t.toString())}}),$(function(){e.hooks.get("reddit").call()})}(r),!function(e,t,n,r){function p(e){var n=e+":"+u;t.cookies.set(s,n,{expires:3650})}var i=_.escape(t._("Reddit is updating its %(userAgreement)s and %(privacyPolicy)s.")),s="uapp_cookie",o=t.config.uapp_banner_max_attempts,u=t.config.uapp_banner_last_update;if(!o||!u)return;var a=t.cookies.get(s),f=0,l=0;if(a&&a.length){var c=a.split(":");f=parseInt(c[0]||0,10),l=parseInt(c[1]||0,10)}u>l&&(f=0);var h=u>l||f<o,d;h&&(d=n(".infobar-toaster-container"),d.length||(n(document.body).append(n('<div class="infobar-toaster-container"></div>')),d=n(".infobar-toaster-container")),n(d).append(n('<form id="uapp-banner"><div class="reddit-infobar md-container-small with-icon with-btn uapp-infobar"><div class="md"><p>'+i.format({userAgreement:'<a href="https://www.reddit.com/help/useragreement">'+_.escape(t._("User Agreement"))+"</a>",privacyPolicy:'<a href="https://www.reddit.com/help/privacypolicy">'+_.escape(t._("Privacy Policy"))+"</a>"})+"&nbsp;"+"&nbsp;"+"</p>"+"</div>"+'<div class="infobar-btn-container">'+'<button class="c-btn c-btn-primary" type="submit">'+_.escape(t._("Got it"))+"</button>"+"</div>"+"</div>"+"</form>").on("submit",function(e){e.preventDefault(),p(o),n(this).hide()})),p(Math.min(f+1,o)))}(this,this.r=this.r||{},this.jQuery),!function(e,t,n,r){function l(e){t.cookies.set(a,e,{expires:3650})}var i=_.escape(t._("Cookies help us deliver our Services. By using our Services or clicking I agree, you agree to our use of cookies.")),s=t.config.requires_eu_cookie_policy,o=t.config.eu_cookie_max_attempts,u="eu_cookie",a="eu_cookie_v2",f=parseInt(t.cookies.get(a)||0,10);f||(f=parseInt(t.cookies.get(u)||0,10),f&&l(f));var c;s&&f<o&&(c=n(".infobar-toaster-container"),c.length||(n(document.body).append(n('<div class="infobar-toaster-container"></div>')),c=n(".infobar-toaster-container")),n(c).append(n('<form id="eu-cookie-policy"><div class="reddit-infobar md-container-small with-icon with-btn cookie-infobar"><div class="md"><p>'+i+"&nbsp;"+"&nbsp;"+'<a href="https://www.reddit.com/help/privacypolicy">'+_.escape(t._("Learn More"))+"</a>"+"</p>"+"</div>"+'<div class="infobar-btn-container">'+'<button class="c-btn c-btn-primary" type="submit">'+_.escape(t._("I AGREE"))+"</button>"+"</div>"+"</div>"+"</form>").on("submit",function(e){e.preventDefault(),l(o),n(this).hide()})),l(Math.min(f+1,o)))}(this,this.r=this.r||{},this.jQuery),!function(e,t){"use strict";var n=10,r=e.cookies.getUserCookie("recent_srs");r.data?r.data=r.data.split(","):r.data=[],e.config.cur_site&&(r.data.unshift(e.config.cur_site),r.data=_.first(_.uniq(r.data),n).join(","),r.expires=3650,r.secure=!0,e.cookies.setUserCookie(r))}(this.r=this.r||{},this),$(function(){function o(e){var t=$(e),o=Date.now(),u;if(t.attr("data-inbound-url"))u=t.attr("data-inbound-url");else if(!n&&t.attr("data-outbound-expiration")>o)u=t.attr("data-outbound-url");else if(t.closest(".usertext").length>0){var a=t.attr("href");t.attr("data-href-url",a),r.utils.isSubdomain(e.hostname,r.config.cur_domain)&&(u=r.utils.replaceUrlParams(a,{utm_source:"reddit",utm_medium:"usertext",utm_name:t.thing().data("subreddit")||r.config.cur_listing,utm_content:t.thing_id()||r.config.cur_site}))}return u&&(i?s=u:e.href=u),!0}function u(e){if(i)s=null;else{var t=$(e).attr("data-href-url");t&&(e.href=t)}return!0}var e=Date.now(),t=r.config.server_time*1e3,n=!1,i=r.config.feature_outbound_beacons&&"sendBeacon"in window.navigator,s=null;t>e+3e5&&(n=!0),t<e-36e5&&(n=!0);var a=$(document.body),f="a[data-outbound-url], a[data-inbound-url], .usertext a[href]";a.on("mousedown",f,function(e){return e.which===3?!0:o(this)}),a.on("mouseleave",f,function(){return u(this)}),a.on("keydown",f,function(e){return e.which===13&&o(this),!0}),a.on("keyup",f,function(e){return(e.which===13||e.which===17)&&u(this),!0}),a.on("touchstart",f,function(e){return o(this)}),$(window).on("unload",function(){if(i&&s!==null){var e=$("<a>",{href:s})[0],t=e.protocol+"//"+e.hostname+e.pathname,n=e.search.replace(/^\?/,"");navigator.sendBeacon(t,n)}})}),$(function(){r.warn_on_unload=function(){$(window).on("beforeunload",function(e){var t=$("form.warn-on-unload");if(!$(t).length)return;var n=t.find("input[type=text],input[type=checkbox],input[type=url],textarea").not(":hidden"),i=!1;n.each(function(){switch(this.type){case"checkbox":i=this.defaultChecked!==this.checked;break;case"textarea":case"text":case"url":i=this.defaultValue!==this.value;break;default:return!0}if(i)return!1});if(i)return r._("You have unsaved changes!")})},$("form.warn-on-unload").on("keypress",function(e){$(window).off("beforeunload"),r.warn_on_unload()}),$(".usertext.warn-on-unload textarea").not(":hidden").not("form#newlink .usertext textarea").on("blur",function(e){this.defaultValue===this.value&&$(window).off("beforeunload")})}),!function(e){function r(e,t){var n={};for(var r in e){var i=e[r];t(i)&&(n[r]=i)}return n}function i(n){return function(i){i.preventDefault();var s=$(i.currentTarget),o=s.attr("href"),u=s.data("event_type"),a=["referrer_url"],f=r({experiment_name:n,referrer_page_type:s.data("page_type"),link_index:s.index(),target_url:s.attr("href"),target_type:s.data("target_type"),link_name:s.data("link_name"),target_name:s.data("target_name"),target_fullname:s.data("target_fullname")},function(e){return e!==""});f.target_fullname&&(f.target_id=e.utils.fullnameToId(f.target_fullname)),e.analytics.sendEvent(t,u,a,f,function(){s.hasClass("login-required")||(window.location.href=o)})}}var t="internal_click_events",n="relevancy_sidebar";[".posts-divider a",".sub-bar a",".posts-carousel a"].forEach(function(e){$(e).on("click",i("top_posts"))})}(r),!function(e,t){"use strict";function o(t){t?e.cookies.expire(r):e.cookies.set(r,!0,{expires:3650});var n={personalize_ads:t};e.prefEvent.send("save_preference_cookie",n)}var n="user_preference_events",r=e.config.hide_personalized_ads_cookie,i={},s;e.prefEvent={send:function(t,r){var i={user_preferences:r};e.analytics.sendEvent(n,t,undefined,i)}},t(document.body).on("submit","form.personalized-ads",function(e){e.preventDefault();var n=t("form.personalized-ads"),r=n.find('input[name="show_personalized_ads"]').is(":checked");r!==s&&o(r);var i=window.location.pathname.split("/")[1];window.location.href="/"+i+"?done=true"}),t(document).ready(function(){s=!e.cookies.get(r);var n=t("form.personalized-ads"),i=n.find('input[name="show_personalized_ads"]');i.prop("checked",s)})}(this.r=this.r||{},this.jQuery),!function(e){function r(){var t=localStorage.getItem(n);if(t)return;localStorage.setItem(n,1);if(localStorage.getItem(n)!=1)return;var r=$("#spezmodal-popup").html();if(!r)return;var i=new e.ui.Popup({className:"spezmodal",content:r});i.show()}if(!e.config.show_spez_modal)return;if(window.location.hostname==e.config.media_domain)return;try{localStorage.removeItem("voteplz.seen"),localStorage.removeItem("voteplz.seenAgain"),localStorage.removeItem("spezmodal.seen")}catch(t){}var n="spezmodal-20171212.seen";try{r()}catch(t){debugger}}(r),!function(e){function t(t,n,i){e.ajax({type:"POST",dataType:"json",data:{enableNightmode:i},url:"/api/join_redesign_beta.json",success:t,error:n})}e.redesignBetaBar={init:function(){e.redesignBetaBar.initBanner()},initBanner:function(){var n=$(".redesignbetabar-js");if(!n.length)return;$("#redesign-beta-optin").on("click",function(){e.actions.trigger("onboarding:redesignbetabarClickOptIn");var i=n.hasClass("redesignNightmodeBar");t(function(){e.onboardingBar.setDismissed(n.data(),!0),window.location.reload(!0)},function(t,n,i){e.warn("Error opting in to redesign",n,";",i)},i)})}},$(function(){e.redesignBetaBar.init()})}(r),function(e,t){var n=e("#email_messages"),r=e("#email_digests"),i=e("#email_unsubscribe_all");i.on("click",function(){i.prop("checked")&&(n.prop("checked",!1),r.prop("checked",!1))}),n.on("click",function(){n.prop("checked")&&i.prop("checked",!1)}),r.on("click",function(){r.prop("checked")&&i.prop("checked",!1)})}(window.jQuery),!function(e){e.emailVerificationBar={init:function(){var t=$(".emailverificationbar");if(!t.length)return;window.sessionStorage.getItem("emailVerificationBanner")||t.show(),$(".emailverificationbar-close").on("click",function(){t.hide(),window.sessionStorage.setItem("emailVerificationBanner",!0),e.analyticsV2.sendEvent("email_verification_banner","click","dismiss")}),$(".emailverificationbar-edit").on("click",function(){window.sessionStorage.setItem("emailVerificationBanner",!0),e.analyticsV2.sendEvent("email_verification_banner","click","edit")}),$(".emailverificationbar-resend").on("click",function(){window.sessionStorage.setItem("emailVerificationBanner",!0),e.analyticsV2.sendEvent("email_verification_banner","click","resend")})}},$(function(){e.emailVerificationBar.init()})}(r),r.permissions=_.extend(r.permissions||{},{moderator:{wiki:{description:r.N_("manage the wiki and access to the wiki"),title:r.N_("wiki")},access:{description:r.N_("manage the lists of contributors and banned/muted users"),title:r.N_("access")},mail:{description:r.N_("read and reply to moderator mail"),title:r.N_("mail")},config:{description:r.N_("edit settings, sidebar, css, images, and AutoModerator config"),title:r.N_("config")},posts:{description:r.N_("use the approve, remove, spam, distinguish, and nsfw buttons"),title:r.N_("posts")},flair:{description:r.N_("manage user flair, link flair, and flair templates"),title:r.N_("flair")}},moderator_invite:{wiki:{description:r.N_("manage the wiki and access to the wiki"),title:r.N_("wiki")},access:{description:r.N_("manage the lists of contributors and banned/muted users"),title:r.N_("access")},mail:{description:r.N_("read and reply to moderator mail"),title:r.N_("mail")},config:{description:r.N_("edit settings, sidebar, css, images, and AutoModerator config"),title:r.N_("config")},posts:{description:r.N_("use the approve, remove, spam, distinguish, and nsfw buttons"),title:r.N_("posts")},flair:{description:r.N_("manage user flair, link flair, and flair templates"),title:r.N_("flair")}}})}catch(err){r.sendError("Error running module","reddit.js",":",err.toString())};r.i18n.addMessages({"wiki": [null, "wiki"], "full permissions": [null, "full permissions"], "a month ago": [null, "a month ago", "%(num)s months ago"], "invalid cvc": [null, "invalid cvc"], "missing city": [null, "missing city"], "sent!": [null, "sent!"], "Email to a Friend": [null, "Email to a Friend"], "an hour ago": [null, "an hour ago", "%(num)s hours ago"], "just now": [null, "just now"], "cancel": [null, "cancel"], "Learn more": [null, "Learn more"], "save category": [null, "save category"], "Embed preview:": [null, "Embed preview:"], "This parameter can be changed after embedding.": [null, "This parameter can be changed after embedding."], "an error occurred (status: %(status)s)": [null, "an error occurred (status: %(status)s)"], "categorize": [null, "categorize"], "yes": [null, "yes"], "add a subreddit to your multi.": [null, "add a subreddit to your multi"], "this is too short (min: %(min_length)s)": [null, "this is too short (min: %(min_length)s)"], "new category": [null, "new category"], "awesomeness goes here": [null, "awesomeness goes here"], "manage user flair, link flair, and flair templates": [null, "manage user flair, link flair, and flair templates"], "passwords do not match": [null, "passwords do not match"], "open this multi": [null, "open this multi"], "a day ago": [null, "a day ago", "%(num)s days ago"], "no permissions": [null, "no permissions"], "use the approve, remove, spam, distinguish, and nsfw buttons": [null, "use the approve, remove, spam, distinguish, and nsfw buttons"], "send": [null, "send"], "read and reply to moderator mail": [null, "read and reply to moderator mail"], "config": [null, "config"], "create a new multi": [null, "create a new multi"], "invalid expiration date": [null, "invalid expiration date"], "access": [null, "access"], "Share via email as %(username)s": [null, "Share via email as %(username)s"], "a minute ago": [null, "a minute ago", "%(num)s minutes ago"], "Link:": [null, "Link:"], "Password is strong": [null, "Password is strong"], "Share to %(name)s": [null, "Share to %(name)s"], "are you sure?": [null, "are you sure?"], "close this window": [null, "close this window"], "flair": [null, "flair"], "switch to mobile version": [null, "switch to mobile version"], "missing country": [null, "missing country"], "When checked, if an embedded comment is later edited, the embedded comment text will be replaced by a link back to the current version of the comment on reddit.": [null, "When checked, if an embedded comment is later edited, the embedded comment text will be replaced by a link back to the current version of the comment on reddit."], "Password is fair": [null, "Password is okay"], "Password is weak": [null, "Password is weak"], "missing name": [null, "missing name"], "invalid credit card number": [null, "invalid credit card number"], "Password is good": [null, "Password is good"], "a year ago": [null, "a year ago", "%(num)s years ago"], "no": [null, "no"], "mail": [null, "mail"], "Do not show comment if edited.": [null, "Do not show comment if edited."], "Copy this code and paste it into your website:": [null, "Copy this code and paste it into your website:"], "Include parent comment.": [null, "Include parent comment."], "save": [null, "save"], "Share with:": [null, "Share with:"], "edit settings, sidebar, css, images, and AutoModerator config": [null, "edit settings, sidebar, css, images, and AutoModerator config"], "try using our secure login form.": [null, "try using our secure login form."], "posts": [null, "posts"], "Privacy Policy": [null, "Privacy Policy"], "check your inbox to confirm your subscription": [null, "check your inbox to confirm your subscription"], "manage the wiki and access to the wiki": [null, "manage the wiki and access to the wiki"], "we need something here": [null, "we need something here"], "add optional message": [null, "add optional message"], "User Agreement": [null, "User Agreement"], "Invalid category name": [null, "Invalid category name"], "missing address": [null, "missing address"], "unsave": [null, "unsave"], "no category": [null, "no category"], "this is too long (max: %(max_length)s)": [null, "this is too long (max: %(max_length)s)"]});